{"version":3,"file":"appBundle.js","sources":["../node_modules/@lightningjs/sdk/src/Settings/index.js","../node_modules/@lightningjs/sdk/src/Log/index.js","../node_modules/@lightningjs/sdk/src/Metrics/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/events.js","../node_modules/@lightningjs/sdk/src/helpers/easeExecution.js","../node_modules/@lightningjs/sdk/src/Utils/index.js","../node_modules/@lightningjs/sdk/src/Profile/helpers.js","../node_modules/@lightningjs/sdk/src/Profile/defaults.js","../node_modules/@lightningjs/sdk/src/Profile/index.js","../../../../../../../../Users/deepak.p/AppData/Roaming/npm/node_modules/@lightningjs/cli/src/alias/lightningjs-core.js","../node_modules/@lightningjs/sdk/src/MediaPlayer/index.js","../node_modules/localCookie/module/localCookie.js","../node_modules/@lightningjs/sdk/src/Storage/index.js","../node_modules/@lightningjs/sdk/src/Router/utils.js","../node_modules/@lightningjs/sdk/src/Router/transitions.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/@lightningjs/sdk/src/Locale/index.js","../node_modules/@lightningjs/sdk/src/VersionLabel/index.js","../node_modules/@lightningjs/sdk/src/FpsCounter/index.js","../node_modules/@lightningjs/sdk/src/Language/index.js","../node_modules/@lightningjs/sdk/src/Registry/index.js","../node_modules/@lightningjs/sdk/src/Application/index.js","../node_modules/@lightningjs/sdk/src/Router/base.js","../node_modules/@lightningjs/sdk/src/Router/stats.js","../node_modules/@lightningjs/sdk/src/Router/index.js","../node_modules/@lightningjs/sdk/src/TV/defaults.js","../node_modules/@lightningjs/sdk/src/TV/index.js","../node_modules/@lightningjs/sdk/src/Launch/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/VideoTexture.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/index.js","../node_modules/@lightningjs/sdk/src/Ads/index.js","../node_modules/@lightningjs/sdk/src/helpers/autoSetupMixin.js","../node_modules/@lightningjs/sdk/src/Img/ScaledImageTexture.js","../node_modules/@lightningjs/sdk/src/Pin/dialog.js","../node_modules/ThunderJS/module/thunderJS.js","../src/items/ListItem.js","../src/api/AppApi.js","../src/player/PlayerControl.js","../src/views/MainView.js","../src/items/SidePanelItem.js","../src/views/SidePanel.js","../src/views/TopPanel.js","../src/player/AAMPVideoPlayer.js","../static/data/AppListInfo.js","../static/data/TvShowsInfo.js","../static/data/SettingsInfo.js","../static/data/SidePanelInfo.js","../static/data/UIInfo.js","../static/data/MetroAppsInfo.js","../src/api/HomeApi.js","../src/screens/HomeScreen.js","../src/api/BluetoothApi.js","../src/colors/Colors.js","../src/items/item.js","../src/screens/SplashScreen.js","../src/items/SettingsItem.js","../src/items/BluetoothItem.js","../src/screens/BluetoothPairingScreen.js","../src/screens/BluetoothScreen.js","../src/items/WiFiItem.js","../src/api/WifiApi.js","../src/screens/wifipasswordscreen/Keypad.js","../src/screens/wifipasswordscreen/Key.js","../src/screens/wifipasswordscreen/KeyDetails.js","../src/screens/wifipasswordscreen/SelectionKey.js","../src/screens/wifipasswordscreen/WiFiPasswordScreen.js","../src/screens/WiFiPairingScreen.js","../src/screens/WifiScreen.js","../src/screens/SettingsScreen.js","../src/screens/Error.js","../src/api/routes.js","../src/App.js","../src/index.js"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst settings = {}\nconst subscribers = {}\n\nexport const initSettings = (appSettings, platformSettings) => {\n  settings['app'] = appSettings\n  settings['platform'] = platformSettings\n  settings['user'] = {}\n}\n\nconst publish = (key, value) => {\n  subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value))\n}\n\nconst dotGrab = (obj = {}, key) => {\n  const keys = key.split('.')\n  for (let i = 0; i < keys.length; i++) {\n    obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {}\n  }\n  return typeof obj === 'object' ? (Object.keys(obj).length ? obj : undefined) : obj\n}\n\nexport default {\n  get(type, key, fallback = undefined) {\n    const val = dotGrab(settings[type], key)\n    return val !== undefined ? val : fallback\n  },\n  has(type, key) {\n    return !!this.get(type, key)\n  },\n  set(key, value) {\n    settings['user'][key] = value\n    publish(key, value)\n  },\n  subscribe(key, callback) {\n    subscribers[key] = subscribers[key] || []\n    subscribers[key].push(callback)\n  },\n  unsubscribe(key, callback) {\n    if (callback) {\n      const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback)\n      index > -1 && subscribers[key].splice(index, 1)\n    } else {\n      if (key in subscribers) {\n        subscribers[key] = []\n      }\n    }\n  },\n  clearSubscribers() {\n    for (const key of Object.getOwnPropertyNames(subscribers)) {\n      delete subscribers[key]\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst prepLog = (type, args) => {\n  const colors = {\n    Info: 'green',\n    Debug: 'gray',\n    Warn: 'orange',\n    Error: 'red',\n  }\n\n  args = Array.from(args)\n  return [\n    '%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type),\n    'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px',\n    args,\n  ]\n}\n\nexport default {\n  info() {\n    Settings.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments))\n  },\n  debug() {\n    Settings.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments))\n  },\n  error() {\n    Settings.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments))\n  },\n  warn() {\n    Settings.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nlet sendMetric = (type, event, params) => {\n  Log.info('Sending metric', type, event, params)\n}\n\nexport const initMetrics = config => {\n  sendMetric = config.sendMetric\n}\n\n// available metric per category\nconst metrics = {\n  app: ['launch', 'loaded', 'ready', 'close'],\n  page: ['view', 'leave'],\n  user: ['click', 'input'],\n  media: [\n    'abort',\n    'canplay',\n    'ended',\n    'pause',\n    'play',\n    // with some videos there occur almost constant suspend events ... should investigate\n    // 'suspend',\n    'volumechange',\n    'waiting',\n    'seeking',\n    'seeked',\n  ],\n}\n\n// error metric function (added to each category)\nconst errorMetric = (type, message, code, visible, params = {}) => {\n  params = { params, ...{ message, code, visible } }\n  sendMetric(type, 'error', params)\n}\n\nconst Metric = (type, events, options = {}) => {\n  return events.reduce(\n    (obj, event) => {\n      obj[event] = (name, params = {}) => {\n        params = { ...options, ...(name ? { name } : {}), ...params }\n        sendMetric(type, event, params)\n      }\n      return obj\n    },\n    {\n      error(message, code, params) {\n        errorMetric(type, message, code, params)\n      },\n      event(name, params) {\n        sendMetric(type, name, params)\n      },\n    }\n  )\n}\n\nconst Metrics = types => {\n  return Object.keys(types).reduce(\n    (obj, type) => {\n      // media metric works a bit different!\n      // it's a function that accepts a url and returns an object with the available metrics\n      // url is automatically passed as a param in every metric\n      type === 'media'\n        ? (obj[type] = url => Metric(type, types[type], { url }))\n        : (obj[type] = Metric(type, types[type]))\n      return obj\n    },\n    { error: errorMetric, event: sendMetric }\n  )\n}\n\nexport default Metrics(metrics)\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  abort: 'Abort',\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  durationchange: 'DurationChange',\n  emptied: 'Emptied',\n  encrypted: 'Encrypted',\n  ended: 'Ended',\n  error: 'Error',\n  interruptbegin: 'InterruptBegin',\n  interruptend: 'InterruptEnd',\n  loadeddata: 'LoadedData',\n  loadedmetadata: 'LoadedMetadata',\n  loadstart: 'LoadStart',\n  pause: 'Pause',\n  play: 'Play',\n  playing: 'Playing',\n  progress: 'Progress',\n  ratechange: 'Ratechange',\n  seeked: 'Seeked',\n  seeking: 'Seeking',\n  stalled: 'Stalled',\n  // suspend: 'Suspend', // this one is called a looooot for some videos\n  timeupdate: 'TimeUpdate',\n  volumechange: 'VolumeChange',\n  waiting: 'Waiting',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet timeout = null\n\nexport default (cb, delay) => {\n  clearTimeout(timeout)\n  timeout = setTimeout(() => {\n    cb()\n  }, delay)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet basePath\nlet proxyUrl\n\nexport const initUtils = config => {\n  basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'))\n\n  if (config.proxyUrl) {\n    proxyUrl = ensureUrlWithProtocol(config.proxyUrl)\n  }\n}\n\nexport default {\n  asset(relPath) {\n    return basePath + relPath\n  },\n  proxyUrl(url, options = {}) {\n    return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url\n  },\n  makeQueryString() {\n    return makeQueryString(...arguments)\n  },\n  // since imageworkers don't work without protocol\n  ensureUrlWithProtocol() {\n    return ensureUrlWithProtocol(...arguments)\n  },\n}\n\nexport const ensureUrlWithProtocol = url => {\n  if (/^\\/\\//.test(url)) {\n    return window.location.protocol + url\n  }\n  if (!/^(?:https?:)/i.test(url)) {\n    return window.location.origin + url\n  }\n  return url\n}\n\nexport const makeFullStaticPath = (pathname = '/', path) => {\n  // ensure path has traling slash\n  path = path.charAt(path.length - 1) !== '/' ? path + '/' : path\n\n  // if path is URL, we assume it's already the full static path, so we just return it\n  if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n    return path\n  }\n\n  if (path.charAt(0) === '/') {\n    return path\n  } else {\n    // cleanup the pathname (i.e. remove possible index.html)\n    pathname = cleanUpPathName(pathname)\n\n    // remove possible leading dot from path\n    path = path.charAt(0) === '.' ? path.substr(1) : path\n    // ensure path has leading slash\n    path = path.charAt(0) !== '/' ? '/' + path : path\n    return pathname + path\n  }\n}\n\nexport const cleanUpPathName = pathname => {\n  if (pathname.slice(-1) === '/') return pathname.slice(0, -1)\n  const parts = pathname.split('/')\n  if (parts[parts.length - 1].indexOf('.') > -1) parts.pop()\n  return parts.join('/')\n}\n\nconst makeQueryString = (url, options = {}, type = 'url') => {\n  // add operator as an option\n  options.operator = 'metrological' // Todo: make this configurable (via url?)\n  // add type (= url or qr) as an option, with url as the value\n  options[type] = url\n\n  return Object.keys(options)\n    .map(key => {\n      return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key])\n    })\n    .join('&')\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst formatLocale = locale => {\n  if (locale && locale.length === 2) {\n    return `${locale.toLowerCase()}-${locale.toUpperCase()}`\n  } else {\n    return locale\n  }\n}\n\nexport const getLocale = defaultValue => {\n  if ('language' in navigator) {\n    const locale = formatLocale(navigator.language)\n    return Promise.resolve(locale)\n  } else {\n    return Promise.resolve(defaultValue)\n  }\n}\n\nexport const getLanguage = defaultValue => {\n  if ('language' in navigator) {\n    const language = formatLocale(navigator.language).slice(0, 2)\n    return Promise.resolve(language)\n  } else {\n    return Promise.resolve(defaultValue)\n  }\n}\n\nexport const getCountryCode = defaultValue => {\n  if ('language' in navigator) {\n    const countryCode = formatLocale(navigator.language).slice(3, 5)\n    return Promise.resolve(countryCode)\n  } else {\n    return Promise.resolve(defaultValue)\n  }\n}\n\nconst hasOrAskForGeoLocationPermission = () => {\n  return new Promise(resolve => {\n    // force to prompt for location permission\n    if (Settings.get('platform', 'forceBrowserGeolocation') === true) resolve(true)\n    if ('permissions' in navigator && typeof navigator.permissions.query === 'function') {\n      navigator.permissions.query({ name: 'geolocation' }).then(status => {\n        resolve(status.state === 'granted' || status.status === 'granted')\n      })\n    } else {\n      resolve(false)\n    }\n  })\n}\n\nexport const getLatLon = defaultValue => {\n  return new Promise(resolve => {\n    hasOrAskForGeoLocationPermission().then(granted => {\n      if (granted === true) {\n        if ('geolocation' in navigator) {\n          navigator.geolocation.getCurrentPosition(\n            // success\n            result =>\n              result && result.coords && resolve([result.coords.latitude, result.coords.longitude]),\n            // error\n            () => resolve(defaultValue),\n            // options\n            {\n              enableHighAccuracy: true,\n              timeout: 5000,\n              maximumAge: 0,\n            }\n          )\n        } else {\n          return queryForLatLon().then(result => resolve(result || defaultValue))\n        }\n      } else {\n        return queryForLatLon().then(result => resolve(result || defaultValue))\n      }\n    })\n  })\n}\n\nconst queryForLatLon = () => {\n  return new Promise(resolve => {\n    fetch('https://geolocation-db.com/json/')\n      .then(response => response.json())\n      .then(({ latitude, longitude }) =>\n        latitude && longitude ? resolve([latitude, longitude]) : resolve(false)\n      )\n      .catch(() => resolve(false))\n  })\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getLocale, getLanguage, getCountryCode, getLatLon } from './helpers'\n\nexport const defaultProfile = {\n  ageRating: 'adult',\n  city: 'New York',\n  zipCode: '27505',\n  countryCode: () => getCountryCode('US'),\n  ip: '127.0.0.1',\n  household: 'b2244e9d4c04826ccd5a7b2c2a50e7d4',\n  language: () => getLanguage('en'),\n  latlon: () => getLatLon([40.7128, 74.006]),\n  locale: () => getLocale('en-US'),\n  mac: '00:00:00:00:00:00',\n  operator: 'Metrological',\n  platform: 'Metrological',\n  packages: [],\n  uid: 'ee6723b8-7ab3-462c-8d93-dbf61227998e',\n  stbType: 'Metrological',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport { defaultProfile } from './defaults'\n\nlet getInfo = key => {\n  const profile = { ...defaultProfile, ...Settings.get('platform', 'profile') }\n  return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key])\n}\n\nlet setInfo = (key, params) => {\n  if (key in defaultProfile) defaultProfile[key] = params\n}\n\nexport const initProfile = config => {\n  getInfo = config.getInfo\n  setInfo = config.setInfo\n}\n\nconst getOrSet = (key, params) => (params ? setInfo(key, params) : getInfo(key))\n\n// public API\nexport default {\n  ageRating(params) {\n    return getOrSet('ageRating', params)\n  },\n  city(params) {\n    return getOrSet('city', params)\n  },\n  zipCode(params) {\n    return getOrSet('zipCode', params)\n  },\n  countryCode(params) {\n    return getOrSet('countryCode', params)\n  },\n  ip(params) {\n    return getOrSet('ip', params)\n  },\n  household(params) {\n    return getOrSet('household', params)\n  },\n  language(params) {\n    return getOrSet('language', params)\n  },\n  latlon(params) {\n    return getOrSet('latlon', params)\n  },\n  locale(params) {\n    return getOrSet('locale', params)\n  },\n  mac(params) {\n    return getOrSet('mac', params)\n  },\n  operator(params) {\n    return getOrSet('operator', params)\n  },\n  platform(params) {\n    return getOrSet('platform', params)\n  },\n  packages(params) {\n    return getOrSet('packages', params)\n  },\n  uid(params) {\n    return getOrSet('uid', params)\n  },\n  stbType(params) {\n    return getOrSet('stbType', params)\n  },\n}\n","/*\r\n * If not stated otherwise in this file or this component's LICENSE file the\r\n * following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the License);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default window.lng\r\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Metrics from '../Metrics'\nimport Settings from '../Settings'\nimport Log from '../Log'\n\nconst events = [\n  'timeupdate',\n  'error',\n  'ended',\n  'loadeddata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'loadstart',\n  'seeking',\n  'seeked',\n  'encrypted',\n]\n\nlet mediaUrl = url => url\n\nexport const initMediaPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\nexport default class Mediaplayer extends Lightning.Component {\n  _construct() {\n    this._skipRenderToTexture = false\n    this._metrics = null\n    this._textureMode = Settings.get('platform', 'textureMode') || false\n    Log.info('Texture mode: ' + this._textureMode)\n    console.warn(\n      [\n        \"The 'MediaPlayer'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'VideoPlayer'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/videoplayer',\n      ].join('\\n\\n')\n    )\n  }\n\n  static _template() {\n    return {\n      Video: {\n        VideoWrap: {\n          VideoTexture: {\n            visible: false,\n            pivot: 0.5,\n            texture: { type: Lightning.textures.StaticTexture, options: {} },\n          },\n        },\n      },\n    }\n  }\n\n  set skipRenderToTexture(v) {\n    this._skipRenderToTexture = v\n  }\n\n  get textureMode() {\n    return this._textureMode\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  _init() {\n    //re-use videotag if already there\n    const videoEls = document.getElementsByTagName('video')\n    if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0]\n    else {\n      this.videoEl = document.createElement('video')\n      this.videoEl.setAttribute('id', 'video-player')\n      this.videoEl.style.position = 'absolute'\n      this.videoEl.style.zIndex = '1'\n      this.videoEl.style.display = 'none'\n      this.videoEl.setAttribute('width', '100%')\n      this.videoEl.setAttribute('height', '100%')\n\n      this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible'\n      document.body.appendChild(this.videoEl)\n    }\n    if (this.textureMode && !this._skipRenderToTexture) {\n      this._createVideoTexture()\n    }\n\n    this.eventHandlers = []\n  }\n\n  _registerListeners() {\n    events.forEach(event => {\n      const handler = e => {\n        if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n          this._metrics[event]({ currentTime: this.videoEl.currentTime })\n        }\n        this.fire(event, { videoElement: this.videoEl, event: e })\n      }\n      this.eventHandlers.push(handler)\n      this.videoEl.addEventListener(event, handler)\n    })\n  }\n\n  _deregisterListeners() {\n    Log.info('Deregistering event listeners MediaPlayer')\n    events.forEach((event, index) => {\n      this.videoEl.removeEventListener(event, this.eventHandlers[index])\n    })\n    this.eventHandlers = []\n  }\n\n  _attach() {\n    this._registerListeners()\n  }\n\n  _detach() {\n    this._deregisterListeners()\n    this.close()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n  }\n\n  _startUpdatingVideoTexture() {\n    if (this.textureMode && !this._skipRenderToTexture) {\n      const stage = this.stage\n      if (!this._updateVideoTexture) {\n        this._updateVideoTexture = () => {\n          if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n            const gl = stage.gl\n\n            const currentTime = new Date().getTime()\n\n            // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n            // We'll fallback to fixed 30fps in this case.\n            const frameCount = this.videoEl.webkitDecodedFrameCount\n\n            const mustUpdate = frameCount\n              ? this._lastFrame !== frameCount\n              : this._lastTime < currentTime - 30\n\n            if (mustUpdate) {\n              this._lastTime = currentTime\n              this._lastFrame = frameCount\n              try {\n                gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n                this._lastFrame = this.videoEl.webkitDecodedFrameCount\n                this.videoTextureView.visible = true\n\n                this.videoTexture.options.w = this.videoEl.videoWidth\n                this.videoTexture.options.h = this.videoEl.videoHeight\n                const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h\n                const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight\n                if (expectedAspectRatio > realAspectRatio) {\n                  this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio\n                  this.videoTextureView.scaleY = 1\n                } else {\n                  this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio\n                  this.videoTextureView.scaleX = 1\n                }\n              } catch (e) {\n                Log.error('texImage2d video', e)\n                this._stopUpdatingVideoTexture()\n                this.videoTextureView.visible = false\n              }\n              this.videoTexture.source.forceRenderUpdate()\n            }\n          }\n        }\n      }\n      if (!this._updatingVideoTexture) {\n        stage.on('frameStart', this._updateVideoTexture)\n        this._updatingVideoTexture = true\n      }\n    }\n  }\n\n  _stopUpdatingVideoTexture() {\n    if (this.textureMode) {\n      const stage = this.stage\n      stage.removeListener('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = false\n      this.videoTextureView.visible = false\n\n      if (this.videoTexture.options.source) {\n        const gl = stage.gl\n        gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n        gl.clearColor(0, 0, 0, 1)\n        gl.clear(gl.COLOR_BUFFER_BIT)\n      }\n    }\n  }\n\n  updateSettings(settings = {}) {\n    // The Component that 'consumes' the media player.\n    this._consumer = settings.consumer\n\n    if (this._consumer && this._consumer.getMediaplayerSettings) {\n      // Allow consumer to add settings.\n      settings = Object.assign(settings, this._consumer.getMediaplayerSettings())\n    }\n\n    if (!Lightning.Utils.equalValues(this._stream, settings.stream)) {\n      if (settings.stream && settings.stream.keySystem) {\n        navigator\n          .requestMediaKeySystemAccess(\n            settings.stream.keySystem.id,\n            settings.stream.keySystem.config\n          )\n          .then(keySystemAccess => {\n            return keySystemAccess.createMediaKeys()\n          })\n          .then(createdMediaKeys => {\n            return this.videoEl.setMediaKeys(createdMediaKeys)\n          })\n          .then(() => {\n            if (settings.stream && settings.stream.src) this.open(settings.stream.src)\n          })\n          .catch(() => {\n            console.error('Failed to set up MediaKeys')\n          })\n      } else if (settings.stream && settings.stream.src) {\n        // This is here to be backwards compatible, will be removed\n        // in future sdk release\n        if (Settings.get('app', 'hls')) {\n          if (!window.Hls) {\n            window.Hls = class Hls {\n              static isSupported() {\n                console.warn('hls-light not included')\n                return false\n              }\n            }\n          }\n          if (window.Hls.isSupported()) {\n            if (!this._hls) this._hls = new window.Hls({ liveDurationInfinity: true })\n            this._hls.loadSource(settings.stream.src)\n            this._hls.attachMedia(this.videoEl)\n            this.videoEl.style.display = 'block'\n          }\n        } else {\n          this.open(settings.stream.src)\n        }\n      } else {\n        this.close()\n      }\n      this._stream = settings.stream\n    }\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPos)\n  }\n\n  _setHide(hide) {\n    if (this.textureMode) {\n      this.tag('Video').setSmooth('alpha', hide ? 0 : 1)\n    } else {\n      this.videoEl.style.visibility = hide ? 'hidden' : 'visible'\n    }\n  }\n\n  open(url, settings = { hide: false, videoPosition: null }) {\n    // prep the media url to play depending on platform (mediaPlayerplugin)\n    url = mediaUrl(url)\n    this._metrics = Metrics.media(url)\n    Log.info('Playing stream', url)\n    if (this.application.noVideo) {\n      Log.info('noVideo option set, so ignoring: ' + url)\n      return\n    }\n    // close the video when opening same url as current (effectively reloading)\n    if (this.videoEl.getAttribute('src') === url) {\n      this.close()\n    }\n    this.videoEl.setAttribute('src', url)\n\n    // force hide, then force show (in next tick!)\n    // (fixes comcast playback rollover issue)\n    this.videoEl.style.visibility = 'hidden'\n    this.videoEl.style.display = 'none'\n\n    setTimeout(() => {\n      this.videoEl.style.display = 'block'\n      this.videoEl.style.visibility = 'visible'\n    })\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080])\n  }\n\n  close() {\n    // We need to pause first in order to stop sound.\n    this.videoEl.pause()\n    this.videoEl.removeAttribute('src')\n\n    // force load to reset everything without errors\n    this.videoEl.load()\n\n    this._clearSrc()\n\n    this.videoEl.style.display = 'none'\n  }\n\n  playPause() {\n    if (this.isPlaying()) {\n      this.doPause()\n    } else {\n      this.doPlay()\n    }\n  }\n\n  get muted() {\n    return this.videoEl.muted\n  }\n\n  set muted(v) {\n    this.videoEl.muted = v\n  }\n\n  get loop() {\n    return this.videoEl.loop\n  }\n\n  set loop(v) {\n    this.videoEl.loop = v\n  }\n\n  isPlaying() {\n    return this._getState() === 'Playing'\n  }\n\n  doPlay() {\n    this.videoEl.play()\n  }\n\n  doPause() {\n    this.videoEl.pause()\n  }\n\n  reload() {\n    var url = this.videoEl.getAttribute('src')\n    this.close()\n    this.videoEl.src = url\n  }\n\n  getPosition() {\n    return Promise.resolve(this.videoEl.currentTime)\n  }\n\n  setPosition(pos) {\n    this.videoEl.currentTime = pos\n  }\n\n  getDuration() {\n    return Promise.resolve(this.videoEl.duration)\n  }\n\n  seek(time, absolute = false) {\n    if (absolute) {\n      this.videoEl.currentTime = time\n    } else {\n      this.videoEl.currentTime += time\n    }\n  }\n\n  get videoTextureView() {\n    return this.tag('Video').tag('VideoTexture')\n  }\n\n  get videoTexture() {\n    return this.videoTextureView.texture\n  }\n\n  _setVideoArea(videoPos) {\n    if (Lightning.Utils.equalValues(this._videoPos, videoPos)) {\n      return\n    }\n\n    this._videoPos = videoPos\n\n    if (this.textureMode) {\n      this.videoTextureView.patch({\n        smooth: {\n          x: videoPos[0],\n          y: videoPos[1],\n          w: videoPos[2] - videoPos[0],\n          h: videoPos[3] - videoPos[1],\n        },\n      })\n    } else {\n      const precision = this.stage.getRenderPrecision()\n      this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px'\n      this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px'\n      this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px'\n      this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px'\n    }\n  }\n\n  _fireConsumer(event, args) {\n    if (this._consumer) {\n      this._consumer.fire(event, args)\n    }\n  }\n\n  _equalInitData(buf1, buf2) {\n    if (!buf1 || !buf2) return false\n    if (buf1.byteLength != buf2.byteLength) return false\n    const dv1 = new Int8Array(buf1)\n    const dv2 = new Int8Array(buf2)\n    for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false\n    return true\n  }\n\n  error(args) {\n    this._fireConsumer('$mediaplayerError', args)\n    this._setState('')\n    return ''\n  }\n\n  loadeddata(args) {\n    this._fireConsumer('$mediaplayerLoadedData', args)\n  }\n\n  play(args) {\n    this._fireConsumer('$mediaplayerPlay', args)\n  }\n\n  playing(args) {\n    this._fireConsumer('$mediaplayerPlaying', args)\n    this._setState('Playing')\n  }\n\n  canplay(args) {\n    this.videoEl.play()\n    this._fireConsumer('$mediaplayerStart', args)\n  }\n\n  loadstart(args) {\n    this._fireConsumer('$mediaplayerLoad', args)\n  }\n\n  seeked() {\n    this._fireConsumer('$mediaplayerSeeked', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  seeking() {\n    this._fireConsumer('$mediaplayerSeeking', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  durationchange(args) {\n    this._fireConsumer('$mediaplayerDurationChange', args)\n  }\n\n  encrypted(args) {\n    const video = args.videoElement\n    const event = args.event\n    // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n    if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n      this._previousInitData = event.initData\n      this._fireConsumer('$mediaplayerEncrypted', args)\n    }\n  }\n\n  static _states() {\n    return [\n      class Playing extends this {\n        $enter() {\n          this._startUpdatingVideoTexture()\n        }\n        $exit() {\n          this._stopUpdatingVideoTexture()\n        }\n        timeupdate() {\n          this._fireConsumer('$mediaplayerProgress', {\n            currentTime: this.videoEl.currentTime,\n            duration: this.videoEl.duration || 1,\n          })\n        }\n        ended(args) {\n          this._fireConsumer('$mediaplayerEnded', args)\n          this._setState('')\n        }\n        pause(args) {\n          this._fireConsumer('$mediaplayerPause', args)\n          this._setState('Playing.Paused')\n        }\n        _clearSrc() {\n          this._fireConsumer('$mediaplayerStop', {})\n          this._setState('')\n        }\n        static _states() {\n          return [class Paused extends this {}]\n        }\n      },\n    ]\n  }\n}\n","class localCookie{constructor(e){return e=e||{},this.forceCookies=e.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==e.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies}}_checkIfLocalStorageWorks(){if(\"undefined\"==typeof localStorage)return!1;try{return localStorage.setItem(\"feature_test\",\"yes\"),\"yes\"===localStorage.getItem(\"feature_test\")&&(localStorage.removeItem(\"feature_test\"),!0)}catch(e){return!1}}_getItemLocalStorage(e){return window.localStorage.getItem(e)}_setItemLocalStorage(e,t){return window.localStorage.setItem(e,t)}_removeItemLocalStorage(e){return window.localStorage.removeItem(e)}_clearLocalStorage(){return window.localStorage.clear()}_getItemCookie(e){var t=document.cookie.match(RegExp(\"(?:^|;\\\\s*)\"+function(e){return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")}(e)+\"=([^;]*)\"));return t&&\"\"===t[1]&&(t[1]=null),t?t[1]:null}_setItemCookie(e,t){var o=new Date,r=new Date(o.getTime()+15768e7);document.cookie=`${e}=${t}; expires=${r.toUTCString()};`}_removeItemCookie(e){document.cookie=`${e}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(\";\").forEach(e=>{document.cookie=e.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=Max-Age=-99999999\")})}}export default localCookie;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport localCookie from 'localCookie'\n\nlet namespace\nlet lc\n\nexport const initStorage = () => {\n  namespace = Settings.get('platform', 'id')\n  // todo: pass options (for example to force the use of cookies)\n  lc = new localCookie()\n}\n\nconst namespacedKey = key => (namespace ? [namespace, key].join('.') : key)\n\nexport default {\n  get(key) {\n    try {\n      return JSON.parse(lc.getItem(namespacedKey(key)))\n    } catch (e) {\n      return null\n    }\n  },\n  set(key, value) {\n    try {\n      lc.setItem(namespacedKey(key), JSON.stringify(value))\n      return true\n    } catch (e) {\n      return false\n    }\n  },\n  remove(key) {\n    lc.removeItem(namespacedKey(key))\n  },\n  clear() {\n    if (namespace) {\n      lc.keys().forEach(key => {\n        // remove the item if in the namespace\n        key.indexOf(namespace + '.') === 0 ? lc.removeItem(key) : null\n      })\n    } else {\n      lc.clear()\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\n\nexport const isFunction = v => {\n  return typeof v === 'function'\n}\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isBoolean = v => {\n  return typeof v === 'boolean'\n}\n\nexport const isPage = v => {\n  if (v instanceof Lightning.Element || isComponentConstructor(v)) {\n    return true\n  }\n  return false\n}\n\nexport const isComponentConstructor = type => {\n  return type.prototype && 'isComponent' in type.prototype\n}\n\nexport const isArray = v => {\n  return Array.isArray(v)\n}\n\nexport const ucfirst = v => {\n  return `${v.charAt(0).toUpperCase()}${v.slice(1)}`\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const isPromise = (method, args) => {\n  let result\n  if (isFunction(method)) {\n    try {\n      result = method.apply(null)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n  return isObject(result) && isFunction(result.then)\n}\n\nexport const getConfigMap = () => {\n  const routerSettings = Settings.get('platform', 'router')\n  const isObj = isObject(routerSettings)\n  return [\n    'backtrack',\n    'gcOnUnload',\n    'destroyOnHistoryBack',\n    'lazyCreate',\n    'lazyDestroy',\n    'reuseInstance',\n    'autoRestoreRemote',\n    'numberNavigation',\n    'updateHash',\n  ].reduce((config, key) => {\n    config.set(key, isObj ? routerSettings[key] : Settings.get('platform', key))\n    return config\n  }, new Map())\n}\n\nexport const incorrectParams = (cb, route) => {\n  const isIncorrect = /^\\w*?\\s?\\(\\s?\\{.*?\\}\\s?\\)/i\n  if (isIncorrect.test(cb.toString())) {\n    console.warn(\n      [\n        `DEPRECATION: The data-provider for route: ${route} is not correct.`,\n        '\"page\" is no longer a property of the params object but is now the first function parameter: ',\n        'https://github.com/rdkcentral/Lightning-SDK/blob/feature/router/docs/plugins/router/dataproviding.md#data-providing',\n        \"It's supported for now but will be removed in a future release.\",\n      ].join('\\n')\n    )\n    return true\n  }\n  return false\n}\n\nexport const getQueryStringParams = hash => {\n  const getQuery = /([?&].*)/\n  const matches = getQuery.exec(hash)\n  const params = {}\n\n  if (matches && matches.length) {\n    const urlParams = new URLSearchParams(matches[1])\n    for (const [key, value] of urlParams.entries()) {\n      params[key] = value\n    }\n    return params\n  }\n  return false\n}\n\nexport const symbols = {\n  route: Symbol('route'),\n  hash: Symbol('hash'),\n  store: Symbol('store'),\n  fromHistory: Symbol('fromHistory'),\n  expires: Symbol('expires'),\n  resume: Symbol('resume'),\n  backtrack: Symbol('backtrack'),\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      if (o) {\n        o.visible = false\n      }\n      resolve()\n    })\n  })\n}\n\nconst crossFade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    if (o) {\n      o.patch({\n        smooth: {\n          alpha: [0, { duration: 0.5, delay: 0.3 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst moveOnAxes = (axis, direction, i, o) => {\n  const bounds = axis === 'x' ? 1920 : 1080\n  return new Promise(resolve => {\n    i.patch({\n      [`${axis}`]: direction ? bounds * -1 : bounds,\n      visible: true,\n      smooth: {\n        [`${axis}`]: [0, { duration: 0.4, delay: 0.2 }],\n      },\n    })\n    // out is optional\n    if (o) {\n      o.patch({\n        [`${axis}`]: 0,\n        smooth: {\n          [`${axis}`]: [direction ? bounds : bounds * -1, { duration: 0.4, delay: 0.2 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition(axis).on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst up = (i, o) => {\n  return moveOnAxes('y', 0, i, o)\n}\n\nconst down = (i, o) => {\n  return moveOnAxes('y', 1, i, o)\n}\n\nconst left = (i, o) => {\n  return moveOnAxes('x', 0, i, o)\n}\n\nconst right = (i, o) => {\n  return moveOnAxes('x', 1, i, o)\n}\n\nexport default {\n  fade,\n  crossFade,\n  up,\n  down,\n  left,\n  right,\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple module for localization of strings.\n *\n * How to use:\n * 1. Create localization file with following JSON format:\n * {\n *   \"en\" :{\n *     \"how\": \"How do you want your egg today?\",\n *     \"boiledEgg\": \"Boiled egg\",\n *     \"softBoiledEgg\": \"Soft-boiled egg\",\n *     \"choice\": \"How to choose the egg\",\n *     \"buyQuestion\": \"I'd like to buy {0} eggs, {1} dollars each.\"\n *   },\n *\n *   \"it\": {\n *     \"how\": \"Come vuoi il tuo uovo oggi?\",\n *     \"boiledEgg\": \"Uovo sodo\",\n *     \"softBoiledEgg\": \"Uovo alla coque\",\n *     \"choice\": \"Come scegliere l'uovo\",\n *     \"buyQuestion\": \"Mi piacerebbe comprare {0} uova, {1} dollari ciascuna.\"\n *   }\n * }\n *\n * 2. Use Locale's module load method, specifying path to your localization file and set chosen language, e.g.:\n *    > Locale.load('static/locale/locale.json');\n *    > Locale.setLanguage('en');\n *\n * 3. Use localization strings:\n *    > console.log(Locale.tr.how);\n *    How do you want your egg today?\n *    > console.log(Locale.tr.boiledEgg);\n *    Boiled egg\n *\n * 4. String formatting\n *    > console.log(Locale.tr.buyQuestion.format(10, 0.5));\n *    I'd like to buy 10 eggs, 0.5 dollars each.\n */\n\nimport Log from '../Log'\n\nlet warned = false\nconst deprecated = (force = false) => {\n  if (force === true || warned === false) {\n    console.warn(\n      [\n        \"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'Language'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/language',\n      ].join('\\n\\n')\n    )\n  }\n  warned = true\n}\nclass Locale {\n  constructor() {\n    this.__enabled = false\n  }\n\n  /**\n   * Loads translation object from external json file.\n   *\n   * @param {String} path Path to resource.\n   * @return {Promise}\n   */\n  async load(path) {\n    if (!this.__enabled) {\n      return\n    }\n\n    await fetch(path)\n      .then(resp => resp.json())\n      .then(resp => {\n        this.loadFromObject(resp)\n      })\n  }\n\n  /**\n   * Sets language used by module.\n   *\n   * @param {String} lang\n   */\n  setLanguage(lang) {\n    deprecated()\n    this.__enabled = true\n    this.language = lang\n  }\n\n  /**\n   * Returns reference to translation object for current language.\n   *\n   * @return {Object}\n   */\n  get tr() {\n    deprecated(true)\n    return this.__trObj[this.language]\n  }\n\n  /**\n   * Loads translation object from existing object (binds existing object).\n   *\n   * @param {Object} trObj\n   */\n  loadFromObject(trObj) {\n    deprecated()\n    const fallbackLanguage = 'en'\n    if (Object.keys(trObj).indexOf(this.language) === -1) {\n      Log.warn('No translations found for: ' + this.language)\n      if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n        Log.warn('Using fallback language: ' + fallbackLanguage)\n        this.language = fallbackLanguage\n      } else {\n        const error = 'No translations found for fallback language: ' + fallbackLanguage\n        Log.error(error)\n        throw Error(error)\n      }\n    }\n\n    this.__trObj = trObj\n    for (const lang of Object.values(this.__trObj)) {\n      for (const str of Object.keys(lang)) {\n        lang[str] = new LocalizedString(lang[str])\n      }\n    }\n  }\n}\n\n/**\n * Extended string class used for localization.\n */\nclass LocalizedString extends String {\n  /**\n   * Returns formatted LocalizedString.\n   * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n   *\n   * E.g.:\n   * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n   * A and B and A\n   *\n   * @param  {...any} args List of arguments for placeholders.\n   */\n  format(...args) {\n    const sub = args.reduce((string, arg, index) => string.split(`{${index}}`).join(arg), this)\n    return new LocalizedString(sub)\n  }\n}\n\nexport default new Locale()\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class VersionLabel extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xbb0078ac,\n      h: 40,\n      w: 100,\n      x: w => w - 50,\n      y: h => h - 50,\n      mount: 1,\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 5,\n        x: 20,\n        text: {\n          fontSize: 22,\n          lineHeight: 26,\n        },\n      },\n    }\n  }\n\n  _firstActive() {\n    this.tag('Text').text = `APP - v${this.version}\\nSDK - v${this.sdkVersion}`\n    this.tag('Text').loadTexture()\n    this.w = this.tag('Text').renderWidth + 40\n    this.h = this.tag('Text').renderHeight + 5\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\nimport Log from '../Log'\nexport default class FpsIndicator extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(80, 80, 40),\n      h: 80,\n      w: 80,\n      x: 100,\n      y: 100,\n      mount: 1,\n      Background: {\n        x: 3,\n        y: 3,\n        texture: Lightning.Tools.getRoundRect(72, 72, 36),\n        color: 0xff008000,\n      },\n      Counter: {\n        w: w => w,\n        h: h => h,\n        y: 10,\n        text: {\n          fontSize: 32,\n          textAlign: 'center',\n        },\n      },\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 48,\n        text: {\n          fontSize: 15,\n          textAlign: 'center',\n          text: 'FPS',\n        },\n      },\n    }\n  }\n\n  _setup() {\n    this.config = {\n      ...{\n        log: false,\n        interval: 500,\n        threshold: 1,\n      },\n      ...Settings.get('platform', 'showFps'),\n    }\n\n    this.fps = 0\n    this.lastFps = this.fps - this.config.threshold\n\n    const fpsCalculator = () => {\n      this.fps = ~~(1 / this.stage.dt)\n    }\n    this.stage.on('frameStart', fpsCalculator)\n    this.stage.off('framestart', fpsCalculator)\n    this.interval = setInterval(this.showFps.bind(this), this.config.interval)\n  }\n\n  _firstActive() {\n    this.showFps()\n  }\n\n  _detach() {\n    clearInterval(this.interval)\n  }\n\n  showFps() {\n    if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return\n    this.lastFps = this.fps\n    // green\n    let bgColor = 0xff008000\n    // orange\n    if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500\n    // red\n    else if (this.fps <= 20) bgColor = 0xffff0000\n\n    this.tag('Background').setSmooth('color', bgColor)\n    this.tag('Counter').text = `${this.fps}`\n\n    this.config.log && Log.info('FPS', this.fps)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Utils from '../Utils'\n\nlet meta = {}\nlet translations = {}\nlet language = null\nlet dictionary = null\n\nexport const initLanguage = (file, language = null) => {\n  return new Promise((resolve, reject) => {\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        setTranslations(json)\n        // set language (directly or in a promise)\n        typeof language === 'object' && 'then' in language && typeof language.then === 'function'\n          ? language\n              .then(lang =>\n                setLanguage(lang)\n                  .then(resolve)\n                  .catch(reject)\n              )\n              .catch(e => {\n                Log.error(e)\n                reject(e)\n              })\n          : setLanguage(language)\n              .then(resolve)\n              .catch(reject)\n      })\n      .catch(() => {\n        const error = 'Language file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst setTranslations = obj => {\n  if ('meta' in obj) {\n    meta = { ...obj.meta }\n    delete obj.meta\n  }\n  translations = obj\n}\n\nconst getLanguage = () => {\n  return language\n}\n\nconst setLanguage = lng => {\n  language = null\n  dictionary = null\n\n  return new Promise((resolve, reject) => {\n    if (lng in translations) {\n      language = lng\n    } else {\n      if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n        language = meta.map[lng]\n      } else if ('default' in meta && meta.default in translations) {\n        language = meta.default\n        const error =\n          'Translations for Language ' +\n          language +\n          ' not found. Using default language ' +\n          meta.default\n        Log.warn(error)\n        reject(error)\n      } else {\n        const error = 'Translations for Language ' + language + ' not found.'\n        Log.error(error)\n        reject(error)\n      }\n    }\n\n    if (language) {\n      Log.info('Setting language to', language)\n\n      const translationsObj = translations[language]\n      if (typeof translationsObj === 'object') {\n        dictionary = translationsObj\n        resolve()\n      } else if (typeof translationsObj === 'string') {\n        const url = Utils.asset(translationsObj)\n\n        fetch(url)\n          .then(response => response.json())\n          .then(json => {\n            // save the translations for this language (to prevent loading twice)\n            translations[language] = json\n            dictionary = json\n            resolve()\n          })\n          .catch(e => {\n            const error = 'Error while fetching ' + url\n            Log.error(error, e)\n            reject(error)\n          })\n      }\n    }\n  })\n}\n\nexport default {\n  translate(key) {\n    let replacements = [...arguments].slice(1)\n\n    // no replacements so just translated string\n    if (replacements.length === 0) {\n      return (dictionary && dictionary[key]) || key\n    } else {\n      if (replacements.length === 1 && typeof replacements[0] === 'object') {\n        replacements = replacements.pop()\n      }\n\n      return Object.keys(\n        // maps array input to an object {0: 'item1', 1: 'item2'}\n        Array.isArray(replacements) ? Object.assign({}, replacements) : replacements\n      ).reduce((text, replacementKey) => {\n        return text.replace(\n          new RegExp('{\\\\s?' + replacementKey + '\\\\s?}', 'g'),\n          replacements[replacementKey]\n        )\n      }, (dictionary && dictionary[key]) || key)\n    }\n  },\n\n  translations(obj) {\n    setTranslations(obj)\n  },\n\n  set(language) {\n    return setLanguage(language)\n  },\n\n  get() {\n    return getLanguage()\n  },\n\n  available() {\n    const languageKeys = Object.keys(translations)\n    return languageKeys.map(key => ({ code: key, name: (meta.names && meta.names[key]) || key }))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nconst registry = {\n  eventListeners: [],\n  timeouts: [],\n  intervals: [],\n  targets: [],\n}\n\nexport default {\n  // Timeouts\n  setTimeout(cb, timeout, ...params) {\n    const timeoutId = setTimeout(\n      () => {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n        cb.apply(null, params)\n      },\n      timeout,\n      params\n    )\n    Log.info('Set Timeout', 'ID: ' + timeoutId)\n    registry.timeouts.push(timeoutId)\n    return timeoutId\n  },\n\n  clearTimeout(timeoutId) {\n    if (registry.timeouts.indexOf(timeoutId) > -1) {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n      Log.info('Clear Timeout', 'ID: ' + timeoutId)\n      clearTimeout(timeoutId)\n    } else {\n      Log.error('Clear Timeout', 'ID ' + timeoutId + ' not found')\n    }\n  },\n\n  clearTimeouts() {\n    registry.timeouts.forEach(timeoutId => {\n      this.clearTimeout(timeoutId)\n    })\n  },\n\n  // Intervals\n  setInterval(cb, interval, ...params) {\n    const intervalId = setInterval(\n      () => {\n        registry.intervals = registry.intervals.filter(id => id !== intervalId)\n        cb.apply(null, params)\n      },\n      interval,\n      params\n    )\n    Log.info('Set Interval', 'ID: ' + intervalId)\n    registry.intervals.push(intervalId)\n    return intervalId\n  },\n\n  clearInterval(intervalId) {\n    if (registry.intervals.indexOf(intervalId) > -1) {\n      registry.intervals = registry.intervals.filter(id => id !== intervalId)\n      Log.info('Clear Interval', 'ID: ' + intervalId)\n      clearInterval(intervalId)\n    } else {\n      Log.error('Clear Interval', 'ID ' + intervalId + ' not found')\n    }\n  },\n\n  clearIntervals() {\n    registry.intervals.forEach(intervalId => {\n      this.clearInterval(intervalId)\n    })\n  },\n\n  // Event listeners\n  addEventListener(target, event, handler) {\n    target.addEventListener(event, handler)\n    let targetIndex =\n      registry.targets.indexOf(target) > -1\n        ? registry.targets.indexOf(target)\n        : registry.targets.push(target) - 1\n\n    registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {}\n    registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || []\n    registry.eventListeners[targetIndex][event].push(handler)\n    Log.info('Add eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler)\n  },\n\n  removeEventListener(target, event, handler) {\n    const targetIndex = registry.targets.indexOf(target)\n    if (\n      targetIndex > -1 &&\n      registry.eventListeners[targetIndex] &&\n      registry.eventListeners[targetIndex][event] &&\n      registry.eventListeners[targetIndex][event].indexOf(handler) > -1\n    ) {\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][\n        event\n      ].filter(fn => fn !== handler)\n      Log.info('Remove eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler)\n      target.removeEventListener(event, handler)\n    } else {\n      Log.error(\n        'Remove eventListener',\n        'Not found',\n        'Target',\n        target,\n        'Event: ' + event,\n        'Handler',\n        handler\n      )\n    }\n  },\n\n  // if `event` is omitted, removes all registered event listeners for target\n  // if `target` is also omitted, removes all registered event listeners\n  removeEventListeners(target, event) {\n    if (target && event) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        registry.eventListeners[targetIndex][event].forEach(handler => {\n          this.removeEventListener(target, event, handler)\n        })\n      }\n    } else if (target) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n          this.removeEventListeners(target, _event)\n        })\n      }\n    } else {\n      Object.keys(registry.eventListeners).forEach(targetIndex => {\n        this.removeEventListeners(registry.targets[targetIndex])\n      })\n    }\n  },\n\n  // Clear everything (to be called upon app close for proper cleanup)\n  clear() {\n    this.clearTimeouts()\n    this.clearIntervals()\n    this.removeEventListeners()\n    registry.eventListeners = []\n    registry.timeouts = []\n    registry.intervals = []\n    registry.targets = []\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Deepmerge from 'deepmerge'\nimport Lightning from '../Lightning'\nimport Locale from '../Locale'\nimport Metrics from '../Metrics'\nimport VersionLabel from '../VersionLabel'\nimport FpsCounter from '../FpsCounter'\nimport Log from '../Log'\nimport Settings from '../Settings'\nimport { initLanguage } from '../Language'\nimport Utils from '../Utils'\nimport Registry from '../Registry'\n\nimport { version as sdkVersion } from '../../package.json'\n\nexport let AppInstance\nexport let AppData\n\nconst defaultOptions = {\n  stage: { w: 1920, h: 1080, clearColor: 0x00000000, canvas2d: false },\n  debug: false,\n  defaultFontFace: 'RobotoRegular',\n  keys: {\n    8: 'Back',\n    13: 'Enter',\n    27: 'Menu',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    174: 'ChannelDown',\n    175: 'ChannelUp',\n    178: 'Stop',\n    250: 'PlayPause',\n    191: 'Search', // Use \"/\" for keyboard\n    409: 'Search',\n  },\n}\n\nif (window.innerHeight === 720) {\n  defaultOptions.stage['w'] = 1280\n  defaultOptions.stage['h'] = 720\n  defaultOptions.stage['precision'] = 0.6666666667\n}\n\nexport default function(App, appData, platformSettings) {\n  return class Application extends Lightning.Application {\n    constructor(options) {\n      const config = Deepmerge(defaultOptions, options)\n      super(config)\n      this.config = config\n    }\n\n    static _template() {\n      return {\n        w: 1920,\n        h: 1080,\n      }\n    }\n\n    _setup() {\n      Promise.all([\n        this.loadFonts((App.config && App.config.fonts) || (App.getFonts && App.getFonts()) || []),\n        // to be deprecated\n        Locale.load((App.config && App.config.locale) || (App.getLocale && App.getLocale())),\n        App.language && this.loadLanguage(App.language()),\n      ])\n        .then(() => {\n          Metrics.app.loaded()\n\n          AppData = appData\n\n          AppInstance = this.stage.c({\n            ref: 'App',\n            type: App,\n            zIndex: 1,\n            forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps,\n          })\n\n          this.childList.a(AppInstance)\n\n          Log.info('App version', this.config.version)\n          Log.info('SDK version', sdkVersion)\n\n          if (platformSettings.showVersion) {\n            this.childList.a({\n              ref: 'VersionLabel',\n              type: VersionLabel,\n              version: this.config.version,\n              sdkVersion: sdkVersion,\n              zIndex: 1,\n            })\n          }\n\n          if (platformSettings.showFps) {\n            this.childList.a({\n              ref: 'FpsCounter',\n              type: FpsCounter,\n              zIndex: 1,\n            })\n          }\n\n          super._setup()\n        })\n        .catch(console.error)\n    }\n\n    _handleBack() {\n      this.closeApp()\n    }\n\n    _handleExit() {\n      this.closeApp()\n    }\n\n    closeApp() {\n      Log.info('Closing App')\n\n      Settings.clearSubscribers()\n      Registry.clear()\n\n      if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n        platformSettings.onClose(...arguments)\n      } else {\n        this.close()\n      }\n    }\n\n    close() {\n      Log.info('Closing App')\n      this.childList.remove(this.tag('App'))\n\n      // force texture garbage collect\n      this.stage.gc()\n      this.destroy()\n    }\n\n    loadFonts(fonts) {\n      return new Promise((resolve, reject) => {\n        fonts\n          .map(({ family, url, descriptors }) => () => {\n            const fontFace = new FontFace(family, 'url(' + url + ')', descriptors || {})\n            document.fonts.add(fontFace)\n            return fontFace.load()\n          })\n          .reduce((promise, method) => {\n            return promise.then(() => method())\n          }, Promise.resolve(null))\n          .then(resolve)\n          .catch(reject)\n      })\n    }\n\n    loadLanguage(config) {\n      let file = Utils.asset('translations.json')\n      let language = config\n\n      if (typeof language === 'object') {\n        language = config.language || null\n        file = config.file || file\n      }\n\n      return initLanguage(file, language)\n    }\n\n    set focus(v) {\n      this._focussed = v\n      this._refocus()\n    }\n\n    _getFocused() {\n      return this._focussed || this.tag('App')\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport { getActivePage, restore } from './index'\n\nexport class RoutedApp extends Lightning.Component {\n  static _template() {\n    return {\n      Pages: {\n        forceZIndexContext: true,\n      },\n      /**\n       * This is a default Loading page that will be made visible\n       * during data-provider on() you CAN override in child-class\n       */\n      Loading: {\n        rect: true,\n        w: 1920,\n        h: 1080,\n        color: 0xff000000,\n        visible: false,\n        zIndex: 99,\n        Label: {\n          mount: 0.5,\n          x: 960,\n          y: 540,\n          text: {\n            text: 'Loading..',\n          },\n        },\n      },\n    }\n  }\n\n  static _states() {\n    return [\n      class Loading extends this {\n        $enter() {\n          this.tag('Loading').visible = true\n        }\n\n        $exit() {\n          this.tag('Loading').visible = false\n        }\n      },\n      class Widgets extends this {\n        $enter(args, widget) {\n          // store widget reference\n          this._widget = widget\n\n          // since it's possible that this behaviour\n          // is non-remote driven we force a recalculation\n          // of the focuspath\n          this._refocus()\n        }\n\n        _getFocused() {\n          // we delegate focus to selected widget\n          // so it can consume remotecontrol presses\n          return this._widget\n        }\n\n        // if we want to widget to widget focus delegation\n        reload(widget) {\n          this._widget = widget\n          this._refocus()\n        }\n\n        _handleKey() {\n          restore()\n        }\n      },\n    ]\n  }\n\n  /**\n   * Return location where pages need to be stored\n   */\n  get pages() {\n    return this.tag('Pages')\n  }\n\n  /**\n   * Tell router where widgets are stored\n   */\n  get widgets() {\n    return this.tag('Widgets')\n  }\n\n  /**\n   * we MUST register _handleBack method so the Router\n   * can override it\n   * @private\n   */\n  _handleBack() {}\n\n  /**\n   * we MUST register _captureKey for dev quick-navigation\n   * (via keyboard 1-9)\n   */\n  _captureKey() {}\n\n  /**\n   * We MUST return Router.activePage() so the new Page\n   * can listen to the remote-control.\n   */\n  _getFocused() {\n    return getActivePage()\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Settings from '../Settings'\n\nimport { isObject } from './utils'\n\nconst running = new Map()\nconst resolved = new Map()\nconst expired = new Map()\nconst rejected = new Map()\nconst active = new Map()\n\nconst send = (hash, key, value) => {\n  if (!Settings.get('platform', 'stats')) {\n    return\n  }\n  if (!key && !value) {\n    if (!running.has(hash)) {\n      running.set(hash, {\n        start: Date.now(),\n      })\n    }\n  } else {\n    if (running.has(hash)) {\n      if (key && value) {\n        const payload = running.get(hash)\n        payload[key] = value\n      }\n    }\n  }\n  if (key && commands[key]) {\n    const command = commands[key]\n    if (command) {\n      command.call(null, hash)\n    }\n  }\n}\n\nconst move = (hash, bucket, args) => {\n  if (active.has(hash)) {\n    const payload = active.get(hash)\n    const route = payload.route\n\n    // we group by route so store\n    // the hash in the payload\n    payload.hash = hash\n\n    if (isObject(args)) {\n      Object.keys(args).forEach(prop => {\n        payload[prop] = args[prop]\n      })\n    }\n    if (bucket.has(route)) {\n      const records = bucket.get(route)\n      records.push(payload)\n      bucket.set(route, records)\n    } else {\n      // we add by route and group all\n      // resolved hashes against that route\n      bucket.set(route, [payload])\n    }\n    active.delete(hash)\n  }\n}\n\nconst commands = {\n  ready: hash => {\n    if (running.has(hash)) {\n      const payload = running.get(hash)\n      payload.ready = Date.now()\n      active.set(hash, payload)\n\n      running.delete(hash)\n    }\n  },\n  stop: hash => {\n    move(hash, resolved, {\n      stop: Date.now(),\n    })\n  },\n  error: hash => {\n    move(hash, rejected, {\n      error: Date.now(),\n    })\n  },\n  expired: hash => {\n    move(hash, expired, {\n      expired: Date.now,\n    })\n  },\n}\n\nconst output = (label, bucket) => {\n  Log.info(`Output: ${label}`, bucket)\n  for (let [route, records] of bucket.entries()) {\n    Log.debug(`route: ${route}`, records)\n  }\n}\n\nexport let getStats = () => {\n  output('Resolved', resolved)\n  output('Expired', expired)\n  output('Rejected', rejected)\n  output('Expired', expired)\n  output('Still active', active)\n  output('Still running', running)\n}\n\nexport const initStats = config => {\n  if (config.getStats) {\n    getStats = config.getStats\n  }\n}\n\nexport default {\n  send,\n  getStats,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  isFunction,\n  isPage,\n  isComponentConstructor,\n  isArray,\n  ucfirst,\n  isObject,\n  isBoolean,\n  isString,\n  getConfigMap,\n  incorrectParams,\n  isPromise,\n  getQueryStringParams,\n  symbols,\n} from './utils'\n\nimport Transitions from './transitions'\nimport Log from '../Log'\nimport { AppInstance } from '../Application'\nimport { RoutedApp } from './base'\nimport stats from './stats'\n\nlet getHash = () => {\n  return document.location.hash\n}\n\nlet setHash = url => {\n  document.location.hash = url\n}\n\nexport const initRouter = config => {\n  if (config.getHash) {\n    getHash = config.getHash\n  }\n  if (config.setHash) {\n    setHash = config.setHash\n  }\n}\n\n/*\nrouThor ==[x]\n */\n\n// instance of Lightning.Application\nlet application\n\n//instance of Lightning.Component\nlet app\n\nlet stage\nlet widgetsHost\nlet pagesHost\n\nconst pages = new Map()\nconst providers = new Map()\nconst modifiers = new Map()\nconst widgetsPerRoute = new Map()\nconst routeHooks = new Map()\n\nlet register = new Map()\nlet routerConfig\n\n// widget that has focus\nlet activeWidget\nlet rootHash\nlet bootRequest\nlet history = []\nlet initialised = false\nlet activeRoute\nlet activeHash\nlet updateHash = true\nlet forcedHash\nlet lastHash = true\nlet previousState\n\n// page that has focus\nlet activePage\nconst hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g\nconst isWildcard = /^[!*$]$/\n\n/**\n * Setup Page router\n * @param config - route config object\n * @param instance - instance of the app\n */\nexport const startRouter = (config, instance) => {\n  // backwards compatible\n  let { appInstance, routes, provider = () => {}, widgets = () => {} } = config\n\n  if (instance && isPage(instance)) {\n    app = instance\n  }\n\n  if (!app) {\n    app = appInstance || AppInstance\n  }\n\n  application = app.application\n  pagesHost = application.childList\n  stage = app.stage\n  routerConfig = getConfigMap()\n\n  // test if required to host pages in a different child\n  if (app.pages) {\n    pagesHost = app.pages.childList\n  }\n\n  // test if app uses widgets\n  if (app.widgets && app.widgets.children) {\n    widgetsHost = app.widgets.childList\n    // hide all widgets on boot\n    widgetsHost.forEach(w => (w.visible = false))\n  }\n\n  // register step back handler\n  app._handleBack = e => {\n    step(-1)\n    e.preventDefault()\n  }\n\n  // register step back handler\n  app._captureKey = capture.bind(null)\n\n  if (isArray(routes)) {\n    setupRoutes(config)\n    start()\n  } else if (isFunction(routes)) {\n    // register route data bindings\n    provider()\n    // register routes\n    routes()\n    // register widgets\n    widgets()\n  }\n}\n\nexport const setupRoutes = routesConfig => {\n  let bootPage = routesConfig.bootComponent\n\n  if (!initialised) {\n    rootHash = routesConfig.root\n    if (isFunction(routesConfig.boot)) {\n      boot(routesConfig.boot)\n    }\n    if (bootPage && isPage(bootPage)) {\n      route('@boot-page', routesConfig.bootComponent)\n    }\n    if (isBoolean(routesConfig.updateHash)) {\n      updateHash = routesConfig.updateHash\n    }\n    if (isFunction(routesConfig.beforeEachRoute)) {\n      beforeEachRoute = routesConfig.beforeEachRoute\n    }\n    initialised = true\n  }\n\n  routesConfig.routes.forEach(r => {\n    route(r.path, r.component || r.hook, r.options)\n    if (r.widgets) {\n      widget(r.path, r.widgets)\n    }\n    if (isFunction(r.on)) {\n      on(r.path, r.on, r.cache || 0)\n    }\n    if (isFunction(r.before)) {\n      before(r.path, r.before, r.cache || 0)\n    }\n    if (isFunction(r.after)) {\n      after(r.path, r.after, r.cache || 0)\n    }\n    if (isFunction(r.beforeNavigate)) {\n      hook(r.path, r.beforeNavigate)\n    }\n  })\n}\n\n/**\n * create a new route\n * @param route - {string}\n * @param type - {(Lightning.Component|Function()*)}\n * @param modifiers - {Object{}} - preventStorage | clearHistory | storeLast\n */\nexport const route = (route, type, config) => {\n  route = route.replace(/\\/+$/, '')\n  // if the route is defined we try to push\n  // the new type on to the stack\n  if (pages.has(route)) {\n    let stack = pages.get(route)\n    if (!isArray(stack)) {\n      stack = [stack]\n    }\n\n    // iterate stack and look if there is page instance\n    // attached to the route\n    const hasPage = stack.filter(o => isPage(o, stage))\n    if (hasPage.length) {\n      // only allow multiple functions for route\n      if (isFunction(type) && !isPage(type, stage)) {\n        stack.push(type)\n      } else {\n        console.warn(`Page for route('${route}') already exists`)\n      }\n    } else {\n      if (isFunction(type)) {\n        stack.push(type)\n      } else {\n        if (!routerConfig.get('lazyCreate')) {\n          type = isComponentConstructor(type) ? create(type) : type\n          pagesHost.a(type)\n        }\n        stack.push(type)\n      }\n    }\n    pages.set(route, stack)\n  } else {\n    if (isPage(type, stage)) {\n      // if flag lazy eq false we (test) and create\n      // correct component and add it to the childList\n      if (!routerConfig.get('lazyCreate')) {\n        type = isComponentConstructor(type) ? create(type) : type\n        pagesHost.a(type)\n      }\n    }\n\n    // if lazy we just store the constructor or function\n    pages.set(route, [type])\n\n    // store router modifiers\n    if (config) {\n      modifiers.set(route, config)\n    }\n  }\n}\n\n/**\n * create a route and define it as root.\n * Upon boot we will automatically point browser hash\n * to the defined route\n * @param route - {string}\n * @param type - {(Lightning.Component|Function()*)}\n */\nexport const root = (url, type, config) => {\n  rootHash = url.replace(/\\/+$/, '')\n  route(url, type, config)\n}\n\n/**\n * Define the widgets that need to become visible per route\n * @param url\n * @param widgets\n */\nexport const widget = (url, widgets = []) => {\n  if (!widgetsPerRoute.has(url)) {\n    if (!isArray(widgets)) {\n      widgets = [widgets]\n    }\n    widgetsPerRoute.set(url, widgets)\n  } else {\n    console.warn(`Widgets already exist for ${url}`)\n  }\n}\n\nconst create = type => {\n  const page = stage.c({ type, visible: false })\n  // if the app has widgets we make them available\n  // as an object on the app instance\n  if (widgetsHost) {\n    page.widgets = getWidgetReferences()\n  }\n\n  return page\n}\n\n/**\n * The actual loading of the component\n * @param {String} route - the route blueprint, used for data provider look up\n * @param {String} hash - current hash we're routing to\n * */\nconst load = async ({ route, hash }) => {\n  let expired = false\n  // for now we maintain one instance of the\n  // navigation register and create a local copy\n  // that we hand over to the loader\n  const routeReg = new Map(register)\n  try {\n    const payload = await loader({ hash, route, routeReg })\n    if (payload && payload.hash === lastHash) {\n      // in case of on() providing we need to reset\n      // app state;\n      if (app.state === 'Loading') {\n        if (previousState === 'Widgets') {\n          app._setState('Widgets', [activeWidget])\n        } else {\n          app._setState('')\n        }\n      }\n      // Do page transition if instance\n      // is not shared between the routes\n      if (!payload.share) {\n        await doTransition(payload.page, activePage)\n      }\n    } else {\n      expired = true\n    }\n    // on expired we only cleanup\n    if (expired) {\n      Log.debug('[router]:', `Rejected ${payload.hash} because route to ${lastHash} started`)\n      if (payload.create && !payload.share) {\n        // remove from render-tree\n        pagesHost.remove(payload.page)\n      }\n    } else {\n      onRouteFulfilled(payload, routeReg)\n      // resolve promise\n      return payload.page\n    }\n  } catch (payload) {\n    if (!expired) {\n      if (payload.create && !payload.share) {\n        // remove from render-tree\n        pagesHost.remove(payload.page)\n      }\n      handleError(payload)\n    }\n  }\n}\n\nconst loader = async ({ route, hash, routeReg: register }) => {\n  let type = getPageByRoute(route)\n  let isConstruct = isComponentConstructor(type)\n  let sharedInstance = false\n  let provide = false\n  let page = null\n  let isCreated = false\n\n  // if it's an instance bt we're not coming back from\n  // history we test if we can re-use this instance\n  if (!isConstruct && !register.get(symbols.backtrack)) {\n    if (!mustReuse(route)) {\n      type = type.constructor\n      isConstruct = true\n    }\n  }\n\n  // If type is not a constructor\n  if (!isConstruct) {\n    page = type\n    // if we have have a data route for current page\n    if (providers.has(route)) {\n      if (isPageExpired(type) || type[symbols.hash] !== hash) {\n        provide = true\n      }\n    }\n    let currentRoute = activePage && activePage[symbols.route]\n    // if the new route is equal to the current route it means that both\n    // route share the Component instance and stack location / since this case\n    // is conflicting with the way before() and after() loading works we flag it,\n    // and check platform settings in we want to re-use instance\n    if (route === currentRoute) {\n      sharedInstance = true\n    }\n  } else {\n    page = create(type)\n    pagesHost.a(page)\n    // test if need to request data provider\n    if (providers.has(route)) {\n      provide = true\n    }\n    isCreated = true\n  }\n\n  // we store hash and route as properties on the page instance\n  // that way we can easily calculate new behaviour on page reload\n  page[symbols.hash] = hash\n  page[symbols.route] = route\n\n  const payload = {\n    page,\n    route,\n    hash,\n    register,\n    create: isCreated,\n    share: sharedInstance,\n    event: [isCreated ? 'mounted' : 'changed'],\n  }\n\n  try {\n    if (provide) {\n      const { type: loadType } = providers.get(route)\n      // update payload\n      payload.loadType = loadType\n\n      // update statistics\n      send(hash, `${loadType}-start`, Date.now())\n      await triggers[sharedInstance ? 'shared' : loadType](payload)\n      send(hash, `${loadType}-end`, Date.now())\n\n      if (hash !== lastHash) {\n        return false\n      } else {\n        emit(page, 'dataProvided')\n        // resolve promise\n        return payload\n      }\n    } else {\n      addPersistData(payload)\n      return payload\n    }\n  } catch (e) {\n    payload.error = e\n    return Promise.reject(payload)\n  }\n}\n\n/**\n * Will be called when a new navigate() request has completed\n * and has not been expired due to it's async nature\n * @param page\n * @param route\n * @param event\n * @param hash\n * @param register\n */\nconst onRouteFulfilled = ({ page, route, event, hash, share }, register) => {\n  // clean up history if modifier is set\n  if (hashmod(hash, 'clearHistory')) {\n    history.length = 0\n  } else if (activeHash && !isWildcard.test(route)) {\n    updateHistory(activeHash)\n  }\n\n  // we only update the stackLocation if a route\n  // is not expired before it resolves\n  const location = getPageStackLocation(route)\n\n  if (!isNaN(location)) {\n    let stack = pages.get(route)\n    stack[location] = page\n    pages.set(route, stack)\n  }\n\n  if (event) {\n    emit(page, event)\n  }\n\n  // only update widgets if we have a host\n  if (widgetsHost) {\n    updateWidgets(page)\n  }\n\n  // force refocus of the app\n  app._refocus()\n\n  // we want to clean up if there is an\n  // active page that is not being shared\n  // between current and previous route\n  if (activePage && !share) {\n    cleanUp(activePage, activePage[symbols.route], register)\n  }\n\n  // flag this navigation cycle as ready\n  send(hash, 'ready')\n\n  activePage = page\n  activeRoute = route\n  activeHash = hash\n\n  Log.info('[route]:', route)\n  Log.info('[hash]:', hash)\n}\n\nconst triggerAfter = args => {\n  // after() we execute the provider\n  // and resolve immediately\n  try {\n    execProvider(args)\n  } catch (e) {\n    // we fail silently\n  }\n  return Promise.resolve()\n}\n\nconst triggerBefore = args => {\n  // before() we continue only when data resolved\n  return execProvider(args)\n}\n\nconst triggerOn = args => {\n  // on() we need to place the app in\n  // a Loading state and recover from it\n  // on resolve\n  previousState = app.state || ''\n  app._setState('Loading')\n  return execProvider(args)\n}\n\nconst triggerShared = args => {\n  return execProvider(args)\n}\n\nconst triggers = {\n  on: triggerOn,\n  after: triggerAfter,\n  before: triggerBefore,\n  shared: triggerShared,\n}\n\nconst hook = (route, handler) => {\n  if (!routeHooks.has(route)) {\n    routeHooks.set(route, handler)\n  }\n}\n\nconst emit = (page, events = [], params = {}) => {\n  if (!isArray(events)) {\n    events = [events]\n  }\n  events.forEach(e => {\n    const event = `_on${ucfirst(e)}`\n    if (isFunction(page[event])) {\n      page[event](params)\n    }\n  })\n}\n\nconst send = (hash, key, value) => {\n  stats.send(hash, key, value)\n}\n\nconst handleError = args => {\n  if (!args.page) {\n    console.error(args)\n  } else {\n    const hash = args.page[symbols.hash]\n    // flag this navigation cycle as rejected\n    send(hash, 'e', args.error)\n    // force expire\n    args.page[symbols.expires] = Date.now()\n    if (pages.has('!')) {\n      load({ route: '!', hash }).then(errorPage => {\n        errorPage.error = { page: args.page, error: args.error }\n        // on() loading type will force the app to go\n        // in a loading state so on error we need to\n        // go back to root state\n        if (app.state === 'Loading') {\n          app._setState('')\n        }\n        // make sure we delegate focus to the error page\n        if (activePage !== errorPage) {\n          activePage = errorPage\n          app._refocus()\n        }\n      })\n    } else {\n      Log.error(args.page, args.error)\n    }\n  }\n}\n\nconst updateHistory = hash => {\n  const storeHash = getMod(hash, 'store')\n  const regStore = register.get(symbols.store)\n  let configPrevent = hashmod(hash, 'preventStorage')\n  let configStore = true\n\n  if ((isBoolean(storeHash) && storeHash === false) || configPrevent) {\n    configStore = false\n  }\n\n  if (regStore && configStore) {\n    const toStore = hash.replace(/^\\//, '')\n    const location = history.indexOf(toStore)\n    // store hash if it's not a part of history or flag for\n    // storage of same hash is true\n    if (location === -1 || routerConfig.get('storeSameHash')) {\n      history.push(toStore)\n    } else {\n      // if we visit the same route we want to sync history\n      history.push(history.splice(location, 1)[0])\n    }\n  }\n}\n\nexport const mustReuse = route => {\n  const mod = routemod(route, 'reuseInstance')\n  const config = routerConfig.get('reuseInstance')\n\n  // route always has final decision\n  if (isBoolean(mod)) {\n    return mod\n  }\n  return !(isBoolean(config) && config === false)\n}\n\nexport const boot = cb => {\n  bootRequest = cb\n}\n\nconst addPersistData = ({ page, route, hash, register = new Map() }) => {\n  const urlValues = getValuesFromHash(hash, route)\n  const pageData = new Map([...urlValues, ...register])\n  const params = {}\n\n  // make dynamic url data available to the page\n  // as instance properties\n  for (let [name, value] of pageData) {\n    page[name] = value\n    params[name] = value\n  }\n\n  // check navigation register for persistent data\n  if (register.size) {\n    const obj = {}\n    for (let [k, v] of register) {\n      obj[k] = v\n    }\n    page.persist = obj\n  }\n\n  // make url data and persist data available\n  // via params property\n  page.params = params\n  emit(page, ['urlParams'], params)\n\n  return params\n}\n\nconst execProvider = args => {\n  const { cb, expires } = providers.get(args.route)\n  const params = addPersistData(args)\n  /**\n   * In the first version of the Router, a reference to the page is made\n   * available to the callback function as property of {params}.\n   * Since this is error prone (named url parts are also being spread inside this object)\n   * we made the page reference the first parameter and url values the second.\n   * -\n   * We keep it backwards compatible for now but a warning is showed in the console.\n   */\n  if (incorrectParams(cb, args.route)) {\n    // keep page as params property backwards compatible for now\n    return cb({ page: args.page, ...params }).then(() => {\n      args.page[symbols.expires] = Date.now() + expires\n    })\n  } else {\n    return cb(args.page, { ...params }).then(() => {\n      args.page[symbols.expires] = Date.now() + expires\n    })\n  }\n}\n\n/**\n * execute transition between new / old page and\n * toggle the defined widgets\n * @todo: platform override default transition\n * @param pageIn\n * @param pageOut\n */\nconst doTransition = (pageIn, pageOut = null) => {\n  let transition = pageIn.pageTransition || pageIn.easing\n\n  const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition)\n  const transitionsDisabled = routerConfig.get('disableTransitions')\n\n  if (pageIn.easing) {\n    console.warn('easing() method is deprecated and will be removed. Use pageTransition()')\n  }\n  // default behaviour is a visibility toggle\n  if (!hasCustomTransitions || transitionsDisabled) {\n    pageIn.visible = true\n    if (pageOut) {\n      pageOut.visible = false\n    }\n    return Promise.resolve()\n  }\n\n  if (transition) {\n    let type\n    try {\n      type = transition.call(pageIn, pageIn, pageOut)\n    } catch (e) {\n      type = 'crossFade'\n    }\n\n    if (isPromise(type)) {\n      return type\n    }\n\n    if (isString(type)) {\n      const fn = Transitions[type]\n      if (fn) {\n        return fn(pageIn, pageOut)\n      }\n    }\n\n    // keep backwards compatible for now\n    if (pageIn.smoothIn) {\n      // provide a smooth function that resolves itself\n      // on transition finish\n      const smooth = (p, v, args = {}) => {\n        return new Promise(resolve => {\n          pageIn.visible = true\n          pageIn.setSmooth(p, v, args)\n          pageIn.transition(p).on('finish', () => {\n            resolve()\n          })\n        })\n      }\n      return pageIn.smoothIn({ pageIn, smooth })\n    }\n  }\n\n  return Transitions.crossFade(pageIn, pageOut)\n}\n\n/**\n * update the visibility of the available widgets\n * for the current page / route\n * @param page\n */\nconst updateWidgets = page => {\n  const route = page[symbols.route]\n\n  // force lowercase lookup\n  const configured = (widgetsPerRoute.get(route) || []).map(ref => ref.toLowerCase())\n\n  widgetsHost.forEach(widget => {\n    widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1\n    if (widget.visible) {\n      emit(widget, ['activated'], page)\n    }\n  })\n  if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n    app._setState('')\n  }\n}\n\nconst cleanUp = (page, route, register) => {\n  const lazyDestroy = routerConfig.get('lazyDestroy')\n  const destroyOnBack = routerConfig.get('destroyOnHistoryBack')\n  const keepAlive = read('keepAlive', register)\n  const isFromHistory = read(symbols.backtrack, register)\n  let doCleanup = false\n\n  if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n    doCleanup = true\n  } else if (lazyDestroy && !keepAlive) {\n    doCleanup = true\n  }\n\n  if (doCleanup) {\n    // in lazy create mode we store constructor\n    // and remove the actual page from host\n    const stack = pages.get(route)\n    const location = getPageStackLocation(route)\n\n    // grab original class constructor if statemachine routed\n    // else store constructor\n    stack[location] = page._routedType || page.constructor\n    pages.set(route, stack)\n\n    // actual remove of page from memory\n    pagesHost.remove(page)\n\n    // force texture gc() if configured\n    // so we can cleanup textures in the same tick\n    if (routerConfig.get('gcOnUnload')) {\n      stage.gc()\n    }\n  } else {\n    // If we're not removing the page we need to\n    // reset it's properties\n    page.patch({\n      x: 0,\n      y: 0,\n      scale: 1,\n      alpha: 1,\n      visible: false,\n    })\n  }\n  send(page[symbols.hash], 'stop')\n}\n\n/**\n * Test if page passed cache-time\n * @param page\n * @returns {boolean}\n */\nconst isPageExpired = page => {\n  if (!page[symbols.expires]) {\n    return false\n  }\n\n  const expires = page[symbols.expires]\n  const now = Date.now()\n\n  return now >= expires\n}\n\nconst getPageByRoute = route => {\n  return getPageFromStack(route).item\n}\n\n/**\n * Returns the current location of a page constructor or\n * page instance for a route\n * @param route\n */\nconst getPageStackLocation = route => {\n  return getPageFromStack(route).index\n}\n\nconst getPageFromStack = route => {\n  if (!pages.has(route)) {\n    return false\n  }\n\n  let index = -1\n  let item = null\n  let stack = pages.get(route)\n  if (!Array.isArray(stack)) {\n    stack = [stack]\n  }\n\n  for (let i = 0, j = stack.length; i < j; i++) {\n    if (isPage(stack[i], stage)) {\n      index = i\n      item = stack[i]\n      break\n    }\n  }\n\n  return { index, item }\n}\n\n/**\n * Simple route length calculation\n * @param route {string}\n * @returns {number} - floor\n */\nconst getFloor = route => {\n  return stripRegex(route).split('/').length\n}\n\n/**\n * Test if a route is part regular expressed\n * and replace it for a simple character\n * @param route\n * @returns {*}\n */\nconst stripRegex = (route, char = 'R') => {\n  // if route is part regular expressed we replace\n  // the regular expression for a character to\n  // simplify floor calculation and backtracking\n  if (hasRegex.test(route)) {\n    route = route.replace(hasRegex, char)\n  }\n  return route\n}\n\n/**\n * return all stored routes that live on the same floor\n * @param floor\n * @returns {Array}\n */\nconst getRoutesByFloor = floor => {\n  const matches = []\n  // simple filter of level candidates\n  for (let [route] of pages.entries()) {\n    if (getFloor(route) === floor) {\n      matches.push(route)\n    }\n  }\n  return matches\n}\n\n/**\n * return a matching route by provided hash\n * hash: home/browse/12 will match:\n * route: home/browse/:categoryId\n * @param hash {string}\n * @returns {string|boolean} - route\n */\nconst getRouteByHash = hash => {\n  const getUrlParts = /(\\/?:?[@\\w%\\s:-]+)/g\n  7\n  // grab possible candidates from stored routes\n  const candidates = getRoutesByFloor(getFloor(hash))\n  // break hash down in chunks\n  const hashParts = hash.match(getUrlParts) || []\n  // test if the part of the hash has a replace\n  // regex lookup id\n  const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/\n  const isNamedGroup = /^\\/:/\n\n  // to simplify the route matching and prevent look around\n  // in our getUrlParts regex we get the regex part from\n  // route candidate and store them so that we can reference\n  // them when we perform the actual regex against hash\n  let regexStore = []\n\n  let matches = candidates.filter(route => {\n    let isMatching = true\n\n    if (isWildcard.test(route)) {\n      return false\n    }\n\n    // replace regex in route with lookup id => @@{storeId}@@\n    if (hasRegex.test(route)) {\n      const regMatches = route.match(hasRegex)\n      if (regMatches && regMatches.length) {\n        route = regMatches.reduce((fullRoute, regex) => {\n          const lookupId = regexStore.length\n          fullRoute = fullRoute.replace(regex, `@@${lookupId}@@`)\n          regexStore.push(regex.substring(1, regex.length - 1))\n          return fullRoute\n        }, route)\n      }\n    }\n\n    const routeParts = route.match(getUrlParts) || []\n\n    for (let i = 0, j = routeParts.length; i < j; i++) {\n      const routePart = routeParts[i]\n      const hashPart = hashParts[i]\n\n      // Since we support catch-all and regex driven name groups\n      // we first test for regex lookup id and see if the regex\n      // matches the value from the hash\n      if (hasLookupId.test(routePart)) {\n        const routeMatches = hasLookupId.exec(routePart)\n        const storeId = routeMatches[1]\n        const routeRegex = regexStore[storeId]\n\n        // split regex and modifiers so we can use both\n        // to create a new RegExp\n        // eslint-disable-next-line\n        const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex)\n\n        if (regMatches && regMatches.length) {\n          const expression = regMatches[1]\n          const modifiers = regMatches[2]\n\n          const regex = new RegExp(`^/${expression}$`, modifiers)\n\n          if (!regex.test(hashPart)) {\n            isMatching = false\n          }\n        }\n      } else if (isNamedGroup.test(routePart)) {\n        // we kindly skip namedGroups because this is dynamic\n        // we only need to the static and regex drive parts\n        continue\n      } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n        isMatching = false\n      }\n    }\n    return isMatching\n  })\n\n  if (matches.length) {\n    // we give prio to static routes over dynamic\n    matches = matches.sort(a => {\n      return isNamedGroup.test(a) ? -1 : 1\n    })\n    return matches[0]\n  }\n\n  return false\n}\n\n/**\n * Extract dynamic values from location hash and return a namedgroup\n * of key (from route) value (from hash) pairs\n * @param hash {string} - the actual location hash\n * @param route {string} - the route as defined in route\n */\nconst getValuesFromHash = (hash, route) => {\n  // replace the regex definition from the route because\n  // we already did the matching part\n  route = stripRegex(route, '')\n\n  const getUrlParts = /(\\/?:?[\\w%\\s:-]+)/g\n  const hashParts = hash.match(getUrlParts) || []\n  const routeParts = route.match(getUrlParts) || []\n  const getNamedGroup = /^\\/:([\\w-]+)\\/?/\n\n  return routeParts.reduce((storage, value, index) => {\n    const match = getNamedGroup.exec(value)\n    if (match && match.length) {\n      storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')))\n    }\n    return storage\n  }, new Map())\n}\n\n/**\n * Will be called before a route starts, can be overridden\n * via routes config\n * @param from - route we came from\n * @param to - route we navigate to\n * @returns {Promise<*>}\n */\nlet beforeEachRoute = async (from, to) => {\n  return true\n}\n\nconst handleHashChange = async override => {\n  const hash = override || getHash()\n  const route = getRouteByHash(hash)\n\n  let result = (await beforeEachRoute(activeRoute, route)) || true\n\n  // test if a local hook is configured for the route\n  if (routeHooks.has(route)) {\n    const handler = routeHooks.get(route)\n    result = (await handler()) || true\n  }\n\n  if (isBoolean(result)) {\n    // only if resolve value is explicitly true\n    // we continue the current route request\n    if (result) {\n      return resolveHashChange(hash, route)\n    }\n  } else if (isString(result)) {\n    navigate(result)\n  } else if (isObject(result)) {\n    navigate(result.path, result.params)\n  }\n}\n\nconst resolveHashChange = (hash, route) => {\n  // add a new record for page statistics\n  send(hash)\n\n  // store last requested hash so we can\n  // prevent a route that resolved later\n  // from displaying itself\n  lastHash = hash\n\n  if (route) {\n    // would be strange if this fails but we do check\n    if (pages.has(route)) {\n      let stored = pages.get(route)\n      send(hash, 'route', route)\n\n      if (!isArray(stored)) {\n        stored = [stored]\n      }\n\n      stored.forEach((type, idx, stored) => {\n        if (isPage(type, stage)) {\n          load({ route, hash }).then(() => {\n            app._refocus()\n          })\n        } else if (isPromise(type)) {\n          type()\n            .then(contents => {\n              return contents.default\n            })\n            .then(module => {\n              // flag dynamic as loaded\n              stored[idx] = module\n\n              return load({ route, hash })\n            })\n            .then(() => {\n              app._refocus()\n            })\n        } else {\n          const urlParams = getValuesFromHash(hash, route)\n          const params = {}\n          for (const key of urlParams.keys()) {\n            params[key] = urlParams.get(key)\n          }\n\n          // invoke\n          type.call(null, app, { ...params })\n        }\n      })\n    }\n  } else {\n    if (pages.has('*')) {\n      load({ route: '*', hash }).then(() => {\n        app._refocus()\n      })\n    }\n  }\n}\n\nconst getMod = (hash, key) => {\n  const config = modifiers.get(getRouteByHash(hash))\n  if (isObject(config)) {\n    return config[key]\n  }\n}\n\nconst hashmod = (hash, key) => {\n  return routemod(getRouteByHash(hash), key)\n}\n\nconst routemod = (route, key) => {\n  if (modifiers.has(route)) {\n    const config = modifiers.get(route)\n    return config[key]\n  }\n}\n\nconst read = (flag, register) => {\n  if (register.has(flag)) {\n    return register.get(flag)\n  }\n  return false\n}\n\nconst createRegister = flags => {\n  const reg = new Map()\n  // store user defined and router\n  // defined flags in register\n  ;[...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n    reg.set(key, flags[key])\n  })\n  return reg\n}\n\nexport const navigate = (url, args, store = true) => {\n  let hash = getHash()\n\n  // for now we use one register instance and create a local\n  // copy for the loader\n  register.clear()\n\n  if (!mustUpdateHash() && forcedHash) {\n    hash = forcedHash\n  }\n\n  if (isObject(args)) {\n    register = createRegister(args)\n  } else if (isBoolean(args) && !args) {\n    // if explicit set to false we don't want\n    // to store the route\n    store = args\n  }\n\n  // we only store complete routes, so we set\n  // a special register flag\n  register.set(symbols.store, store)\n\n  if (hash.replace(/^#/, '') !== url) {\n    if (!mustUpdateHash()) {\n      forcedHash = url\n      handleHashChange(url)\n    } else {\n      setHash(url)\n    }\n  } else if (read('reload', register)) {\n    handleHashChange(hash)\n  }\n}\n\n/**\n * Directional step in history\n * @param direction\n */\nexport const step = (direction = 0) => {\n  if (!direction) {\n    return false\n  }\n\n  // is we still have routes in our history\n  // we splice the last of and navigate to that route\n  if (history.length) {\n    // for now we only support history back\n    const route = history.splice(history.length - 1, 1)\n    return navigate(route[0], { [symbols.backtrack]: true }, false)\n  } else if (routerConfig.get('backtrack')) {\n    const hashLastPart = /(\\/:?[\\w%\\s-]+)$/\n    let hash = stripRegex(getHash())\n    let floor = getFloor(hash)\n\n    // test if we got deeplinked\n    if (floor > 1) {\n      while (floor--) {\n        // strip of last part\n        hash = hash.replace(hashLastPart, '')\n        // if we have a configured route\n        // we navigate to it\n        if (getRouteByHash(hash)) {\n          return navigate(hash, { [symbols.backtrack]: true }, false)\n        }\n      }\n    }\n  }\n\n  if (isFunction(app._handleAppClose)) {\n    return app._handleAppClose()\n  }\n\n  return false\n}\n\nconst capture = ({ key }) => {\n  // in Loading state we want to stop propagation\n  // by returning undefined\n  if (app.state === 'Loading') {\n    return\n  }\n\n  // if not set we want to continue propagation\n  // by explicitly returning false\n  if (!routerConfig.get('numberNavigation')) {\n    return false\n  }\n  key = parseInt(key)\n  if (!isNaN(key)) {\n    let match\n    let idx = 1\n    for (let route of pages.keys()) {\n      if (idx === key) {\n        match = route\n        break\n      } else {\n        idx++\n      }\n    }\n    if (match) {\n      navigate(match)\n    }\n  }\n  return false\n}\n\n// start translating url\nexport const start = () => {\n  const bootKey = '@boot-page'\n  const hasBootPage = pages.has('@boot-page')\n  const hash = getHash()\n  const params = getQueryStringParams(hash)\n\n  // if we refreshed the boot-page we don't want to\n  // redirect to this page so we force rootHash load\n  const isDirectLoad = hash.indexOf(bootKey) !== -1\n  const ready = () => {\n    if (hasBootPage) {\n      navigate('@boot-page', {\n        [symbols.resume]: isDirectLoad ? rootHash : hash || rootHash,\n        reload: true,\n      })\n    } else if (!hash && rootHash) {\n      if (isString(rootHash)) {\n        navigate(rootHash)\n      } else if (isFunction(rootHash)) {\n        rootHash().then(url => {\n          navigate(url)\n        })\n      }\n    } else {\n      handleHashChange()\n    }\n  }\n  if (isFunction(bootRequest)) {\n    bootRequest(params).then(() => {\n      ready()\n    })\n  } else {\n    ready()\n  }\n}\n\n/**\n * Data binding to a route will invoke a loading screen\n * @param {String} route - the route\n * @param {Function} cb - must return a promise\n * @param {Number} expires - seconds after first time active that data expires\n * @param {String} type - page loading type\n */\nexport const on = (route, cb, expires = 0, type = 'on') => {\n  if (providers.has(route)) {\n    console.warn(`provider for ${route} already exists`)\n  } else {\n    providers.set(route, {\n      cb,\n      expires: expires * 1000,\n      type,\n    })\n  }\n}\n\n/**\n * Request data binding for a route before\n * the page loads (active page will stay visible)\n * @param route\n * @param cb\n * @param expires\n */\nexport const before = (route, cb, expires = 0) => {\n  on(route, cb, expires, 'before')\n}\n\n/**\n * Request data binding for a route after the page has\n * been loaded\n * @param route\n * @param cb\n * @param expires\n */\nexport const after = (route, cb, expires = 0) => {\n  on(route, cb, expires, 'after')\n}\n\nconst getWidgetReferences = () => {\n  return widgetsHost.get().reduce((storage, widget) => {\n    const key = widget.ref.toLowerCase()\n    storage[key] = widget\n    return storage\n  }, {})\n}\n\nconst getWidgetByName = name => {\n  name = ucfirst(name)\n  return widgetsHost.getByRef(name) || false\n}\n\n/**\n * delegate app focus to a on-screen widget\n * @param name - {string}\n */\nexport const focusWidget = name => {\n  const widget = getWidgetByName(name)\n  if (name) {\n    // store reference\n    activeWidget = widget\n    // somewhat experimental\n    if (app.state === 'Widgets') {\n      app.reload(activeWidget)\n    } else {\n      app._setState('Widgets', [activeWidget])\n    }\n  }\n}\n\nexport const handleRemote = (type, name) => {\n  if (type === 'widget') {\n    focusWidget(name)\n  } else if (type === 'page') {\n    restoreFocus()\n  }\n}\n\n/**\n * Resume Router's page loading process after\n * the BootComponent became visible;\n */\nexport const resume = () => {\n  if (register.has(symbols.resume)) {\n    const hash = register.get(symbols.resume).replace(/^#+/, '')\n    if (getRouteByHash(hash) && hash) {\n      navigate(hash, false)\n    } else if (rootHash) {\n      navigate(rootHash, false)\n    }\n  }\n}\n\nexport const restore = () => {\n  if (routerConfig.get('autoRestoreRemote')) {\n    handleRemote('page')\n  }\n}\n\nconst hash = () => {\n  return getHash()\n}\n\nconst mustUpdateHash = () => {\n  // we need support to either turn change hash off\n  // per platform or per app\n  const updateConfig = routerConfig.get('updateHash')\n  return !((isBoolean(updateConfig) && !updateConfig) || (isBoolean(updateHash) && !updateHash))\n}\n\nexport const restoreFocus = () => {\n  activeWidget = null\n  app._setState('')\n}\n\nexport const getActivePage = () => {\n  if (activePage && activePage.attached) {\n    return activePage\n  } else {\n    return app\n  }\n}\n\nexport const getActiveRoute = () => {\n  return activeRoute\n}\n\nexport const getActiveHash = () => {\n  return activeHash\n}\n\nexport const getActiveWidget = () => {\n  return activeWidget\n}\n\n// listen to url changes\nwindow.addEventListener('hashchange', () => {\n  handleHashChange()\n})\n\n// export API\nexport default {\n  startRouter,\n  navigate,\n  root,\n  resume,\n  route,\n  on,\n  before,\n  after,\n  boot,\n  step,\n  restoreFocus,\n  focusPage: restoreFocus,\n  focusWidget,\n  handleRemote,\n  start,\n  add: setupRoutes,\n  widget,\n  hash,\n  getActivePage,\n  getActiveWidget,\n  getActiveRoute,\n  getActiveHash,\n  App: RoutedApp,\n  restore,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst defaultChannels = [\n  {\n    number: 1,\n    name: 'Metro News 1',\n    description: 'New York Cable News Channel',\n    entitled: true,\n    program: {\n      title: 'The Morning Show',\n      description: \"New York's best morning show\",\n      startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(), // started 5 minutes ago\n      duration: 60 * 30, // 30 minutes\n      ageRating: 0,\n    },\n  },\n  {\n    number: 2,\n    name: 'MTV',\n    description: 'Music Television',\n    entitled: true,\n    program: {\n      title: 'Beavis and Butthead',\n      description: 'American adult animated sitcom created by Mike Judge',\n      startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(), // started 20 minutes ago\n      duration: 60 * 45, // 45 minutes\n      ageRating: 18,\n    },\n  },\n  {\n    number: 3,\n    name: 'NBC',\n    description: 'NBC TV Network',\n    entitled: false,\n    program: {\n      title: 'The Tonight Show Starring Jimmy Fallon',\n      description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n      startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(), // started 10 minutes ago\n      duration: 60 * 60, // 1 hour\n      ageRating: 10,\n    },\n  },\n]\n\nexport const channels = () => Settings.get('platform', 'tv', defaultChannels)\n\nexport const randomChannel = () => channels()[~~(channels.length * Math.random())]\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nimport { channels, randomChannel } from './defaults'\n\nlet currentChannel\nconst callbacks = {}\n\nconst emit = (event, ...args) => {\n  callbacks[event] &&\n    callbacks[event].forEach(cb => {\n      cb.apply(null, args)\n    })\n}\n\n// local mock methods\nlet methods = {\n  getChannel() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      if (currentChannel) {\n        const channel = { ...currentChannel }\n        delete channel.program\n        resolve(channel)\n      } else {\n        reject('No channel found')\n      }\n    })\n  },\n  getProgram() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      currentChannel.program ? resolve(currentChannel.program) : reject('No program found')\n    })\n  },\n  setChannel(number) {\n    return new Promise((resolve, reject) => {\n      if (number) {\n        const newChannel = channels().find(c => c.number === number)\n        if (newChannel) {\n          currentChannel = newChannel\n          const channel = { ...currentChannel }\n          delete channel.program\n          emit('channelChange', channel)\n          resolve(channel)\n        } else {\n          reject('Channel not found')\n        }\n      } else {\n        reject('No channel number supplied')\n      }\n    })\n  },\n}\n\nexport const initTV = config => {\n  methods = {}\n  if (config.getChannel && typeof config.getChannel === 'function') {\n    methods.getChannel = config.getChannel\n  }\n  if (config.getProgram && typeof config.getProgram === 'function') {\n    methods.getProgram = config.getProgram\n  }\n  if (config.setChannel && typeof config.setChannel === 'function') {\n    methods.setChannel = config.setChannel\n  }\n  if (config.emit && typeof config.emit === 'function') {\n    config.emit(emit)\n  }\n}\n\n// public API\nexport default {\n  channel(number = null) {\n    return new Promise((resolve, reject) => {\n      try {\n        // call setChannel when number argument is passed, otherwise getChannel\n        methods[number ? 'setChannel' : 'getChannel'](number)\n          .then(channel => {\n            // to do: ensure consistent formatting of channel info here?\n            resolve(channel)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  program() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getProgram()\n          .then(program => {\n            // to do: ensure consistent formatting of program info here?\n            resolve(program)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  entitled() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getChannel()\n          .then(channel => {\n            'entitled' in channel ? resolve(!!channel.entitled) : reject()\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  addEventListener(event, cb) {\n    if (typeof cb === 'function') {\n      callbacks[event] = callbacks[event] || []\n      callbacks[event].push(cb)\n    } else {\n      Log.error('Please provide a function as a callback')\n    }\n  },\n  removeEventListener(event, cb = false) {\n    if (callbacks[event] && callbacks[event].length) {\n      callbacks[event] = cb ? callbacks[event].filter(_cb => _cb === cb) : []\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { initUtils } from '../Utils'\nimport { initProfile } from '../Profile'\nimport { initMetrics } from '../Metrics'\nimport { initSettings } from '../Settings'\nimport { initMediaPlayer } from '../MediaPlayer'\nimport { initVideoPlayer } from '../VideoPlayer'\nimport { initStorage } from '../Storage'\nimport { initAds } from '../Ads'\nimport { initRouter } from '../Router'\nimport { initTV } from '../TV'\nimport Application from '../Application'\n\nexport let ApplicationInstance\n\nexport default (App, appSettings, platformSettings, appData) => {\n  initSettings(appSettings, platformSettings)\n\n  initUtils(platformSettings)\n  initStorage()\n\n  // Initialize plugins\n  if (platformSettings.plugins) {\n    platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile)\n    platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics)\n    platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.ads && initAds(platformSettings.plugins.ads)\n    platformSettings.plugins.router && initRouter(platformSettings.plugins.router)\n    platformSettings.plugins.tv && initTV(platformSettings.plugins.tv)\n  }\n\n  const app = Application(App, appData, platformSettings)\n  ApplicationInstance = new app(appSettings)\n  return ApplicationInstance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Log from '../Log'\n\nexport default class VideoTexture extends Lightning.Component {\n  static _template() {\n    return {\n      Video: {\n        alpha: 1,\n        visible: false,\n        pivot: 0.5,\n        texture: { type: Lightning.textures.StaticTexture, options: {} },\n      },\n    }\n  }\n\n  set videoEl(v) {\n    this._videoEl = v\n  }\n\n  get videoEl() {\n    return this._videoEl\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  get videoTexture() {\n    return this.videoView.texture\n  }\n\n  get isVisible() {\n    return this.videoView.alpha === 1 && this.videoView.visible === true\n  }\n\n  _init() {\n    this._createVideoTexture()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n\n    this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision()\n    this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision()\n  }\n\n  start() {\n    const stage = this.stage\n    if (!this._updateVideoTexture) {\n      this._updateVideoTexture = () => {\n        if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n          const gl = stage.gl\n\n          const currentTime = new Date().getTime()\n\n          // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n          // We'll fallback to fixed 30fps in this case.\n          const frameCount = this.videoEl.webkitDecodedFrameCount\n\n          const mustUpdate = frameCount\n            ? this._lastFrame !== frameCount\n            : this._lastTime < currentTime - 30\n\n          if (mustUpdate) {\n            this._lastTime = currentTime\n            this._lastFrame = frameCount\n            try {\n              gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n              gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n              gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n              this._lastFrame = this.videoEl.webkitDecodedFrameCount\n              this.videoView.visible = true\n\n              this.videoTexture.options.w = this.videoEl.width\n              this.videoTexture.options.h = this.videoEl.height\n              const expectedAspectRatio = this.videoView.w / this.videoView.h\n              const realAspectRatio = this.videoEl.width / this.videoEl.height\n\n              if (expectedAspectRatio > realAspectRatio) {\n                this.videoView.scaleX = realAspectRatio / expectedAspectRatio\n                this.videoView.scaleY = 1\n              } else {\n                this.videoView.scaleY = expectedAspectRatio / realAspectRatio\n                this.videoView.scaleX = 1\n              }\n            } catch (e) {\n              Log.error('texImage2d video', e)\n              this.stop()\n            }\n            this.videoTexture.source.forceRenderUpdate()\n          }\n        }\n      }\n    }\n    if (!this._updatingVideoTexture) {\n      stage.on('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = true\n    }\n  }\n\n  stop() {\n    const stage = this.stage\n    stage.removeListener('frameStart', this._updateVideoTexture)\n    this._updatingVideoTexture = false\n    this.videoView.visible = false\n\n    if (this.videoTexture.options.source) {\n      const gl = stage.gl\n      gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n      gl.clearColor(0, 0, 0, 1)\n      gl.clear(gl.COLOR_BUFFER_BIT)\n    }\n  }\n\n  position(top, left) {\n    this.videoView.patch({\n      smooth: {\n        x: left,\n        y: top,\n      },\n    })\n  }\n\n  size(width, height) {\n    this.videoView.patch({\n      smooth: {\n        w: width,\n        h: height,\n      },\n    })\n  }\n\n  show() {\n    this.videoView.setSmooth('alpha', 1)\n  }\n\n  hide() {\n    this.videoView.setSmooth('alpha', 0)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Metrics from '../Metrics'\nimport Log from '../Log'\nimport Ads from '../Ads'\n\nimport events from './events'\nimport autoSetupMixin from '../helpers/autoSetupMixin'\nimport easeExecution from '../helpers/easeExecution'\nimport { ApplicationInstance } from '../Launch'\nimport Settings from '../Settings'\nimport VideoTexture from './VideoTexture'\n\nexport let mediaUrl = url => url\nlet videoEl\nlet videoTexture\nlet metrics\nlet consumer\nlet precision = 1\nlet textureMode = false\n\nexport const initVideoPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\n// todo: add this in a 'Registry' plugin\n// to be able to always clean this up on app close\nlet eventHandlers = {}\n\nconst state = {\n  adsEnabled: false,\n  playing: false,\n  _playingAds: false,\n  get playingAds() {\n    return this._playingAds\n  },\n  set playingAds(val) {\n    if (this._playingAds !== val) {\n      this._playingAds = val\n      fireOnConsumer(val === true ? 'AdStart' : 'AdEnd')\n    }\n  },\n  skipTime: false,\n  playAfterSeek: null,\n}\n\nconst hooks = {\n  play() {\n    state.playing = true\n  },\n  pause() {\n    state.playing = false\n  },\n  seeked() {\n    state.playAfterSeek === true && videoPlayerPlugin.play()\n    state.playAfterSeek = null\n  },\n  abort() {\n    deregisterEventListeners()\n  },\n}\n\nconst withPrecision = val => Math.round(precision * val) + 'px'\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$videoPlayer' + event, args, videoEl.currentTime)\n    consumer.fire('$videoPlayerEvent', event, args, videoEl.currentTime)\n  }\n}\n\nconst fireHook = (event, args) => {\n  hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args)\n}\n\nexport const setupVideoTag = () => {\n  const videoEls = document.getElementsByTagName('video')\n  if (videoEls && videoEls.length) {\n    return videoEls[0]\n  } else {\n    const videoEl = document.createElement('video')\n    videoEl.setAttribute('id', 'video-player')\n    videoEl.setAttribute('width', withPrecision(1920))\n    videoEl.setAttribute('height', withPrecision(1080))\n    videoEl.setAttribute('crossorigin', 'anonymous')\n    videoEl.style.position = 'absolute'\n    videoEl.style.zIndex = '1'\n    videoEl.style.display = 'none'\n    videoEl.style.visibility = 'hidden'\n    videoEl.style.top = withPrecision(0)\n    videoEl.style.left = withPrecision(0)\n    videoEl.style.width = withPrecision(1920)\n    videoEl.style.height = withPrecision(1080)\n    document.body.appendChild(videoEl)\n    return videoEl\n  }\n}\n\nexport const setUpVideoTexture = () => {\n  if (!ApplicationInstance.tag('VideoTexture')) {\n    const el = ApplicationInstance.stage.c({\n      type: VideoTexture,\n      ref: 'VideoTexture',\n      zIndex: 0,\n      videoEl,\n    })\n    ApplicationInstance.childList.addAt(el, 0)\n  }\n  return ApplicationInstance.tag('VideoTexture')\n}\n\nconst registerEventListeners = () => {\n  Log.info('VideoPlayer', 'Registering event listeners')\n  Object.keys(events).forEach(event => {\n    const handler = e => {\n      // Fire a metric for each event (if it exists on the metrics object)\n      if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n        metrics[event]({ currentTime: videoEl.currentTime })\n      }\n      // fire an internal hook\n      fireHook(event, { videoElement: videoEl, event: e })\n\n      // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n      fireOnConsumer(events[event], { videoElement: videoEl, event: e })\n    }\n\n    eventHandlers[event] = handler\n    videoEl.addEventListener(event, handler)\n  })\n}\n\nconst deregisterEventListeners = () => {\n  Log.info('VideoPlayer', 'Deregistering event listeners')\n  Object.keys(eventHandlers).forEach(event => {\n    videoEl.removeEventListener(event, eventHandlers[event])\n  })\n  eventHandlers = {}\n}\n\nconst videoPlayerPlugin = {\n  consumer(component) {\n    consumer = component\n  },\n\n  position(top = 0, left = 0) {\n    videoEl.style.left = withPrecision(left)\n    videoEl.style.top = withPrecision(top)\n    if (textureMode === true) {\n      videoTexture.position(top, left)\n    }\n  },\n\n  size(width = 1920, height = 1080) {\n    videoEl.style.width = withPrecision(width)\n    videoEl.style.height = withPrecision(height)\n    videoEl.width = parseFloat(videoEl.style.width)\n    videoEl.height = parseFloat(videoEl.style.height)\n    if (textureMode === true) {\n      videoTexture.size(width, height)\n    }\n  },\n\n  area(top = 0, right = 1920, bottom = 1080, left = 0) {\n    this.position(top, left)\n    this.size(right - left, bottom - top)\n  },\n\n  open(url, details = {}) {\n    if (!this.canInteract) return\n    metrics = Metrics.media(url)\n    // prep the media url to play depending on platform\n    url = mediaUrl(url)\n\n    // if url is same as current clear (which is effectively a reload)\n    if (this.src == url) {\n      this.clear()\n    }\n\n    this.hide()\n    deregisterEventListeners()\n\n    // preload the video to get duration (for ads)\n    //.. currently actually not working because loadedmetadata didn't work reliably on Sky boxes\n    videoEl.setAttribute('src', url)\n    videoEl.load()\n\n    // const onLoadedMetadata = () => {\n    // videoEl.removeEventListener('loadedmetadata', onLoadedMetadata)\n    const config = { enabled: state.adsEnabled, duration: 300 } // this.duration ||\n    if (details.videoId) {\n      config.caid = details.videoId\n    }\n    Ads.get(config, consumer).then(ads => {\n      state.playingAds = true\n      ads.prerolls().then(() => {\n        state.playingAds = false\n        registerEventListeners()\n        if (this.src !== url) {\n          videoEl.setAttribute('src', url)\n          videoEl.load()\n        }\n        this.show()\n        setTimeout(() => {\n          this.play()\n        })\n      })\n    })\n    // }\n\n    // videoEl.addEventListener('loadedmetadata', onLoadedMetadata)\n  },\n\n  reload() {\n    if (!this.canInteract) return\n    const url = videoEl.getAttribute('src')\n    this.close()\n    this.open(url)\n  },\n\n  close() {\n    Ads.cancel()\n    if (state.playingAds) {\n      state.playingAds = false\n      Ads.stop()\n      // call self in next tick\n      setTimeout(() => {\n        this.close()\n      })\n    }\n    if (!this.canInteract) return\n    this.clear()\n    this.hide()\n    deregisterEventListeners()\n  },\n\n  clear() {\n    if (!this.canInteract) return\n    // pause the video first to disable sound\n    this.pause()\n    if (textureMode === true) videoTexture.stop()\n    fireOnConsumer('Clear', { videoElement: videoEl })\n    videoEl.removeAttribute('src')\n    videoEl.load()\n  },\n\n  play() {\n    if (!this.canInteract) return\n    if (textureMode === true) videoTexture.start()\n    videoEl.play()\n  },\n\n  pause() {\n    if (!this.canInteract) return\n    videoEl.pause()\n  },\n\n  playPause() {\n    if (!this.canInteract) return\n    this.playing === true ? this.pause() : this.play()\n  },\n\n  mute(muted = true) {\n    if (!this.canInteract) return\n    videoEl.muted = muted\n  },\n\n  loop(looped = true) {\n    videoEl.loop = looped\n  },\n\n  seek(time) {\n    if (!this.canInteract) return\n    if (!this.src) return\n    // define whether should continue to play after seek is complete (in seeked hook)\n    if (state.playAfterSeek === null) {\n      state.playAfterSeek = !!state.playing\n    }\n    // pause before actually seeking\n    this.pause()\n    // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n    videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1))\n  },\n\n  skip(seconds) {\n    if (!this.canInteract) return\n    if (!this.src) return\n\n    state.skipTime = (state.skipTime || videoEl.currentTime) + seconds\n    easeExecution(() => {\n      this.seek(state.skipTime)\n      state.skipTime = false\n    }, 300)\n  },\n\n  show() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.show()\n    } else {\n      videoEl.style.display = 'block'\n      videoEl.style.visibility = 'visible'\n    }\n  },\n\n  hide() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.hide()\n    } else {\n      videoEl.style.display = 'none'\n      videoEl.style.visibility = 'hidden'\n    }\n  },\n\n  enableAds(enabled = true) {\n    state.adsEnabled = enabled\n  },\n\n  /* Public getters */\n  get duration() {\n    return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration)\n  },\n\n  get currentTime() {\n    return videoEl && videoEl.currentTime\n  },\n\n  get muted() {\n    return videoEl && videoEl.muted\n  },\n\n  get looped() {\n    return videoEl && videoEl.loop\n  },\n\n  get src() {\n    return videoEl && videoEl.getAttribute('src')\n  },\n\n  get playing() {\n    return state.playing\n  },\n\n  get playingAds() {\n    return state.playingAds\n  },\n\n  get canInteract() {\n    // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n    return state.playingAds === false\n  },\n\n  get top() {\n    return videoEl && parseFloat(videoEl.style.top)\n  },\n\n  get left() {\n    return videoEl && parseFloat(videoEl.style.left)\n  },\n\n  get bottom() {\n    return videoEl && parseFloat(videoEl.style.top - videoEl.style.height)\n  },\n\n  get right() {\n    return videoEl && parseFloat(videoEl.style.left - videoEl.style.width)\n  },\n\n  get width() {\n    return videoEl && parseFloat(videoEl.style.width)\n  },\n\n  get height() {\n    return videoEl && parseFloat(videoEl.style.height)\n  },\n\n  get visible() {\n    if (textureMode === true) {\n      return videoTexture.isVisible\n    } else {\n      return videoEl && videoEl.style.display === 'block'\n    }\n  },\n\n  get adsEnabled() {\n    return state.adsEnabled\n  },\n\n  // prefixed with underscore to indicate 'semi-private'\n  // because it's not recommended to interact directly with the video element\n  get _videoEl() {\n    return videoEl\n  },\n}\n\nexport default autoSetupMixin(videoPlayerPlugin, () => {\n  precision =\n    (ApplicationInstance &&\n      ApplicationInstance.stage &&\n      ApplicationInstance.stage.getRenderPrecision()) ||\n    precision\n\n  videoEl = setupVideoTag()\n\n  textureMode = Settings.get('platform', 'textureMode', false)\n  if (textureMode === true) {\n    videoTexture = setUpVideoTexture()\n  }\n})\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mediaUrl } from '../VideoPlayer'\n\nlet consumer\n\nlet getAds = () => {\n  // todo: enable some default ads during development, maybe from the settings.json\n  return Promise.resolve({\n    prerolls: [],\n    midrolls: [],\n    postrolls: [],\n  })\n}\n\nexport const initAds = config => {\n  if (config.getAds) {\n    getAds = config.getAds\n  }\n}\n\nconst state = {\n  active: false,\n}\n\nconst playSlot = (slot = []) => {\n  return slot.reduce((promise, ad) => {\n    return promise.then(() => {\n      return playAd(ad)\n    })\n  }, Promise.resolve(null))\n}\n\nconst playAd = ad => {\n  return new Promise(resolve => {\n    if (state.active === false) {\n      Log.info('Ad', 'Skipping add due to inactive state')\n      return resolve()\n    }\n    // is it safe to rely on videoplayer plugin already created the video tag?\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.style.display = 'block'\n    videoEl.style.visibility = 'visible'\n    videoEl.src = mediaUrl(ad.url)\n    videoEl.load()\n\n    let timeEvents = null\n    let timeout\n\n    const cleanup = () => {\n      // remove all listeners\n      Object.keys(handlers).forEach(handler =>\n        videoEl.removeEventListener(handler, handlers[handler])\n      )\n      resolve()\n    }\n    const handlers = {\n      play() {\n        Log.info('Ad', 'Play ad', ad.url)\n        fireOnConsumer('Play', ad)\n        sendBeacon(ad.callbacks, 'defaultImpression')\n      },\n      ended() {\n        fireOnConsumer('Ended', ad)\n        sendBeacon(ad.callbacks, 'complete')\n        cleanup()\n      },\n      timeupdate() {\n        if (!timeEvents && videoEl.duration) {\n          // calculate when to fire the time based events (now that duration is known)\n          timeEvents = {\n            firstQuartile: videoEl.duration / 4,\n            midPoint: videoEl.duration / 2,\n            thirdQuartile: (videoEl.duration / 4) * 3,\n          }\n          Log.info('Ad', 'Calculated quartiles times', { timeEvents })\n        }\n        if (\n          timeEvents &&\n          timeEvents.firstQuartile &&\n          videoEl.currentTime >= timeEvents.firstQuartile\n        ) {\n          fireOnConsumer('FirstQuartile', ad)\n          delete timeEvents.firstQuartile\n          sendBeacon(ad.callbacks, 'firstQuartile')\n        }\n        if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n          fireOnConsumer('MidPoint', ad)\n          delete timeEvents.midPoint\n          sendBeacon(ad.callbacks, 'midPoint')\n        }\n        if (\n          timeEvents &&\n          timeEvents.thirdQuartile &&\n          videoEl.currentTime >= timeEvents.thirdQuartile\n        ) {\n          fireOnConsumer('ThirdQuartile', ad)\n          delete timeEvents.thirdQuartile\n          sendBeacon(ad.callbacks, 'thirdQuartile')\n        }\n      },\n      stalled() {\n        fireOnConsumer('Stalled', ad)\n        timeout = setTimeout(() => {\n          cleanup()\n        }, 5000) // make timeout configurable\n      },\n      canplay() {\n        timeout && clearTimeout(timeout)\n      },\n      error() {\n        fireOnConsumer('Error', ad)\n        cleanup()\n      },\n      // this doesn't work reliably on sky box, moved logic to timeUpdate event\n      // loadedmetadata() {\n      //   // calculate when to fire the time based events (now that duration is known)\n      //   timeEvents = {\n      //     firstQuartile: videoEl.duration / 4,\n      //     midPoint: videoEl.duration / 2,\n      //     thirdQuartile: (videoEl.duration / 4) * 3,\n      //   }\n      // },\n      abort() {\n        cleanup()\n      },\n      // todo: pause, resume, mute, unmute beacons\n    }\n    // add all listeners\n    Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]))\n\n    videoEl.play()\n  })\n}\n\nconst sendBeacon = (callbacks, event) => {\n  if (callbacks && callbacks[event]) {\n    Log.info('Ad', 'Sending beacon', event, callbacks[event])\n    return callbacks[event].reduce((promise, url) => {\n      return promise.then(() =>\n        fetch(url)\n          // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n          // note: for fetch failed http responses don't throw an Error :)\n          .then(response => {\n            if (response.status === 200) {\n              fireOnConsumer('Beacon' + event + 'Sent')\n            } else {\n              fireOnConsumer('Beacon' + event + 'Failed' + response.status)\n            }\n            Promise.resolve(null)\n          })\n          .catch(() => {\n            Promise.resolve(null)\n          })\n      )\n    }, Promise.resolve(null))\n  } else {\n    Log.info('Ad', 'No callback found for ' + event)\n  }\n}\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$ad' + event, args)\n    consumer.fire('$adEvent', event, args)\n  }\n}\n\nexport default {\n  get(config, videoPlayerConsumer) {\n    if (config.enabled === false) {\n      return Promise.resolve({\n        prerolls() {\n          return Promise.resolve()\n        },\n      })\n    }\n    consumer = videoPlayerConsumer\n\n    return new Promise(resolve => {\n      Log.info('Ad', 'Starting session')\n      getAds(config).then(ads => {\n        Log.info('Ad', 'API result', ads)\n        resolve({\n          prerolls() {\n            if (ads.preroll) {\n              state.active = true\n              fireOnConsumer('PrerollSlotImpression', ads)\n              sendBeacon(ads.preroll.callbacks, 'slotImpression')\n              return playSlot(ads.preroll.ads).then(() => {\n                fireOnConsumer('PrerollSlotEnd', ads)\n                sendBeacon(ads.preroll.callbacks, 'slotEnd')\n                state.active = false\n              })\n            }\n            return Promise.resolve()\n          },\n          midrolls() {\n            return Promise.resolve()\n          },\n          postrolls() {\n            return Promise.resolve()\n          },\n        })\n      })\n    })\n  },\n  cancel() {\n    Log.info('Ad', 'Cancel Ad')\n    state.active = false\n  },\n  stop() {\n    Log.info('Ad', 'Stop Ad')\n    state.active = false\n    // fixme: duplication\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.pause()\n    videoEl.removeAttribute('src')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default (sourceObject, setup = () => {}) => {\n  let ready = false\n\n  const doSetup = () => {\n    if (ready === false) {\n      setup()\n      ready = true\n    }\n  }\n\n  return Object.keys(sourceObject).reduce((obj, key) => {\n    if (typeof sourceObject[key] === 'function') {\n      obj[key] = function() {\n        doSetup()\n        return sourceObject[key].apply(sourceObject, arguments)\n      }\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n      obj.__defineGetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject)\n      })\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n      obj.__defineSetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(\n          sourceObject,\n          arguments\n        )\n      })\n    } else {\n      obj[key] = sourceObject[key]\n    }\n    return obj\n  }, {})\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class ScaledImageTexture extends Lightning.textures.ImageTexture {\n  constructor(stage) {\n    super(stage)\n    this._scalingOptions = undefined\n  }\n\n  set options(options) {\n    this.resizeMode = this._scalingOptions = options\n  }\n\n  _getLookupId() {\n    return `${this._src}-${this._scalingOptions.type}-${this._scalingOptions.w}-${this._scalingOptions.h}`\n  }\n\n  getNonDefaults() {\n    const obj = super.getNonDefaults()\n    if (this._src) {\n      obj.src = this._src\n    }\n    return obj\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Pin from '../Pin'\n\nclass PinInput extends Lightning.Component {\n  static _template() {\n    return {\n      w: 120,\n      h: 150,\n      rect: true,\n      color: 0xff949393,\n      alpha: 0.5,\n      shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n      Nr: {\n        w: w => w,\n        y: 24,\n        text: {\n          text: '',\n          textColor: 0xff333333,\n          fontSize: 80,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n        },\n      },\n    }\n  }\n\n  set index(v) {\n    this.x = v * (120 + 24)\n  }\n\n  set nr(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    if (v) {\n      this.setSmooth('alpha', 1)\n    } else {\n      this.setSmooth('alpha', 0.5)\n    }\n\n    this.tag('Nr').patch({\n      text: {\n        text: (v && v.toString()) || '',\n        fontSize: v === '*' ? 120 : 80,\n      },\n    })\n\n    if (v && v !== '*') {\n      this._timeout = setTimeout(() => {\n        this._timeout = null\n        this.nr = '*'\n      }, 750)\n    }\n  }\n}\n\nexport default class PinDialog extends Lightning.Component {\n  static _template() {\n    return {\n      w: w => w,\n      h: h => h,\n      rect: true,\n      color: 0xdd000000,\n      alpha: 0.000001,\n      Dialog: {\n        w: 648,\n        h: 320,\n        y: h => (h - 320) / 2,\n        x: w => (w - 648) / 2,\n        rect: true,\n        color: 0xdd333333,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n        Info: {\n          y: 24,\n          x: 48,\n          text: { text: 'Please enter your PIN', fontSize: 32 },\n        },\n        Msg: {\n          y: 260,\n          x: 48,\n          text: { text: '', fontSize: 28, textColor: 0xffffffff },\n        },\n        Code: {\n          x: 48,\n          y: 96,\n        },\n      },\n    }\n  }\n\n  _init() {\n    const children = []\n    for (let i = 0; i < 4; i++) {\n      children.push({\n        type: PinInput,\n        index: i,\n      })\n    }\n\n    this.tag('Code').children = children\n  }\n\n  get pin() {\n    if (!this._pin) this._pin = ''\n    return this._pin\n  }\n\n  set pin(v) {\n    if (v.length <= 4) {\n      const maskedPin = new Array(Math.max(v.length - 1, 0)).fill('*', 0, v.length - 1)\n      v.length && maskedPin.push(v.length > this._pin.length ? v.slice(-1) : '*')\n      for (let i = 0; i < 4; i++) {\n        this.tag('Code').children[i].nr = maskedPin[i] || ''\n      }\n      this._pin = v\n    }\n  }\n\n  get msg() {\n    if (!this._msg) this._msg = ''\n    return this._msg\n  }\n\n  set msg(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    this._msg = v\n    if (this._msg) {\n      this.tag('Msg').text = this._msg\n      this.tag('Info').setSmooth('alpha', 0.5)\n      this.tag('Code').setSmooth('alpha', 0.5)\n    } else {\n      this.tag('Msg').text = ''\n      this.tag('Info').setSmooth('alpha', 1)\n      this.tag('Code').setSmooth('alpha', 1)\n    }\n    this._timeout = setTimeout(() => {\n      this.msg = ''\n    }, 2000)\n  }\n\n  _firstActive() {\n    this.setSmooth('alpha', 1)\n  }\n\n  _handleKey(event) {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      const val = parseInt(event.key)\n      if (val > -1) {\n        this.pin += val\n      }\n    }\n  }\n\n  _handleBack() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      if (this.pin.length) {\n        this.pin = this.pin.slice(0, this.pin.length - 1)\n      } else {\n        Pin.hide()\n        this.resolve(false)\n      }\n    }\n  }\n\n  _handleEnter() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      Pin.submit(this.pin)\n        .then(val => {\n          this.msg = 'Unlocking ...'\n          setTimeout(() => {\n            Pin.hide()\n          }, 1000)\n          this.resolve(val)\n        })\n        .catch(e => {\n          this.msg = e\n          this.reject(e)\n        })\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet ws = null;\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket;\n}\nvar ws_1 = ws;\n\nconst requestsQueue = {};\nconst listeners = {};\n\nvar requestQueueResolver = data => {\n  if (typeof data === 'string') {\n    data = JSON.parse(data.normalize().replace(/\\\\x([0-9A-Fa-f]{2})/g, ''));\n  }\n  if (data.id) {\n    const request = requestsQueue[data.id];\n    if (request) {\n      if ('result' in data) request.resolve(data.result);\n      else request.reject(data.error);\n      delete requestsQueue[data.id];\n    } else {\n      console.log('no pending request found with id ' + data.id);\n    }\n  }\n};\n\nvar notificationListener = data => {\n  if (typeof data === 'string') {\n    data = JSON.parse(data.normalize().replace(/\\\\x([0-9A-Fa-f]{2})/g, ''));\n  }\n  if (!data.id && data.method) {\n    const callbacks = listeners[data.method];\n    if (callbacks && Array.isArray(callbacks) && callbacks.length) {\n      callbacks.forEach(callback => {\n        callback(data.params);\n      });\n    }\n  }\n};\n\nconst protocol = 'ws://';\nconst host = 'localhost';\nconst endpoint = '/jsonrpc';\nconst port = 80;\nvar makeWebsocketAddress = options => {\n  return [\n    (options && options.protocol) || protocol,\n    (options && options.host) || host,\n    ':' + ((options && options.port) || port),\n    (options && options.endpoint) || endpoint,\n    options && options.token ? '?token=' + options.token : null,\n  ].join('')\n};\n\nconst protocols = 'notification';\nlet socket = null;\nvar connect = options => {\n  return new Promise((resolve, reject) => {\n    if (socket && socket.readyState === 1) return resolve(socket)\n    if (socket && socket.readyState === 0) {\n      const waitForOpen = () => {\n        socket.removeEventListener('open', waitForOpen);\n        resolve(socket);\n      };\n      return socket.addEventListener('open', waitForOpen)\n    }\n    if (socket === null) {\n      socket = new ws_1(makeWebsocketAddress(options), protocols);\n      socket.addEventListener('message', message => {\n        if (options.debug) {\n          console.log(' ');\n          console.log('API REPONSE:');\n          console.log(JSON.stringify(message.data, null, 2));\n          console.log(' ');\n        }\n        requestQueueResolver(message.data);\n      });\n      socket.addEventListener('message', message => {\n        notificationListener(message.data);\n      });\n      socket.addEventListener('error', () => {\n        notificationListener({\n          method: 'client.ThunderJS.events.error',\n        });\n        socket = null;\n      });\n      const handleConnectClosure = event => {\n        socket = null;\n        reject(event);\n      };\n      socket.addEventListener('close', handleConnectClosure);\n      socket.addEventListener('open', () => {\n        notificationListener({\n          method: 'client.ThunderJS.events.connect',\n        });\n        socket.removeEventListener('close', handleConnectClosure);\n        socket.addEventListener('close', () => {\n          notificationListener({\n            method: 'client.ThunderJS.events.disconnect',\n          });\n          socket = null;\n        });\n        resolve(socket);\n      });\n    } else {\n      socket = null;\n      reject('Socket error');\n    }\n  })\n};\n\nvar makeBody = (requestId, plugin, method, params, version) => {\n  params ? delete params.version : null;\n  const body = {\n    jsonrpc: '2.0',\n    id: requestId,\n    method: [plugin, version, method].join('.'),\n  };\n  params || params === false\n    ?\n      typeof params === 'object' && Object.keys(params).length === 0\n      ? null\n      : (body.params = params)\n    : null;\n  return body\n};\n\nvar getVersion = (versionsConfig, plugin, params) => {\n  const defaultVersion = 1;\n  let version;\n  if ((version = params && params.version)) {\n    return version\n  }\n  return versionsConfig\n    ? versionsConfig[plugin] || versionsConfig.default || defaultVersion\n    : defaultVersion\n};\n\nlet id = 0;\nvar makeId = () => {\n  id = id + 1;\n  return id\n};\n\nvar execRequest = (options, body) => {\n  return connect(options).then(connection => {\n    connection.send(JSON.stringify(body));\n  })\n};\n\nvar API = options => {\n  return {\n    request(plugin, method, params) {\n      return new Promise((resolve, reject) => {\n        const requestId = makeId();\n        const version = getVersion(options.versions, plugin, params);\n        const body = makeBody(requestId, plugin, method, params, version);\n        if (options.debug) {\n          console.log(' ');\n          console.log('API REQUEST:');\n          console.log(JSON.stringify(body, null, 2));\n          console.log(' ');\n        }\n        requestsQueue[requestId] = {\n          body,\n          resolve,\n          reject,\n        };\n        execRequest(options, body).catch(e => {\n          reject(e);\n        });\n      })\n    },\n  }\n};\n\nvar DeviceInfo = {\n  freeRam(params) {\n    return this.call('systeminfo', params).then(res => {\n      return res.freeram\n    })\n  },\n  version(params) {\n    return this.call('systeminfo', params).then(res => {\n      return res.version\n    })\n  },\n};\n\nvar plugins = {\n  DeviceInfo,\n};\n\nfunction listener(plugin, event, callback, errorCallback) {\n  const thunder = this;\n  const index = register.call(this, plugin, event, callback, errorCallback);\n  return {\n    dispose() {\n      const listener_id = makeListenerId(plugin, event);\n      if (listeners[listener_id] === undefined) return\n      listeners[listener_id].splice(index, 1);\n      if (listeners[listener_id].length === 0) {\n        unregister.call(thunder, plugin, event, errorCallback);\n      }\n    },\n  }\n}\nconst makeListenerId = (plugin, event) => {\n  return ['client', plugin, 'events', event].join('.')\n};\nconst register = function(plugin, event, callback, errorCallback) {\n  const listener_id = makeListenerId(plugin, event);\n  if (!listeners[listener_id]) {\n    listeners[listener_id] = [];\n    if (plugin !== 'ThunderJS') {\n      const method = 'register';\n      const request_id = listener_id\n        .split('.')\n        .slice(0, -1)\n        .join('.');\n      const params = {\n        event,\n        id: request_id,\n      };\n      this.api.request(plugin, method, params).catch(e => {\n        if (typeof errorCallback === 'function') errorCallback(e.message);\n      });\n    }\n  }\n  listeners[listener_id].push(callback);\n  return listeners[listener_id].length - 1\n};\nconst unregister = function(plugin, event, errorCallback) {\n  const listener_id = makeListenerId(plugin, event);\n  delete listeners[listener_id];\n  if (plugin !== 'ThunderJS') {\n    const method = 'unregister';\n    const request_id = listener_id\n      .split('.')\n      .slice(0, -1)\n      .join('.');\n    const params = {\n      event,\n      id: request_id,\n    };\n    this.api.request(plugin, method, params).catch(e => {\n      if (typeof errorCallback === 'function') errorCallback(e.message);\n    });\n  }\n};\n\nlet api;\nvar thunderJS = options => {\n  if (\n    options.token === undefined &&\n    typeof window !== 'undefined' &&\n    window.thunder &&\n    typeof window.thunder.token === 'function'\n  ) {\n    options.token = window.thunder.token();\n  }\n  api = API(options);\n  return wrapper({ ...thunder(options), ...plugins })\n};\nconst resolve = (result, args) => {\n  if (\n    typeof result !== 'object' ||\n    (typeof result === 'object' && (!result.then || typeof result.then !== 'function'))\n  ) {\n    result = new Promise((resolve, reject) => {\n      result instanceof Error === false ? resolve(result) : reject(result);\n    });\n  }\n  const cb = typeof args[args.length - 1] === 'function' ? args[args.length - 1] : null;\n  if (cb) {\n    result.then(res => cb(null, res)).catch(err => cb(err));\n  } else {\n    return result\n  }\n};\nconst thunder = options => ({\n  options,\n  plugin: false,\n  call() {\n    const args = [...arguments];\n    if (this.plugin) {\n      if (args[0] !== this.plugin) {\n        args.unshift(this.plugin);\n      }\n    }\n    const plugin = args[0];\n    const method = args[1];\n    if (typeof this[plugin][method] == 'function') {\n      return this[plugin][method](args[2])\n    }\n    return this.api.request.apply(this, args)\n  },\n  registerPlugin(name, plugin) {\n    this[name] = wrapper(Object.assign(Object.create(thunder), plugin, { plugin: name }));\n  },\n  subscribe() {\n  },\n  on() {\n    const args = [...arguments];\n    if (['connect', 'disconnect', 'error'].indexOf(args[0]) !== -1) {\n      args.unshift('ThunderJS');\n    } else {\n      if (this.plugin) {\n        if (args[0] !== this.plugin) {\n          args.unshift(this.plugin);\n        }\n      }\n    }\n    return listener.apply(this, args)\n  },\n  once() {\n    console.log('todo ...');\n  },\n});\nconst wrapper = obj => {\n  return new Proxy(obj, {\n    get(target, propKey) {\n      const prop = target[propKey];\n      if (propKey === 'api') {\n        return api\n      }\n      if (typeof prop !== 'undefined') {\n        if (typeof prop === 'function') {\n          if (['on', 'once', 'subscribe'].indexOf(propKey) > -1) {\n            return function(...args) {\n              return prop.apply(this, args)\n            }\n          }\n          return function(...args) {\n            return resolve(prop.apply(this, args), args)\n          }\n        }\n        if (typeof prop === 'object') {\n          return wrapper(\n            Object.assign(Object.create(thunder(target.options)), prop, { plugin: propKey })\n          )\n        }\n        return prop\n      } else {\n        if (target.plugin === false) {\n          return wrapper(\n            Object.assign(Object.create(thunder(target.options)), {}, { plugin: propKey })\n          )\n        }\n        return function(...args) {\n          args.unshift(propKey);\n          return target.call.apply(this, args)\n        }\n      }\n    },\n  })\n};\n\nexport default thunderJS;\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render items in main view.\n */\nexport default class ListItem extends Lightning.Component {\n  /**\n   * Function to render various elements in the main view item.\n   */\n  static _template() {\n    return {\n      Item: {\n        x: 30,\n        y: 18,\n        Shadow: {\n          alpha: 0,\n          color: 0xffa9a9a9,\n        },\n        Title: {\n          text: {\n            fontSize: 27,\n            textColor: 0xffffffff,\n          },\n          mountX: 0.5,\n          alpha: 0,\n        },\n        Bg: {},\n        Image: {},\n      },\n    }\n  }\n\n  _init() {\n    if (this.data.show) {\n      this.tag('Title').patch({\n        x: this.x_text,\n        y: this.y_text,\n        alpha: 1,\n        text: { text: this.data.title },\n      })\n    }\n    this.tag('Title').patch({\n      x: this.x_text,\n      y: this.y_text,\n      text: { text: this.data.displayName },\n    })\n    this.tag('Shadow').patch({\n      scale: this.unfocus,\n      texture: Lightning.Tools.getShadowRect(this.w, this.h, 4, 10, 0),\n    })\n    this.tag('Bg').patch({\n      rect: true,\n      color: 0xff000000,\n      w: this.w,\n      h: this.h,\n    })\n    if (this.data.url.startsWith('/images')) {\n      this.tag('Image').patch({\n        src: Utils.asset(this.data.url),\n        w: this.w,\n        h: this.h,\n        scale: this.unfocus,\n      })\n    } else {\n      this.tag('Image').patch({ src: this.data.url, w: this.w, h: this.h })\n    }\n  }\n\n  /**\n   * Function to change properties of item during focus.\n   */\n  _focus() {\n    this.tag('Bg').scale = this.focus\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.focus })\n    this.tag('Title').patch({\n      x: this.x_text,\n      y: this.y_text,\n      text: { text: this.data.displayName },\n    })\n    this.tag('Shadow').patch({\n      scale: this.focus,\n      x: -7,\n      y: -7,\n      alpha: 1,\n      texture: Lightning.Tools.getShadowRect(this.w + 14, this.h + 14, 4, 10, 0),\n    })\n    this.tag('Title').patch({ alpha: 1 })\n    this.tag('Item').patch({ zIndex: 1 })\n  }\n\n  /**\n   * Function to change properties of item during unfocus.\n   */\n  _unfocus() {\n    this.tag('Bg').scale = this.unfocus\n    this.tag('Image').patch({ x: 0, y: 0, w: this.w, h: this.h, scale: this.unfocus })\n    this.tag('Shadow').patch({ scale: this.unfocus, alpha: 0 })\n    this.tag('Title').patch({ alpha: 0 })\n    this.tag('Item').patch({ zIndex: 0 })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\nvar activatedWeb = false\nvar activatedLightning = false\nvar activatedCobalt = false\nvar webUrl = ''\nvar lightningUrl = ''\nvar activatedNative = false\nvar nativeUrl = ''\nvar cobaltUrl = ''\nconst config = {\n  host: '127.0.0.1',\n  port: 9998,\n  default: 1,\n}\nvar thunder = ThunderJS(config)\n/**\n * Class that contains functions which commuicates with thunder API's\n */\nexport default class AppApi {\n  checkForInternet() {\n    return new Promise((resolve, reject) => {\n      let i = 0\n      var poll = () => {\n        i++\n        this.getIP().then(result => {\n          if (result == true) {\n            resolve(result)\n          } else if (i < 10) poll()\n          else resolve(false)\n        })\n      }\n      poll()\n    })\n  }\n\n  /**\n   * Function to launch Html app.\n   * @param {String} url url of app.\n   */\n  getIP() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.System'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'getDeviceInfo', { params: 'estb_ip' })\n            .then(result => {\n              resolve(result.success)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {})\n    })\n  }\n  /**\n   * Function to get resolution of the display screen.\n   */\n  getResolution() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.DisplaySettings'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'getCurrentResolution', { params: 'HDMI0' })\n            .then(result => {\n              resolve(result.resolution)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {\n          console.log('Display Error', err)\n        })\n    })\n  }\n\n  /**\n   * Function to set the display resolution.\n   */\n  setResolution() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.DisplaySettings'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'setCurrentResolution', {\n              videoDisplay: 'HDMI0',\n              resolution: '1080p',\n              persist: true,\n            })\n            .then(result => {\n              resolve(result.success)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {\n          console.log('Display Error', err)\n        })\n    })\n  }\n\n  /**\n   * Function to launch Html app.\n   * @param {String} url url of app.\n   */\n  launchWeb(url) {\n    const childCallsign = 'HtmlApp'\n    if (webUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launch', {\n          callsign: childCallsign,\n          type: childCallsign,\n          uri: url,\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {})\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    webUrl = url\n    activatedWeb = true\n  }\n\n  /**\n   * Function to launch Lightning app.\n   * @param {String} url url of app.\n   */\n  launchLightning(url) {\n    const childCallsign = 'LightningApp'\n    if (lightningUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launch', {\n          callsign: childCallsign,\n          type: childCallsign,\n          uri: url,\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {})\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    lightningUrl = url\n    activatedLightning = true\n  }\n\n  /**\n   * Function to launch Cobalt app.\n   * @param {String} url url of app.\n   */\n  launchCobalt(url) {\n    const childCallsign = 'Cobalt'\n    thunder\n      .call('org.rdk.RDKShell', 'launch', {\n        callsign: childCallsign,\n        type: childCallsign,\n      })\n      .then(() => {\n        thunder.call('org.rdk.RDKShell', 'moveToFront', {\n          client: childCallsign,\n        })\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n      })\n      .catch(err => {})\n    activatedCobalt = true\n  }\n\n  /**\n   * Function to launch Resident app.\n   * @param {String} url url of app.\n   */\n  launchResident(url) {\n    const childCallsign = 'ResidentApp'\n    thunder\n      .call('org.rdk.RDKShell', 'launch', {\n        callsign: childCallsign,\n        type: childCallsign,\n        uri: url,\n      })\n      .then(() => {\n        thunder.call('org.rdk.RDKShell', 'moveToFront', {\n          client: childCallsign,\n        })\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n      })\n      .catch(err => {\n        console.log('org.rdk.RDKShell launch ' + JSON.stringify(err))\n      })\n  }\n\n  /**\n   * Function to suspend html app.\n   */\n  suspendWeb() {\n    webUrl = ''\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'HtmlApp' })\n  }\n\n  /**\n   * Function to suspend lightning app.\n   */\n  suspendLightning() {\n    lightningUrl = ''\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'LightningApp' })\n  }\n\n  /**\n   * Function to suspend cobalt app.\n   */\n  suspendCobalt() {\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'Cobalt' })\n  }\n\n  /**\n   * Function to deactivate html app.\n   */\n  deactivateWeb() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'HtmlApp' })\n    activatedWeb = false\n    webUrl = ''\n  }\n\n  /**\n   * Function to deactivate cobalt app.\n   */\n  deactivateCobalt() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'Cobalt' })\n    activatedCobalt = false\n    cobaltUrl = ''\n  }\n\n  /**\n   * Function to deactivate lightning app.\n   */\n  deactivateLightning() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'LightningApp' })\n    activatedLightning = false\n    lightningUrl = ''\n  }\n\n  /**\n   * Function to set visibility to client apps.\n   * @param {client} client client app.\n   * @param {visible} visible value of visibility.\n   */\n  setVisibility(client, visible) {\n    thunder.call('org.rdk.RDKShell', 'setVisibility', {\n      client: client,\n      visible: visible,\n    })\n  }\n  /**\n   * Function to launch Native app.\n   * @param {String} url url of app.\n   */\n  launchNative(url) {\n    const childCallsign = 'testApp'\n    if (nativeUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launchApplication', {\n          client: childCallsign,\n          uri: url,\n          mimeType: 'application/native'\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {\n          console.log('org.rdk.RDKShell launch ' + JSON.stringify(err))\n        })\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    nativeUrl = url\n    activatedNative = true\n  }\n\n\n\n/**\n   * Function to kill native app.\n   */\n  killNative() {\n    thunder.call('org.rdk.RDKShell', 'kill', { callsign: 'testApp' })\n    activatedNative = false\n    nativeUrl = ''\n  }\n\n  static pluginStatus(plugin) {\n    switch (plugin) {\n      case 'WebApp':\n        return activatedWeb\n      case 'Cobalt':\n        return activatedCobalt\n      case 'Lightning':\n        return activatedLightning\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Variable to store the timer\n */\nvar timeout\n\n/**\n * Class to render the UI controls for the video player.\n */\nexport default class PlayerControls extends Lightning.Component {\n  /**\n   * Function to create components for the player controls.\n   */\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 410,\n      color: 0x4025262a,\n      Title: {\n        x: 90,\n        y: 15,\n      },\n      Subtitle: {\n        x: 90,\n        y: 88.5,\n      },\n      NetworkLogo: {\n        x: 1740,\n        y: 82.5,\n      },\n      TimeBar: {\n        x: 90,\n        y: 163.5,\n        texture: Lightning.Tools.getRoundRect(1740, 6, 6, 0, 0, true, 0x80eef1f3),\n      },\n      ProgressBar: {\n        x: 90,\n        y: 163.5,\n      },\n      CurrentTime: {\n        x: 90,\n        y: 184.5,\n      },\n      TotalTime: {\n        x: 1680,\n        y: 184.5,\n      },\n      Buttons: {\n        x: 820,\n        y: 240,\n        children: [\n          { src: Utils.asset('images/player/rewind.png'), x: 17, y: 17 },\n          { src: Utils.asset('images/player/pause-focus.png'), x: 17, y: 17 },\n          { src: Utils.asset('images/player/fast-forward.png'), x: 17, y: 17 },\n        ].map((item, idx) => ({\n          x: idx * 100,\n          texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n          ControlIcon: {\n            x: item.x,\n            y: item.y,\n            texture: Lightning.Tools.getSvgTexture(item.src, 50, 50),\n          },\n        })),\n      },\n      Audio: {\n        x: 90,\n        y: 240,\n        texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xff8e8e8e),\n        AudioOptions: {\n          x: 0,\n          y: 25,\n          w: 240,\n          h: 90,\n          text: {\n            fontSize: 30,\n            text: 'Audio Options',\n            textColor: 0xffffffff,\n            textAlign: 'center',\n          },\n        },\n      },\n      Extras: {\n        x: 1700,\n        y: 240,\n        texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xff8e8e8e),\n        ExtrasOptions: {\n          x: 0,\n          y: 25,\n          w: 130,\n          h: 90,\n          text: {\n            fontSize: 30,\n            text: 'Extras',\n            textColor: 0xffffffff,\n            textAlign: 'center',\n          },\n        },\n      },\n    }\n  }\n\n  _init() {\n    /**\n     * Variable to store the duration of the video content.\n     */\n    this.videoDuration = 0\n    this.tag('Buttons').children[0].patch({\n          alpha: 0.4\n    })\n    this.tag('Buttons').children[2].patch({\n      alpha: 0.4\n    })\n    this.tag('Audio').patch({\n      alpha: 0.4\n    })\n    this.tag('Extras').patch({\n      alpha: 0.4\n    })\n  }\n\n  /**\n   * Function to set focus to player controls when the player controls are shown.\n   */\n  _focus() {\n    this._index = 1\n    this.toggle = false\n    this._setState('PlayPause')\n  }\n\n  /**\n   * Function to handle the player controls when they are hidden.\n   */\n  _unfocus() {\n    this._setState('Hidden')\n    clearTimeout(timeout)\n  }\n\n  /**\n   * Function to set the title in the video controls.\n   * @param {String} title title to be displayed in video controls.\n   */\n  set title(title) {\n    this.tag('Title').patch({\n      text: {\n        fontSize: 52.5,\n        textAlign: 'center',\n        text: title,\n      },\n    })\n  }\n\n  /**\n   * Function to set the subtitle in the video control menu.\n   * @param {String} subtitle sub title to be displayed.\n   */\n  set subtitle(subtitle) {\n    this.tag('Subtitle').patch({\n      text: {\n        fontSize: 36,\n        textAlign: 'center',\n        text: subtitle,\n      },\n    })\n  }\n\n  /**\n   * Function to set the network logo in the video control menu.\n   * @param {String} logoPath path to the logo.\n   */\n  set logoPath(logoPath) {\n    this.tag('NetworkLogo').patch({ src: logoPath })\n  }\n\n  /**\n   * Function to set the duration of the video.\n   * @param {String} duration video duration to be set.\n   */\n  set duration(duration) {\n    this.videoDuration = duration\n    this.tag('TotalTime').patch({\n      text: {\n        fontSize: 33,\n        textAlign: 'center',\n        text: this.SecondsTohhmmss(duration),\n      },\n    })\n  }\n\n  /**\n   * Function to set the current video time.\n   * @param {String} currentTime current time to be set.\n   */\n  set currentTime(currentTime) {\n    this.tag('CurrentTime').patch({\n      text: {\n        fontSize: 33,\n        textAlign: 'center',\n        text: this.SecondsTohhmmss(currentTime),\n      },\n    })\n    this.tag('ProgressBar').patch({\n      texture: Lightning.Tools.getRoundRect(\n        (1740 * currentTime) / this.videoDuration,\n        6,\n        6,\n        0,\n        0,\n        true,\n        0xffffffff\n      ),\n      SeekBar: {\n        x: (1740 * currentTime) / this.videoDuration,\n        y: -12,\n        texture: Lightning.Tools.getRoundRect(30, 30, 15, 0, 0, true, 0xffffffff),\n      },\n    })\n  }\n\n  /**\n   * Function to convert time in seconds to hh:mm:ss format.\n   * @param {String} totalSeconds time in seconds.\n   */\n  SecondsTohhmmss(totalSeconds) {\n    this.hours = Math.floor(totalSeconds / 3600)\n    this.minutes = Math.floor((totalSeconds - this.hours * 3600) / 60)\n    this.seconds = totalSeconds - this.hours * 3600 - this.minutes * 60\n    this.seconds = Math.round(totalSeconds) - this.hours * 3600 - this.minutes * 60\n    this.result = this.hours < 10 ? '0' + this.hours : this.hours\n    this.result += ':' + (this.minutes < 10 ? '0' + this.minutes : this.minutes)\n    this.result += ':' + (this.seconds < 10 ? '0' + this.seconds : this.seconds)\n    return this.result\n  }\n\n  /**\n   * Function to hide player controls.\n   */\n  hidePlayerControls() {\n    this.signal('hide')\n  }\n\n  /**\n   * Function to reset the player controls.\n   */\n  reset(state = 'play') {\n    this._setState('PlayPause')\n    if (state === 'pause' || state === 'stop') {\n      this.tag('Buttons')\n        .children[1].tag('ControlIcon')\n        .patch({\n          texture: Lightning.Tools.getSvgTexture(\n            Utils.asset('images/player/play-focus.png'),\n            50,\n            50\n          ),\n          x: 17,\n        })\n      this.toggle = 1\n      return\n    }\n    this.tag('Buttons')\n      .children[1].tag('ControlIcon')\n      .patch({\n        texture: Lightning.Tools.getSvgTexture(\n          Utils.asset('images/player/pause-focus.png'),\n          50,\n          50\n        ),\n        x: 17,\n      })\n    this.toggle = 0\n  }\n\n  /**\n   * Timer function to track the inactivity of the player controls.\n   */\n  timer() {\n    clearTimeout(timeout)\n    timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n\n  /**\n   * Function that defines the different states of the player controls.\n   */\n  static _states() {\n    return [\n      class AudioOptions extends this {\n        $enter() {\n          this.timer()\n          this.tag('Audio').patch({\n            texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Audio').tag('AudioOptions').color = 0xff000000\n        }\n        $exit() {\n          this.tag('Audio').patch({\n            texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Audio').tag('AudioOptions').color = 0xffffffff\n        }\n        _handleRight() {\n          this._setState('Rewind')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class PlayPause extends this {\n        $enter() {\n          this.focus = this.toggle\n            ? Utils.asset('images/player/play-focus.png')\n            : Utils.asset('images/player/pause-focus.png')\n          this.timer()\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.focus, 50, 50)\n            })\n        }\n        $exit() {\n          this.unfocus = this.toggle\n            ? Utils.asset('images/player/play.png')\n            : Utils.asset('images/player/pause.png')\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.unfocus, 50, 50)\n            })\n        }\n        _handleEnter() {\n          if (this.toggle) {\n            this.signal('play')\n          } else {\n            this.signal('pause')\n          }\n          this.toggle = !this.toggle\n          this.focus = this.toggle\n            ? Utils.asset('images/player/play-focus.png')\n            : Utils.asset('images/player/pause-focus.png')\n          this.timer()\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.focus, 50, 50)\n            })\n        }\n        _handleRight() {\n          // this._setState('Forward')\n        }\n        _handleLeft() {\n          // this._setState('Rewind')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Forward extends this {\n        $enter() {\n          this.timer()\n          this.tag('Buttons').children[2].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[2].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/fast-forward-focus.png'),\n                50,\n                50\n              ),\n            })\n        }\n        $exit() {\n          this.tag('Buttons').children[2].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[2].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/fast-forward.png'),\n                50,\n                50\n              ),\n            })\n        }\n        _handleRight() {\n          this._setState('Extras')\n        }\n        _handleLeft() {\n          this._setState('PlayPause')\n        }\n        _handleEnter() {\n          this.signal('fastfwd')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Rewind extends this {\n        $enter() {\n          this.timer()\n          this.tag('Buttons').children[0].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[0].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/rewind-focus.png'),\n                50,\n                50\n              ),\n            })\n        }\n        $exit() {\n          this.tag('Buttons').children[0].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[0].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/rewind.png'),\n                50,\n                50\n              ),\n            })\n        }\n        _handleLeft() {\n          this._setState('AudioOptions')\n        }\n        _handleRight() {\n          this._setState('PlayPause')\n        }\n        _handleEnter() {\n          this.signal('fastrwd')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Extras extends this {\n        $enter() {\n          this.tag('Extras').patch({\n            texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Extras').tag('ExtrasOptions').color = 0xff000000\n          this.timer()\n        }\n        _handleLeft() {\n          this._setState('Forward')\n        }\n        _getFocused() {\n          this.timer()\n        }\n        $exit() {\n          this.tag('Extras').patch({\n            texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Extras').tag('ExtrasOptions').color = 0xffffffff\n        }\n      },\n      class Hidden extends this {\n        _getFocused() {}\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Router, Storage } from '@lightningjs/sdk'\nimport ListItem from '../items/ListItem.js'\nimport ThunderJS from 'ThunderJS'\nimport AppApi from '../api/AppApi.js'\n\n/** Class for main view component in home UI */\nexport default class MainView extends Lightning.Component {\n  /**\n   * Function to render various elements in main view.\n   */\n  static _template() {\n    return {\n      MainView: {\n        x: 451,\n        y: 25,\n        w: 1469,\n        h: 820,\n        AppList: {\n          x: 0,\n          y: 0,\n          type: Lightning.components.ListComponent,\n          w: 1469,\n          h: 209,\n          itemSize: 204 + 20,\n          roll: true,\n          rollMax: 1469,\n          horizontal: true,\n          itemScrollOffset: -5,\n          clipping: true,\n        },\n        MetroApps: {\n          x: 0,\n          y: 184,\n          type: Lightning.components.ListComponent,\n          w: 1469,\n          h: 209,\n          itemSize: 204 + 20,\n          roll: true,\n          rollMax: 1469,\n          horizontal: true,\n          itemScrollOffset: -5,\n          clipping: true,\n        },\n        TVShows: {\n          x: 0,\n          y: 184+184,\n          w: 1469,\n          h: 335,\n          type: Lightning.components.ListComponent,\n          roll: true,\n          itemSize: 428 + 20,\n          horizontal: true,\n          rollMax: 1444 + 25,\n          clipping: true,\n        },\n        Settings: {\n          x: 0,\n          y: 494+184,\n          w: 1469,\n          h: 335,\n          type: Lightning.components.ListComponent,\n          roll: true,\n          itemSize: 428 + 20,\n          horizontal: true,\n          rollMax: 1469,\n          clipping: true,\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.settingsScreen = false\n    this._setState('AppList')\n    this.indexVal = 0\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    };\n    var thunder = ThunderJS(config);\n    thunder.on('Controller', 'statechange', notification => {\n      if (notification && notification.callsign == 'Cobalt' && notification.state == 'Deactivation') {\n        var appApi = new AppApi();\n        Storage.set('applicationType', '');\n        appApi.setVisibility('ResidentApp', true);\n        thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n          console.log('ResidentApp moveToFront Success' + JSON.stringify(result));\n        });\n        thunder\n          .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n          .then(result => {\n            console.log('ResidentApp setFocus Success' + JSON.stringify(result));\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      }\n    });\n  }\n\n  _active() {\n    if (this.settingsScreen) {\n      let app = this.parent.parent\n      this._appAnimation = app.animation({\n        duration: 0,\n        repeat: 0,\n        stopMethod: 'immediate',\n        actions: [\n          { p: 'x', v: { 0: 0, 1: -320 } },\n          { p: 'y', v: { 0: 0, 1: -180 } },\n          { p: 'scale', v: { 0: 1, 1: 1.17 } },\n        ],\n      })\n      this._appAnimation.start()\n      this.settingsScreen = false\n    }\n  }\n\n  /**\n   * Function to set details of items in app list.\n   */\n  set appItems(items) {\n    this.tag('AppList').items = items.map(info => {\n      return {\n        w: 204,\n        h: 126,\n        type: ListItem,\n        data: info,\n        focus: 1.2,\n        unfocus: 1,\n        x_text: 106,\n        y_text: 140,\n      }\n    })\n    this.tag('AppList').start()\n  }\n\n  set metroApps(items){\n    this.tag('MetroApps').items = items.map(info => {\n      return {\n        w: 204,\n        h: 126,\n        type: ListItem,\n        data: info,\n        focus: 1.2,\n        unfocus: 1,\n        x_text: 106,\n        y_text: 140,\n      }\n    })\n    this.tag('MetroApps').start()\n  }\n\n  /**\n   * Function to set details of items in tv shows list.\n   */\n  set tvShowItems(items) {\n    this.tag('TVShows').items = items.map(info => {\n      return {\n        w: 428,\n        h: 252,\n        type: ListItem,\n        data: info,\n        focus: 1.08,\n        unfocus: 1,\n        x_text: 218,\n        y_text: 264,\n      }\n    })\n    this.tag('TVShows').start()\n  }\n\n  /**\n   * Function to set details of items in settings list\n   */\n  set settingsItems(items) {\n    this.tag('Settings').items = items.map(info => {\n      return {\n        w: 428,\n        h: 252,\n        type: ListItem,\n        data: info,\n        focus: 1.08,\n        unfocus: 1,\n        x_text: 218,\n        y_text: 264,\n      }\n    })\n    this.tag('Settings').start()\n  }\n\n  /**\n   * Function to set the state in main view.\n   */\n  set index(index) {\n    this.indexVal = index\n    if (this.indexVal == 0) {\n      this._setState('AppList')\n    } else if (this.indexVal == 1) {\n      this._setState('MetroApps')\n    } else if (this.indexVal == 2) {\n      this._setState('TVShows')\n    } else if(this.indexVal == 3) {\n      this._setState('Settings')\n    }\n  }\n\n  /**\n   * Function to reset the main view rows to initial state.\n   */\n  reset() {\n    for (var i = this.tag('AppList').index; i > 0; i--) {\n      this.tag('AppList').setPrevious()\n    }\n    for (var i = this.tag('MetroApps').index; i > 0; i--) {\n      this.tag('MetroApps').setPrevious()\n    }\n    for (var i = this.tag('TVShows').index; i > 0; i--) {\n      this.tag('TVShows').setPrevious()\n    }\n    for (var i = this.tag('Settings').index; i > 0; i--) {\n      this.tag('Settings').setPrevious()\n    }\n  }\n\n  /**\n   * Function to define various states needed for main view.\n   */\n  static _states() {\n    return [\n      class AppList extends this {\n        _getFocused() {\n          if (this.tag('AppList').length) {\n            return this.tag('AppList').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('AppList').length - 1 != this.tag('AppList').index) {\n            this.tag('AppList').setNext()\n            return this.tag('AppList').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('AppList').index) {\n            this.tag('AppList').setPrevious()\n            return this.tag('AppList').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 0)\n          }\n        }\n        _handleDown() {\n          this._setState('MetroApps')\n        }\n        _handleEnter() {\n          var appApi = new AppApi();\n          var applicationType = this.tag('AppList').items[this.tag('AppList').index].data.applicationType;\n          this.uri = this.tag('AppList').items[this.tag('AppList').index].data.uri;\n          var appApi = new AppApi();\n          applicationType = this.tag('AppList').items[this.tag('AppList').index].data.applicationType;\n          Storage.set('applicationType', applicationType);\n          this.uri = this.tag('AppList').items[this.tag('AppList').index].data.uri;\n          if (Storage.get('applicationType') == 'Cobalt') {\n            appApi.launchCobalt(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'WebApp') {\n            appApi.launchWeb(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Lightning') {\n            appApi.launchLightning(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Native') {\n            appApi.launchNative(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          }\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          };\n          var thunder = ThunderJS(config);\n          console.log('_handleKey', key.keyCode);\n          if (key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            var appApi = new AppApi();\n            if (Storage.get('applicationType') == 'Cobalt') {\n              Storage.set('applicationType', '');\n              appApi.suspendCobalt();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'WebApp') {\n              Storage.set('applicationType', '');\n              appApi.deactivateWeb();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Lightning') {\n              Storage.set('applicationType', '');\n              appApi.deactivateLightning();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Native') {\n              Storage.set('applicationType', '');\n              appApi.killNative();\n              appApi.setVisibility('ResidentApp', true);\n            }\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder\n              .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success')\n              })\n              .catch(err => {\n                console.log('Error', err)\n              })\n          }else return false\n        }\n      },\n      class MetroApps extends this {\n        _getFocused() {\n          if (this.tag('MetroApps').length) {\n            return this.tag('MetroApps').element\n          }\n        }\n        _handleUp() {\n          this._setState('AppList')\n        }\n        _handleRight() {\n          if (this.tag('MetroApps').length - 1 != this.tag('MetroApps').index) {\n            this.tag('MetroApps').setNext()\n            return this.tag('MetroApps').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('MetroApps').index) {\n            this.tag('MetroApps').setPrevious()\n            return this.tag('MetroApps').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 1)\n          }\n        }\n        _handleDown() {\n          this._setState('TVShows')\n        }\n        _handleEnter() {\n          var appApi = new AppApi();\n          var applicationType = this.tag('MetroApps').items[this.tag('MetroApps').index].data.applicationType;\n          this.uri = this.tag('MetroApps').items[this.tag('MetroApps').index].data.uri;\n          var appApi = new AppApi();\n          applicationType = this.tag('MetroApps').items[this.tag('MetroApps').index].data.applicationType;\n          Storage.set('applicationType', applicationType);\n          this.uri = this.tag('MetroApps').items[this.tag('MetroApps').index].data.uri;\n          if (Storage.get('applicationType') == 'Cobalt') {\n            appApi.launchCobalt(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'WebApp') {\n            appApi.launchWeb(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Lightning') {\n            appApi.launchLightning(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Native') {\n            appApi.launchNative(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          }\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          };\n          var thunder = ThunderJS(config);\n          console.log('_handleKey', key.keyCode);\n          if (key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            var appApi = new AppApi();\n            if (Storage.get('applicationType') == 'Cobalt') {\n              Storage.set('applicationType', '');\n              appApi.suspendCobalt();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'WebApp') {\n              Storage.set('applicationType', '');\n              appApi.deactivateWeb();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Lightning') {\n              Storage.set('applicationType', '');\n              appApi.deactivateLightning();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Native') {\n              Storage.set('applicationType', '');\n              appApi.killNative();\n              appApi.setVisibility('ResidentApp', true);\n            } else return false;\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder\n              .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success')\n              })\n              .catch(err => {\n                console.log('Error', err)\n              })\n          } else return false;\n        }\n      },\n      class TVShows extends this {\n        _getFocused() {\n          if (this.tag('TVShows').length) {\n            return this.tag('TVShows').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('TVShows').length - 1 != this.tag('TVShows').index) {\n            this.tag('TVShows').setNext()\n            return this.tag('TVShows').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('TVShows').index) {\n            this.tag('TVShows').setPrevious()\n            return this.tag('TVShows').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 2)\n          }\n        }\n        _handleUp() {\n          this._setState('MetroApps')\n        }\n        _handleDown() {\n          this._setState('Settings')\n        }\n        _handleEnter() {\n          this.fireAncestors('$goToPlayer')\n        }\n      },\n      class Settings extends this {\n        $enter(){\n          this.fireAncestors('$scroll',-200)\n        }\n        _getFocused() {\n          if (this.tag('Settings').length) {\n            return this.tag('Settings').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('Settings').length - 1 != this.tag('Settings').index) {\n            this.tag('Settings').setNext()\n          }\n          return this.tag('Settings').element\n        }\n        _handleLeft() {\n          if (0 != this.tag('Settings').index) {\n            this.tag('Settings').setPrevious()\n            return this.tag('Settings').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 3)\n          }\n        }\n        _handleUp() {\n          this._setState('TVShows')\n        }\n        _handleEnter() {\n          this.settingsType = this.tag('Settings').items[\n            this.tag('Settings').index\n          ].data.displayName\n\n          if (this.settingsType == 'Bluetooth') {\n            this.settingsScreen = true\n            Router.navigate('settings/BluetoothScreen', false)\n          } else if (this.settingsType == 'Wi-Fi') {\n            this.settingsScreen = true\n            Router.navigate('settings/WiFiScreen', false)\n          }\n        }\n        $exit(){\n          this.fireAncestors('$scroll',0)\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render items in side panel.\n */\nexport default class SidePanelItem extends Lightning.Component {\n  /**\n   * Function to render various elements in the side panel item.\n   */\n  static _template() {\n    return {\n      Item: {\n        Title: {\n          text: {\n            fontSize: 27,\n            textColor: 0xffffffff,\n          },\n          mountX: 0.5,\n          alpha: 0,\n        },\n        Image: {\n          x: 0,\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.tag('Title').patch({ x: this.x_text, y: this.y_text, text: { text: this.data.title } })\n    this.tag('Image').patch({\n      src: Utils.asset(this.data.url),\n      w: this.w,\n      h: this.h,\n      scale: this.unfocus,\n    })\n  }\n\n  /**\n   * Function to change properties of item during focus.\n   */\n  _focus() {\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.focus })\n    this.tag('Title').patch({ alpha: 1 })\n    this.tag('Item').patch({ zIndex: 1 })\n  }\n\n  /**\n   * Function to change properties of item during unfocus.\n   */\n  _unfocus() {\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.unfocus })\n    this.tag('Title').patch({ alpha: 0 })\n    this.tag('Item').patch({ zIndex: 0 })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport SidePanelItem from '../items/SidePanelItem.js'\n\n/** Class for side panel in home UI */\nexport default class SidePanel extends Lightning.Component {\n  static _template() {\n    return {\n      SidePanel: {\n        x: 130,\n        y: 0,\n        w: 240,\n        h: 750,\n        type: Lightning.components.ListComponent,\n        roll: true,\n        horizontal: false,\n        invertDirection: true,\n      },\n    }\n  }\n\n  _init() {\n    this._setState('SidePanel')\n    this.indexVal = 0\n  }\n\n  /**\n   * Function to set items in side panel.\n   */\n  set sidePanelItems(items) {\n    this.tag('SidePanel').patch({ x: 130 })\n    this.tag('SidePanel').items = items.map((info, index) => {\n      this.data = info\n      return {\n        w: 204,\n        h: 184,\n        y: index == 0 ? 30 : (index == 1 ? 115 :(index == 2 ? 260 : 470)),\n        type: SidePanelItem,\n        data: info,\n        focus: 0.7,\n        unfocus: 0.6,\n        x_text: 100,\n        y_text: 160,\n        text_focus: 1.1,\n        text_unfocus: 0.9,\n      }\n    })\n    this.tag('SidePanel').start()\n  }\n\n  /**\n   * Function to reset items in side panel.\n   */\n  set resetSidePanelItems(items) {\n    this.tag('SidePanel').patch({ x: 90 })\n    this.tag('SidePanel').items = items.map((info, index) => {\n      return {\n        w: 204,\n        h: 184,\n        y: index == 0 ? 25 : (index == 1 ? 105 :(index == 2 ? 260 : 470)),\n        type: SidePanelItem,\n        data: info,\n        focus: 0.7,\n        unfocus: 0.4,\n        x_text: 100,\n        y_text: 160,\n        text_focus: 1.1,\n        text_unfocus: 0.9,\n      }\n    })\n    this.tag('SidePanel').start()\n  }\n  /**\n   * Function to set scaling to side panel.\n   */\n  set scale(scale) {\n    this.tag('SidePanel').patch({ scale: scale })\n  }\n\n  /**\n   * Function to set x coordinate of side panel.\n   */\n  set x(x) {\n    this.tag('SidePanel').patch({ x: x })\n  }\n\n  /**\n   * Function to set index value of side panel.\n   */\n  set index(index) {\n    this.indexVal = index\n  }\n\n  static _states() {\n    return [\n      class SidePanel extends this {\n        _getFocused() {\n          if (this.tag('SidePanel').length) {\n            if(this.indexVal==3){\n              this.fireAncestors('$scroll',-200)\n            }\n            else{\n              this.fireAncestors('$scroll',0)\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          }\n        }\n        _handleKey(key) {\n          if (key.keyCode == 39 || key.keyCode == 13) {\n            this.fireAncestors('$goToMainView', this.indexVal)\n          } else if (key.keyCode == 40) {\n            if (this.tag('SidePanel').length - 1 != this.indexVal) {\n              this.indexVal = this.indexVal + 1\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          } else if (key.keyCode == 38) {\n            if (0 != this.indexVal) {\n              this.indexVal = this.indexVal - 1\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          } else return false;\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport ThunderJS from 'ThunderJS'\n\n/** Class for top panel in home UI */\nexport default class TopPanel extends Lightning.Component {\n  static _template() {\n    return {\n      TopPanel: {\n        x: 90,\n        y: 60,\n        w: 1740,\n        h: 120,\n        Mic: {\n          x: 120,\n          y: 60,\n          mountY: 0.5,\n          src: Utils.asset('/images/topPanel/mic.png'),\n          w: 60,\n          h: 60,\n        },\n        Search: {\n          x: 250,\n          y: 60,\n          mountY: 0.5,\n          text: { text: 'Search TV shows, movies and more', fontSize: 33 },\n        },\n        Time: {\n          x: 1500,\n          y: 60,\n          mountY: 0.5,\n          text: { text: '', fontSize: 38 },\n        },\n      },\n    }\n  }\n  _init() {\n    this.timeZone = 'America/New_York'\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    thunder\n      .call('org.rdk.System', 'getTimeZoneDST')\n      .then(result => {\n        if (result.success) {\n          try {\n            new Date().toLocaleDateString('en-US', { timeZone: result.timeZone })\n            this.timeZone = result.timeZone\n          } catch (err) {\n            this.timeZone = 'America/New_York'\n          }\n        }\n      })\n      .catch(err => {\n        this.timeZone = 'America/New_York'\n      })\n  }\n\n  _build() {\n    setInterval(() => {\n      this.tag('Time').patch({ text: { text: this.updateTime() } })\n    }, 1000)\n  }\n\n  /**\n   * Function to update time in home UI.\n   */\n  updateTime() {\n    let date = new Date()\n    date = new Date(date.toLocaleString('en-US', { timeZone: this.timeZone }))\n    let hours = date.getHours()\n    let minutes = date.getMinutes()\n    let ampm = hours >= 12 ? 'pm' : 'am'\n    hours = hours % 12\n    hours = hours ? hours : 12\n    minutes = minutes < 10 ? '0' + minutes : minutes\n    let strTime = hours + '.' + minutes + ' ' + ampm\n    return strTime\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport PlayerControls from './PlayerControl.js'\n\n/**\n * Class to render AAMP video player.\n */\nexport default class AAMPVideoPlayer extends Lightning.Component {\n  /**\n   * Function to render player controls.\n   */\n  static _template() {\n    return {\n      PlayerControls: {\n        type: PlayerControls,\n        x: 0,\n        y: 810,\n        alpha: 0,\n        signals: {\n          pause: 'pause',\n          play: 'play',\n          hide: 'hidePlayerControls',\n          fastfwd: 'fastfwd',\n          fastrwd: 'fastrwd',\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.x = 0\n    this.y = 0\n    this.w = 0\n    this.h = 0\n    this.videoEl = document.createElement('video')\n    this.videoEl.setAttribute('id', 'video-player')\n    this.videoEl.style.position = 'absolute'\n    this.videoEl.style.zIndex = '1'\n    this.videoEl.setAttribute('width', '100%')\n    this.videoEl.setAttribute('height', '100%')\n    this.videoEl.setAttribute('src', 'placeholder.mp4')\n    this.videoEl.setAttribute('type', 'video/ave')\n    document.body.appendChild(this.videoEl)\n    this.playbackSpeeds = [-16, -8, -4, -2, 1, 2, 4, 8, 16]\n    this.playerStatesEnum = { idle: 0, initializing: 1, playing: 8, paused: 6, seeking: 7 }\n    this.player = null\n    this.playbackRateIndex = this.playbackSpeeds.indexOf(1)\n    this.defaultInitConfig = {\n      initialBitrate: 2500000,\n      offset: 0,\n      networkTimeout: 10,\n      preferredAudioLanguage: 'en',\n      liveOffset: 15,\n      drmConfig: null,\n    }\n  }\n\n  /**\n   * Function to set video coordinates.\n   * @param {int} x x position of video\n   * @param {int} y y position of video\n   * @param {int} w width of video\n   * @param {int} h height of video\n   */\n  setVideoRect(x, y, w, h) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n    var xPos = 0.67 * x\n    var yPos = 0.67 * y\n    var wPos = 0.67 * w\n    var hPos = 0.67 * h\n    this.player.setVideoRect(xPos, yPos, wPos, hPos)\n  }\n\n  /**\n   * Event handler to store the current playback state.\n   * @param  event playback state of the video.\n   */\n  _playbackStateChanged(event) {\n    switch (event.state) {\n      case this.player.playerStatesEnum.idle:\n        this.playerState = this.player.playerStatesEnum.idle\n        break\n      case this.player.playerStatesEnum.initializing:\n        this.playerState = this.player.playerStatesEnum.initializing\n        break\n      case this.player.playerStatesEnum.playing:\n        this.playerState = this.player.playerStatesEnum.playing\n        break\n      case this.player.playerStatesEnum.paused:\n        this.playerState = this.player.playerStatesEnum.paused\n        break\n      case this.player.playerStatesEnum.seeking:\n        this.playerState = this.player.playerStatesEnum.seeking\n        break\n      default:\n        break\n    }\n  }\n\n  /**\n   * Event handler to handle the event of completion of a video playback.\n   */\n  _mediaEndReached() {\n    this.load(this.videoInfo)\n    this.setVideoRect(this.x, this.y, this.w, this.h)\n  }\n\n  /**\n   * Event handler to handle the event of changing the playback speed.\n   */\n  _mediaSpeedChanged() {}\n\n  /**\n   * Event handler to handle the event of bit rate change.\n   */\n  _bitrateChanged() {}\n\n  /**\n   * Function to handle the event of playback failure.\n   */\n  _mediaPlaybackFailed() {\n    this.load(this.videoInfo)\n  }\n\n  /**\n   * Function to handle the event of playback progress.\n   * @param event playback event.\n   */\n  _mediaProgressUpdate(event) {\n    this.position = event.positionMiliseconds / 1000\n    this.tag('PlayerControls').currentTime = this.position\n  }\n\n  /**\n   * Function to handle the event of starting the playback.\n   */\n  _mediaPlaybackStarted() {\n    // this.tag('PlayerControls').reset()\n    // this.tag('PlayerControls').setSmooth('alpha', 1)\n    // this.tag('PlayerControls').setSmooth('y', 675, { duration: 1 })\n    // this.timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n\n  /**\n   * Function to handle the event of change in the duration of the playback content.\n   */\n  _mediaDurationChanged() {}\n\n  /**\n   * Function to create the video player instance for video playback and its initial settings.\n   */\n  createPlayer() {\n    if (this.player !== null) {\n      this.destroy()\n      this.player = null\n    }\n\n    try {\n      this.player = new AAMPMediaPlayer()\n      this.player.addEventListener('playbackStateChanged', this._playbackStateChanged)\n      this.player.addEventListener('playbackCompleted', this._mediaEndReached.bind(this))\n      this.player.addEventListener('playbackSpeedChanged', this._mediaSpeedChanged)\n      this.player.addEventListener('bitrateChanged', this._bitrateChanged)\n      this.player.addEventListener('playbackFailed', this._mediaPlaybackFailed.bind(this))\n      this.player.addEventListener('playbackProgressUpdate', this._mediaProgressUpdate.bind(this))\n      this.player.addEventListener('playbackStarted', this._mediaPlaybackStarted.bind(this))\n      this.player.addEventListener('durationChanged', this._mediaDurationChanged)\n      this.playerState = this.playerStatesEnum.idle\n    } catch (error) {\n      console.error('AAMPMediaPlayer is not defined')\n    }\n  }\n\n  /**\n   * Loads the player with video URL.\n   * @param videoInfo the url and the info regarding the video like title.\n   */\n  load(videoInfo) {\n    this.createPlayer()\n    this.videoInfo = videoInfo\n    this.configObj = this.defaultInitConfig\n    this.configObj.drmConfig = this.videoInfo.drmConfig\n    this.player.initConfig(this.configObj)\n    this.player.load(videoInfo.url)\n\n    this.tag('PlayerControls').title = videoInfo.title\n    this.tag('PlayerControls').subtitle = videoInfo.subtitle\n    this.tag('PlayerControls').logoPath = videoInfo.logoPath\n    this.tag('PlayerControls').duration = this.player.getDurationSec()\n    this.tag('PlayerControls').currentTime = 0\n    this.play()\n  }\n\n  /**\n   * Starts playback when enough data is buffered at play head.\n   */\n  play() {\n    this.player.play()\n    this.playbackRateIndex = this.playbackSpeeds.indexOf(1)\n  }\n\n  /**\n   * Pauses playback.\n   */\n  pause() {\n    this.player.pause()\n  }\n\n  /**\n   * Stop playback and free resources.\n   */\n  stop() {\n    this.player.stop()\n    this.hidePlayerControls()\n  }\n\n  /**\n   * Function to perform fast forward of the video content.\n   */\n  fastfwd() {\n    if (this.playbackRateIndex < this.playbackSpeeds.length - 1) {\n      this.playbackRateIndex++\n    }\n    this.rate = this.playbackSpeeds[this.playbackRateIndex]\n    this.player.setPlaybackRate(this.rate)\n  }\n\n  /**\n   * Function to perform fast rewind of the video content.\n   */\n  fastrwd() {\n    if (this.playbackRateIndex > 0) {\n      this.playbackRateIndex--\n    }\n    this.rate = this.playbackSpeeds[this.playbackRateIndex]\n    this.player.setPlaybackRate(this.rate)\n  }\n\n  /**\n   * Function that returns player instance.\n   * @returns player instance.\n   */\n  getPlayer() {\n    return this.player\n  }\n\n  /**\n   * Function to release the video player instance when not in use.\n   */\n  destroy() {\n    if (this.player.getCurrentState() !== this.playerStatesEnum.idle) {\n      this.player.stop()\n    }\n    this.player.removeEventListener('playbackStateChanged', this._playbackStateChanged)\n    this.player.removeEventListener('playbackCompleted', this._mediaEndReached)\n    this.player.removeEventListener('playbackSpeedChanged', this._mediaSpeedChanged)\n    this.player.removeEventListener('bitrateChanged', this._bitrateChanged)\n    this.player.removeEventListener('playbackFailed', this._mediaPlaybackFailed.bind(this))\n    this.player.removeEventListener('playbackProgressUpdate', this._mediaProgressUpdate.bind(this))\n    this.player.removeEventListener('playbackStarted', this._mediaPlaybackStarted.bind(this))\n    this.player.removeEventListener('durationChanged', this._mediaDurationChanged)\n    this.player.release()\n    this.player = null\n    this.hidePlayerControls()\n  }\n\n  /**\n   * Function to hide the player controls.\n   */\n  hidePlayerControls() {\n    this.tag('PlayerControls').setSmooth('y', 1080, { duration: 0.7 })\n    this.tag('PlayerControls').setSmooth('alpha', 0, { duration: 0.7 })\n    this._setState('HideControls')\n  }\n\n  /**\n   * Function to show the player controls.\n   */\n  showPlayerControls() {\n    this.tag('PlayerControls').reset()\n    this.tag('PlayerControls').setSmooth('alpha', 1)\n    this.tag('PlayerControls').setSmooth('y', 675, { duration: 0.7 })\n    this._setState('ShowControls')\n    this.timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n  /**\n   * Function to display player controls on down key press.\n   */\n  _handleDown() {\n    this.tag('PlayerControls').setSmooth('alpha', 1, { duration: 1 })\n    this.tag('PlayerControls').setSmooth('y', 675, { duration: 1 })\n    this._setState('ShowControls')\n    clearTimeout(this.timeout)\n  }\n\n  /**\n   *Function to hide player control on up key press.\n   */\n  _handleUp() {\n    this.hidePlayerControls()\n    this._setState('HideControls')\n  }\n  /**\n   * Function to define the different states of the video player.\n   */\n  static _states() {\n    return [\n      class ShowControls extends this {\n        _getFocused() {\n          return this.tag('PlayerControls')\n        }\n      },\n      class HideControls extends this {\n        _getFocused() {}\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for app listings.\n */\nexport var appListInfo = [\n  {\n    displayName: 'Test Youtube',\n    applicationType: 'Cobalt',\n    uri: 'https://www.youtube.com/tv',\n    url: '/images/apps/youtube.png',\n  },\n  {\n    displayName: 'Test Xumo',\n    applicationType: 'WebApp',\n    uri: 'https://x1box-app.xumo.com/3.0.70/index.html',\n    url: '/images/apps/xumo.png',\n  },\n  {\n    displayName: 'Bluetooth Audio',\n    applicationType: 'Lightning',\n    uri: 'https://rdkwiki.com/rdk-apps/BluetoothAudio/index.html',\n    url: '/images/apps/netflix.png',\n  },\n  {\n    displayName: 'Test Prime video',\n    applicationType: '',\n    uri: '',\n    url: '/images/apps/prime.png',\n  },\n]\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE\r\n * file the following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n/**\r\n * Class which contains data for tv shows listings.\r\n */\r\nexport var tvShowsInfo = [\r\n  {\r\n    displayName: 'Fantasy-Island',\r\n    url: '/images/tvShows/fantasy-island.jpg',\r\n  },\r\n  {\r\n    displayName: 'Onward',\r\n    url: '/images/tvShows/onward.jpg',\r\n  },\r\n  {\r\n    displayName: 'Let it Snow',\r\n    url: '/images/tvShows/let-it-snow.png',\r\n  },\r\n  {\r\n    displayName: 'Do Little',\r\n    url: '/images/tvShows/do-little.jpg',\r\n  },\r\n  {\r\n    displayName: 'Summerland',\r\n    url: '/images/tvShows/summerland.jpg',\r\n  },\r\n]\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for settings listings.\n */\nexport var settingsInfo = [\n  {\n    displayName: 'Bluetooth',\n    url: '/images/settings/bluetooth.jpg',\n  },\n  {\n    displayName: 'Wi-Fi',\n    url: '/images/settings/wifi.jpg',\n  },\n]\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE\r\n * file the following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n/**\r\n * Class which contains data for listings in side panel.\r\n */\r\nexport var sidePanelInfo = [\r\n  {\r\n    title: 'Apps',\r\n    url: '/images/sidePanel/menu.png',\r\n  },\r\n  {\r\n    title: 'Metro Apps',\r\n    url: '/images/sidePanel/metro.png',\r\n  },\r\n  {\r\n    title: 'TV Shows',\r\n    url: '/images/sidePanel/video.png',\r\n  },\r\n  {\r\n    title: 'Settings',\r\n    url: '/images/sidePanel/settings.png',\r\n  },\r\n]\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for UI selection.\n */\nexport var uiInfo = [\n  {\n    title: 'DEFAULT',\n    url: '',\n  },\n  {\n    title: 'TATA',\n    url: 'http://35.155.171.121:8088/index.html',\n  },\n  {\n    title: 'EPAM',\n    url: 'https://px-apps.sys.comcast.net/lightning_apps/diagnostics/dist/index.html',\n  },\n]\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for metro app listings.\n */\nexport var metroAppsInfo = [\n  {\n    displayName: \"CNN\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.CNN\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.CNN.png\"\n  },\n  {\n    displayName: \"VimeoRelease\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.VimeoRelease\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.VimeoRelease.png\"\n  },\n  {\n    displayName: \"WeatherNetwork\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.WeatherNetwork\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.WeatherNetwork.png\"\n  },\n  {\n    displayName: \"EuroNews\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.Euronews\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.Euronews.png\"\n  },\n  {\n    displayName: \"AccuWeather\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.AccuWeather\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.AccuWeather.png\"\n  },\n  {\n    displayName: \"BaebleMusic\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.BaebleMusic\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.BaebleMusic.png\"\n  },\n  {\n    displayName: \"Aljazeera\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.Aljazeera\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.Aljazeera.png\"\n  },\n  {\n    displayName: \"GuessThatCity\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.GuessThatCity\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.GuessThatCity.png\"\n  },\n  {\n    displayName: \"Radioline\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.Radioline\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.Radioline.png\"\n  },\n  {\n    displayName: \"WallStreetJournal\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.WallStreetJournal\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.WallStreetJournal.png\"\n  }\n];\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { appListInfo } from './../../static/data/AppListInfo.js'\nimport { tvShowsInfo } from './../../static/data/TvShowsInfo.js'\nimport { settingsInfo } from './../../static/data/SettingsInfo.js'\nimport { sidePanelInfo } from './../../static/data/SidePanelInfo.js'\nimport { uiInfo } from './../../static/data/UIInfo'\nimport { metroAppsInfo } from \"./../../static/data/MetroAppsInfo.js\"\n\n/**\n * Class that returns the data required for home screen.\n */\nexport default class HomeApi {\n  /**\n   * Function to get details for app listing.\n   */\n  getAppListInfo() {\n    return appListInfo\n  }\n\n  /**\n   * Function to get details for tv shows listings.\n   */\n  getTVShowsInfo() {\n    return tvShowsInfo\n  }\n\n  /**\n   * Function to get details for settings listings.\n   */\n  getSettingsInfo() {\n    return settingsInfo\n  }\n\n  /**\n   * Function to get details for side panel.\n   */\n  getSidePanelInfo() {\n    return sidePanelInfo\n  }\n\n  /**\n   * Function to get details of different UI\n   */\n  getUIInfo() {\n    return uiInfo\n  }\n\n  /**\n   * Function to details of metro apps\n   */\n  getMetroInfo() {\n    return metroAppsInfo\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport MainView from '../views/MainView.js'\nimport SidePanel from '../views/SidePanel.js'\nimport TopPanel from '../views/TopPanel.js'\nimport AAMPVideoPlayer from '../player/AAMPVideoPlayer.js'\nimport HomeApi from '../api/HomeApi.js'\n\n/** Class for home screen UI */\nexport default class HomeScreen extends Lightning.Component {\n  /**\n   * Function to render various elements in home screen.\n   */\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 1,\n      },\n      TopPanel: {\n        type: TopPanel,\n      },\n      View:{\n        x: 0,\n        y: 200,\n        w: 1920,\n        h: 1080,\n        clipping: true,\n        SidePanel: {\n          type: SidePanel,\n        },\n        MainView: {\n          w:1920,\n          h:1080,\n          type: MainView,\n        },\n      },\n      Player: { type: AAMPVideoPlayer },\n    }\n  }\n\n  _init() {\n    this.homeApi = new HomeApi()\n    var appItems = this.homeApi.getAppListInfo()\n    const URL_PARAMS = new window.URLSearchParams(window.location.search)\n    var data = URL_PARAMS.get('data')\n    console.log(data)\n    var prop_apps = 'applications'\n    var prop_displayname = 'displayName'\n    var prop_uri = 'uri'\n    var prop_apptype = 'applicationType'\n    var prop_url = 'url'\n    var appdetails = []\n    var appdetails_format = []\n    var usbApps = 0\n    try {\n      if (data != null && JSON.parse(data).hasOwnProperty(prop_apps)) {\n        appdetails = JSON.parse(data).applications\n        for (var i = 0; i < appdetails.length; i++) {\n          if (\n            appdetails[i].hasOwnProperty(prop_displayname) &&\n            appdetails[i].hasOwnProperty(prop_uri) &&\n            appdetails[i].hasOwnProperty(prop_apptype) &&\n            appdetails[i].hasOwnProperty(prop_url)\n          ) {\n            appdetails_format.push(appdetails[i])\n            usbApps++\n          }\n        }\n        for (var i = 0; i < appItems.length; i++) {\n          appdetails_format.push(appItems[i])\n        }\n      } else {\n        appdetails_format = appItems\n      }\n    } catch (e) {\n      appdetails_format = appItems\n      console.log('Query data is not proper: ' + e)\n    }\n    this.tag('MainView').appItems = appdetails_format\n    this.tag('MainView').metroApps = this.homeApi.getMetroInfo()\n    this.tag('MainView').tvShowItems = this.homeApi.getTVShowsInfo()\n    this.tag('MainView').settingsItems = this.homeApi.getSettingsInfo()\n    this.tag('SidePanel').sidePanelItems = this.homeApi.getSidePanelInfo()\n    this.sidePanelData = this.homeApi.getSidePanelInfo()\n    this._setState('SidePanel')\n    this.initialLoad = true\n  }\n\n  _active() {\n    if (this.initialLoad) {\n      let home = this\n      this._homeAnimation = home.animation({\n        duration: 0.5,\n        repeat: 0,\n        stopMethod: 'immediate',\n        actions: [\n          { p: 'scale', v: { 0: 5, 1: 1 } },\n          { p: 'x', v: { 0: -1920, 1: 0 } },\n          { p: 'y', v: { 0: -1080, 1: 0 } },\n        ],\n      })\n      this._homeAnimation.start()\n      this.initialLoad = false\n    }\n  }\n\n  /**\n   * Function to start video playback.\n   */\n  play() {\n    this.player = this.tag('Player')\n    try {\n      this.player.load({\n        title: 'Parkour event',\n        subtitle: 'm3u8',\n        url:\n          'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        drmConfig: null,\n      })\n      this.zoomOut(0.1)\n      this.hide()\n      this._setState('Playing')\n      this.player.setVideoRect(0, 0, 1920, 1080)\n    } catch (error) {\n      this._setState('MainView')\n      console.error('Playback Failed ' + error)\n    }\n  }\n\n  /**\n   * Function to zoom in main view of home UI.\n   */\n  zoomIn(duration) {\n    this._sidePanelAnimation = this.tag('SidePanel').animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [{ p: 'x', v: { 0: 130, 1: 280 } }],\n    })\n    this._sidePanelAnimation.start()\n    this.tag('SidePanel').resetSidePanelItems = this.sidePanelData\n    let app = this\n    this._appAnimation = app.animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'x', v: { 0: 0, 1: -320 } },\n        { p: 'y', v: { 0: 0, 1: -180 } },\n        { p: 'scale', v: { 0: 1, 1: 1.17 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  /**\n   * Function to zoom out main view of home UI.\n   */\n  zoomOut(duration) {\n    this._sidePanelAnimation = this.tag('SidePanel').animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [{ p: 'x', v: { 0: 280, 1: 130 } }],\n    })\n    this._sidePanelAnimation.start()\n    this.tag('SidePanel').sidePanelItems = this.sidePanelData\n    let app = this\n    this._appAnimation = app.animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'x', v: { 0: -320, 1: 0 } },\n        { p: 'y', v: { 0: -180, 1: 0 } },\n        { p: 'scale', v: { 0: 1.17, 1: 1 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  /**\n   * Fireancestor to set the state to side panel.\n   * @param {index} index index value of side panel item.\n   */\n  $goToSidePanel(index) {\n    this.zoomOut(0.7)\n    this.tag('SidePanel').index = index\n    this._setState('SidePanel')\n  }\n\n  /**\n   * Fireancestor to set the state to main view.\n   * @param {index} index index value of main view row.\n   */\n  $goToMainView(index) {\n    this.zoomIn(0.7)\n    this.tag('MainView').index = index\n    this._setState('MainView')\n  }\n\n  /**\n   * Fireancestor to set the state to player.\n   */\n  $goToPlayer() {\n    this._setState('Player')\n    this.play()\n  }\n\n  /**\n   * Function to scroll\n   */\n  $scroll(y){\n    this.tag('SidePanel').setSmooth('y',y,{duration:0.5})\n    this.tag('MainView').setSmooth('y',y,{duration:0.5})\n  }\n\n  /**\n   * Function to hide the home UI.\n   */\n  hide() {\n    this.tag('Background').patch({ alpha: 0 })\n    this.tag('MainView').patch({ alpha: 0 })\n    this.tag('TopPanel').patch({ alpha: 0 })\n    this.tag('SidePanel').patch({ alpha: 0 })\n  }\n\n  /**\n   * Function to show home UI.\n   */\n  show() {\n    this.tag('Background').patch({ alpha: 1 })\n    this.tag('MainView').patch({ alpha: 1 })\n    this.tag('TopPanel').patch({ alpha: 1 })\n    this.tag('SidePanel').patch({ alpha: 1 })\n  }\n\n  /**\n   * Function to define various states needed for home screen.\n   */\n  static _states() {\n    return [\n      class TopPanel extends this {\n        _getFocused() {\n          return this.tag('TopPanel')\n        }\n      },\n      class SidePanel extends this {\n        _getFocused() {\n          return this.tag('SidePanel')\n        }\n      },\n      class MainView extends this {\n        _getFocused() {\n          return this.tag('MainView')\n        }\n      },\n      class Playing extends this {\n        _getFocused() {\n          return this.tag('Player')\n        }\n\n        stopPlayer(){\n          this.zoomIn(0);\n          this._setState('MainView');\n          this.player.stop();\n          this.show();\n        }\n\n        _handleKey(key) {\n          if ( key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            this.stopPlayer()\n          } else if (key.keyCode == 227 || key.keyCode == 179){\n            this.stopPlayer()\n            return false;\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\n/**\n * Class for Bluetooth thunder plugin apis.\n */\n\nexport default class BluetoothApi {\n  constructor() {\n    console.log('Bluetooth constructor')\n    this._events = new Map()\n    this._devices = []\n    this._pairedDevices = []\n    this._connectedDevices = []\n  }\n\n  /**\n   * Function to activate the Bluetooth plugin\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      }\n      this._thunder = ThunderJS(config)\n      this.callsign = 'org.rdk.Bluetooth'\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log('Bluetooth activated', result)\n          this._thunder.on(this.callsign, 'onDiscoveredDevice', notification => {\n            console.log('onDiscoveredDevice ' + JSON.stringify(notification))\n            this.getDiscoveredDevices().then(() => {\n              this._events.get('onDiscoveredDevice')(notification)\n            })\n          })\n          this._thunder.on(this.callsign, 'onStatusChanged', notification => {\n            console.log('onStatusChanged ' + notification.newStatus)\n            if (notification.newStatus === 'PAIRING_CHANGE') {\n              this.getPairedDevices().then(() => {\n                this._events.get('onPairingChange')(notification)\n              })\n            } else if (notification.newStatus === 'CONNECTION_CHANGE') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onConnectionChange')(notification)\n              })\n            } else if (notification.newStatus === 'DISCOVERY_STARTED') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onDiscoveryStarted')()\n              })\n            } else if (notification.newStatus === 'DISCOVERY_COMPLETED') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onDiscoveryCompleted')()\n              })\n            }\n          })\n          this._thunder.on(this.callsign, 'onPairingRequest', notification => {\n            console.log('onPairingRequest ' + JSON.stringify(notification))\n            this._events.get('onPairingRequest')(notification)\n          })\n          this._thunder.on(this.callsign, 'onRequestFailed', notification => {\n            console.log('onRequestFailed ' + JSON.stringify(notification))\n            this._events.get('onRequestFailed')(notification)\n          })\n          this._thunder.on(this.callsign, 'onConnectionRequest', notification => {\n            console.log('onConnectionRequest ' + JSON.stringify(notification))\n            this._events.get('onConnectionRequest')(notification)\n          })\n          resolve('Blutooth activated')\n        })\n        .catch(err => {\n          console.error('Activation failure', err)\n          reject('Bluetooth activation failed', err)\n        })\n    })\n  }\n\n  /**\n   *\n   * @param {string} eventId\n   * @param {function} callback\n   * Function to register the events for the Bluetooth plugin.\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback)\n  }\n\n  /**\n   * Function to deactivate the Bluetooth plugin.\n   */\n  deactivate() {\n    this._events = new Map()\n    this._thunder = null\n  }\n\n  /**\n   * Function to disable the Bluetooth stack.\n   */\n  disable() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'disable')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't disable : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to enable the Bluetooth stack.\n   */\n  enable() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'enable')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't enable : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to start scanning for the Bluetooth devices.\n   */\n  startScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'startScan', {\n          timeout: '10',\n          profile: 'KEYBOARD,MOUSE,JOYSTICK',\n        })\n        .then(result => {\n          console.log('scanning : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function returns the discovered Bluetooth devices.\n   */\n  getDiscoveredDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getDiscoveredDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._devices = result.discoveredDevices\n          resolve(result.discoveredDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get discovered devices : ${err}`)\n          reject()\n        })\n    })\n  }\n  get discoveredDevices() {\n    return this._devices\n  }\n\n  /**\n   * Function returns the paired Bluetooth devices.\n   */\n  getPairedDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getPairedDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._pairedDevices = result.pairedDevices\n          resolve(result.pairedDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get paired devices : ${err}`)\n          reject()\n        })\n    })\n  }\n  get pairedDevices() {\n    return this._pairedDevices\n  }\n\n  /**\n   * Function returns the connected Bluetooth devices.\n   */\n  getConnectedDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getConnectedDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._connectedDevices = result.connectedDevices\n          resolve(result.connectedDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get connected devices : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  get connectedDevices() {\n    return this._connectedDevices\n  }\n\n  /**\n   *\n   * Function to connect a Bluetooth device.\n   * @param {number} deviceID Device ID of the Bluetoth client.\n   * @param {string} deviceType Device type of the Bluetooth client.\n   */\n  connect(deviceID, deviceType) {\n    return new Promise((resolve, reject) => {\n      console.log(deviceID)\n      this._thunder\n        .call('org.rdk.Bluetooth', 'connect', {\n          deviceID: deviceID,\n          deviceType: deviceType,\n          profile: deviceType,\n        })\n        .then(result => {\n          console.log('connected : ' + result.success)\n          resolve(result.success)\n        })\n        .catch(err => {\n          console.error('Connection failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to disconnect a Bluetooth device.\n   *@param {number} deviceID Device ID of the Bluetoth client.\n   *@param {string} deviceType Device type of the Bluetooth client.\n   */\n  disconnect(deviceID, deviceType) {\n    console.log(deviceID)\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'disconnect', {\n          deviceID: deviceID,\n          deviceType: deviceType,\n        })\n        .then(result => {\n          console.log('disconnected : ' + result.success)\n          if (result.success) resolve(true)\n          else reject()\n        })\n        .catch(err => {\n          console.error('disconnect failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to unpair a Bluetooth device.\n   * @param {number} deviceId\n   */\n  unpair(deviceId) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'unpair', { deviceID: deviceId })\n        .then(result => {\n          console.log('unpaired : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('unpair failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to pair a Bluetooth device.\n   * @param {number} deviceId\n   */\n  pair(deviceId) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'pair', { deviceID: deviceId })\n        .then(result => {\n          console.log('paired : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error on pairing', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to respond to client the Bluetooth event.\n   * @param {number} deviceID Device ID of the Bluetooth client.\n   * @param {string} eventType Name of the event.\n   * @param {string} responseValue Response sent to the Bluetooth client.\n   */\n  respondToEvent(deviceID, eventType, responseValue) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'respondToEvent', {\n          deviceID: deviceID,\n          eventType: eventType,\n          responseValue: responseValue,\n        })\n        .then(result => {\n          console.log('responded to event : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error on respondToEvent', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to get the discoverable name of the Bluetooth plugin.\n   */\n  getName() {\n    return new Promise((resolve, reject) => {\n      this._thunder.call('org.rdk.Bluetooth', 'getName').then(result => {\n        resolve(result.name)\n      })\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**Color constants */\nexport var COLORS = {\n  textColor: 0xffffffff,\n  titleColor: 0xffffffff,\n  hightlightColor: 0xffc0c0c0,\n  headingColor: 0xffffffff,\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for rendering items in UI list.\n */\nexport default class Item extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        w: 200,\n        h: 65,\n        rect: true,\n        color: COLORS.hightlightColor,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents for an item in UI list.\n   */\n  set item(item) {\n    this._item = item\n    this.tag('Item').patch({\n      Name: {\n        x: 100,\n        y: 32.5,\n        mount: 0.5,\n        text: { text: item.title, textColor: 0xffffffff, fontSize: 35 },\n      },\n    })\n  }\n\n  /**\n   * Set width of the item.\n   */\n  set width(width) {\n    this.tag('Item').w = width\n  }\n\n  /**\n   * Set height of the item.\n   */\n  set height(height) {\n    this.tag('Item').h = height\n  }\n\n  _focus() {\n    this.tag('Item').scale = 1.1\n  }\n\n  _unfocus() {\n    this.tag('Item').scale = 1\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils, Router } from '@lightningjs/sdk'\nimport AAMPVideoPlayer from './../player/AAMPVideoPlayer'\nimport ThunderCalls from './../api/AppApi'\nimport BluetoothApi from './../api/BluetoothApi'\nimport HomeApi from '../api/HomeApi'\nimport AppApi from '../api/AppApi'\nimport Item from './../items/item'\n\n/**\n * Class for splash screen.\n */\nexport default class SplashScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Splashscreen: {\n        w: 1920,\n        h: 1080,\n        alpha: 0,\n        //just to cache the image\n        Cache: {\n          w: 0,\n          h: 0,\n          x: -1920,\n          src: Utils.asset('images/tvShows/background.jpg'),\n        },\n        Img: {\n          mount: 0.5,\n          x: 1920 / 2,\n          y: 1080 / 2,\n          src: Utils.asset('images/RDKLogo.png'),\n        },\n      },\n      SplashVideo: {\n        w: 1920,\n        h: 1080,\n        alpha: 0,\n        Player: { type: AAMPVideoPlayer, w: 1920, h: 1080, x: 0, y: 0 },\n      },\n      AutoRemotePair: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          w: 1600,\n          y: 474,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: 'Pair Your Remote',\n            textColor: 0xffffffff,\n          },\n        },\n        Description: {\n          w: 1300,\n          y: 550,\n          x: 150,\n          text: {\n            fontSize: 35,\n            textAlign: 'center',\n            maxLines: 2,\n            text: 'Please put the remote in pairing mode, scanning will start in a minute',\n\n            textColor: 0xffe5e5e5,\n          },\n        },\n        LoadingIcon: {\n          x: 750,\n          y: 600,\n          alpha: 0,\n          src: Utils.asset('images/loading.png'),\n        },\n        RemoteImg: {\n          x: 1300,\n          y: 300,\n          src: Utils.asset('images/remote.png'),\n        },\n      },\n      ConnectivityScreen: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          w: 1920,\n          y: 325,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: \"You're not connected to the internet\",\n            textColor: 0xffffffff,\n          },\n        },\n        Description: {\n          w: 1920,\n          y: 400,\n          text: {\n            fontSize: 35,\n            textAlign: 'center',\n            maxLines: 2,\n            text:\n              'Please connect to either a wired connection or a WiFi Network, For WiFi network press home and then go to settings',\n            wordWrapWidth: 1400,\n            textColor: 0xffe5e5e5,\n          },\n        },\n      },\n      UISwitch: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          x: 1920 / 2,\n          y: 400,\n          mountX: 0.5,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: 'Choose your UI',\n            textColor: 0xffffffff,\n          },\n        },\n        UIList: {\n          x: 1920 / 2 + 20,\n          y: 500,\n          type: Lightning.components.ListComponent,\n          w: 224 * 3,\n          h: 100,\n          itemSize: 204 + 20,\n          roll: true,\n          mountX: 0.5,\n        },\n      },\n    }\n  }\n  /**\n   * Function to be excuted when the Bluetooth screen is enabled.\n   */\n  _enable() {\n    this.remotePaired = true\n    this.hasInternet = true\n\n    this._bt = new BluetoothApi()\n    this._bt.activate()\n    this._bt\n      .getPairedDevices()\n      .then(() => this._bt.getConnectedDevices())\n      .then(() => {\n        let paired = this._bt.pairedDevices\n        let connected = this._bt.connectedDevices\n\n        if (paired.length == 0 && connected.length == 0) {\n          this.remotePaired = false\n        }\n      })\n    // this.startVideo()\n    // var thunderCalls = new ThunderCalls()\n    // thunderCalls.checkForInternet().then(result => {\n    //   this.hasInternet = result\n    // })\n\n    this._setState('Splashscreen')\n  }\n  /**\n   * Function to be executed when the Bluetooth screen is disabled from the screen.\n   */\n  _disable() {\n    if (this._bt) this._bt.deactivate()\n    if (this.player) this.player.stop()\n  }\n\n  _init() {\n    this.appApi = new AppApi()\n    var homeApi = new HomeApi()\n    this.tag('UISwitch.UIList').items = homeApi.getUIInfo().map((item, index) => {\n      return {\n        ref: 'UI' + index,\n        w: 204,\n        h: 100,\n        type: Item,\n        item: item,\n      }\n    })\n  }\n  /**\n   * Function to startVideo.\n   */\n  startVideo() {\n    this.player = this.tag('SplashVideo.Player')\n    try {\n      this.player.load({\n        title: '',\n        subtitle: '',\n        image: '',\n        url: 'https://rdkwiki.com/rdk-apps/splash/splash.MOV',\n        drmConfig: null,\n      })\n      //this.player.setVideoRect(0, 0, 1280, 720)\n      // this.player.pause()\n    } catch (error) {\n      this.player = null\n      console.log('###########', error)\n    }\n  }\n\n  /**\n   * Function to handle the different states of the app.\n   */\n  static _states() {\n    return [\n      class Splashscreen extends this {\n        $enter() {\n          const myAnimation = this.tag('Splashscreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 0, 1: 1 } }],\n          })\n          myAnimation.start()\n\n          this.screenTimeout = setTimeout(() => {\n            this._setState('SplashVideo')\n          }, 5000)\n        }\n        _handleKey(event) {\n          if (event.keyCode == 83) this._setState('UISwitch')\n        }\n        $exit() {\n          const myAnimation = this.tag('Splashscreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n          window.clearTimeout(this.screenTimeout)\n        }\n      },\n      class SplashVideo extends this {\n        $enter() {\n          const myAnimation = this.tag('SplashVideo').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 0, 1: 1 } }],\n          })\n          myAnimation.start()\n          this.startVideo()\n          this.timeout = setTimeout(() => {\n            if (this.remotePaired == false) this._setState('AutoRemotePair')\n            else if (this.hasInternet == false) this._setState('ConnectivityScreen')\n            else Router.navigate('home')\n          }, 5000)\n        }\n        $exit() {\n          const myAnimation = this.tag('SplashVideo').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.on('finish', p => {\n            if (this.player) this.player.stop()\n          })\n          myAnimation.start()\n          window.clearTimeout(this.timeout)\n        }\n        _handleKey(event) {\n          if (event.keyCode == 83) this._setState('UISwitch')\n        }\n      },\n      class ConnectivityScreen extends this {\n        $enter() {\n          const myAnimation = this.tag('ConnectivityScreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          myAnimation.start()\n          setTimeout(() => {\n            Router.navigate('home')\n          }, 5000)\n        }\n        $exit() {\n          const myAnimation = this.tag('ConnectivityScreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n        _handleKey() {\n          Router.navigate('home')\n        }\n      },\n      class AutoRemotePair extends this {\n        $enter() {\n          const myAnimation = this.tag('AutoRemotePair').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          var connected = false\n          var timer = setTimeout(() => {\n            if (!connected)\n              this.tag('AutoRemotePair.Description').text =\n                'Please put the remote in pairing mode, No Bluetooth device found'\n            setTimeout(() => {\n              if (this.hasInternet == false) this._setState('ConnectivityScreen')\n              else Router.navigate('home')\n            }, 1000)\n          }, 10000)\n          var error = () => {\n            this.tag('AutoRemotePair.Description').text =\n              'Please put the remote in pairing mode, , No Bluetooth device found'\n            setTimeout(() => {\n              if (this.hasInternet == false) this._setState('ConnectivityScreen')\n              else Router.navigate('home')\n            }, 1000)\n          }\n          myAnimation.start()\n          setTimeout(() => {\n            this.tag('AutoRemotePair.Description').text =\n              'Please put the remote in pairing mode, Scanning...'\n            const rotateAnimation = this.tag('AutoRemotePair.LoadingIcon').animation({\n              duration: 1,\n              repeat: -1,\n              stopMethod: 'immediate',\n              stopDelay: 0.2,\n              actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n            })\n            rotateAnimation.play()\n            this.tag('AutoRemotePair.LoadingIcon').alpha = 1\n            this._bt.startScan()\n            this._bt.registerEvent('onDiscoveredDevice', () => {\n              let discovered = this._bt.discoveredDevices\n              if (discovered.length > 0) {\n                this._bt.pair(discovered[0].deviceID)\n              } else {\n                error()\n              }\n            })\n          }, 5000)\n          this._bt.registerEvent('onPairingChange', () => {\n            let pairedDevices = this._bt.pairedDevices\n            if (pairedDevices.length > 0) {\n              this._bt.connect(pairedDevices[0].deviceID, pairedDevices[0].deviceType)\n            } else {\n              setTimeout(() => {\n                this._bt.getPairedDevices().then(() => {\n                  let pairedDevices = this._bt.pairedDevices\n                  if (pairedDevices.length > 0) {\n                    this._bt.connect(pairedDevices[0].deviceID, pairedDevices[0].deviceType)\n                  } else {\n                    error()\n                  }\n                })\n              }, 2000)\n            }\n          })\n          this._bt.registerEvent('onConnectionChange', () => {\n            let connectedDevices = this._bt.connectedDevices\n            if (connectedDevices.length > 0) {\n              this.tag('AutoRemotePair.Description').text =\n                'Please put the remote in pairing mode, Connected to ' + connectedDevices[0].name\n              connected = true\n              clearTimeout(timer)\n              setTimeout(() => {\n                if (this.hasInternet == false) this._setState('ConnectivityScreen')\n                else Router.navigate('home')\n              }, 2000)\n            } else {\n              setTimeout(() => {\n                this._bt.getConnectedDevices().then(() => {\n                  let connectedDevices = this._bt.connectedDevices\n                  if (connectedDevices.length > 0) {\n                    this.tag('AutoRemotePair.Description').text =\n                      'Please put the remote in pairing mode, Connected to ' +\n                      connectedDevices[0].name\n                    connected = true\n                    clearTimeout(timer)\n                    setTimeout(() => {\n                      if (this.hasInternet == false) this._setState('ConnectivityScreen')\n                      else Router.navigate('home')\n                    }, 2000)\n                  } else {\n                    error()\n                  }\n                })\n              }, 2000)\n            }\n          })\n        }\n        $exit() {\n          const myAnimation = this.tag('AutoRemotePair').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n      },\n      class UISwitch extends this {\n        $enter() {\n          const myAnimation = this.tag('UISwitch').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          myAnimation.start()\n        }\n        _getFocused() {\n          return this.tag('UISwitch.UIList').element\n        }\n        _handleRight() {\n          if (this.tag('UISwitch.UIList').length - 1 != this.tag('UISwitch.UIList').index) {\n            this.tag('UISwitch.UIList').setNext()\n            return this.tag('UISwitch.UIList').element\n          }\n        }\n        _handleLeft() {\n          if (this.tag('UISwitch.UIList').index > 0) {\n            this.tag('UISwitch.UIList').setPrevious()\n            return this.tag('UISwitch.UIList').element\n          }\n        }\n        _handleEnter() {\n          if (this.tag('UISwitch.UIList').element._item.title != 'DEFAULT') {\n            this.appApi.launchResident(this.tag('UISwitch.UIList').element._item.url)\n          } else {\n            if (this.remotePaired == false) this._setState('AutoRemotePair')\n            else if (this.hasInternet == false) this._setState('ConnectivityScreen')\n            else Router.navigate('home')\n          }\n        }\n        $exit() {\n          const myAnimation = this.tag('UISwitch').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for rendering items in Settings screen.\n */\nexport default class SettingsItem extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents for an item in settings screen.\n   */\n  set item(item) {\n    this._item = item\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: this.tag('Item').h / 2,\n        mountY: 0.5,\n        text: { text: item, fontSize: 25, textColor: COLORS.textColor },\n      },\n    })\n  }\n\n  /**\n   * Set width of the item.\n   */\n  set width(width) {\n    this.tag('Item').w = width\n  }\n\n  /**\n   * Set height of the item.\n   */\n  set height(height) {\n    this.tag('Item').h = height\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport SettingsItem from './SettingsItem'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for the item in the Bluetooth screen.\n */\nexport default class BluetoothItem extends SettingsItem {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents of an item in the Bluetooth screen.\n   */\n  set item(item) {\n    this._item = item\n    this.connected = item.connected ? 'Connected' : 'Not Connected'\n    this.status = item.paired ? this.connected : 'Not Paired'\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: 32.5,\n        mountY: 0.5,\n        text: { text: item.name, fontSize: 25, textColor: COLORS.textColor },\n      },\n\n      Right: {\n        x: 1920 / 3 - 80,\n        mountX: 1,\n        y: 32.5,\n        mountY: 0.5,\n        flex: { direction: 'row' },\n        Text: { x: 0, flexItem: {}, text: { text: this.status, fontSize: 25 } },\n        Info: {\n          color: 0xff0000ff,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/info.png'), 32.5, 32.5),\n        },\n      },\n    })\n    if (this.status == 'Connected') {\n      this.tag('Item.Right.Info').visible = false\n    } else {\n      this.tag('Item.Right.Info').visible = true\n    }\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\nimport SettingsItem from './../items/SettingsItem'\n\n/**\n * Class for pairing screen for the Bluetooth.\n */\nexport default class BluetoothPairingScreen extends Lightning.Component {\n  static _template() {\n    return {\n      PairingScreen: {\n        x: 0,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      Title: {\n        x: 20,\n        y: 100,\n        text: { text: '', fontSize: 30, textColor: COLORS.titleColor },\n      },\n      List: {\n        x: 20,\n        y: 150,\n        type: Lightning.components.ListComponent,\n        w: 1920 / 3,\n        h: 400,\n        itemSize: 65,\n        horizontal: false,\n        invertDirection: true,\n        roll: true,\n      },\n      Status: {\n        x: 20,\n        y: 500,\n        Text: {\n          text: {\n            text: 'Enter the below code in your Bluetooth device and press enter',\n            wordWrapWidth: 1920 / 3 - 70,\n            fontSize: 30,\n          },\n        },\n        Code: {\n          x: 0,\n          y: 60,\n          text: { text: '' },\n        },\n        visible: false,\n      },\n    }\n  }\n  set item(item) {\n    this.tag('Status').visible = false\n    this.tag('Title').text = item.name\n    var options = []\n    this._item = item\n    if (item.paired) {\n      if (item.connected) {\n        options = ['Disconnect', 'Unpair', 'Cancel']\n      } else {\n        options = ['Connect', 'Unpair', 'Cancel']\n      }\n    } else {\n      options = ['Pair', 'Cancel']\n    }\n    this.tag('List').items = options.map((item, index) => {\n      return {\n        ref: item,\n        w: 1920 / 3,\n        h: 65,\n        type: SettingsItem,\n        item: item,\n      }\n    })\n  }\n\n  set code(code) {\n    this.tag('Status.Code').text.text = code\n    this.tag('Status').visible = true\n  }\n\n  _getFocused() {\n    return this.tag('List').element\n  }\n\n  _handleDown() {\n    this.tag('List').setNext()\n  }\n\n  _handleUp() {\n    this.tag('List').setPrevious()\n  }\n\n  _handleEnter() {\n    this.fireAncestors('$pressEnter', this.tag('List').element.ref)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport BluetoothItem from '../items/BluetoothItem'\nimport BluetoothApi from './../api/BluetoothApi'\nimport BluetoothPairingScreen from './BluetoothPairingScreen'\nimport { COLORS } from './../colors/Colors'\n\n/**\n * Class for Bluetooth screen.\n */\nexport default class BluetoothScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Title: {\n        x: 1920 - 1920 / 3 + 1920 / 6,\n        y: 50,\n        text: { text: 'Bluetooth', textColor: COLORS.headingColor },\n        mountX: 0.5,\n      },\n      Switch: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 150,\n        rect: true,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n        color: 0x00c0c0c0,\n        w: 1920 / 3 - 70,\n        h: 50,\n        Text: {\n          x: 0,\n          text: { text: 'Bluetooth', textColor: COLORS.titleColor },\n        },\n        Button: {\n          x: 1920 / 3 - 80,\n          y: 10,\n          mountX: 1,\n          src: Utils.asset('images/switch-on.png'),\n        },\n      },\n      Name: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 200,\n        text: {\n          text: 'Now discoverable as',\n          textColor: COLORS.textColor,\n          fontSize: 20,\n        },\n      },\n      Networks: {\n        x: 1920 - 1920 / 3,\n        y: 250,\n        flex: { direction: 'column' },\n        PairedNetworks: {\n          flexItem: { margin: 20 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'My Devices',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          List: {\n            x: 0,\n            y: 65,\n            type: Lightning.components.ListComponent,\n            w: 1920 / 3,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        AvailableNetworks: {\n          flexItem: { margin: 20, marginTop: 30 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'Other Devices',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          Loader: {\n            x: 250,\n            y: -10,\n            w: 50,\n            h: 50,\n            color: 0xff000000,\n            src: Utils.asset('images/loader.png'),\n            visible: false,\n          },\n\n          List: {\n            x: 0,\n            y: 65,\n            w: 1920 / 3,\n            h: 100,\n            type: Lightning.components.ListComponent,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        visible: false,\n      },\n      PairingScreen: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        visible: false,\n        type: BluetoothPairingScreen,\n      },\n      Message: {\n        x: 1920 - 1920 / 3 + 40,\n        y: 950,\n        text: { text: '' },\n      },\n    }\n  }\n\n  _init() {\n    this.loadingAnimation = this.tag('Networks.AvailableNetworks.Loader').animation({\n      duration: 1,\n      repeat: -1,\n      stopMethod: 'immediate',\n      stopDelay: 0.2,\n      actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n    })\n    this.loadingAnimation.play()\n    this._bt = new BluetoothApi()\n    this._bluetooth = true\n    this._activateBluetooth()\n    this._setState('Switch')\n    this._bluetooth = true\n    if (this._bluetooth) {\n      this.tag('Networks').visible = true\n    }\n    this._pairedNetworks = this.tag('Networks.PairedNetworks')\n    this._availableNetworks = this.tag('Networks.AvailableNetworks')\n    this.renderDeviceList()\n  }\n  _active() {\n    this._setState('Switch')\n  }\n  /**\n   * Function to be excuted when the Bluetooth screen is enabled.\n   */\n  _enable() {\n    if (this._bluetooth) {\n      this._bt.startScan()\n    }\n    this.scanTimer = setInterval(() => {\n      if (this._bluetooth) {\n        this._bt.startScan()\n      }\n    }, 15000)\n  }\n\n  /**\n   * Function to be executed when the Bluetooth screen is disabled from the screen.\n   */\n  _disable() {\n    clearInterval(this.scanTimer)\n  }\n\n  /**\n   * Function to render list of Bluetooth devices\n   */\n  renderDeviceList() {\n    this._bt.getPairedDevices().then(result => {\n      this._pairedList = result\n      this._pairedNetworks.h = this._pairedList.length * 65 + 30\n      this._pairedNetworks.tag('List').h = this._pairedList.length * 65\n      this._pairedNetworks.tag('List').items = this._pairedList.map((item, index) => {\n        item.paired = true\n        return {\n          ref: 'Paired' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: BluetoothItem,\n          item: item,\n        }\n      })\n    })\n    this._bt.getDiscoveredDevices().then(result => {\n      this._discoveredList = result\n      this._otherList = this._discoveredList.filter(device => {\n        if (!device.paired) {\n          result = this._pairedList.map(a => a.deviceID)\n          if (result.includes(device.deviceID)) {\n            return false\n          } else return device\n        }\n      })\n      this._availableNetworks.h = this._otherList.length * 65 + 30\n      this._availableNetworks.tag('List').h = this._otherList.length * 65\n      this._availableNetworks.tag('List').items = this._otherList.map((item, index) => {\n        return {\n          ref: 'Other' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: BluetoothItem,\n          item: item,\n        }\n      })\n    })\n  }\n\n  static _states() {\n    return [\n      class Switch extends this {\n        $enter() {\n          this.tag('Switch').color = COLORS.hightlightColor\n        }\n        $exit() {\n          this.tag('Switch').color = 0x00c0c0c0\n        }\n        _handleDown() {\n          if (this._bluetooth) {\n            if (this._pairedNetworks.tag('List').length > 0) {\n              this._setState('PairedDevices')\n            } else if (this._availableNetworks.tag('List').length > 0) {\n              this._setState('AvailableDevices')\n            }\n          }\n        }\n        _handleEnter() {\n          this.switch()\n        }\n      },\n      class PairedDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._pairedNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('MyDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('MyDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._pairedNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class AvailableDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._availableNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('AvailableDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('AvailableDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._availableNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class PairingScreen extends this {\n        _getFocused() {\n          return this.tag('PairingScreen')\n        }\n        $pressEnter(option) {\n          if (option === 'Cancel') {\n            this._setState('Switch')\n          } else if (option === 'Pair') {\n            this._bt.pair(this._availableNetworks.tag('List').element._item.deviceID).then(() => {})\n          } else if (option === 'Connect') {\n            this._bt\n              .connect(\n                this._pairedNetworks.tag('List').element._item.deviceID,\n                this._pairedNetworks.tag('List').element._item.deviceType\n              )\n              .then(result => {\n                if (!result) {\n                  this.tag('Message').text = 'CONNECTION FAILED'\n                  this._setState('Switch')\n                }\n                setTimeout(() => {\n                  this.tag('Message').text = ''\n                }, 2000)\n              })\n          } else if (option === 'Disconnect') {\n            this._bt\n              .disconnect(\n                this._pairedNetworks.tag('List').element._item.deviceID,\n                this._pairedNetworks.tag('List').element._item.deviceType\n              )\n              .then(() => {})\n            this._setState('Switch')\n          } else if (option === 'Unpair') {\n            this._bt.unpair(this._pairedNetworks.tag('List').element._item.deviceID).then(() => {})\n            this._setState('Switch')\n          }\n        }\n        $exit() {\n          this.tag('PairingScreen').visible = false\n        }\n      },\n    ]\n  }\n\n  /**\n   * Function to navigate through the lists in the screen.\n   * @param {string} listname\n   * @param {string} dir\n   */\n  _navigate(listname, dir) {\n    let list\n    if (listname === 'MyDevices') list = this._pairedNetworks.tag('List')\n    else if (listname === 'AvailableDevices') list = this._availableNetworks.tag('List')\n    if (dir === 'down') {\n      if (list.index < list.length - 1) list.setNext()\n      else if (list.index == list.length - 1) {\n        if (listname === 'MyDevices' && this._availableNetworks.tag('List').length > 0) {\n          this._setState('AvailableDevices')\n        }\n      }\n    } else if (dir === 'up') {\n      if (list.index > 0) list.setPrevious()\n      else if (list.index == 0) {\n        if (listname === 'AvailableDevices' && this._pairedNetworks.tag('List').length > 0) {\n          this._setState('PairedDevices')\n        } else {\n          this._setState('Switch')\n        }\n      }\n    }\n  }\n\n  /**\n   * Function to turn on and off Bluetooth.\n   */\n  switch() {\n    if (this._bluetooth) {\n      this._bt.disable().then(result => {\n        if (result.success) {\n          this._bluetooth = false\n          this.tag('Networks').visible = false\n          this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n        }\n      })\n    } else {\n      this._bt.enable().then(result => {\n        if (result.success) {\n          this._bluetooth = true\n          this.tag('Networks').visible = true\n          this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n          this.renderDeviceList()\n          this._bt.startScan()\n        }\n      })\n    }\n  }\n\n  /**\n   * Function to activate Bluetooth plugin.\n   */\n  _activateBluetooth() {\n    this._bt.activate().then(() => {\n      this._bt.registerEvent('onDiscoveredDevice', () => {\n        this.renderDeviceList()\n      })\n      this._bt.registerEvent('onPairingChange', status => {\n        this._bt.startScan()\n        this.renderDeviceList()\n        this._setState('Switch')\n      })\n      this._bt.registerEvent('onPairingRequest', notification => {\n        if (notification.pinRequired === 'true' && notification.pinValue) {\n          //this.fireAncestors('$rerenderDeviceOptions', notification.pinValue)\n          this.tag('PairingScreen').code = notification.pinValue\n        } else {\n          this.respondToPairingRequest(notification.deviceID, 'ACCEPTED')\n        }\n      })\n      this._bt.registerEvent('onConnectionChange', notification => {\n        this._bt.startScan()\n        console.log('CONNECTION CHANGED' + JSON.stringify(notification))\n        this.renderDeviceList()\n        this._setState('Switch')\n        if (notification.connected) {\n          this.tag('Message').text = 'CONNECTION SUCCESS'\n        } else {\n          this.tag('Message').text = 'CONNECTION FAILED'\n        }\n        setTimeout(() => {\n          this.tag('Message').text = ''\n        }, 2000)\n      })\n      this._bt.registerEvent('onDiscoveryCompleted', () => {\n        this.tag('Networks.AvailableNetworks.Loader').visible = false\n        this.renderDeviceList()\n      })\n      this._bt.registerEvent('onDiscoveryStarted', () => {\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      })\n      this._bt.registerEvent('onRequestFailed', notification => {\n        this._bt.startScan()\n        this.renderDeviceList()\n        this._setState('Switch')\n        this.tag('Message').text = notification.newStatus\n        setTimeout(() => {\n          this.tag('Message').text = ''\n        }, 2000)\n      })\n      //this._bt.startScan()\n      this._bt.getName().then(name => {\n        this.tag('Name').text.text = `Now discoverable as \"${name}\"`\n      })\n      // this._bluetooth = true\n      // this.tag('Networks').visible = true\n      // this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n      // this.renderDeviceList()\n    })\n  }\n\n  /**\n   * Function to respond to Bluetooth client.\n   * @param {number} deviceID\n   * @param {string} responseValue\n   */\n  respondToPairingRequest(deviceID, responseValue) {\n    this._bt.respondToEvent(deviceID, 'onPairingRequest', responseValue)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport SettingsItem from './SettingsItem'\nimport { COLORS } from '../colors/Colors'\n\nexport default class WiFiItem extends SettingsItem {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents of an item in the Bluetooth screen.\n   */\n  set item(item) {\n    this._item = item\n    this.status = item.connected ? 'Connected' : 'Not Connected'\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: 32.5,\n        mountY: 0.5,\n        text: { text: item.ssid, fontSize: 25, textColor: COLORS.textColor },\n      },\n\n      Right: {\n        x: 1920 / 3 - 80,\n        mountX: 1,\n        y: 32.5,\n        mountY: 0.5,\n        flex: { direction: 'row' },\n        Lock: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/wifi-lock.png'), 32.5, 32.5),\n        },\n        Icon: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/wifi-icon.png'), 32.5, 32.5),\n        },\n        Info: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/info.png'), 32.5, 32.5),\n        },\n      },\n    })\n    if (item.security == '0' || item.security == '15') {\n      this.tag('Item.Right.Lock').visible = false\n    } else {\n      this.tag('Item.Right.Lock').visible = true\n    }\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\n\nexport const WiFiState = {\n  UNINSTALLED: 0,\n  DISABLED: 1,\n  DISCONNECTED: 2,\n  PAIRING: 3,\n  CONNECTING: 4,\n  CONNECTED: 5,\n  FAILED: 6,\n}\n\nexport default class Wifi {\n  constructor() {\n    this._events = new Map()\n  }\n\n  /**\n   * Function to activate the wifi plugin.\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      }\n      this._thunder = ThunderJS(config)\n      this.callsign = 'org.rdk.Wifi'\n      this._thunder.call('Controller', 'activate', { callsign: 'org.rdk.Network' }).then(result => {\n        this._thunder.on('org.rdk.Network', 'onIPAddressStatusChanged', notification => {\n          if (this._events.has('onIPAddressStatusChanged')) {\n            this._events.get('onIPAddressStatusChanged')(notification)\n          }\n        })\n        this._thunder.on('org.rdk.Network','onDefaultInterfaceChanged',notification=>{\n          if (this._events.has('onDefaultInterfaceChanged')) {\n            this._events.get('onDefaultInterfaceChanged')(notification)\n          }\n        })\n      })\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log('Wifi activated', result)\n\n          this.getCurrentState().then(state => {\n            if (state === WiFiState.DISABLED) {\n              this.setEnabled(true)\n            }\n          })\n\n          this._thunder.on(this.callsign, 'onWIFIStateChanged', notification => {\n            console.log('onWIFIStateChanged: ' + notification.state)\n            if (this._events.has('onWIFIStateChanged')) {\n              this._events.get('onWIFIStateChanged')(notification)\n            }\n          })\n          this._thunder.on(this.callsign, 'onError', notification => {\n            console.log('Error: ' + notification)\n            if (this._events.has('onError')) {\n              this._events.get('onError')(notification)\n            }\n          })\n\n          this._thunder.on(this.callsign, 'onAvailableSSIDs', notification => {\n            console.log('AvailableSSIDs: ' + JSON.stringify(notification))\n            if (notification.moreData === false) {\n              this.stopScan()\n              notification.ssids = notification.ssids.filter(\n                (item, pos) => notification.ssids.findIndex(e => e.ssid === item.ssid) === pos\n              )\n              if (this._events.has('onAvailableSSIDs')) {\n                this._events.get('onAvailableSSIDs')(notification)\n              }\n            }\n          })\n\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Wifi activation failed: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   *Register events and event listeners.\n   * @param {string} eventId\n   * @param {function} callback\n   *\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback)\n  }\n\n  /**\n   * Deactivates wifi plugin.\n   */\n  deactivate() {\n    this._events = new Map()\n    this._thunder = null\n  }\n\n  /**\n   * Returns connected SSIDs\n   */\n  getConnectedSSID() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getConnectedSSID')\n        .then(result => {\n          console.log('ConnectedSSID: ' + result.ssid)\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`getConnectedSSID fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Start scanning for available wifi.\n   */\n  discoverSSIDs() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'startScan', { incremental: false, ssid: '', frequency: '' })\n        .then(result => {\n          console.log('startScan success')\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`startScan fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Stops scanning for networks.\n   */\n  stopScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'stopScan')\n        .then(result => {\n          console.log('stopScan success')\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`stopScan fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Function to connect to an SSID\n   * @param {object} device\n   * @param {string} passphrase\n   */\n  connect(device, passphrase) {\n    return new Promise((resolve, reject) => {\n      this.disconnect().then(() => {\n        console.log(`connect SSID ${device.ssid}`)\n        this._thunder\n          .call(this.callsign, 'connect', {\n            ssid: device.ssid,\n            passphrase: passphrase,\n            securityMode: device.security,\n          })\n          .then(result => {\n            console.log(`connected SSID ${device.ssid}`)\n            resolve(result)\n          })\n          .catch(err => {\n            console.error(`Connection failed: ${err}`)\n            reject(err)\n          })\n      }, reject)\n    })\n  }\n\n  /**\n   * Function to disconnect from the SSID.\n   */\n  disconnect() {\n    return new Promise((resolve, reject) => {\n      this._thunder.call(this.callsign, 'disconnect', {}).then(\n        result => {\n          console.log('WiFi disconnected: ' + JSON.stringify(result))\n          resolve(result)\n        },\n        err => {\n          console.error(`Can't disconnect WiFi: ${err}`)\n          reject(err)\n        }\n      )\n    })\n  }\n\n  /**\n   * Returns current state of the Wi-Fi plugin.\n   */\n  getCurrentState() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getCurrentState')\n        .then(result => {\n          console.log(`WiFi state: ${result.state}`)\n          resolve(result.state)\n        })\n        .catch(err => {\n          console.error(`Can't get WiFi state: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Enables/Disables the Wi-Fi.\n   * @param {bool} bool\n   */\n  setEnabled(bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'setEnabled', { enable: bool })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Function to get paired SSID.\n   */\n  getPaired() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getPairedSSID', {})\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't get paired: ${err}`)\n          reject(err)\n        })\n    })\n  }\n  getDefaultInterface() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'getDefaultInterface', {})\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n  setInterface(inter, bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'setInterfaceEnabled', {\n          interface: inter,\n          persist: true,\n          enabled: bool,\n        })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n  setDefaultInterface(interfaceName, bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'setDefaultInterface', {\n          interface: interfaceName,\n          persist: bool,\n        })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\n\n/**\n * Class to render the keypad for the wifi screen.\n */\nexport default class Keypad extends Lightning.Component {\n  static _template() {\n    return {\n      Wrapper: {\n        flex: { direction: 'row' },\n      },\n    }\n  }\n\n  /**\n   * Function to add items to the list.\n   */\n  set items(items) {\n    this._scroll = true\n    this.tag('Wrapper').children = items\n    this._index = 0\n    if (items.length > 0) {\n      this._setState('Filled')\n    } else {\n      this._setState('Empty')\n    }\n  }\n\n  set wrap(bool) {\n    if (bool) {\n      let wrapper = this.tag('Wrapper')\n      wrapper.w = 428\n      wrapper.h = 56\n      this.tag('Wrapper').patch({\n        flex: { direction: 'row', wrap: true },\n      })\n    }\n    this._wrap = true\n  }\n  get items() {\n    return this.tag('Wrapper').children\n  }\n\n  get currentItem() {\n    return this.items[this._index]\n  }\n\n  get length() {\n    return this.items.length\n  }\n\n  set orientation(v) {\n    this._orientation = v\n    if (v === 'horizontal') {\n      this.tag('Wrapper').patch({ flex: { direction: 'row' } })\n    } else {\n      this.tag('Wrapper').patch({ flex: { direction: 'column' } })\n    }\n  }\n\n  get orientation() {\n    return this._orientation || 'horizontal'\n  }\n\n  set jump(bool) {\n    this._jump = bool\n  }\n\n  get jump() {\n    return this._jump || false\n  }\n\n  set jumpToStart(bool) {\n    this._jumpToStart = bool\n  }\n\n  get jumpToStart() {\n    return this._jumpToStart !== undefined ? this._jumpToStart : this.jump\n  }\n\n  set jumpToEnd(bool) {\n    this._jumpToEnd = bool\n  }\n\n  get jumpToEnd() {\n    return this._jumpToEnd !== undefined ? this._jumpToEnd : this.jump\n  }\n\n  _navigate(dir) {\n    this._prevY = this.currentItem.finalY\n    const ori = this.orientation\n    if (dir === 'right' || dir === 'left' || dir === 'up' || dir === 'down') {\n      const length = this.items.length\n      const currentIndex = this._index\n      let targetIndex = currentIndex + 1\n      if (dir === 'left' || (dir === 'up' && this._wrap === false)) {\n        targetIndex = currentIndex - 1\n      }\n      if (dir === 'up' && this._wrap === true) {\n        let n = Math.floor(this.tag('Wrapper').w / this.currentItem.finalW)\n        let pos = currentIndex - n\n        targetIndex = currentIndex - n >= 0 ? pos : -1\n      }\n      if (dir === 'down' && this._wrap === true) {\n        let n = Math.floor(this.tag('Wrapper').w / this.currentItem.finalW)\n        let pos = currentIndex + n\n        targetIndex = pos < length ? pos : -1\n        if (targetIndex == -1) return this.fireAncestors('$listEnd')\n      }\n      if (targetIndex < 0) {\n        return this.fireAncestors('$listStart')\n      }\n      if (targetIndex > -1 && targetIndex < length) {\n        this._index = targetIndex\n      } else if (this.jump || this.jumpToStart || this.jumpToEnd) {\n        if (targetIndex < 0 && this.jumpToEnd) {\n          this._index = targetIndex + length\n        } else if (targetIndex === length && this.jumpToStart) {\n          this._index = 0\n        }\n      } else {\n        return false\n      }\n\n      if (currentIndex !== this._index) {\n        this.indexChanged({ index: this._index, previousIndex: currentIndex })\n      }\n    }\n    //return false\n  }\n\n  setIndex(targetIndex) {\n    if (targetIndex > -1 && targetIndex < this.items.length) {\n      const currentIndex = this._index\n      this._index = targetIndex\n      this.indexChanged({ index: this._index, previousIndex: currentIndex })\n    }\n  }\n\n  indexChanged(event) {\n    this.signal('indexChanged', event)\n  }\n\n  _getFocused() {\n    return this\n  }\n\n  _construct() {\n    this._index = 0\n  }\n\n  _init() {\n    this._setState('Empty')\n  }\n\n  static _states() {\n    return [\n      class Empty extends this {},\n      class Filled extends this {\n        _getFocused() {\n          return this.currentItem\n        }\n        _handleRight() {\n          return this._navigate('right')\n        }\n\n        _handleLeft() {\n          return this._navigate('left')\n        }\n\n        _handleUp() {\n          return this._navigate('up')\n        }\n\n        _handleDown() {\n          return this._navigate('down')\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render the key for wifi screen\n */\nexport default class Key extends Lightning.Component {\n  _construct() {\n    this._keyType = 'alphanum'\n    this._fontSize = 36\n  }\n  static _template() {\n    return {\n      Border: {\n        w: this.width,\n        h: this.height,\n        type: Lightning.components.BorderComponent,\n        colorBorder: 0xff000000,\n      },\n    }\n  }\n  set item(item) {\n    this._key = item\n    this.tag('Border').w = this.w\n    this.tag('Border').h = this.h\n    this.tag('Border').colorBorder = 0xff000000\n    this.tag('Border').content = {\n      Focus: {\n        rect: true,\n        w: this.w,\n        h: this.h,\n        color: 0x00c0c0c0,\n      },\n\n      Key: {\n        x: this.w / 2,\n        y: this.h / 2,\n        mount: 0.5,\n        text: { text: item, fontSize: this._fontSize, fontFace: 'Light' },\n      },\n    }\n    if (this._keyType == 'delete') {\n      this.tag('Border').content = {\n        Key: {\n          src: Utils.asset('images/del.png'),\n          zIndex: 10,\n        },\n      }\n    }\n  }\n  set keyType(type) {\n    this._keyType = type\n  }\n  set fontSize(size) {\n    this._fontSize = size\n  }\n  _focus() {\n    this.tag('Border').content = {\n      Focus: { color: 0xffc0c0c0 },\n      Key: {\n        color: 0xff000000,\n      },\n    }\n    this.tag('Border').colorBorder = 0xffc0c0c0\n  }\n  _unfocus() {\n    this.tag('Border').content = {\n      Focus: { color: 0x00c0c0c0 },\n      Key: {\n        color: 0xffffffff,\n      },\n    }\n    this.tag('Border').colorBorder = 0xff000000\n  }\n  _handleEnter() {\n    this.fireAncestors('$pressedKey', this._key, this._keyType)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class that contains the data for the keypad.\n */\nexport default class KeyDetails {\n  getAlphabet() {\n    let alphabet = 'abcdefghijklmnopqrstuvwxyz  '.split('')\n    return alphabet\n  }\n  getSymbols() {\n    let symbols = '1234567890+/:;()$$@\"\\'.,?!#*-'.split('')\n    return symbols\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport Key from './Key'\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render the key for type selection\n */\nexport default class SelectionKey extends Key {\n  set item(item) {\n    this._key = item\n  }\n  _init() {\n    this._arr = [\n      [25, 0, 0, 25],\n      [0, 0, 0, 0],\n      [0, 25, 25, 0],\n    ]\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          53,\n          this._arr[this._keyType],\n          1,\n          0xff000000,\n          true,\n          0x00000000\n        ),\n      },\n      Text: {\n        x: this.w / 2,\n        y: this.h / 2,\n        mount: 0.5,\n        text: { text: this._key, fontSize: 24, textColor: 0xffffffff, fontFace: 'Regular' },\n      },\n    })\n  }\n\n  _focus() {\n    this.tag('Text').text.fontStyle = 'Bold'\n    this.tag('Text').text.textColor = 0xff000000\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          56,\n          this._arr[this._keyType],\n          0,\n          0xffc0c0c0,\n          true,\n          0xffc0c0c0\n        ),\n      },\n    })\n  }\n\n  _unfocus() {\n    this.tag('Text').text.fontStyle = 'normal'\n    this.tag('Text').text.textColor = 0xffffffff\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          53,\n          this._arr[this._keyType],\n          1,\n          0xff000000,\n          true,\n          0x00000000\n        ),\n      },\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport Keypad from './Keypad'\nimport Key from './Key'\nimport Api from './KeyDetails'\nimport SelectionKey from './SelectionKey'\n\n/**\n * Class to render the wifi password screen.\n */\nexport default class WiFiPasswordScreen extends Lightning.Component {\n  _construct() {\n    this._width = 428\n    this._height = 56\n    this._radius = 28\n    this._strokeWidth = 2\n    this.keySpace = 5\n  }\n  static _template() {\n    return {}\n  }\n  _init() {\n    this._api = new Api()\n\n    this.patch({\n      src: Utils.asset('images/tvShows/background.jpg'),\n      w: 440,\n      h: 560,\n      Entry: {\n        x: 4,\n        y: 10,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0xff1b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Text: {\n          x: 20,\n          y: this._height / 2 + 5,\n          mountY: 0.5,\n          text: { text: 'Password', fontSize: 18, fontFace: 'Light', textColor: 0xffa5a5a5 },\n        },\n        Pwd: {\n          x: 130,\n          y: this._height / 2 + 5,\n          mountY: 0.5,\n          text: {\n            text: '',\n            fontSize: 24,\n            fontFace: 'Light',\n            textColor: 0xffc0c0c0,\n            wordWrapWidth: this._width - 130,\n            wordWrap: false,\n            textOverflow: 'ellipsis',\n          },\n        },\n      },\n      Selection: {\n        x: 4,\n        y: this._height + 21,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0x001b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Types: {\n          type: Lightning.components.ListComponent,\n          itemSize: 143,\n          w: this._width,\n          h: this._height,\n          clipping: true,\n          roll: true,\n          zIndex: 10,\n        },\n      },\n      Keypad: {\n        x: 9,\n        y: (this._height + 21) * 2,\n        w: this._width,\n        wrap: true,\n        type: Keypad,\n      },\n      FunctionalKeys: {\n        x: 9,\n        y: (this._height + 21) * 5 + 15,\n        w: this._width,\n        wrap: true,\n        type: Keypad,\n      },\n      Submit: {\n        x: 4,\n        y: (this._height + 21) * 5 + 15 + 61,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0xff1b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Text: {\n          x: this._width / 2,\n          y: this._height / 2,\n          mount: 0.5,\n          text: { text: 'Submit', fontSize: 24, fontFace: 'Light', textColor: 0xffffffff },\n        },\n      },\n    })\n    this.setKeypad('abc')\n    let clear = {\n      ref: 'Keyclear',\n      w: 117,\n      h: 56,\n      type: Key,\n      fontSize: 24,\n      item: 'CLEAR',\n      keyType: 'clear',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    let space = {\n      ref: 'Keyspace',\n      w: 178,\n      h: 56,\n      type: Key,\n      fontSize: 24,\n      item: 'Space',\n      keyType: 'space',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    let del = {\n      ref: 'Keydel',\n      w: 117,\n      h: 56,\n      keyType: 'delete',\n      type: Key,\n      fontSize: 24,\n      item: '',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    this.tag('FunctionalKeys').items = [clear, space, del]\n    this.tag('Selection.Types').items = ['abc', 'ABC', '#+-'].map((item, index) => {\n      return {\n        ref: 'Item',\n        w: this._width / 3,\n        h: this._height,\n        fontSize: 24,\n        keyType: index,\n        item: item,\n        type: SelectionKey,\n        clipping: true,\n        //keyType: 'selection' + index,\n      }\n    })\n  }\n  _active() {\n    this.tag('Selection.Types').start()\n    this._setState('Selection')\n  }\n  _inactive() {\n    this.tag('Entry.Pwd').text.text = ''\n  }\n  $pressedKey(key, keyType) {\n    console.log(key)\n    let pwd = this.tag('Entry.Pwd')\n    if (keyType === 'alphanum') {\n      pwd.text.text = pwd.text.text + key\n    } else if (keyType === 'clear') {\n      pwd.text.text = ''\n    } else if (keyType === 'space') {\n      pwd.text.text = pwd.text.text + ' '\n    } else if (keyType === 'delete') {\n      pwd.text.text = pwd.text.text.substring(0, pwd.text.text.length - 1)\n    }\n  }\n  setKeypad(type) {\n    let data = []\n    if (type === 'abc') data = this._api.getAlphabet()\n    else if (type === '#+-') data = this._api.getSymbols()\n    else if (type === 'ABC') {\n      data = this._api.getAlphabet().map(i => {\n        return i.toUpperCase()\n      })\n    }\n    this.tag('Keypad').items = []\n    this.tag('Keypad').items = data.map(index => {\n      return {\n        ref: 'Key' + index,\n        w: 56,\n        h: 56,\n        type: Key,\n        item: index,\n        flexItem: { marginRight: 5, marginBottom: 5 },\n      }\n    })\n  }\n  static _states() {\n    return [\n      class Selection extends this {\n        $enter() {\n          this.setKeypad(this.tag('Selection.Types').element._key)\n        }\n        _getFocused() {\n          return this.tag('Selection.Types').element\n        }\n        _handleRight() {\n          if (this.tag('Selection.Types').index < this.tag('Selection.Types').length - 1) {\n            this.tag('Selection.Types').setNext()\n            this.setKeypad(this.tag('Selection.Types').element._key)\n          }\n        }\n        _handleLeft() {\n          if (this.tag('Selection.Types').index != 0) {\n            this.tag('Selection.Types').setPrevious()\n            this.setKeypad(this.tag('Selection.Types').element._key)\n          }\n        }\n        _handleDown() {\n          this._setState('Keypad')\n        }\n      },\n      class Keypad extends this {\n        _getFocused() {\n          return this.tag('Keypad')\n        }\n        $listEnd() {\n          this._setState('Function')\n        }\n        $listStart() {\n          this._setState('Selection')\n        }\n      },\n      class Function extends this {\n        _getFocused() {\n          return this.tag('FunctionalKeys')\n        }\n        _handleUp() {\n          this._setState('Keypad')\n        }\n        $listEnd() {\n          console.log('down')\n          this._setState('Submit')\n        }\n        $listStart() {\n          this._setState('Keypad')\n        }\n      },\n      class Submit extends this {\n        $enter() {\n          this.patch({\n            Submit: {\n              x: 0,\n              y: (this._height + 21) * 5 + 15 + 61,\n              texture: Lightning.Tools.getRoundRect(\n                this._width,\n                this._height,\n                this._radius,\n                this._strokeWidth,\n                0x00c0c0c0,\n                true,\n                0xffc0c0c0\n              ),\n            },\n          })\n          this.tag('Submit.Text').text.textColor = 0xff000000\n        }\n        $exit() {\n          this.patch({\n            Submit: {\n              x: 0,\n              y: (this._height + 21) * 5 + 15 + 61,\n              texture: Lightning.Tools.getRoundRect(\n                this._width,\n                this._height,\n                this._radius,\n                this._strokeWidth,\n                0xff1b1b1b,\n                true,\n                0x00c0c0c0\n              ),\n            },\n          })\n          this.tag('Submit.Text').text.textColor = 0xffffffff\n        }\n        _handleEnter() {\n          this.fireAncestors('$password', this.tag('Entry.Pwd').text.text)\n        }\n        _handleUp() {\n          console.log('Up')\n          this._setState('Function')\n        }\n        _handleLeft() {\n          this._setState('Function')\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\nimport SettingsItem from './../items/SettingsItem'\nimport WiFiPasswordScreen from './wifipasswordscreen/WiFiPasswordScreen'\nexport default class BluetoothPairingScreen extends Lightning.Component {\n  static _template() {\n    return {\n      PairingScreen: {\n        x: 0,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      Title: {\n        x: 20,\n        y: 100,\n        text: { text: '', fontSize: 30, textColor: COLORS.titleColor },\n      },\n      List: {\n        x: 20,\n        y: 150,\n        type: Lightning.components.ListComponent,\n        w: 1920 / 3,\n        h: 400,\n        itemSize: 65,\n        horizontal: false,\n        invertDirection: true,\n        roll: true,\n      },\n      Password: {\n        type: WiFiPasswordScreen,\n        x: 1920 / 3 / 2,\n        y: 350,\n        mountX: 0.5,\n        w: 428,\n        h: 56,\n        alpha: 0,\n      },\n    }\n  }\n  set item(item) {\n    this.tag('Title').text = item.ssid\n    var options = []\n    this._item = item\n    if (item.connected) {\n      options = ['Disconnect', 'Cancel']\n    } else {\n      options = ['Connect', 'Cancel']\n    }\n\n    this.tag('List').items = options.map((item, index) => {\n      return {\n        ref: item,\n        w: 1920 / 3,\n        h: 65,\n        type: SettingsItem,\n        item: item,\n      }\n    })\n    this._setState('Pair')\n  }\n\n  static _states() {\n    return [\n      class Password extends this {\n        $enter() {\n          this.tag('Password').alpha = 1\n        }\n        _getFocused() {\n          return this.tag('Password')\n        }\n        $password(password) {\n          this.fireAncestors('$startConnect', password)\n        }\n        $exit() {\n          this.tag('Password').alpha = 0\n        }\n        _handleKey(event) {\n          if (\n            event.keyCode == 27 ||\n            event.keyCode == 77 ||\n            event.keyCode == 49 ||\n            event.keyCode == 158\n          ) {\n            this._setState('Pair')\n          } else return false\n        }\n      },\n      class Pair extends this {\n        $enter() {}\n        _getFocused() {\n          return this.tag('List').element\n        }\n        _handleDown() {\n          this.tag('List').setNext()\n        }\n        _handleUp() {\n          this.tag('List').setPrevious()\n        }\n        _handleEnter() {\n          if (this.tag('List').element.ref == 'Connect' && this._item.security != '0') {\n            this._setState('Password')\n          } else {\n            this.fireAncestors('$pressEnter', this.tag('List').element.ref)\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport WiFiItem from '../items/WiFiItem'\nimport WiFiApi from './../api/WifiApi'\nimport WiFiPairingScreen from './WiFiPairingScreen'\nimport ThunderJS from 'ThunderJS'\nimport { COLORS } from './../colors/Colors'\n\n/**\n * Class for WiFi screen.\n */\nexport default class WiFiScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Title: {\n        x: 1920 - 1920 / 3 + 1920 / 6,\n        y: 50,\n        text: { text: 'Wi-Fi', textColor: COLORS.headingColor },\n        mountX: 0.5,\n      },\n      Switch: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 150,\n        rect: true,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n        color: 0x00c0c0c0,\n        w: 1920 / 3 - 70,\n        h: 50,\n        Text: {\n          x: 0,\n          text: { text: 'Wi-Fi', textColor: COLORS.titleColor },\n        },\n        Button: {\n          x: 1920 / 3 - 80,\n          y: 10,\n          mountX: 1,\n          src: Utils.asset('images/switch-off.png'),\n        },\n      },\n      Networks: {\n        x: 1920 - 1920 / 3,\n        y: 250,\n        flex: { direction: 'column' },\n        PairedNetworks: {\n          flexItem: { margin: 20 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'My Network',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          List: {\n            x: 0,\n            y: 65,\n            type: Lightning.components.ListComponent,\n            w: 1920 / 3,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        AvailableNetworks: {\n          flexItem: { margin: 20, marginTop: 30 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'Other Networks',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          Loader: {\n            x: 250,\n            y: -10,\n            w: 50,\n            h: 50,\n            color: 0xff000000,\n            src: Utils.asset('images/loader.png'),\n            visible: false,\n          },\n\n          List: {\n            x: 0,\n            y: 65,\n            w: 1920 / 3,\n            h: 100,\n            type: Lightning.components.ListComponent,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        visible: false,\n      },\n      PairingScreen: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        visible: false,\n        type: WiFiPairingScreen,\n      },\n      IpAddress: {\n        x: 1820,\n        y: 920,\n        mountX: 1,\n        mountY: 0,\n        text: {\n          text: 'IP:NA',\n          textColor: COLORS.titleColor,\n          fontSize: 30,\n        },\n      },\n    }\n  }\n  _active() {\n    this._setState('Switch')\n  }\n\n  _init() {\n    this.loadingAnimation = this.tag('Networks.AvailableNetworks.Loader').animation({\n      duration: 1,\n      repeat: -1,\n      stopMethod: 'immediate',\n      stopDelay: 0.2,\n      actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n    })\n    this.loadingAnimation.play()\n    this._wifi = new WiFiApi()\n    this.wifiStatus = false\n    this._activateWiFi()\n    this._setState('Switch')\n    //this.wifiStatus = true\n    if (this.wiFiStatus) {\n      this.tag('Networks').visible = true\n    }\n    this._pairedNetworks = this.tag('Networks.PairedNetworks')\n    this._availableNetworks = this.tag('Networks.AvailableNetworks')\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const systemCallsign = 'org.rdk.System'\n    thunder.Controller.activate({ callsign: systemCallsign })\n      .then(() => {\n        this.displayIp()\n      })\n      .catch(err => {\n        console.log('System Error', err)\n      })\n    this._wifi.registerEvent('onIPAddressStatusChanged', notification => {\n      if (notification.status == 'ACQUIRED') {\n        this.tag('IpAddress').text.text = 'IP:' + notification.ip4Address\n      } else if (notification.status == 'LOST') {\n        this.tag('IpAddress').text.text = 'IP:NA'\n      }\n    })\n    this._wifi.registerEvent('onDefaultInterfaceChanged', notification => {\n      console.log(notification)\n      if (notification.newInterfaceName == 'WIFI') {\n        this._wifi.setEnabled(true).then(result => {\n          if (result.success) {\n            this.wifiStatus = true\n            this.tag('Networks').visible = true\n            this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n            this._wifi.discoverSSIDs()\n            this.tag('Networks.AvailableNetworks.Loader').visible = true\n          }\n        })\n      } else if (\n        notification.newInterfaceName == 'ETHERNET' ||\n        notification.oldInterfaceName == 'WIFI'\n      ) {\n        this._wifi.disconnect()\n        this.wifiStatus = false\n        this.tag('Networks').visible = false\n        this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n        this._setState('Switch')\n      }\n    })\n  }\n  displayIp() {\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const systemCallsign = 'org.rdk.System'\n    thunder\n      .call(systemCallsign, 'getDeviceInfo', { params: 'estb_ip' })\n      .then(result => {\n        this.tag('IpAddress').text.text = 'IP:' + result.estb_ip\n      })\n      .catch(err => {\n        console.log('IpAddress Error', err)\n      })\n  }\n\n  /**\n   * Function to be executed when the Wi-Fi screen is enabled.\n   */\n  _enable() {\n    if (this.wifiStatus) {\n      this._wifi.discoverSSIDs()\n      this.tag('Networks.AvailableNetworks.Loader').visible = true\n    }\n    this.scanTimer = setInterval(() => {\n      if (this.wifiStatus) {\n        this._wifi.discoverSSIDs()\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      }\n    }, 5000)\n  }\n\n  /**\n   * Function to be executed when the Wi-Fi screen is disabled.\n   */\n  _disable() {\n    clearInterval(this.scanTimer)\n  }\n\n  /**\n   * Function to render list of Wi-Fi networks.\n   */\n  renderDeviceList(ssids) {\n    this._wifi.getConnectedSSID().then(result => {\n      if (result.ssid != '') {\n        this._pairedList = [result]\n      } else {\n        this._pairedList = []\n      }\n      this._pairedNetworks.h = this._pairedList.length * 65 + 30\n      this._pairedNetworks.tag('List').h = this._pairedList.length * 65\n      this._pairedNetworks.tag('List').items = this._pairedList.map((item, index) => {\n        item.connected = true\n        return {\n          ref: 'Paired' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: WiFiItem,\n          item: item,\n        }\n      })\n\n      this._otherList = ssids.filter(device => {\n        result = this._pairedList.map(a => a.ssid)\n        if (result.includes(device.ssid)) {\n          return false\n        } else return device\n      })\n      this._availableNetworks.h = this._otherList.length * 65 + 30\n      this._availableNetworks.tag('List').h = this._otherList.length * 65\n      this._availableNetworks.tag('List').items = this._otherList.map((item, index) => {\n        item.connected = false\n        return {\n          ref: 'Other' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: WiFiItem,\n          item: item,\n        }\n      })\n    })\n  }\n\n  static _states() {\n    return [\n      class Switch extends this {\n        $enter() {\n          this.tag('Switch').color = COLORS.hightlightColor\n        }\n        $exit() {\n          this.tag('Switch').color = 0x00c0c0c0\n        }\n        _handleDown() {\n          if (this.wifiStatus) {\n            if (this._pairedNetworks.tag('List').length > 0) {\n              this._setState('PairedDevices')\n            } else if (this._availableNetworks.tag('List').length > 0) {\n              this._setState('AvailableDevices')\n            }\n          }\n        }\n        _handleEnter() {\n          this.switch()\n        }\n      },\n      class PairedDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._pairedNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('MyDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('MyDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._pairedNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class AvailableDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._availableNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('AvailableDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('AvailableDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._availableNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class PairingScreen extends this {\n        _getFocused() {\n          return this.tag('PairingScreen')\n        }\n        $pressEnter(option) {\n          if (option === 'Cancel') {\n            this._setState('Switch')\n          } else if (option === 'Connect') {\n            if (this._availableNetworks.tag('List').element) {\n              this._wifi\n                .connect(this._availableNetworks.tag('List').element._item, '')\n                .then(() => {})\n            }\n            this._setState('Switch')\n          } else if (option === 'Disconnect') {\n            this._wifi.disconnect().then(() => {})\n            this._setState('Switch')\n          }\n        }\n        $startConnect(password) {\n          if (this._availableNetworks.tag('List').element && password != null) {\n            this._wifi.connect(this._availableNetworks.tag('List').element._item, password)\n          } else {\n            this.patch({\n              FailureMessage: {\n                x: (1920 * 2) / 3 + 40,\n                y: 950,\n                text: { text: 'FAILED' },\n              },\n            })\n            setTimeout(() => {\n              this.childList.remove(this.tag('FailureMessage'))\n            }, 2000)\n          }\n          this._setState('Switch')\n        }\n        $exit() {\n          this.tag('PairingScreen').visible = false\n        }\n      },\n    ]\n  }\n\n  /**\n   * Function to navigate through the lists in the screen.\n   * @param {string} listname\n   * @param {string} dir\n   */\n  _navigate(listname, dir) {\n    let list\n    if (listname === 'MyDevices') list = this._pairedNetworks.tag('List')\n    else if (listname === 'AvailableDevices') list = this._availableNetworks.tag('List')\n    if (dir === 'down') {\n      if (list.index < list.length - 1) list.setNext()\n      else if (list.index == list.length - 1) {\n        if (listname === 'MyDevices' && this._availableNetworks.tag('List').length > 0) {\n          this._setState('AvailableDevices')\n        }\n      }\n    } else if (dir === 'up') {\n      if (list.index > 0) list.setPrevious()\n      else if (list.index == 0) {\n        if (listname === 'AvailableDevices' && this._pairedNetworks.tag('List').length > 0) {\n          this._setState('PairedDevices')\n        } else {\n          this._setState('Switch')\n        }\n      }\n    }\n  }\n\n  /**\n   * Function to turn on and off Wi-Fi.\n   */\n  switch() {\n    if (this.wifiStatus) {\n      this._wifi.setInterface('ETHERNET', true).then(result => {\n        if (result.success) {\n          this._wifi.setDefaultInterface('ETHERNET', true).then(result => {\n            if (result.success) {\n              this._wifi.disconnect()\n              this.wifiStatus = false\n              this.tag('Networks').visible = false\n              this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n            }\n          })\n        }\n      })\n    } else {\n      this._wifi.setInterface('WIFI', true).then(result => {\n        if (result.success) {\n          this._wifi.setDefaultInterface('WIFI', false).then(result => {\n            if (result.success) {\n              this._wifi.setEnabled(true).then(result => {\n                if (result.success) {\n                  this.wifiStatus = true\n                  this.tag('Networks').visible = true\n                  this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n                  this._wifi.discoverSSIDs()\n                  this.tag('Networks.AvailableNetworks.Loader').visible = true\n                }\n              })\n            }\n          })\n        }\n      })\n    }\n  }\n\n  /**\n   * Function to activate Wi-Fi plugin.\n   */\n  _activateWiFi() {\n    this._wifi.activate().then(() => {\n      this._wifi.getDefaultInterface().then(result => {\n        if (result.interface == 'WIFI') {\n          this.switch()\n        }\n      })\n    })\n    //this._wifi.discoverSSIDs()\n    this.tag('Networks.AvailableNetworks.Loader').visible = true\n    this._wifi.registerEvent('onWIFIStateChanged', notification => {\n      if (notification.state === 2 || notification.state === 5) {\n        this._wifi.discoverSSIDs()\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      }\n      this._setState('Switch')\n    })\n    this._wifi.registerEvent('onError', notification => {\n      this._wifi.discoverSSIDs()\n      this.tag('Networks.AvailableNetworks.Loader').visible = true\n      if (notification.code == 4) {\n        this.patch({\n          FailureMessage: {\n            x: (1920 * 2) / 3 + 40,\n            y: 950,\n            text: { text: 'INCORRECT PASSWORD' },\n          },\n        })\n        setTimeout(() => {\n          this.childList.remove(this.tag('FailureMessage'))\n        }, 2000)\n      }\n      this._setState('Switch')\n    })\n    this._wifi.registerEvent('onAvailableSSIDs', notification => {\n      this.tag('Networks.AvailableNetworks.Loader').visible = false\n      this.renderDeviceList(notification.ssids)\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils, Router, Storage } from '@lightningjs/sdk'\nimport BluetoothScreen from './BluetoothScreen'\nimport WiFiScreen from './WifiScreen'\n\n/**\n * Class for settings screen.\n */\n\nexport default class SettingsScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n      },\n      Sidebar: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      WiFiScreen: {\n        type: WiFiScreen,\n        visible: false,\n      },\n      BluetoothScreen: {\n        type: BluetoothScreen,\n        visible: false,\n      },\n    }\n  }\n\n  //   /**\n  //  * Function to be excuted when the Bluetooth screen is enabled.\n  //  */\n  _enable() {\n    this._appAnimation = this.animation({\n      duration: 0.3,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n        { p: 'y', v: { 0: 1080, 1: 0 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  // /**\n  //  * Function to be executed when the Bluetooth screen is disabled from the screen.\n  //  */\n  _disable() {\n    this._appAnimation = this.animation({\n      duration: 0.3,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n        { p: 'y', v: { 0: 0, 1: 1080 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  set screen(screen) {\n    this._setState(screen)\n  }\n\n  set params(args) {\n    if (args.animation != undefined) {\n      args.animation.start()\n    }\n  }\n\n  static _states() {\n    return [\n      class BluetoothScreen extends this {\n        $enter() {\n          this.tag('BluetoothScreen').visible = true\n        }\n        _getFocused() {\n          return this.tag('BluetoothScreen')\n        }\n        $exit() {\n          this.tag('BluetoothScreen').visible = false\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          if (\n            (Storage.get('applicationType')=='') &&\n            (key.keyCode == 77 ||\n            key.keyCode == 49 ||\n            key.keyCode == 36 ||\n            key.keyCode == 158 ||\n            key.keyCode == 27 ||\n            (key.keyCode == 73 && key.ctrlKey == true))\n          ) {\n            this._appAnimation = this.animation({\n              duration: 0.5,\n              repeat: 0,\n              stopMethod: 'immediate',\n              actions: [\n                { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n                { p: 'y', v: { 0: 0, 1: 1080 } },\n              ],\n            })\n            this._appAnimation.start()\n            this._appAnimation.on('finish', p => {\n              Router.navigate('home')\n            })\n          } else return false;\n        }\n      },\n      class WiFiScreen extends this {\n        $enter() {\n          this.tag('WiFiScreen').visible = true\n        }\n        _getFocused() {\n          return this.tag('WiFiScreen')\n        }\n        $exit() {\n          this.tag('WiFiScreen').visible = false\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          if (\n            (Storage.get('applicationType')=='') &&\n            (key.keyCode == 77 ||\n            key.keyCode == 49 ||\n            key.keyCode == 36 ||\n            key.keyCode == 158 ||\n            key.keyCode == 27 ||\n            (key.keyCode == 73 && key.ctrlKey == true))\n          ) {\n            this._appAnimation = this.animation({\n              duration: 0.3,\n              repeat: 0,\n              stopMethod: 'immediate',\n              actions: [\n                { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n                { p: 'y', v: { 0: 0, 1: 1080 } },\n              ],\n            })\n            this._appAnimation.start()\n            this._appAnimation.on('finish', p => {\n              Router.navigate('home')\n            })\n          } else return false;\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Router } from '@lightningjs/sdk'\n\nexport default class Error extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 1080,\n      color: 0xffb70606,\n      Label: {\n        x: 100,\n        y: 100,\n        text: {\n          text: 'Error',\n          fontSize: 22,\n        },\n      },\n    }\n  }\n\n  _handleEnter() {\n    Router.navigate('home')\n  }\n\n  _focus() {\n    console.log('focus error page')\n  }\n\n  set error(obj) {\n    const { page, error } = obj\n    console.log(page, error)\n\n    const errorMessage = `\nerror while loading page: ${page.constructor.name}\npress enter to navigate to home\n--\nloaded via hash: ${page[Symbol.for('hash')]}\nresulted in route: ${page[Symbol.for('route')]}\n--\n${error.toString()}`\n\n    this.tag('Label').text = errorMessage\n  }\n\n  pageTransition() {\n    return 'up'\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport Home from './../screens/HomeScreen'\nimport SplashScreen from './../screens/SplashScreen'\nimport Settings from './../screens/SettingsScreen'\nimport Error from './../screens/Error'\n\nexport default {\n  root: 'home',\n  routes: [\n    {\n      path: 'home',\n      component: Home,\n      before() {\n        console.log('before home!')\n        return Promise.resolve()\n      },\n      cache: 10,\n    },\n    {\n      path: 'settings/:screen',\n      options: {\n        preventStorage: true,\n        clearHistory: true,\n        reuseInstance: true\n      },\n      component: Settings,\n      cache: 10,\n    },\n    {\n      path: 'splash',\n      component: SplashScreen,\n      options: {\n        preventStorage: true,\n        clearHistory: true,\n        reuseInstance: false\n      },\n      cache: 10,\n    },\n    {\n      path: '!',\n      component: Error,\n    },\n    {\n      path: '*',\n      component: Home,\n    },\n  ],\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Utils, Router, Storage } from '@lightningjs/sdk'\nimport ThunderJS from 'ThunderJS';\nimport routes from './api/routes'\nimport AppApi from '../src/api/AppApi.js';\n\nexport default class App extends Router.App {\n  static getFonts() {\n    return [{ family: 'Regular', url: Utils.asset('fonts/Roboto-Regular.ttf') }]\n  }\n  _setup() {\n    Router.startRouter(routes, this)\n    document.onkeydown = (e) => {\n      if (e.keyCode == 8) {\n        e.preventDefault()\n      }\n    };\n  }\n\n  _init() {\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    };\n    var thunder = ThunderJS(config);\n    const rdkshellCallsign = 'org.rdk.RDKShell';\n    thunder.Controller.activate({ callsign: rdkshellCallsign })\n      .then(result => {\n        console.log('Successfully activated RDK Shell');\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 27,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 77,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 36,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 49,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 158,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 227,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 179,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n  }\n\n  deactivateChildApp(plugin) {\n    var appApi = new AppApi();\n    switch (plugin) {\n      case 'WebApp':\n        appApi.deactivateWeb();\n        break;\n      case 'Cobalt':\n        appApi.suspendCobalt();\n        break;\n      case 'Lightning':\n        appApi.deactivateLightning();\n        break;\n      case 'Native':\n        appApi.killNative();\n        break;\n      default:\n        break;\n    }\n  }\n\n  _handleKey(key) {\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    };\n    var thunder = ThunderJS(config);\n    var appApi = new AppApi();\n    if (key.keyCode == 227) {\n      var showMax = 'https://ott-app.dstv.com/'\n      this.deactivateChildApp(Storage.get('applicationType'));\n      appApi.launchWeb(showMax);\n      Storage.set('applicationType', 'WebApp');\n      appApi.setVisibility('ResidentApp', false);\n    } else if (key.keyCode == 179 && Storage.get('applicationType') != 'Cobalt') {\n      this.deactivateChildApp(Storage.get('applicationType'));\n      appApi.launchCobalt();\n      Storage.set('applicationType', 'Cobalt');\n      appApi.setVisibility('ResidentApp', false);\n    } else if (key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n      this.deactivateChildApp(Storage.get('applicationType'));\n      Storage.set('applicationType', '');\n      appApi.setVisibility('ResidentApp', true);\n      thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n        console.log('ResidentApp moveToFront Success');\n      });\n      thunder\n        .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n        .then(result => {\n          console.log('ResidentApp moveToFront Success');\n        })\n        .catch(err => {\n          console.log('Error', err);\n        });\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Launch } from '@lightningjs/sdk'\nimport App from './App.js'\n\nexport default function() {\n  return Launch(App, ...arguments)\n}\n"],"names":["settings","subscribers","[object Object]","type","key","fallback","val","obj","keys","split","i","length","undefined","Object","dotGrab","this","get","value","forEach","subscriber","publish","callback","push","index","findIndex","cb","splice","getOwnPropertyNames","prepLog","args","Array","from","shift","Info","Debug","Warn","Error","Settings","console","log","apply","arguments","debug","error","warn","sendMetric","event","params","Log","info","errorMetric","message","code","visible","Metric","events","options","reduce","name","types","app","page","user","media","url","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","timeupdate","volumechange","waiting","timeout","basePath","proxyUrl","asset","relPath","makeQueryString","ensureUrlWithProtocol","test","window","location","protocol","origin","makeFullStaticPath","pathname","path","charAt","cleanUpPathName","substr","slice","parts","indexOf","pop","join","operator","map","encodeURIComponent","formatLocale","locale","toLowerCase","toUpperCase","getLatLon","defaultValue","Promise","resolve","navigator","permissions","query","then","status","state","granted","queryForLatLon","result","geolocation","getCurrentPosition","coords","latitude","longitude","enableHighAccuracy","maximumAge","fetch","response","json","catch","defaultProfile","ageRating","city","zipCode","countryCode","language","getCountryCode","ip","household","getLanguage","latlon","getLocale","mac","platform","packages","uid","stbType","getInfo","profile","setInfo","lng","mediaUrl","Lightning","Component","localCookie","e","forceCookies","_checkIfLocalStorageWorks","getItem","_getItemLocalStorage","setItem","_setItemLocalStorage","removeItem","_removeItemLocalStorage","clear","_clearLocalStorage","_getItemCookie","_setItemCookie","_removeItemCookie","_clearCookies","localStorage","t","document","cookie","match","RegExp","replace","o","Date","r","getTime","toUTCString","namespace","lc","namespacedKey","JSON","parse","stringify","isFunction","v","isObject","isBoolean","isPage","Element","isComponentConstructor","prototype","isArray","ucfirst","isString","isPromise","method","symbols","route","Symbol","hash","store","fromHistory","expires","resume","backtrack","moveOnAxes","axis","direction","bounds","patch","smooth","duration","delay","transition","on","fade","alpha","crossFade","up","down","left","right","isMergeableObject","isNonNullObject","isSpecial","stringValue","toString","call","isReactElement","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","emptyTarget","defaultArrayMerge","target","source","concat","element","getKeys","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","propertyIsOnObject","object","property","_","mergeObject","destination","propertyIsUnsafe","hasOwnProperty","getMergeFunction","customMerge","arrayMerge","sourceIsArray","all","deepmergeAll","array","prev","next","cjs","warned","deprecated","force","LocalizedString","String","sub","string","arg","Locale","__enabled","resp","loadFromObject","lang","tr","__trObj","trObj","fallbackLanguage","values","str","VersionLabel","rect","color","h","w","x","y","mount","Text","text","fontSize","lineHeight","tag","version","sdkVersion","loadTexture","renderWidth","renderHeight","FpsIndicator","texture","Tools","getRoundRect","Background","Counter","textAlign","config","interval","threshold","fps","lastFps","fpsCalculator","stage","dt","off","setInterval","showFps","bind","clearInterval","Math","abs","bgColor","setSmooth","meta","translations","setTranslations","setLanguage","reject","default","translationsObj","Utils","registry","eventListeners","timeouts","intervals","targets","timeoutId","setTimeout","id","clearTimeout","intervalId","handler","addEventListener","targetIndex","fn","removeEventListener","_event","removeEventListeners","clearTimeouts","clearIntervals","AppInstance","defaultOptions","clearColor","canvas2d","defaultFontFace","8","13","27","37","38","39","40","174","175","178","250","191","409","App","appData","platformSettings","Application","Deepmerge","super","loadFonts","fonts","getFonts","load","loadLanguage","Metrics","loaded","c","ref","zIndex","forceZIndexContext","showVersion","childList","a","FpsCounter","_setup","closeApp","clearSubscribers","Registry","onClose","close","remove","gc","destroy","family","descriptors","fontFace","FontFace","add","promise","file","initLanguage","focus","_focussed","_refocus","innerHeight","RoutedApp","Pages","Loading","Label","Widgets","widget","_widget","restore","pages","widgets","getActivePage","running","Map","resolved","expired","rejected","active","move","bucket","has","payload","prop","records","set","delete","commands","ready","now","stop","start","command","getHash","setHash","application","widgetsHost","pagesHost","providers","modifiers","widgetsPerRoute","routeHooks","routerConfig","activeWidget","rootHash","bootRequest","activeRoute","activeHash","forcedHash","previousState","activePage","register","history","initialised","updateHash","lastHash","hasRegex","isWildcard","setupRoutes","routesConfig","bootPage","bootComponent","root","boot","beforeEachRoute","routes","component","hook","cache","before","after","beforeNavigate","stack","create","getWidgetReferences","async","routeReg","loader","_setState","share","doTransition","onRouteFulfilled","handleError","getPageByRoute","isConstruct","sharedInstance","provide","isCreated","mustReuse","constructor","isPageExpired","loadType","send","triggers","emit","addPersistData","hashmod","updateHistory","getPageStackLocation","isNaN","updateWidgets","cleanUp","execProvider","shared","stats","errorPage","storeHash","getMod","regStore","configPrevent","configStore","toStore","mod","routemod","urlValues","getValuesFromHash","pageData","size","k","persist","incorrectParams","pageIn","pageOut","pageTransition","easing","hasCustomTransitions","smoothIn","smoothInOut","transitionsDisabled","Transitions","p","configured","lazyDestroy","destroyOnBack","keepAlive","read","doCleanup","_routedType","scale","getPageFromStack","item","j","getFloor","stripRegex","char","getRouteByHash","getUrlParts","candidates","floor","matches","entries","getRoutesByFloor","hashParts","hasLookupId","isNamedGroup","regexStore","isMatching","regMatches","fullRoute","regex","lookupId","substring","routeParts","routePart","hashPart","storeId","exec","routeRegex","expression","sort","getNamedGroup","storage","decodeURIComponent","to","handleHashChange","override","resolveHashChange","navigate","stored","idx","contents","module","urlParams","flag","mustUpdateHash","flags","reg","createRegister","step","hashLastPart","_handleAppClose","capture","parseInt","hasBootPage","URLSearchParams","getQueryStringParams","isDirectLoad","reload","focusWidget","getByRef","getWidgetByName","handleRemote","restoreFocus","updateConfig","attached","startRouter","instance","appInstance","provider","routerSettings","isObj","getConfigMap","children","_handleBack","preventDefault","_captureKey","focusPage","getActiveWidget","getActiveRoute","getActiveHash","defaultChannels","number","description","entitled","program","title","startTime","channels","randomChannel","random","currentChannel","callbacks","methods","getChannel","channel","getProgram","setChannel","newChannel","find","ApplicationInstance","appSettings","initSettings","initUtils","plugins","initProfile","metrics","initMetrics","mediaPlayer","initMediaPlayer","initVideoPlayer","ads","initAds","router","initRouter","tv","initTV","VideoTexture","Video","pivot","textures","StaticTexture","videoEl","_videoEl","videoView","videoTexture","isVisible","_createVideoTexture","gl","glTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","width","height","getRenderPrecision","_updateVideoTexture","videoWidth","currentTime","frameCount","webkitDecodedFrameCount","_lastFrame","_lastTime","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","expectedAspectRatio","realAspectRatio","scaleX","scaleY","forceRenderUpdate","_updatingVideoTexture","removeListener","COLOR_BUFFER_BIT","top","consumer","precision","textureMode","eventHandlers","adsEnabled","_playingAds","playingAds","fireOnConsumer","skipTime","playAfterSeek","hooks","videoPlayerPlugin","deregisterEventListeners","withPrecision","round","fire","registerEventListeners","fireHook","videoElement","style","position","parseFloat","bottom","details","canInteract","src","hide","setAttribute","enabled","videoId","caid","Ads","prerolls","show","getAttribute","open","cancel","removeAttribute","muted","looped","loop","time","max","min","seconds","seek","display","visibility","Infinity","sourceObject","setup","doSetup","getOwnPropertyDescriptor","__defineGetter__","__defineSetter__","autoSetupMixin","videoEls","getElementsByTagName","createElement","body","appendChild","setupVideoTag","el","addAt","setUpVideoTexture","getAds","midrolls","postrolls","playAd","ad","timeEvents","cleanup","handlers","sendBeacon","firstQuartile","midPoint","thirdQuartile","videoPlayerConsumer","preroll","slot","playSlot","ImageTexture","ws","WebSocket","ws_1","requestsQueue","listeners","notificationListener","data","normalize","socket","connect","readyState","waitForOpen","host","port","endpoint","token","makeWebsocketAddress","request","requestQueueResolver","handleConnectClosure","API","plugin","requestId","versionsConfig","getVersion","versions","jsonrpc","makeBody","connection","execRequest","DeviceInfo","res","freeram","listener","errorCallback","thunder","listener_id","makeListenerId","unregister","api","thunderJS","wrapper","unshift","assign","Proxy","propKey","err","ListItem","Item","Shadow","Title","textColor","mountX","Bg","Image","x_text","y_text","displayName","unfocus","getShadowRect","startsWith","activatedWeb","activatedLightning","activatedCobalt","webUrl","lightningUrl","nativeUrl","ThunderJS","AppApi","poll","getIP","systemcCallsign","Controller","activate","callsign","success","resolution","videoDisplay","childCallsign","uri","client","mimeType","MainView","AppList","components","ListComponent","itemSize","roll","rollMax","horizontal","itemScrollOffset","clipping","MetroApps","TVShows","settingsScreen","indexVal","notification","appApi","Storage","setVisibility","parent","_appAnimation","animation","repeat","stopMethod","actions","0","1","appItems","items","metroApps","tvShowItems","settingsItems","setPrevious","setNext","reset","fireAncestors","applicationType","launchCobalt","launchWeb","launchLightning","launchNative","keyCode","suspendCobalt","deactivateWeb","deactivateLightning","killNative","settingsType","Router","SidePanelItem","SidePanel","invertDirection","sidePanelItems","text_focus","text_unfocus","resetSidePanelItems","TopPanel","Mic","mountY","Search","Time","timeZone","toLocaleDateString","updateTime","date","toLocaleString","hours","getHours","minutes","getMinutes","ampm","PlayerControls","Subtitle","NetworkLogo","TimeBar","ProgressBar","CurrentTime","TotalTime","Buttons","ControlIcon","getSvgTexture","Audio","AudioOptions","Extras","ExtrasOptions","videoDuration","_index","toggle","subtitle","logoPath","SecondsTohhmmss","SeekBar","totalSeconds","signal","hidePlayerControls","timer","PlayPause","Forward","Rewind","Hidden","AAMPVideoPlayer","signals","fastfwd","fastrwd","playbackSpeeds","playerStatesEnum","idle","initializing","paused","player","playbackRateIndex","defaultInitConfig","initialBitrate","offset","networkTimeout","preferredAudioLanguage","liveOffset","drmConfig","xPos","yPos","wPos","hPos","setVideoRect","playerState","videoInfo","positionMiliseconds","AAMPMediaPlayer","_playbackStateChanged","_mediaEndReached","_mediaSpeedChanged","_bitrateChanged","_mediaPlaybackFailed","_mediaProgressUpdate","_mediaPlaybackStarted","_mediaDurationChanged","createPlayer","configObj","initConfig","getDurationSec","rate","setPlaybackRate","getCurrentState","release","ShowControls","HideControls","appListInfo","tvShowsInfo","settingsInfo","sidePanelInfo","uiInfo","metroAppsInfo","HomeApi","HomeScreen","View","Player","homeApi","getAppListInfo","search","appdetails","appdetails_format","applications","getMetroInfo","getTVShowsInfo","getSettingsInfo","getSidePanelInfo","sidePanelData","initialLoad","home","_homeAnimation","zoomOut","_sidePanelAnimation","zoomIn","Playing","stopPlayer","BluetoothApi","_events","_devices","_pairedDevices","_connectedDevices","_thunder","getDiscoveredDevices","newStatus","getPairedDevices","getConnectedDevices","eventId","discoveredDevices","pairedDevices","connectedDevices","deviceID","deviceType","deviceId","eventType","responseValue","COLORS","shader","shaders","RoundedRectangle","radius","_item","Name","SplashScreen","Splashscreen","Cache","Img","SplashVideo","AutoRemotePair","Description","maxLines","LoadingIcon","RemoteImg","ConnectivityScreen","wordWrapWidth","UISwitch","UIList","remotePaired","hasInternet","_bt","paired","connected","deactivate","getUIInfo","image","screenTimeout","startVideo","myAnimation","stopDelay","sm","PI","startScan","registerEvent","discovered","pair","launchResident","SettingsItem","Left","BluetoothItem","Right","flex","flexItem","marginLeft","BluetoothPairingScreen","PairingScreen","List","Status","Code","BluetoothScreen","Switch","Button","Networks","PairedNetworks","margin","AvailableNetworks","marginTop","Loader","Message","loadingAnimation","_bluetooth","_activateBluetooth","_pairedNetworks","_availableNetworks","renderDeviceList","scanTimer","_pairedList","_discoveredList","_otherList","device","includes","switch","PairedDevices","_navigate","AvailableDevices","option","disconnect","unpair","listname","dir","list","disable","enable","pinRequired","pinValue","respondToPairingRequest","getName","respondToEvent","WiFiItem","ssid","Lock","Icon","security","WiFiState","Wifi","setEnabled","moreData","stopScan","ssids","pos","incremental","frequency","passphrase","securityMode","bool","inter","interface","interfaceName","Keypad","Wrapper","_scroll","wrap","_wrap","currentItem","orientation","_orientation","jump","_jump","jumpToStart","_jumpToStart","jumpToEnd","_jumpToEnd","_prevY","finalY","currentIndex","n","finalW","indexChanged","previousIndex","Empty","Filled","Key","_keyType","_fontSize","Border","BorderComponent","colorBorder","_key","content","Focus","keyType","KeyDetails","SelectionKey","_arr","fontStyle","WiFiPasswordScreen","_width","_height","_radius","_strokeWidth","keySpace","_api","Api","Entry","Pwd","wordWrap","textOverflow","Selection","Types","FunctionalKeys","Submit","setKeypad","marginRight","marginBottom","space","del","pwd","getAlphabet","getSymbols","Function","Password","password","Pair","WiFiScreen","WiFiPairingScreen","IpAddress","_wifi","WiFiApi","wifiStatus","_activateWiFi","wiFiStatus","displayIp","ip4Address","newInterfaceName","discoverSSIDs","oldInterfaceName","estb_ip","getConnectedSSID","FailureMessage","setInterface","setDefaultInterface","getDefaultInterface","SettingsScreen","Sidebar","screen","ctrlKey","errorMessage","Home","preventStorage","clearHistory","reuseInstance","onkeydown","rdkshellCallsign","deactivateChildApp","Launch"],"mappings":"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"}