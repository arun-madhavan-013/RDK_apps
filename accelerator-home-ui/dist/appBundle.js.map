{"version":3,"file":"appBundle.js","sources":["../node_modules/@lightningjs/sdk/src/Settings/index.js","../node_modules/@lightningjs/sdk/src/Log/index.js","../node_modules/@lightningjs/sdk/src/Metrics/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/events.js","../node_modules/@lightningjs/sdk/src/helpers/easeExecution.js","../node_modules/@lightningjs/sdk/src/Utils/index.js","../../../../../../Users/deepak.p/AppData/Roaming/npm/node_modules/@lightningjs/cli/src/alias/lightningjs-core.js","../node_modules/@lightningjs/sdk/src/MediaPlayer/index.js","../node_modules/localCookie/module/localCookie.js","../node_modules/@lightningjs/sdk/src/Storage/index.js","../node_modules/@lightningjs/sdk/src/Router/utils.js","../node_modules/@lightningjs/sdk/src/Router/transitions.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/@lightningjs/sdk/src/Locale/index.js","../node_modules/@lightningjs/sdk/src/VersionLabel/index.js","../node_modules/@lightningjs/sdk/src/FpsCounter/index.js","../node_modules/@lightningjs/sdk/src/Language/index.js","../node_modules/@lightningjs/sdk/src/Registry/index.js","../node_modules/@lightningjs/sdk/src/Application/index.js","../node_modules/@lightningjs/sdk/src/Router/base.js","../node_modules/@lightningjs/sdk/src/Router/stats.js","../node_modules/@lightningjs/sdk/src/Router/index.js","../node_modules/@lightningjs/sdk/src/TV/defaults.js","../node_modules/@lightningjs/sdk/src/TV/index.js","../node_modules/@lightningjs/sdk/src/Launch/index.js","../node_modules/@lightningjs/sdk/src/Profile/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/VideoTexture.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/index.js","../node_modules/@lightningjs/sdk/src/Ads/index.js","../node_modules/@lightningjs/sdk/src/helpers/autoSetupMixin.js","../node_modules/@lightningjs/sdk/src/Img/ScaledImageTexture.js","../node_modules/@lightningjs/sdk/src/Pin/dialog.js","../node_modules/ThunderJS/module/thunderJS.js","../src/items/ListItem.js","../src/api/AppApi.js","../src/player/PlayerControl.js","../src/views/MainView.js","../src/items/SidePanelItem.js","../src/views/SidePanel.js","../src/views/TopPanel.js","../src/player/AAMPVideoPlayer.js","../static/data/AppListInfo.js","../static/data/TvShowsInfo.js","../static/data/SettingsInfo.js","../static/data/SidePanelInfo.js","../static/data/UIInfo.js","../static/data/MetroAppsInfo.js","../src/api/HomeApi.js","../src/screens/HomeScreen.js","../src/api/BluetoothApi.js","../src/colors/Colors.js","../src/items/item.js","../src/screens/SplashScreen.js","../src/items/SettingsItem.js","../src/items/BluetoothItem.js","../src/screens/BluetoothPairingScreen.js","../src/screens/BluetoothScreen.js","../src/items/WiFiItem.js","../src/api/WifiApi.js","../src/screens/wifipasswordscreen/Keypad.js","../src/screens/wifipasswordscreen/Key.js","../src/screens/wifipasswordscreen/KeyDetails.js","../src/screens/wifipasswordscreen/SelectionKey.js","../src/screens/wifipasswordscreen/WiFiPasswordScreen.js","../src/screens/WiFiPairingScreen.js","../src/screens/WifiScreen.js","../src/screens/SettingsScreen.js","../src/screens/Error.js","../src/api/routes.js","../src/api/XcastApi.js","../src/App.js","../src/index.js"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst settings = {}\nconst subscribers = {}\n\nexport const initSettings = (appSettings, platformSettings) => {\n  settings['app'] = appSettings\n  settings['platform'] = platformSettings\n  settings['user'] = {}\n}\n\nconst publish = (key, value) => {\n  subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value))\n}\n\nconst dotGrab = (obj = {}, key) => {\n  const keys = key.split('.')\n  for (let i = 0; i < keys.length; i++) {\n    obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {}\n  }\n  return typeof obj === 'object' ? (Object.keys(obj).length ? obj : undefined) : obj\n}\n\nexport default {\n  get(type, key, fallback = undefined) {\n    const val = dotGrab(settings[type], key)\n    return val !== undefined ? val : fallback\n  },\n  has(type, key) {\n    return !!this.get(type, key)\n  },\n  set(key, value) {\n    settings['user'][key] = value\n    publish(key, value)\n  },\n  subscribe(key, callback) {\n    subscribers[key] = subscribers[key] || []\n    subscribers[key].push(callback)\n  },\n  unsubscribe(key, callback) {\n    if (callback) {\n      const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback)\n      index > -1 && subscribers[key].splice(index, 1)\n    } else {\n      if (key in subscribers) {\n        subscribers[key] = []\n      }\n    }\n  },\n  clearSubscribers() {\n    for (const key of Object.getOwnPropertyNames(subscribers)) {\n      delete subscribers[key]\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst prepLog = (type, args) => {\n  const colors = {\n    Info: 'green',\n    Debug: 'gray',\n    Warn: 'orange',\n    Error: 'red',\n  }\n\n  args = Array.from(args)\n  return [\n    '%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type),\n    'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px',\n    args,\n  ]\n}\n\nexport default {\n  info() {\n    Settings.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments))\n  },\n  debug() {\n    Settings.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments))\n  },\n  error() {\n    Settings.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments))\n  },\n  warn() {\n    Settings.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nlet sendMetric = (type, event, params) => {\n  Log.info('Sending metric', type, event, params)\n}\n\nexport const initMetrics = config => {\n  sendMetric = config.sendMetric\n}\n\n// available metric per category\nconst metrics = {\n  app: ['launch', 'loaded', 'ready', 'close'],\n  page: ['view', 'leave'],\n  user: ['click', 'input'],\n  media: [\n    'abort',\n    'canplay',\n    'ended',\n    'pause',\n    'play',\n    // with some videos there occur almost constant suspend events ... should investigate\n    // 'suspend',\n    'volumechange',\n    'waiting',\n    'seeking',\n    'seeked',\n  ],\n}\n\n// error metric function (added to each category)\nconst errorMetric = (type, message, code, visible, params = {}) => {\n  params = { params, ...{ message, code, visible } }\n  sendMetric(type, 'error', params)\n}\n\nconst Metric = (type, events, options = {}) => {\n  return events.reduce(\n    (obj, event) => {\n      obj[event] = (name, params = {}) => {\n        params = { ...options, ...(name ? { name } : {}), ...params }\n        sendMetric(type, event, params)\n      }\n      return obj\n    },\n    {\n      error(message, code, params) {\n        errorMetric(type, message, code, params)\n      },\n      event(name, params) {\n        sendMetric(type, name, params)\n      },\n    }\n  )\n}\n\nconst Metrics = types => {\n  return Object.keys(types).reduce(\n    (obj, type) => {\n      // media metric works a bit different!\n      // it's a function that accepts a url and returns an object with the available metrics\n      // url is automatically passed as a param in every metric\n      type === 'media'\n        ? (obj[type] = url => Metric(type, types[type], { url }))\n        : (obj[type] = Metric(type, types[type]))\n      return obj\n    },\n    { error: errorMetric, event: sendMetric }\n  )\n}\n\nexport default Metrics(metrics)\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  abort: 'Abort',\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  durationchange: 'DurationChange',\n  emptied: 'Emptied',\n  encrypted: 'Encrypted',\n  ended: 'Ended',\n  error: 'Error',\n  interruptbegin: 'InterruptBegin',\n  interruptend: 'InterruptEnd',\n  loadeddata: 'LoadedData',\n  loadedmetadata: 'LoadedMetadata',\n  loadstart: 'LoadStart',\n  pause: 'Pause',\n  play: 'Play',\n  playing: 'Playing',\n  progress: 'Progress',\n  ratechange: 'Ratechange',\n  seeked: 'Seeked',\n  seeking: 'Seeking',\n  stalled: 'Stalled',\n  // suspend: 'Suspend', // this one is called a looooot for some videos\n  timeupdate: 'TimeUpdate',\n  volumechange: 'VolumeChange',\n  waiting: 'Waiting',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet timeout = null\n\nexport default (cb, delay) => {\n  clearTimeout(timeout)\n  timeout = setTimeout(() => {\n    cb()\n  }, delay)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet basePath\nlet proxyUrl\n\nexport const initUtils = config => {\n  basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'))\n\n  if (config.proxyUrl) {\n    proxyUrl = ensureUrlWithProtocol(config.proxyUrl)\n  }\n}\n\nexport default {\n  asset(relPath) {\n    return basePath + relPath\n  },\n  proxyUrl(url, options = {}) {\n    return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url\n  },\n  makeQueryString() {\n    return makeQueryString(...arguments)\n  },\n  // since imageworkers don't work without protocol\n  ensureUrlWithProtocol() {\n    return ensureUrlWithProtocol(...arguments)\n  },\n}\n\nexport const ensureUrlWithProtocol = url => {\n  if (/^\\/\\//.test(url)) {\n    return window.location.protocol + url\n  }\n  if (!/^(?:https?:)/i.test(url)) {\n    return window.location.origin + url\n  }\n  return url\n}\n\nexport const makeFullStaticPath = (pathname = '/', path) => {\n  // ensure path has traling slash\n  path = path.charAt(path.length - 1) !== '/' ? path + '/' : path\n\n  // if path is URL, we assume it's already the full static path, so we just return it\n  if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n    return path\n  }\n\n  if (path.charAt(0) === '/') {\n    return path\n  } else {\n    // cleanup the pathname (i.e. remove possible index.html)\n    pathname = cleanUpPathName(pathname)\n\n    // remove possible leading dot from path\n    path = path.charAt(0) === '.' ? path.substr(1) : path\n    // ensure path has leading slash\n    path = path.charAt(0) !== '/' ? '/' + path : path\n    return pathname + path\n  }\n}\n\nexport const cleanUpPathName = pathname => {\n  if (pathname.slice(-1) === '/') return pathname.slice(0, -1)\n  const parts = pathname.split('/')\n  if (parts[parts.length - 1].indexOf('.') > -1) parts.pop()\n  return parts.join('/')\n}\n\nconst makeQueryString = (url, options = {}, type = 'url') => {\n  // add operator as an option\n  options.operator = 'metrological' // Todo: make this configurable (via url?)\n  // add type (= url or qr) as an option, with url as the value\n  options[type] = url\n\n  return Object.keys(options)\n    .map(key => {\n      return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key])\n    })\n    .join('&')\n}\n","/*\r\n * If not stated otherwise in this file or this component's LICENSE file the\r\n * following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the License);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default window.lng\r\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Metrics from '../Metrics'\nimport Settings from '../Settings'\nimport Log from '../Log'\n\nconst events = [\n  'timeupdate',\n  'error',\n  'ended',\n  'loadeddata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'loadstart',\n  'seeking',\n  'seeked',\n  'encrypted',\n]\n\nlet mediaUrl = url => url\n\nexport const initMediaPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\nexport default class Mediaplayer extends Lightning.Component {\n  _construct() {\n    this._skipRenderToTexture = false\n    this._metrics = null\n    this._textureMode = Settings.get('platform', 'textureMode') || false\n    Log.info('Texture mode: ' + this._textureMode)\n    console.warn(\n      [\n        \"The 'MediaPlayer'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'VideoPlayer'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/videoplayer',\n      ].join('\\n\\n')\n    )\n  }\n\n  static _template() {\n    return {\n      Video: {\n        VideoWrap: {\n          VideoTexture: {\n            visible: false,\n            pivot: 0.5,\n            texture: { type: Lightning.textures.StaticTexture, options: {} },\n          },\n        },\n      },\n    }\n  }\n\n  set skipRenderToTexture(v) {\n    this._skipRenderToTexture = v\n  }\n\n  get textureMode() {\n    return this._textureMode\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  _init() {\n    //re-use videotag if already there\n    const videoEls = document.getElementsByTagName('video')\n    if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0]\n    else {\n      this.videoEl = document.createElement('video')\n      this.videoEl.setAttribute('id', 'video-player')\n      this.videoEl.style.position = 'absolute'\n      this.videoEl.style.zIndex = '1'\n      this.videoEl.style.display = 'none'\n      this.videoEl.setAttribute('width', '100%')\n      this.videoEl.setAttribute('height', '100%')\n\n      this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible'\n      document.body.appendChild(this.videoEl)\n    }\n    if (this.textureMode && !this._skipRenderToTexture) {\n      this._createVideoTexture()\n    }\n\n    this.eventHandlers = []\n  }\n\n  _registerListeners() {\n    events.forEach(event => {\n      const handler = e => {\n        if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n          this._metrics[event]({ currentTime: this.videoEl.currentTime })\n        }\n        this.fire(event, { videoElement: this.videoEl, event: e })\n      }\n      this.eventHandlers.push(handler)\n      this.videoEl.addEventListener(event, handler)\n    })\n  }\n\n  _deregisterListeners() {\n    Log.info('Deregistering event listeners MediaPlayer')\n    events.forEach((event, index) => {\n      this.videoEl.removeEventListener(event, this.eventHandlers[index])\n    })\n    this.eventHandlers = []\n  }\n\n  _attach() {\n    this._registerListeners()\n  }\n\n  _detach() {\n    this._deregisterListeners()\n    this.close()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n  }\n\n  _startUpdatingVideoTexture() {\n    if (this.textureMode && !this._skipRenderToTexture) {\n      const stage = this.stage\n      if (!this._updateVideoTexture) {\n        this._updateVideoTexture = () => {\n          if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n            const gl = stage.gl\n\n            const currentTime = new Date().getTime()\n\n            // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n            // We'll fallback to fixed 30fps in this case.\n            const frameCount = this.videoEl.webkitDecodedFrameCount\n\n            const mustUpdate = frameCount\n              ? this._lastFrame !== frameCount\n              : this._lastTime < currentTime - 30\n\n            if (mustUpdate) {\n              this._lastTime = currentTime\n              this._lastFrame = frameCount\n              try {\n                gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n                this._lastFrame = this.videoEl.webkitDecodedFrameCount\n                this.videoTextureView.visible = true\n\n                this.videoTexture.options.w = this.videoEl.videoWidth\n                this.videoTexture.options.h = this.videoEl.videoHeight\n                const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h\n                const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight\n                if (expectedAspectRatio > realAspectRatio) {\n                  this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio\n                  this.videoTextureView.scaleY = 1\n                } else {\n                  this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio\n                  this.videoTextureView.scaleX = 1\n                }\n              } catch (e) {\n                Log.error('texImage2d video', e)\n                this._stopUpdatingVideoTexture()\n                this.videoTextureView.visible = false\n              }\n              this.videoTexture.source.forceRenderUpdate()\n            }\n          }\n        }\n      }\n      if (!this._updatingVideoTexture) {\n        stage.on('frameStart', this._updateVideoTexture)\n        this._updatingVideoTexture = true\n      }\n    }\n  }\n\n  _stopUpdatingVideoTexture() {\n    if (this.textureMode) {\n      const stage = this.stage\n      stage.removeListener('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = false\n      this.videoTextureView.visible = false\n\n      if (this.videoTexture.options.source) {\n        const gl = stage.gl\n        gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n        gl.clearColor(0, 0, 0, 1)\n        gl.clear(gl.COLOR_BUFFER_BIT)\n      }\n    }\n  }\n\n  updateSettings(settings = {}) {\n    // The Component that 'consumes' the media player.\n    this._consumer = settings.consumer\n\n    if (this._consumer && this._consumer.getMediaplayerSettings) {\n      // Allow consumer to add settings.\n      settings = Object.assign(settings, this._consumer.getMediaplayerSettings())\n    }\n\n    if (!Lightning.Utils.equalValues(this._stream, settings.stream)) {\n      if (settings.stream && settings.stream.keySystem) {\n        navigator\n          .requestMediaKeySystemAccess(\n            settings.stream.keySystem.id,\n            settings.stream.keySystem.config\n          )\n          .then(keySystemAccess => {\n            return keySystemAccess.createMediaKeys()\n          })\n          .then(createdMediaKeys => {\n            return this.videoEl.setMediaKeys(createdMediaKeys)\n          })\n          .then(() => {\n            if (settings.stream && settings.stream.src) this.open(settings.stream.src)\n          })\n          .catch(() => {\n            console.error('Failed to set up MediaKeys')\n          })\n      } else if (settings.stream && settings.stream.src) {\n        // This is here to be backwards compatible, will be removed\n        // in future sdk release\n        if (Settings.get('app', 'hls')) {\n          if (!window.Hls) {\n            window.Hls = class Hls {\n              static isSupported() {\n                console.warn('hls-light not included')\n                return false\n              }\n            }\n          }\n          if (window.Hls.isSupported()) {\n            if (!this._hls) this._hls = new window.Hls({ liveDurationInfinity: true })\n            this._hls.loadSource(settings.stream.src)\n            this._hls.attachMedia(this.videoEl)\n            this.videoEl.style.display = 'block'\n          }\n        } else {\n          this.open(settings.stream.src)\n        }\n      } else {\n        this.close()\n      }\n      this._stream = settings.stream\n    }\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPos)\n  }\n\n  _setHide(hide) {\n    if (this.textureMode) {\n      this.tag('Video').setSmooth('alpha', hide ? 0 : 1)\n    } else {\n      this.videoEl.style.visibility = hide ? 'hidden' : 'visible'\n    }\n  }\n\n  open(url, settings = { hide: false, videoPosition: null }) {\n    // prep the media url to play depending on platform (mediaPlayerplugin)\n    url = mediaUrl(url)\n    this._metrics = Metrics.media(url)\n    Log.info('Playing stream', url)\n    if (this.application.noVideo) {\n      Log.info('noVideo option set, so ignoring: ' + url)\n      return\n    }\n    // close the video when opening same url as current (effectively reloading)\n    if (this.videoEl.getAttribute('src') === url) {\n      this.close()\n    }\n    this.videoEl.setAttribute('src', url)\n\n    // force hide, then force show (in next tick!)\n    // (fixes comcast playback rollover issue)\n    this.videoEl.style.visibility = 'hidden'\n    this.videoEl.style.display = 'none'\n\n    setTimeout(() => {\n      this.videoEl.style.display = 'block'\n      this.videoEl.style.visibility = 'visible'\n    })\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080])\n  }\n\n  close() {\n    // We need to pause first in order to stop sound.\n    this.videoEl.pause()\n    this.videoEl.removeAttribute('src')\n\n    // force load to reset everything without errors\n    this.videoEl.load()\n\n    this._clearSrc()\n\n    this.videoEl.style.display = 'none'\n  }\n\n  playPause() {\n    if (this.isPlaying()) {\n      this.doPause()\n    } else {\n      this.doPlay()\n    }\n  }\n\n  get muted() {\n    return this.videoEl.muted\n  }\n\n  set muted(v) {\n    this.videoEl.muted = v\n  }\n\n  get loop() {\n    return this.videoEl.loop\n  }\n\n  set loop(v) {\n    this.videoEl.loop = v\n  }\n\n  isPlaying() {\n    return this._getState() === 'Playing'\n  }\n\n  doPlay() {\n    this.videoEl.play()\n  }\n\n  doPause() {\n    this.videoEl.pause()\n  }\n\n  reload() {\n    var url = this.videoEl.getAttribute('src')\n    this.close()\n    this.videoEl.src = url\n  }\n\n  getPosition() {\n    return Promise.resolve(this.videoEl.currentTime)\n  }\n\n  setPosition(pos) {\n    this.videoEl.currentTime = pos\n  }\n\n  getDuration() {\n    return Promise.resolve(this.videoEl.duration)\n  }\n\n  seek(time, absolute = false) {\n    if (absolute) {\n      this.videoEl.currentTime = time\n    } else {\n      this.videoEl.currentTime += time\n    }\n  }\n\n  get videoTextureView() {\n    return this.tag('Video').tag('VideoTexture')\n  }\n\n  get videoTexture() {\n    return this.videoTextureView.texture\n  }\n\n  _setVideoArea(videoPos) {\n    if (Lightning.Utils.equalValues(this._videoPos, videoPos)) {\n      return\n    }\n\n    this._videoPos = videoPos\n\n    if (this.textureMode) {\n      this.videoTextureView.patch({\n        smooth: {\n          x: videoPos[0],\n          y: videoPos[1],\n          w: videoPos[2] - videoPos[0],\n          h: videoPos[3] - videoPos[1],\n        },\n      })\n    } else {\n      const precision = this.stage.getRenderPrecision()\n      this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px'\n      this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px'\n      this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px'\n      this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px'\n    }\n  }\n\n  _fireConsumer(event, args) {\n    if (this._consumer) {\n      this._consumer.fire(event, args)\n    }\n  }\n\n  _equalInitData(buf1, buf2) {\n    if (!buf1 || !buf2) return false\n    if (buf1.byteLength != buf2.byteLength) return false\n    const dv1 = new Int8Array(buf1)\n    const dv2 = new Int8Array(buf2)\n    for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false\n    return true\n  }\n\n  error(args) {\n    this._fireConsumer('$mediaplayerError', args)\n    this._setState('')\n    return ''\n  }\n\n  loadeddata(args) {\n    this._fireConsumer('$mediaplayerLoadedData', args)\n  }\n\n  play(args) {\n    this._fireConsumer('$mediaplayerPlay', args)\n  }\n\n  playing(args) {\n    this._fireConsumer('$mediaplayerPlaying', args)\n    this._setState('Playing')\n  }\n\n  canplay(args) {\n    this.videoEl.play()\n    this._fireConsumer('$mediaplayerStart', args)\n  }\n\n  loadstart(args) {\n    this._fireConsumer('$mediaplayerLoad', args)\n  }\n\n  seeked() {\n    this._fireConsumer('$mediaplayerSeeked', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  seeking() {\n    this._fireConsumer('$mediaplayerSeeking', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  durationchange(args) {\n    this._fireConsumer('$mediaplayerDurationChange', args)\n  }\n\n  encrypted(args) {\n    const video = args.videoElement\n    const event = args.event\n    // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n    if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n      this._previousInitData = event.initData\n      this._fireConsumer('$mediaplayerEncrypted', args)\n    }\n  }\n\n  static _states() {\n    return [\n      class Playing extends this {\n        $enter() {\n          this._startUpdatingVideoTexture()\n        }\n        $exit() {\n          this._stopUpdatingVideoTexture()\n        }\n        timeupdate() {\n          this._fireConsumer('$mediaplayerProgress', {\n            currentTime: this.videoEl.currentTime,\n            duration: this.videoEl.duration || 1,\n          })\n        }\n        ended(args) {\n          this._fireConsumer('$mediaplayerEnded', args)\n          this._setState('')\n        }\n        pause(args) {\n          this._fireConsumer('$mediaplayerPause', args)\n          this._setState('Playing.Paused')\n        }\n        _clearSrc() {\n          this._fireConsumer('$mediaplayerStop', {})\n          this._setState('')\n        }\n        static _states() {\n          return [class Paused extends this {}]\n        }\n      },\n    ]\n  }\n}\n","class localCookie{constructor(e){return e=e||{},this.forceCookies=e.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==e.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies}}_checkIfLocalStorageWorks(){if(\"undefined\"==typeof localStorage)return!1;try{return localStorage.setItem(\"feature_test\",\"yes\"),\"yes\"===localStorage.getItem(\"feature_test\")&&(localStorage.removeItem(\"feature_test\"),!0)}catch(e){return!1}}_getItemLocalStorage(e){return window.localStorage.getItem(e)}_setItemLocalStorage(e,t){return window.localStorage.setItem(e,t)}_removeItemLocalStorage(e){return window.localStorage.removeItem(e)}_clearLocalStorage(){return window.localStorage.clear()}_getItemCookie(e){var t=document.cookie.match(RegExp(\"(?:^|;\\\\s*)\"+function(e){return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")}(e)+\"=([^;]*)\"));return t&&\"\"===t[1]&&(t[1]=null),t?t[1]:null}_setItemCookie(e,t){var o=new Date,r=new Date(o.getTime()+15768e7);document.cookie=`${e}=${t}; expires=${r.toUTCString()};`}_removeItemCookie(e){document.cookie=`${e}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(\";\").forEach(e=>{document.cookie=e.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=Max-Age=-99999999\")})}}export default localCookie;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport localCookie from 'localCookie'\n\nlet namespace\nlet lc\n\nexport const initStorage = () => {\n  namespace = Settings.get('platform', 'id')\n  // todo: pass options (for example to force the use of cookies)\n  lc = new localCookie()\n}\n\nconst namespacedKey = key => (namespace ? [namespace, key].join('.') : key)\n\nexport default {\n  get(key) {\n    try {\n      return JSON.parse(lc.getItem(namespacedKey(key)))\n    } catch (e) {\n      return null\n    }\n  },\n  set(key, value) {\n    try {\n      lc.setItem(namespacedKey(key), JSON.stringify(value))\n      return true\n    } catch (e) {\n      return false\n    }\n  },\n  remove(key) {\n    lc.removeItem(namespacedKey(key))\n  },\n  clear() {\n    if (namespace) {\n      lc.keys().forEach(key => {\n        // remove the item if in the namespace\n        key.indexOf(namespace + '.') === 0 ? lc.removeItem(key) : null\n      })\n    } else {\n      lc.clear()\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\n\nexport const isFunction = v => {\n  return typeof v === 'function'\n}\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isBoolean = v => {\n  return typeof v === 'boolean'\n}\n\nexport const isPage = v => {\n  if (v instanceof Lightning.Element || isComponentConstructor(v)) {\n    return true\n  }\n  return false\n}\n\nexport const isComponentConstructor = type => {\n  return type.prototype && 'isComponent' in type.prototype\n}\n\nexport const isArray = v => {\n  return Array.isArray(v)\n}\n\nexport const ucfirst = v => {\n  return `${v.charAt(0).toUpperCase()}${v.slice(1)}`\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const isPromise = (method, args) => {\n  let result\n  if (isFunction(method)) {\n    try {\n      result = method.apply(null)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n  return isObject(result) && isFunction(result.then)\n}\n\nexport const getConfigMap = () => {\n  const routerSettings = Settings.get('platform', 'router')\n  const isObj = isObject(routerSettings)\n  return [\n    'backtrack',\n    'gcOnUnload',\n    'destroyOnHistoryBack',\n    'lazyCreate',\n    'lazyDestroy',\n    'reuseInstance',\n    'autoRestoreRemote',\n    'numberNavigation',\n    'updateHash',\n  ].reduce((config, key) => {\n    config.set(key, isObj ? routerSettings[key] : Settings.get('platform', key))\n    return config\n  }, new Map())\n}\n\nexport const incorrectParams = (cb, route) => {\n  const isIncorrect = /^\\w*?\\s?\\(\\s?\\{.*?\\}\\s?\\)/i\n  if (isIncorrect.test(cb.toString())) {\n    console.warn(\n      [\n        `DEPRECATION: The data-provider for route: ${route} is not correct.`,\n        '\"page\" is no longer a property of the params object but is now the first function parameter: ',\n        'https://github.com/rdkcentral/Lightning-SDK/blob/feature/router/docs/plugins/router/dataproviding.md#data-providing',\n        \"It's supported for now but will be removed in a future release.\",\n      ].join('\\n')\n    )\n    return true\n  }\n  return false\n}\n\nexport const getQueryStringParams = hash => {\n  const getQuery = /([?&].*)/\n  const matches = getQuery.exec(hash)\n  const params = {}\n\n  if (matches && matches.length) {\n    const urlParams = new URLSearchParams(matches[1])\n    for (const [key, value] of urlParams.entries()) {\n      params[key] = value\n    }\n    return params\n  }\n  return false\n}\n\nexport const symbols = {\n  route: Symbol('route'),\n  hash: Symbol('hash'),\n  store: Symbol('store'),\n  fromHistory: Symbol('fromHistory'),\n  expires: Symbol('expires'),\n  resume: Symbol('resume'),\n  backtrack: Symbol('backtrack'),\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      if (o) {\n        o.visible = false\n      }\n      resolve()\n    })\n  })\n}\n\nconst crossFade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    if (o) {\n      o.patch({\n        smooth: {\n          alpha: [0, { duration: 0.5, delay: 0.3 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst moveOnAxes = (axis, direction, i, o) => {\n  const bounds = axis === 'x' ? 1920 : 1080\n  return new Promise(resolve => {\n    i.patch({\n      [`${axis}`]: direction ? bounds * -1 : bounds,\n      visible: true,\n      smooth: {\n        [`${axis}`]: [0, { duration: 0.4, delay: 0.2 }],\n      },\n    })\n    // out is optional\n    if (o) {\n      o.patch({\n        [`${axis}`]: 0,\n        smooth: {\n          [`${axis}`]: [direction ? bounds : bounds * -1, { duration: 0.4, delay: 0.2 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition(axis).on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst up = (i, o) => {\n  return moveOnAxes('y', 0, i, o)\n}\n\nconst down = (i, o) => {\n  return moveOnAxes('y', 1, i, o)\n}\n\nconst left = (i, o) => {\n  return moveOnAxes('x', 0, i, o)\n}\n\nconst right = (i, o) => {\n  return moveOnAxes('x', 1, i, o)\n}\n\nexport default {\n  fade,\n  crossFade,\n  up,\n  down,\n  left,\n  right,\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple module for localization of strings.\n *\n * How to use:\n * 1. Create localization file with following JSON format:\n * {\n *   \"en\" :{\n *     \"how\": \"How do you want your egg today?\",\n *     \"boiledEgg\": \"Boiled egg\",\n *     \"softBoiledEgg\": \"Soft-boiled egg\",\n *     \"choice\": \"How to choose the egg\",\n *     \"buyQuestion\": \"I'd like to buy {0} eggs, {1} dollars each.\"\n *   },\n *\n *   \"it\": {\n *     \"how\": \"Come vuoi il tuo uovo oggi?\",\n *     \"boiledEgg\": \"Uovo sodo\",\n *     \"softBoiledEgg\": \"Uovo alla coque\",\n *     \"choice\": \"Come scegliere l'uovo\",\n *     \"buyQuestion\": \"Mi piacerebbe comprare {0} uova, {1} dollari ciascuna.\"\n *   }\n * }\n *\n * 2. Use Locale's module load method, specifying path to your localization file and set chosen language, e.g.:\n *    > Locale.load('static/locale/locale.json');\n *    > Locale.setLanguage('en');\n *\n * 3. Use localization strings:\n *    > console.log(Locale.tr.how);\n *    How do you want your egg today?\n *    > console.log(Locale.tr.boiledEgg);\n *    Boiled egg\n *\n * 4. String formatting\n *    > console.log(Locale.tr.buyQuestion.format(10, 0.5));\n *    I'd like to buy 10 eggs, 0.5 dollars each.\n */\n\nimport Log from '../Log'\n\nlet warned = false\nconst deprecated = (force = false) => {\n  if (force === true || warned === false) {\n    console.warn(\n      [\n        \"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases.\",\n        \"Please consider using the new 'Language'-plugin instead.\",\n        'https://rdkcentral.github.io/Lightning-SDK/#/plugins/language',\n      ].join('\\n\\n')\n    )\n  }\n  warned = true\n}\nclass Locale {\n  constructor() {\n    this.__enabled = false\n  }\n\n  /**\n   * Loads translation object from external json file.\n   *\n   * @param {String} path Path to resource.\n   * @return {Promise}\n   */\n  async load(path) {\n    if (!this.__enabled) {\n      return\n    }\n\n    await fetch(path)\n      .then(resp => resp.json())\n      .then(resp => {\n        this.loadFromObject(resp)\n      })\n  }\n\n  /**\n   * Sets language used by module.\n   *\n   * @param {String} lang\n   */\n  setLanguage(lang) {\n    deprecated()\n    this.__enabled = true\n    this.language = lang\n  }\n\n  /**\n   * Returns reference to translation object for current language.\n   *\n   * @return {Object}\n   */\n  get tr() {\n    deprecated(true)\n    return this.__trObj[this.language]\n  }\n\n  /**\n   * Loads translation object from existing object (binds existing object).\n   *\n   * @param {Object} trObj\n   */\n  loadFromObject(trObj) {\n    deprecated()\n    const fallbackLanguage = 'en'\n    if (Object.keys(trObj).indexOf(this.language) === -1) {\n      Log.warn('No translations found for: ' + this.language)\n      if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n        Log.warn('Using fallback language: ' + fallbackLanguage)\n        this.language = fallbackLanguage\n      } else {\n        const error = 'No translations found for fallback language: ' + fallbackLanguage\n        Log.error(error)\n        throw Error(error)\n      }\n    }\n\n    this.__trObj = trObj\n    for (const lang of Object.values(this.__trObj)) {\n      for (const str of Object.keys(lang)) {\n        lang[str] = new LocalizedString(lang[str])\n      }\n    }\n  }\n}\n\n/**\n * Extended string class used for localization.\n */\nclass LocalizedString extends String {\n  /**\n   * Returns formatted LocalizedString.\n   * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n   *\n   * E.g.:\n   * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n   * A and B and A\n   *\n   * @param  {...any} args List of arguments for placeholders.\n   */\n  format(...args) {\n    const sub = args.reduce((string, arg, index) => string.split(`{${index}}`).join(arg), this)\n    return new LocalizedString(sub)\n  }\n}\n\nexport default new Locale()\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class VersionLabel extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xbb0078ac,\n      h: 40,\n      w: 100,\n      x: w => w - 50,\n      y: h => h - 50,\n      mount: 1,\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 5,\n        x: 20,\n        text: {\n          fontSize: 22,\n          lineHeight: 26,\n        },\n      },\n    }\n  }\n\n  _firstActive() {\n    this.tag('Text').text = `APP - v${this.version}\\nSDK - v${this.sdkVersion}`\n    this.tag('Text').loadTexture()\n    this.w = this.tag('Text').renderWidth + 40\n    this.h = this.tag('Text').renderHeight + 5\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\nimport Log from '../Log'\nexport default class FpsIndicator extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(80, 80, 40),\n      h: 80,\n      w: 80,\n      x: 100,\n      y: 100,\n      mount: 1,\n      Background: {\n        x: 3,\n        y: 3,\n        texture: Lightning.Tools.getRoundRect(72, 72, 36),\n        color: 0xff008000,\n      },\n      Counter: {\n        w: w => w,\n        h: h => h,\n        y: 10,\n        text: {\n          fontSize: 32,\n          textAlign: 'center',\n        },\n      },\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 48,\n        text: {\n          fontSize: 15,\n          textAlign: 'center',\n          text: 'FPS',\n        },\n      },\n    }\n  }\n\n  _setup() {\n    this.config = {\n      ...{\n        log: false,\n        interval: 500,\n        threshold: 1,\n      },\n      ...Settings.get('platform', 'showFps'),\n    }\n\n    this.fps = 0\n    this.lastFps = this.fps - this.config.threshold\n\n    const fpsCalculator = () => {\n      this.fps = ~~(1 / this.stage.dt)\n    }\n    this.stage.on('frameStart', fpsCalculator)\n    this.stage.off('framestart', fpsCalculator)\n    this.interval = setInterval(this.showFps.bind(this), this.config.interval)\n  }\n\n  _firstActive() {\n    this.showFps()\n  }\n\n  _detach() {\n    clearInterval(this.interval)\n  }\n\n  showFps() {\n    if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return\n    this.lastFps = this.fps\n    // green\n    let bgColor = 0xff008000\n    // orange\n    if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500\n    // red\n    else if (this.fps <= 20) bgColor = 0xffff0000\n\n    this.tag('Background').setSmooth('color', bgColor)\n    this.tag('Counter').text = `${this.fps}`\n\n    this.config.log && Log.info('FPS', this.fps)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Utils from '../Utils'\n\nlet meta = {}\nlet translations = {}\nlet language = null\nlet dictionary = null\n\nexport const initLanguage = (file, language = null) => {\n  return new Promise((resolve, reject) => {\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        setTranslations(json)\n        // set language (directly or in a promise)\n        typeof language === 'object' && 'then' in language && typeof language.then === 'function'\n          ? language\n              .then(lang =>\n                setLanguage(lang)\n                  .then(resolve)\n                  .catch(reject)\n              )\n              .catch(e => {\n                Log.error(e)\n                reject(e)\n              })\n          : setLanguage(language)\n              .then(resolve)\n              .catch(reject)\n      })\n      .catch(() => {\n        const error = 'Language file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst setTranslations = obj => {\n  if ('meta' in obj) {\n    meta = { ...obj.meta }\n    delete obj.meta\n  }\n  translations = obj\n}\n\nconst getLanguage = () => {\n  return language\n}\n\nconst setLanguage = lng => {\n  language = null\n  dictionary = null\n\n  return new Promise((resolve, reject) => {\n    if (lng in translations) {\n      language = lng\n    } else {\n      if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n        language = meta.map[lng]\n      } else if ('default' in meta && meta.default in translations) {\n        language = meta.default\n        const error =\n          'Translations for Language ' +\n          language +\n          ' not found. Using default language ' +\n          meta.default\n        Log.warn(error)\n        reject(error)\n      } else {\n        const error = 'Translations for Language ' + language + ' not found.'\n        Log.error(error)\n        reject(error)\n      }\n    }\n\n    if (language) {\n      Log.info('Setting language to', language)\n\n      const translationsObj = translations[language]\n      if (typeof translationsObj === 'object') {\n        dictionary = translationsObj\n        resolve()\n      } else if (typeof translationsObj === 'string') {\n        const url = Utils.asset(translationsObj)\n\n        fetch(url)\n          .then(response => response.json())\n          .then(json => {\n            // save the translations for this language (to prevent loading twice)\n            translations[language] = json\n            dictionary = json\n            resolve()\n          })\n          .catch(e => {\n            const error = 'Error while fetching ' + url\n            Log.error(error, e)\n            reject(error)\n          })\n      }\n    }\n  })\n}\n\nexport default {\n  translate(key) {\n    let replacements = [...arguments].slice(1)\n\n    // no replacements so just translated string\n    if (replacements.length === 0) {\n      return (dictionary && dictionary[key]) || key\n    } else {\n      if (replacements.length === 1 && typeof replacements[0] === 'object') {\n        replacements = replacements.pop()\n      }\n\n      return Object.keys(\n        // maps array input to an object {0: 'item1', 1: 'item2'}\n        Array.isArray(replacements) ? Object.assign({}, replacements) : replacements\n      ).reduce((text, replacementKey) => {\n        return text.replace(\n          new RegExp('{\\\\s?' + replacementKey + '\\\\s?}', 'g'),\n          replacements[replacementKey]\n        )\n      }, (dictionary && dictionary[key]) || key)\n    }\n  },\n\n  translations(obj) {\n    setTranslations(obj)\n  },\n\n  set(language) {\n    return setLanguage(language)\n  },\n\n  get() {\n    return getLanguage()\n  },\n\n  available() {\n    const languageKeys = Object.keys(translations)\n    return languageKeys.map(key => ({ code: key, name: (meta.names && meta.names[key]) || key }))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nconst registry = {\n  eventListeners: [],\n  timeouts: [],\n  intervals: [],\n  targets: [],\n}\n\nexport default {\n  // Timeouts\n  setTimeout(cb, timeout, ...params) {\n    const timeoutId = setTimeout(\n      () => {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n        cb.apply(null, params)\n      },\n      timeout,\n      params\n    )\n    Log.info('Set Timeout', 'ID: ' + timeoutId)\n    registry.timeouts.push(timeoutId)\n    return timeoutId\n  },\n\n  clearTimeout(timeoutId) {\n    if (registry.timeouts.indexOf(timeoutId) > -1) {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n      Log.info('Clear Timeout', 'ID: ' + timeoutId)\n      clearTimeout(timeoutId)\n    } else {\n      Log.error('Clear Timeout', 'ID ' + timeoutId + ' not found')\n    }\n  },\n\n  clearTimeouts() {\n    registry.timeouts.forEach(timeoutId => {\n      this.clearTimeout(timeoutId)\n    })\n  },\n\n  // Intervals\n  setInterval(cb, interval, ...params) {\n    const intervalId = setInterval(\n      () => {\n        registry.intervals = registry.intervals.filter(id => id !== intervalId)\n        cb.apply(null, params)\n      },\n      interval,\n      params\n    )\n    Log.info('Set Interval', 'ID: ' + intervalId)\n    registry.intervals.push(intervalId)\n    return intervalId\n  },\n\n  clearInterval(intervalId) {\n    if (registry.intervals.indexOf(intervalId) > -1) {\n      registry.intervals = registry.intervals.filter(id => id !== intervalId)\n      Log.info('Clear Interval', 'ID: ' + intervalId)\n      clearInterval(intervalId)\n    } else {\n      Log.error('Clear Interval', 'ID ' + intervalId + ' not found')\n    }\n  },\n\n  clearIntervals() {\n    registry.intervals.forEach(intervalId => {\n      this.clearInterval(intervalId)\n    })\n  },\n\n  // Event listeners\n  addEventListener(target, event, handler) {\n    target.addEventListener(event, handler)\n    let targetIndex =\n      registry.targets.indexOf(target) > -1\n        ? registry.targets.indexOf(target)\n        : registry.targets.push(target) - 1\n\n    registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {}\n    registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || []\n    registry.eventListeners[targetIndex][event].push(handler)\n    Log.info('Add eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler)\n  },\n\n  removeEventListener(target, event, handler) {\n    const targetIndex = registry.targets.indexOf(target)\n    if (\n      targetIndex > -1 &&\n      registry.eventListeners[targetIndex] &&\n      registry.eventListeners[targetIndex][event] &&\n      registry.eventListeners[targetIndex][event].indexOf(handler) > -1\n    ) {\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][\n        event\n      ].filter(fn => fn !== handler)\n      Log.info('Remove eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler)\n      target.removeEventListener(event, handler)\n    } else {\n      Log.error(\n        'Remove eventListener',\n        'Not found',\n        'Target',\n        target,\n        'Event: ' + event,\n        'Handler',\n        handler\n      )\n    }\n  },\n\n  // if `event` is omitted, removes all registered event listeners for target\n  // if `target` is also omitted, removes all registered event listeners\n  removeEventListeners(target, event) {\n    if (target && event) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        registry.eventListeners[targetIndex][event].forEach(handler => {\n          this.removeEventListener(target, event, handler)\n        })\n      }\n    } else if (target) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n          this.removeEventListeners(target, _event)\n        })\n      }\n    } else {\n      Object.keys(registry.eventListeners).forEach(targetIndex => {\n        this.removeEventListeners(registry.targets[targetIndex])\n      })\n    }\n  },\n\n  // Clear everything (to be called upon app close for proper cleanup)\n  clear() {\n    this.clearTimeouts()\n    this.clearIntervals()\n    this.removeEventListeners()\n    registry.eventListeners = []\n    registry.timeouts = []\n    registry.intervals = []\n    registry.targets = []\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Deepmerge from 'deepmerge'\nimport Lightning from '../Lightning'\nimport Locale from '../Locale'\nimport Metrics from '../Metrics'\nimport VersionLabel from '../VersionLabel'\nimport FpsCounter from '../FpsCounter'\nimport Log from '../Log'\nimport Settings from '../Settings'\nimport { initLanguage } from '../Language'\nimport Utils from '../Utils'\nimport Registry from '../Registry'\n\nimport { version as sdkVersion } from '../../package.json'\n\nexport let AppInstance\nexport let AppData\n\nconst defaultOptions = {\n  stage: { w: 1920, h: 1080, clearColor: 0x00000000, canvas2d: false },\n  debug: false,\n  defaultFontFace: 'RobotoRegular',\n  keys: {\n    8: 'Back',\n    13: 'Enter',\n    27: 'Menu',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    174: 'ChannelDown',\n    175: 'ChannelUp',\n    178: 'Stop',\n    250: 'PlayPause',\n    191: 'Search', // Use \"/\" for keyboard\n    409: 'Search',\n  },\n}\n\nif (window.innerHeight === 720) {\n  defaultOptions.stage['w'] = 1280\n  defaultOptions.stage['h'] = 720\n  defaultOptions.stage['precision'] = 0.6666666667\n}\n\nexport default function(App, appData, platformSettings) {\n  return class Application extends Lightning.Application {\n    constructor(options) {\n      const config = Deepmerge(defaultOptions, options)\n      super(config)\n      this.config = config\n    }\n\n    static _template() {\n      return {\n        w: 1920,\n        h: 1080,\n      }\n    }\n\n    _setup() {\n      Promise.all([\n        this.loadFonts((App.config && App.config.fonts) || (App.getFonts && App.getFonts()) || []),\n        // to be deprecated\n        Locale.load((App.config && App.config.locale) || (App.getLocale && App.getLocale())),\n        App.language && this.loadLanguage(App.language()),\n      ])\n        .then(() => {\n          Metrics.app.loaded()\n\n          AppData = appData\n\n          AppInstance = this.stage.c({\n            ref: 'App',\n            type: App,\n            zIndex: 1,\n            forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps,\n          })\n\n          this.childList.a(AppInstance)\n\n          Log.info('App version', this.config.version)\n          Log.info('SDK version', sdkVersion)\n\n          if (platformSettings.showVersion) {\n            this.childList.a({\n              ref: 'VersionLabel',\n              type: VersionLabel,\n              version: this.config.version,\n              sdkVersion: sdkVersion,\n              zIndex: 1,\n            })\n          }\n\n          if (platformSettings.showFps) {\n            this.childList.a({\n              ref: 'FpsCounter',\n              type: FpsCounter,\n              zIndex: 1,\n            })\n          }\n\n          super._setup()\n        })\n        .catch(console.error)\n    }\n\n    _handleBack() {\n      this.closeApp()\n    }\n\n    _handleExit() {\n      this.closeApp()\n    }\n\n    closeApp() {\n      Log.info('Closing App')\n\n      Settings.clearSubscribers()\n      Registry.clear()\n\n      if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n        platformSettings.onClose(...arguments)\n      } else {\n        this.close()\n      }\n    }\n\n    close() {\n      Log.info('Closing App')\n      this.childList.remove(this.tag('App'))\n\n      // force texture garbage collect\n      this.stage.gc()\n      this.destroy()\n    }\n\n    loadFonts(fonts) {\n      return new Promise((resolve, reject) => {\n        fonts\n          .map(({ family, url, descriptors }) => () => {\n            const fontFace = new FontFace(family, 'url(' + url + ')', descriptors || {})\n            document.fonts.add(fontFace)\n            return fontFace.load()\n          })\n          .reduce((promise, method) => {\n            return promise.then(() => method())\n          }, Promise.resolve(null))\n          .then(resolve)\n          .catch(reject)\n      })\n    }\n\n    loadLanguage(config) {\n      let file = Utils.asset('translations.json')\n      let language = config\n\n      if (typeof language === 'object') {\n        language = config.language || null\n        file = config.file || file\n      }\n\n      return initLanguage(file, language)\n    }\n\n    set focus(v) {\n      this._focussed = v\n      this._refocus()\n    }\n\n    _getFocused() {\n      return this._focussed || this.tag('App')\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport { getActivePage, restore } from './index'\n\nexport class RoutedApp extends Lightning.Component {\n  static _template() {\n    return {\n      Pages: {\n        forceZIndexContext: true,\n      },\n      /**\n       * This is a default Loading page that will be made visible\n       * during data-provider on() you CAN override in child-class\n       */\n      Loading: {\n        rect: true,\n        w: 1920,\n        h: 1080,\n        color: 0xff000000,\n        visible: false,\n        zIndex: 99,\n        Label: {\n          mount: 0.5,\n          x: 960,\n          y: 540,\n          text: {\n            text: 'Loading..',\n          },\n        },\n      },\n    }\n  }\n\n  static _states() {\n    return [\n      class Loading extends this {\n        $enter() {\n          this.tag('Loading').visible = true\n        }\n\n        $exit() {\n          this.tag('Loading').visible = false\n        }\n      },\n      class Widgets extends this {\n        $enter(args, widget) {\n          // store widget reference\n          this._widget = widget\n\n          // since it's possible that this behaviour\n          // is non-remote driven we force a recalculation\n          // of the focuspath\n          this._refocus()\n        }\n\n        _getFocused() {\n          // we delegate focus to selected widget\n          // so it can consume remotecontrol presses\n          return this._widget\n        }\n\n        // if we want to widget to widget focus delegation\n        reload(widget) {\n          this._widget = widget\n          this._refocus()\n        }\n\n        _handleKey() {\n          restore()\n        }\n      },\n    ]\n  }\n\n  /**\n   * Return location where pages need to be stored\n   */\n  get pages() {\n    return this.tag('Pages')\n  }\n\n  /**\n   * Tell router where widgets are stored\n   */\n  get widgets() {\n    return this.tag('Widgets')\n  }\n\n  /**\n   * we MUST register _handleBack method so the Router\n   * can override it\n   * @private\n   */\n  _handleBack() {}\n\n  /**\n   * we MUST register _captureKey for dev quick-navigation\n   * (via keyboard 1-9)\n   */\n  _captureKey() {}\n\n  /**\n   * We MUST return Router.activePage() so the new Page\n   * can listen to the remote-control.\n   */\n  _getFocused() {\n    return getActivePage()\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Settings from '../Settings'\n\nimport { isObject } from './utils'\n\nconst running = new Map()\nconst resolved = new Map()\nconst expired = new Map()\nconst rejected = new Map()\nconst active = new Map()\n\nconst send = (hash, key, value) => {\n  if (!Settings.get('platform', 'stats')) {\n    return\n  }\n  if (!key && !value) {\n    if (!running.has(hash)) {\n      running.set(hash, {\n        start: Date.now(),\n      })\n    }\n  } else {\n    if (running.has(hash)) {\n      if (key && value) {\n        const payload = running.get(hash)\n        payload[key] = value\n      }\n    }\n  }\n  if (key && commands[key]) {\n    const command = commands[key]\n    if (command) {\n      command.call(null, hash)\n    }\n  }\n}\n\nconst move = (hash, bucket, args) => {\n  if (active.has(hash)) {\n    const payload = active.get(hash)\n    const route = payload.route\n\n    // we group by route so store\n    // the hash in the payload\n    payload.hash = hash\n\n    if (isObject(args)) {\n      Object.keys(args).forEach(prop => {\n        payload[prop] = args[prop]\n      })\n    }\n    if (bucket.has(route)) {\n      const records = bucket.get(route)\n      records.push(payload)\n      bucket.set(route, records)\n    } else {\n      // we add by route and group all\n      // resolved hashes against that route\n      bucket.set(route, [payload])\n    }\n    active.delete(hash)\n  }\n}\n\nconst commands = {\n  ready: hash => {\n    if (running.has(hash)) {\n      const payload = running.get(hash)\n      payload.ready = Date.now()\n      active.set(hash, payload)\n\n      running.delete(hash)\n    }\n  },\n  stop: hash => {\n    move(hash, resolved, {\n      stop: Date.now(),\n    })\n  },\n  error: hash => {\n    move(hash, rejected, {\n      error: Date.now(),\n    })\n  },\n  expired: hash => {\n    move(hash, expired, {\n      expired: Date.now,\n    })\n  },\n}\n\nconst output = (label, bucket) => {\n  Log.info(`Output: ${label}`, bucket)\n  for (let [route, records] of bucket.entries()) {\n    Log.debug(`route: ${route}`, records)\n  }\n}\n\nexport let getStats = () => {\n  output('Resolved', resolved)\n  output('Expired', expired)\n  output('Rejected', rejected)\n  output('Expired', expired)\n  output('Still active', active)\n  output('Still running', running)\n}\n\nexport const initStats = config => {\n  if (config.getStats) {\n    getStats = config.getStats\n  }\n}\n\nexport default {\n  send,\n  getStats,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  isFunction,\n  isPage,\n  isComponentConstructor,\n  isArray,\n  ucfirst,\n  isObject,\n  isBoolean,\n  isString,\n  getConfigMap,\n  incorrectParams,\n  isPromise,\n  getQueryStringParams,\n  symbols,\n} from './utils'\n\nimport Transitions from './transitions'\nimport Log from '../Log'\nimport { AppInstance } from '../Application'\nimport { RoutedApp } from './base'\nimport stats from './stats'\n\nlet getHash = () => {\n  return document.location.hash\n}\n\nlet setHash = url => {\n  document.location.hash = url\n}\n\nexport const initRouter = config => {\n  if (config.getHash) {\n    getHash = config.getHash\n  }\n  if (config.setHash) {\n    setHash = config.setHash\n  }\n}\n\n/*\nrouThor ==[x]\n */\n\n// instance of Lightning.Application\nlet application\n\n//instance of Lightning.Component\nlet app\n\nlet stage\nlet widgetsHost\nlet pagesHost\n\nconst pages = new Map()\nconst providers = new Map()\nconst modifiers = new Map()\nconst widgetsPerRoute = new Map()\nconst routeHooks = new Map()\n\nlet register = new Map()\nlet routerConfig\n\n// widget that has focus\nlet activeWidget\nlet rootHash\nlet bootRequest\nlet history = []\nlet initialised = false\nlet activeRoute\nlet activeHash\nlet updateHash = true\nlet forcedHash\nlet lastHash = true\nlet previousState\n\n// page that has focus\nlet activePage\nconst hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g\nconst isWildcard = /^[!*$]$/\n\n/**\n * Setup Page router\n * @param config - route config object\n * @param instance - instance of the app\n */\nexport const startRouter = (config, instance) => {\n  // backwards compatible\n  let { appInstance, routes, provider = () => {}, widgets = () => {} } = config\n\n  if (instance && isPage(instance)) {\n    app = instance\n  }\n\n  if (!app) {\n    app = appInstance || AppInstance\n  }\n\n  application = app.application\n  pagesHost = application.childList\n  stage = app.stage\n  routerConfig = getConfigMap()\n\n  // test if required to host pages in a different child\n  if (app.pages) {\n    pagesHost = app.pages.childList\n  }\n\n  // test if app uses widgets\n  if (app.widgets && app.widgets.children) {\n    widgetsHost = app.widgets.childList\n    // hide all widgets on boot\n    widgetsHost.forEach(w => (w.visible = false))\n  }\n\n  // register step back handler\n  app._handleBack = e => {\n    step(-1)\n    e.preventDefault()\n  }\n\n  // register step back handler\n  app._captureKey = capture.bind(null)\n\n  if (isArray(routes)) {\n    setupRoutes(config)\n    start()\n  } else if (isFunction(routes)) {\n    // register route data bindings\n    provider()\n    // register routes\n    routes()\n    // register widgets\n    widgets()\n  }\n}\n\nexport const setupRoutes = routesConfig => {\n  let bootPage = routesConfig.bootComponent\n\n  if (!initialised) {\n    rootHash = routesConfig.root\n    if (isFunction(routesConfig.boot)) {\n      boot(routesConfig.boot)\n    }\n    if (bootPage && isPage(bootPage)) {\n      route('@boot-page', routesConfig.bootComponent)\n    }\n    if (isBoolean(routesConfig.updateHash)) {\n      updateHash = routesConfig.updateHash\n    }\n    if (isFunction(routesConfig.beforeEachRoute)) {\n      beforeEachRoute = routesConfig.beforeEachRoute\n    }\n    initialised = true\n  }\n\n  routesConfig.routes.forEach(r => {\n    route(r.path, r.component || r.hook, r.options)\n    if (r.widgets) {\n      widget(r.path, r.widgets)\n    }\n    if (isFunction(r.on)) {\n      on(r.path, r.on, r.cache || 0)\n    }\n    if (isFunction(r.before)) {\n      before(r.path, r.before, r.cache || 0)\n    }\n    if (isFunction(r.after)) {\n      after(r.path, r.after, r.cache || 0)\n    }\n    if (isFunction(r.beforeNavigate)) {\n      hook(r.path, r.beforeNavigate)\n    }\n  })\n}\n\n/**\n * create a new route\n * @param route - {string}\n * @param type - {(Lightning.Component|Function()*)}\n * @param modifiers - {Object{}} - preventStorage | clearHistory | storeLast\n */\nexport const route = (route, type, config) => {\n  route = route.replace(/\\/+$/, '')\n  // if the route is defined we try to push\n  // the new type on to the stack\n  if (pages.has(route)) {\n    let stack = pages.get(route)\n    if (!isArray(stack)) {\n      stack = [stack]\n    }\n\n    // iterate stack and look if there is page instance\n    // attached to the route\n    const hasPage = stack.filter(o => isPage(o, stage))\n    if (hasPage.length) {\n      // only allow multiple functions for route\n      if (isFunction(type) && !isPage(type, stage)) {\n        stack.push(type)\n      } else {\n        console.warn(`Page for route('${route}') already exists`)\n      }\n    } else {\n      if (isFunction(type)) {\n        stack.push(type)\n      } else {\n        if (!routerConfig.get('lazyCreate')) {\n          type = isComponentConstructor(type) ? create(type) : type\n          pagesHost.a(type)\n        }\n        stack.push(type)\n      }\n    }\n    pages.set(route, stack)\n  } else {\n    if (isPage(type, stage)) {\n      // if flag lazy eq false we (test) and create\n      // correct component and add it to the childList\n      if (!routerConfig.get('lazyCreate')) {\n        type = isComponentConstructor(type) ? create(type) : type\n        pagesHost.a(type)\n      }\n    }\n\n    // if lazy we just store the constructor or function\n    pages.set(route, [type])\n\n    // store router modifiers\n    if (config) {\n      modifiers.set(route, config)\n    }\n  }\n}\n\n/**\n * create a route and define it as root.\n * Upon boot we will automatically point browser hash\n * to the defined route\n * @param route - {string}\n * @param type - {(Lightning.Component|Function()*)}\n */\nexport const root = (url, type, config) => {\n  rootHash = url.replace(/\\/+$/, '')\n  route(url, type, config)\n}\n\n/**\n * Define the widgets that need to become visible per route\n * @param url\n * @param widgets\n */\nexport const widget = (url, widgets = []) => {\n  if (!widgetsPerRoute.has(url)) {\n    if (!isArray(widgets)) {\n      widgets = [widgets]\n    }\n    widgetsPerRoute.set(url, widgets)\n  } else {\n    console.warn(`Widgets already exist for ${url}`)\n  }\n}\n\nconst create = type => {\n  const page = stage.c({ type, visible: false })\n  // if the app has widgets we make them available\n  // as an object on the app instance\n  if (widgetsHost) {\n    page.widgets = getWidgetReferences()\n  }\n\n  return page\n}\n\n/**\n * The actual loading of the component\n * @param {String} route - the route blueprint, used for data provider look up\n * @param {String} hash - current hash we're routing to\n * */\nconst load = async ({ route, hash }) => {\n  let expired = false\n  // for now we maintain one instance of the\n  // navigation register and create a local copy\n  // that we hand over to the loader\n  const routeReg = new Map(register)\n  try {\n    const payload = await loader({ hash, route, routeReg })\n    if (payload && payload.hash === lastHash) {\n      // in case of on() providing we need to reset\n      // app state;\n      if (app.state === 'Loading') {\n        if (previousState === 'Widgets') {\n          app._setState('Widgets', [activeWidget])\n        } else {\n          app._setState('')\n        }\n      }\n      // Do page transition if instance\n      // is not shared between the routes\n      if (!payload.share) {\n        await doTransition(payload.page, activePage)\n      }\n    } else {\n      expired = true\n    }\n    // on expired we only cleanup\n    if (expired) {\n      Log.debug('[router]:', `Rejected ${payload.hash} because route to ${lastHash} started`)\n      if (payload.create && !payload.share) {\n        // remove from render-tree\n        pagesHost.remove(payload.page)\n      }\n    } else {\n      onRouteFulfilled(payload, routeReg)\n      // resolve promise\n      return payload.page\n    }\n  } catch (payload) {\n    if (!expired) {\n      if (payload.create && !payload.share) {\n        // remove from render-tree\n        pagesHost.remove(payload.page)\n      }\n      handleError(payload)\n    }\n  }\n}\n\nconst loader = async ({ route, hash, routeReg: register }) => {\n  let type = getPageByRoute(route)\n  let isConstruct = isComponentConstructor(type)\n  let sharedInstance = false\n  let provide = false\n  let page = null\n  let isCreated = false\n\n  // if it's an instance bt we're not coming back from\n  // history we test if we can re-use this instance\n  if (!isConstruct && !register.get(symbols.backtrack)) {\n    if (!mustReuse(route)) {\n      type = type.constructor\n      isConstruct = true\n    }\n  }\n\n  // If type is not a constructor\n  if (!isConstruct) {\n    page = type\n    // if we have have a data route for current page\n    if (providers.has(route)) {\n      if (isPageExpired(type) || type[symbols.hash] !== hash) {\n        provide = true\n      }\n    }\n    let currentRoute = activePage && activePage[symbols.route]\n    // if the new route is equal to the current route it means that both\n    // route share the Component instance and stack location / since this case\n    // is conflicting with the way before() and after() loading works we flag it,\n    // and check platform settings in we want to re-use instance\n    if (route === currentRoute) {\n      sharedInstance = true\n    }\n  } else {\n    page = create(type)\n    pagesHost.a(page)\n    // test if need to request data provider\n    if (providers.has(route)) {\n      provide = true\n    }\n    isCreated = true\n  }\n\n  // we store hash and route as properties on the page instance\n  // that way we can easily calculate new behaviour on page reload\n  page[symbols.hash] = hash\n  page[symbols.route] = route\n\n  const payload = {\n    page,\n    route,\n    hash,\n    register,\n    create: isCreated,\n    share: sharedInstance,\n    event: [isCreated ? 'mounted' : 'changed'],\n  }\n\n  try {\n    if (provide) {\n      const { type: loadType } = providers.get(route)\n      // update payload\n      payload.loadType = loadType\n\n      // update statistics\n      send(hash, `${loadType}-start`, Date.now())\n      await triggers[sharedInstance ? 'shared' : loadType](payload)\n      send(hash, `${loadType}-end`, Date.now())\n\n      if (hash !== lastHash) {\n        return false\n      } else {\n        emit(page, 'dataProvided')\n        // resolve promise\n        return payload\n      }\n    } else {\n      addPersistData(payload)\n      return payload\n    }\n  } catch (e) {\n    payload.error = e\n    return Promise.reject(payload)\n  }\n}\n\n/**\n * Will be called when a new navigate() request has completed\n * and has not been expired due to it's async nature\n * @param page\n * @param route\n * @param event\n * @param hash\n * @param register\n */\nconst onRouteFulfilled = ({ page, route, event, hash, share }, register) => {\n  // clean up history if modifier is set\n  if (hashmod(hash, 'clearHistory')) {\n    history.length = 0\n  } else if (activeHash && !isWildcard.test(route)) {\n    updateHistory(activeHash)\n  }\n\n  // we only update the stackLocation if a route\n  // is not expired before it resolves\n  const location = getPageStackLocation(route)\n\n  if (!isNaN(location)) {\n    let stack = pages.get(route)\n    stack[location] = page\n    pages.set(route, stack)\n  }\n\n  if (event) {\n    emit(page, event)\n  }\n\n  // only update widgets if we have a host\n  if (widgetsHost) {\n    updateWidgets(page)\n  }\n\n  // force refocus of the app\n  app._refocus()\n\n  // we want to clean up if there is an\n  // active page that is not being shared\n  // between current and previous route\n  if (activePage && !share) {\n    cleanUp(activePage, activePage[symbols.route], register)\n  }\n\n  // flag this navigation cycle as ready\n  send(hash, 'ready')\n\n  activePage = page\n  activeRoute = route\n  activeHash = hash\n\n  Log.info('[route]:', route)\n  Log.info('[hash]:', hash)\n}\n\nconst triggerAfter = args => {\n  // after() we execute the provider\n  // and resolve immediately\n  try {\n    execProvider(args)\n  } catch (e) {\n    // we fail silently\n  }\n  return Promise.resolve()\n}\n\nconst triggerBefore = args => {\n  // before() we continue only when data resolved\n  return execProvider(args)\n}\n\nconst triggerOn = args => {\n  // on() we need to place the app in\n  // a Loading state and recover from it\n  // on resolve\n  previousState = app.state || ''\n  app._setState('Loading')\n  return execProvider(args)\n}\n\nconst triggerShared = args => {\n  return execProvider(args)\n}\n\nconst triggers = {\n  on: triggerOn,\n  after: triggerAfter,\n  before: triggerBefore,\n  shared: triggerShared,\n}\n\nconst hook = (route, handler) => {\n  if (!routeHooks.has(route)) {\n    routeHooks.set(route, handler)\n  }\n}\n\nconst emit = (page, events = [], params = {}) => {\n  if (!isArray(events)) {\n    events = [events]\n  }\n  events.forEach(e => {\n    const event = `_on${ucfirst(e)}`\n    if (isFunction(page[event])) {\n      page[event](params)\n    }\n  })\n}\n\nconst send = (hash, key, value) => {\n  stats.send(hash, key, value)\n}\n\nconst handleError = args => {\n  if (!args.page) {\n    console.error(args)\n  } else {\n    const hash = args.page[symbols.hash]\n    // flag this navigation cycle as rejected\n    send(hash, 'e', args.error)\n    // force expire\n    args.page[symbols.expires] = Date.now()\n    if (pages.has('!')) {\n      load({ route: '!', hash }).then(errorPage => {\n        errorPage.error = { page: args.page, error: args.error }\n        // on() loading type will force the app to go\n        // in a loading state so on error we need to\n        // go back to root state\n        if (app.state === 'Loading') {\n          app._setState('')\n        }\n        // make sure we delegate focus to the error page\n        if (activePage !== errorPage) {\n          activePage = errorPage\n          app._refocus()\n        }\n      })\n    } else {\n      Log.error(args.page, args.error)\n    }\n  }\n}\n\nconst updateHistory = hash => {\n  const storeHash = getMod(hash, 'store')\n  const regStore = register.get(symbols.store)\n  let configPrevent = hashmod(hash, 'preventStorage')\n  let configStore = true\n\n  if ((isBoolean(storeHash) && storeHash === false) || configPrevent) {\n    configStore = false\n  }\n\n  if (regStore && configStore) {\n    const toStore = hash.replace(/^\\//, '')\n    const location = history.indexOf(toStore)\n    // store hash if it's not a part of history or flag for\n    // storage of same hash is true\n    if (location === -1 || routerConfig.get('storeSameHash')) {\n      history.push(toStore)\n    } else {\n      // if we visit the same route we want to sync history\n      history.push(history.splice(location, 1)[0])\n    }\n  }\n}\n\nexport const mustReuse = route => {\n  const mod = routemod(route, 'reuseInstance')\n  const config = routerConfig.get('reuseInstance')\n\n  // route always has final decision\n  if (isBoolean(mod)) {\n    return mod\n  }\n  return !(isBoolean(config) && config === false)\n}\n\nexport const boot = cb => {\n  bootRequest = cb\n}\n\nconst addPersistData = ({ page, route, hash, register = new Map() }) => {\n  const urlValues = getValuesFromHash(hash, route)\n  const pageData = new Map([...urlValues, ...register])\n  const params = {}\n\n  // make dynamic url data available to the page\n  // as instance properties\n  for (let [name, value] of pageData) {\n    page[name] = value\n    params[name] = value\n  }\n\n  // check navigation register for persistent data\n  if (register.size) {\n    const obj = {}\n    for (let [k, v] of register) {\n      obj[k] = v\n    }\n    page.persist = obj\n  }\n\n  // make url data and persist data available\n  // via params property\n  page.params = params\n  emit(page, ['urlParams'], params)\n\n  return params\n}\n\nconst execProvider = args => {\n  const { cb, expires } = providers.get(args.route)\n  const params = addPersistData(args)\n  /**\n   * In the first version of the Router, a reference to the page is made\n   * available to the callback function as property of {params}.\n   * Since this is error prone (named url parts are also being spread inside this object)\n   * we made the page reference the first parameter and url values the second.\n   * -\n   * We keep it backwards compatible for now but a warning is showed in the console.\n   */\n  if (incorrectParams(cb, args.route)) {\n    // keep page as params property backwards compatible for now\n    return cb({ page: args.page, ...params }).then(() => {\n      args.page[symbols.expires] = Date.now() + expires\n    })\n  } else {\n    return cb(args.page, { ...params }).then(() => {\n      args.page[symbols.expires] = Date.now() + expires\n    })\n  }\n}\n\n/**\n * execute transition between new / old page and\n * toggle the defined widgets\n * @todo: platform override default transition\n * @param pageIn\n * @param pageOut\n */\nconst doTransition = (pageIn, pageOut = null) => {\n  let transition = pageIn.pageTransition || pageIn.easing\n\n  const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition)\n  const transitionsDisabled = routerConfig.get('disableTransitions')\n\n  if (pageIn.easing) {\n    console.warn('easing() method is deprecated and will be removed. Use pageTransition()')\n  }\n  // default behaviour is a visibility toggle\n  if (!hasCustomTransitions || transitionsDisabled) {\n    pageIn.visible = true\n    if (pageOut) {\n      pageOut.visible = false\n    }\n    return Promise.resolve()\n  }\n\n  if (transition) {\n    let type\n    try {\n      type = transition.call(pageIn, pageIn, pageOut)\n    } catch (e) {\n      type = 'crossFade'\n    }\n\n    if (isPromise(type)) {\n      return type\n    }\n\n    if (isString(type)) {\n      const fn = Transitions[type]\n      if (fn) {\n        return fn(pageIn, pageOut)\n      }\n    }\n\n    // keep backwards compatible for now\n    if (pageIn.smoothIn) {\n      // provide a smooth function that resolves itself\n      // on transition finish\n      const smooth = (p, v, args = {}) => {\n        return new Promise(resolve => {\n          pageIn.visible = true\n          pageIn.setSmooth(p, v, args)\n          pageIn.transition(p).on('finish', () => {\n            resolve()\n          })\n        })\n      }\n      return pageIn.smoothIn({ pageIn, smooth })\n    }\n  }\n\n  return Transitions.crossFade(pageIn, pageOut)\n}\n\n/**\n * update the visibility of the available widgets\n * for the current page / route\n * @param page\n */\nconst updateWidgets = page => {\n  const route = page[symbols.route]\n\n  // force lowercase lookup\n  const configured = (widgetsPerRoute.get(route) || []).map(ref => ref.toLowerCase())\n\n  widgetsHost.forEach(widget => {\n    widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1\n    if (widget.visible) {\n      emit(widget, ['activated'], page)\n    }\n  })\n  if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n    app._setState('')\n  }\n}\n\nconst cleanUp = (page, route, register) => {\n  const lazyDestroy = routerConfig.get('lazyDestroy')\n  const destroyOnBack = routerConfig.get('destroyOnHistoryBack')\n  const keepAlive = read('keepAlive', register)\n  const isFromHistory = read(symbols.backtrack, register)\n  let doCleanup = false\n\n  if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n    doCleanup = true\n  } else if (lazyDestroy && !keepAlive) {\n    doCleanup = true\n  }\n\n  if (doCleanup) {\n    // in lazy create mode we store constructor\n    // and remove the actual page from host\n    const stack = pages.get(route)\n    const location = getPageStackLocation(route)\n\n    // grab original class constructor if statemachine routed\n    // else store constructor\n    stack[location] = page._routedType || page.constructor\n    pages.set(route, stack)\n\n    // actual remove of page from memory\n    pagesHost.remove(page)\n\n    // force texture gc() if configured\n    // so we can cleanup textures in the same tick\n    if (routerConfig.get('gcOnUnload')) {\n      stage.gc()\n    }\n  } else {\n    // If we're not removing the page we need to\n    // reset it's properties\n    page.patch({\n      x: 0,\n      y: 0,\n      scale: 1,\n      alpha: 1,\n      visible: false,\n    })\n  }\n  send(page[symbols.hash], 'stop')\n}\n\n/**\n * Test if page passed cache-time\n * @param page\n * @returns {boolean}\n */\nconst isPageExpired = page => {\n  if (!page[symbols.expires]) {\n    return false\n  }\n\n  const expires = page[symbols.expires]\n  const now = Date.now()\n\n  return now >= expires\n}\n\nconst getPageByRoute = route => {\n  return getPageFromStack(route).item\n}\n\n/**\n * Returns the current location of a page constructor or\n * page instance for a route\n * @param route\n */\nconst getPageStackLocation = route => {\n  return getPageFromStack(route).index\n}\n\nconst getPageFromStack = route => {\n  if (!pages.has(route)) {\n    return false\n  }\n\n  let index = -1\n  let item = null\n  let stack = pages.get(route)\n  if (!Array.isArray(stack)) {\n    stack = [stack]\n  }\n\n  for (let i = 0, j = stack.length; i < j; i++) {\n    if (isPage(stack[i], stage)) {\n      index = i\n      item = stack[i]\n      break\n    }\n  }\n\n  return { index, item }\n}\n\n/**\n * Simple route length calculation\n * @param route {string}\n * @returns {number} - floor\n */\nconst getFloor = route => {\n  return stripRegex(route).split('/').length\n}\n\n/**\n * Test if a route is part regular expressed\n * and replace it for a simple character\n * @param route\n * @returns {*}\n */\nconst stripRegex = (route, char = 'R') => {\n  // if route is part regular expressed we replace\n  // the regular expression for a character to\n  // simplify floor calculation and backtracking\n  if (hasRegex.test(route)) {\n    route = route.replace(hasRegex, char)\n  }\n  return route\n}\n\n/**\n * return all stored routes that live on the same floor\n * @param floor\n * @returns {Array}\n */\nconst getRoutesByFloor = floor => {\n  const matches = []\n  // simple filter of level candidates\n  for (let [route] of pages.entries()) {\n    if (getFloor(route) === floor) {\n      matches.push(route)\n    }\n  }\n  return matches\n}\n\n/**\n * return a matching route by provided hash\n * hash: home/browse/12 will match:\n * route: home/browse/:categoryId\n * @param hash {string}\n * @returns {string|boolean} - route\n */\nconst getRouteByHash = hash => {\n  const getUrlParts = /(\\/?:?[@\\w%\\s:-]+)/g\n  7\n  // grab possible candidates from stored routes\n  const candidates = getRoutesByFloor(getFloor(hash))\n  // break hash down in chunks\n  const hashParts = hash.match(getUrlParts) || []\n  // test if the part of the hash has a replace\n  // regex lookup id\n  const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/\n  const isNamedGroup = /^\\/:/\n\n  // to simplify the route matching and prevent look around\n  // in our getUrlParts regex we get the regex part from\n  // route candidate and store them so that we can reference\n  // them when we perform the actual regex against hash\n  let regexStore = []\n\n  let matches = candidates.filter(route => {\n    let isMatching = true\n\n    if (isWildcard.test(route)) {\n      return false\n    }\n\n    // replace regex in route with lookup id => @@{storeId}@@\n    if (hasRegex.test(route)) {\n      const regMatches = route.match(hasRegex)\n      if (regMatches && regMatches.length) {\n        route = regMatches.reduce((fullRoute, regex) => {\n          const lookupId = regexStore.length\n          fullRoute = fullRoute.replace(regex, `@@${lookupId}@@`)\n          regexStore.push(regex.substring(1, regex.length - 1))\n          return fullRoute\n        }, route)\n      }\n    }\n\n    const routeParts = route.match(getUrlParts) || []\n\n    for (let i = 0, j = routeParts.length; i < j; i++) {\n      const routePart = routeParts[i]\n      const hashPart = hashParts[i]\n\n      // Since we support catch-all and regex driven name groups\n      // we first test for regex lookup id and see if the regex\n      // matches the value from the hash\n      if (hasLookupId.test(routePart)) {\n        const routeMatches = hasLookupId.exec(routePart)\n        const storeId = routeMatches[1]\n        const routeRegex = regexStore[storeId]\n\n        // split regex and modifiers so we can use both\n        // to create a new RegExp\n        // eslint-disable-next-line\n        const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex)\n\n        if (regMatches && regMatches.length) {\n          const expression = regMatches[1]\n          const modifiers = regMatches[2]\n\n          const regex = new RegExp(`^/${expression}$`, modifiers)\n\n          if (!regex.test(hashPart)) {\n            isMatching = false\n          }\n        }\n      } else if (isNamedGroup.test(routePart)) {\n        // we kindly skip namedGroups because this is dynamic\n        // we only need to the static and regex drive parts\n        continue\n      } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n        isMatching = false\n      }\n    }\n    return isMatching\n  })\n\n  if (matches.length) {\n    // we give prio to static routes over dynamic\n    matches = matches.sort(a => {\n      return isNamedGroup.test(a) ? -1 : 1\n    })\n    return matches[0]\n  }\n\n  return false\n}\n\n/**\n * Extract dynamic values from location hash and return a namedgroup\n * of key (from route) value (from hash) pairs\n * @param hash {string} - the actual location hash\n * @param route {string} - the route as defined in route\n */\nconst getValuesFromHash = (hash, route) => {\n  // replace the regex definition from the route because\n  // we already did the matching part\n  route = stripRegex(route, '')\n\n  const getUrlParts = /(\\/?:?[\\w%\\s:-]+)/g\n  const hashParts = hash.match(getUrlParts) || []\n  const routeParts = route.match(getUrlParts) || []\n  const getNamedGroup = /^\\/:([\\w-]+)\\/?/\n\n  return routeParts.reduce((storage, value, index) => {\n    const match = getNamedGroup.exec(value)\n    if (match && match.length) {\n      storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')))\n    }\n    return storage\n  }, new Map())\n}\n\n/**\n * Will be called before a route starts, can be overridden\n * via routes config\n * @param from - route we came from\n * @param to - route we navigate to\n * @returns {Promise<*>}\n */\nlet beforeEachRoute = async (from, to) => {\n  return true\n}\n\nconst handleHashChange = async override => {\n  const hash = override || getHash()\n  const route = getRouteByHash(hash)\n\n  let result = (await beforeEachRoute(activeRoute, route)) || true\n\n  // test if a local hook is configured for the route\n  if (routeHooks.has(route)) {\n    const handler = routeHooks.get(route)\n    result = (await handler()) || true\n  }\n\n  if (isBoolean(result)) {\n    // only if resolve value is explicitly true\n    // we continue the current route request\n    if (result) {\n      return resolveHashChange(hash, route)\n    }\n  } else if (isString(result)) {\n    navigate(result)\n  } else if (isObject(result)) {\n    navigate(result.path, result.params)\n  }\n}\n\nconst resolveHashChange = (hash, route) => {\n  // add a new record for page statistics\n  send(hash)\n\n  // store last requested hash so we can\n  // prevent a route that resolved later\n  // from displaying itself\n  lastHash = hash\n\n  if (route) {\n    // would be strange if this fails but we do check\n    if (pages.has(route)) {\n      let stored = pages.get(route)\n      send(hash, 'route', route)\n\n      if (!isArray(stored)) {\n        stored = [stored]\n      }\n\n      stored.forEach((type, idx, stored) => {\n        if (isPage(type, stage)) {\n          load({ route, hash }).then(() => {\n            app._refocus()\n          })\n        } else if (isPromise(type)) {\n          type()\n            .then(contents => {\n              return contents.default\n            })\n            .then(module => {\n              // flag dynamic as loaded\n              stored[idx] = module\n\n              return load({ route, hash })\n            })\n            .then(() => {\n              app._refocus()\n            })\n        } else {\n          const urlParams = getValuesFromHash(hash, route)\n          const params = {}\n          for (const key of urlParams.keys()) {\n            params[key] = urlParams.get(key)\n          }\n\n          // invoke\n          type.call(null, app, { ...params })\n        }\n      })\n    }\n  } else {\n    if (pages.has('*')) {\n      load({ route: '*', hash }).then(() => {\n        app._refocus()\n      })\n    }\n  }\n}\n\nconst getMod = (hash, key) => {\n  const config = modifiers.get(getRouteByHash(hash))\n  if (isObject(config)) {\n    return config[key]\n  }\n}\n\nconst hashmod = (hash, key) => {\n  return routemod(getRouteByHash(hash), key)\n}\n\nconst routemod = (route, key) => {\n  if (modifiers.has(route)) {\n    const config = modifiers.get(route)\n    return config[key]\n  }\n}\n\nconst read = (flag, register) => {\n  if (register.has(flag)) {\n    return register.get(flag)\n  }\n  return false\n}\n\nconst createRegister = flags => {\n  const reg = new Map()\n  // store user defined and router\n  // defined flags in register\n  ;[...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n    reg.set(key, flags[key])\n  })\n  return reg\n}\n\nexport const navigate = (url, args, store = true) => {\n  let hash = getHash()\n\n  // for now we use one register instance and create a local\n  // copy for the loader\n  register.clear()\n\n  if (!mustUpdateHash() && forcedHash) {\n    hash = forcedHash\n  }\n\n  if (isObject(args)) {\n    register = createRegister(args)\n  } else if (isBoolean(args) && !args) {\n    // if explicit set to false we don't want\n    // to store the route\n    store = args\n  }\n\n  // we only store complete routes, so we set\n  // a special register flag\n  register.set(symbols.store, store)\n\n  if (hash.replace(/^#/, '') !== url) {\n    if (!mustUpdateHash()) {\n      forcedHash = url\n      handleHashChange(url)\n    } else {\n      setHash(url)\n    }\n  } else if (read('reload', register)) {\n    handleHashChange(hash)\n  }\n}\n\n/**\n * Directional step in history\n * @param direction\n */\nexport const step = (direction = 0) => {\n  if (!direction) {\n    return false\n  }\n\n  // is we still have routes in our history\n  // we splice the last of and navigate to that route\n  if (history.length) {\n    // for now we only support history back\n    const route = history.splice(history.length - 1, 1)\n    return navigate(route[0], { [symbols.backtrack]: true }, false)\n  } else if (routerConfig.get('backtrack')) {\n    const hashLastPart = /(\\/:?[\\w%\\s-]+)$/\n    let hash = stripRegex(getHash())\n    let floor = getFloor(hash)\n\n    // test if we got deeplinked\n    if (floor > 1) {\n      while (floor--) {\n        // strip of last part\n        hash = hash.replace(hashLastPart, '')\n        // if we have a configured route\n        // we navigate to it\n        if (getRouteByHash(hash)) {\n          return navigate(hash, { [symbols.backtrack]: true }, false)\n        }\n      }\n    }\n  }\n\n  if (isFunction(app._handleAppClose)) {\n    return app._handleAppClose()\n  }\n\n  return false\n}\n\nconst capture = ({ key }) => {\n  // in Loading state we want to stop propagation\n  // by returning undefined\n  if (app.state === 'Loading') {\n    return\n  }\n\n  // if not set we want to continue propagation\n  // by explicitly returning false\n  if (!routerConfig.get('numberNavigation')) {\n    return false\n  }\n  key = parseInt(key)\n  if (!isNaN(key)) {\n    let match\n    let idx = 1\n    for (let route of pages.keys()) {\n      if (idx === key) {\n        match = route\n        break\n      } else {\n        idx++\n      }\n    }\n    if (match) {\n      navigate(match)\n    }\n  }\n  return false\n}\n\n// start translating url\nexport const start = () => {\n  const bootKey = '@boot-page'\n  const hasBootPage = pages.has('@boot-page')\n  const hash = getHash()\n  const params = getQueryStringParams(hash)\n\n  // if we refreshed the boot-page we don't want to\n  // redirect to this page so we force rootHash load\n  const isDirectLoad = hash.indexOf(bootKey) !== -1\n  const ready = () => {\n    if (hasBootPage) {\n      navigate('@boot-page', {\n        [symbols.resume]: isDirectLoad ? rootHash : hash || rootHash,\n        reload: true,\n      })\n    } else if (!hash && rootHash) {\n      if (isString(rootHash)) {\n        navigate(rootHash)\n      } else if (isFunction(rootHash)) {\n        rootHash().then(url => {\n          navigate(url)\n        })\n      }\n    } else {\n      handleHashChange()\n    }\n  }\n  if (isFunction(bootRequest)) {\n    bootRequest(params).then(() => {\n      ready()\n    })\n  } else {\n    ready()\n  }\n}\n\n/**\n * Data binding to a route will invoke a loading screen\n * @param {String} route - the route\n * @param {Function} cb - must return a promise\n * @param {Number} expires - seconds after first time active that data expires\n * @param {String} type - page loading type\n */\nexport const on = (route, cb, expires = 0, type = 'on') => {\n  if (providers.has(route)) {\n    console.warn(`provider for ${route} already exists`)\n  } else {\n    providers.set(route, {\n      cb,\n      expires: expires * 1000,\n      type,\n    })\n  }\n}\n\n/**\n * Request data binding for a route before\n * the page loads (active page will stay visible)\n * @param route\n * @param cb\n * @param expires\n */\nexport const before = (route, cb, expires = 0) => {\n  on(route, cb, expires, 'before')\n}\n\n/**\n * Request data binding for a route after the page has\n * been loaded\n * @param route\n * @param cb\n * @param expires\n */\nexport const after = (route, cb, expires = 0) => {\n  on(route, cb, expires, 'after')\n}\n\nconst getWidgetReferences = () => {\n  return widgetsHost.get().reduce((storage, widget) => {\n    const key = widget.ref.toLowerCase()\n    storage[key] = widget\n    return storage\n  }, {})\n}\n\nconst getWidgetByName = name => {\n  name = ucfirst(name)\n  return widgetsHost.getByRef(name) || false\n}\n\n/**\n * delegate app focus to a on-screen widget\n * @param name - {string}\n */\nexport const focusWidget = name => {\n  const widget = getWidgetByName(name)\n  if (name) {\n    // store reference\n    activeWidget = widget\n    // somewhat experimental\n    if (app.state === 'Widgets') {\n      app.reload(activeWidget)\n    } else {\n      app._setState('Widgets', [activeWidget])\n    }\n  }\n}\n\nexport const handleRemote = (type, name) => {\n  if (type === 'widget') {\n    focusWidget(name)\n  } else if (type === 'page') {\n    restoreFocus()\n  }\n}\n\n/**\n * Resume Router's page loading process after\n * the BootComponent became visible;\n */\nexport const resume = () => {\n  if (register.has(symbols.resume)) {\n    const hash = register.get(symbols.resume).replace(/^#+/, '')\n    if (getRouteByHash(hash) && hash) {\n      navigate(hash, false)\n    } else if (rootHash) {\n      navigate(rootHash, false)\n    }\n  }\n}\n\nexport const restore = () => {\n  if (routerConfig.get('autoRestoreRemote')) {\n    handleRemote('page')\n  }\n}\n\nconst hash = () => {\n  return getHash()\n}\n\nconst mustUpdateHash = () => {\n  // we need support to either turn change hash off\n  // per platform or per app\n  const updateConfig = routerConfig.get('updateHash')\n  return !((isBoolean(updateConfig) && !updateConfig) || (isBoolean(updateHash) && !updateHash))\n}\n\nexport const restoreFocus = () => {\n  activeWidget = null\n  app._setState('')\n}\n\nexport const getActivePage = () => {\n  if (activePage && activePage.attached) {\n    return activePage\n  } else {\n    return app\n  }\n}\n\nexport const getActiveRoute = () => {\n  return activeRoute\n}\n\nexport const getActiveHash = () => {\n  return activeHash\n}\n\nexport const getActiveWidget = () => {\n  return activeWidget\n}\n\n// listen to url changes\nwindow.addEventListener('hashchange', () => {\n  handleHashChange()\n})\n\n// export API\nexport default {\n  startRouter,\n  navigate,\n  root,\n  resume,\n  route,\n  on,\n  before,\n  after,\n  boot,\n  step,\n  restoreFocus,\n  focusPage: restoreFocus,\n  focusWidget,\n  handleRemote,\n  start,\n  add: setupRoutes,\n  widget,\n  hash,\n  getActivePage,\n  getActiveWidget,\n  getActiveRoute,\n  getActiveHash,\n  App: RoutedApp,\n  restore,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst defaultChannels = [\n  {\n    number: 1,\n    name: 'Metro News 1',\n    description: 'New York Cable News Channel',\n    entitled: true,\n    program: {\n      title: 'The Morning Show',\n      description: \"New York's best morning show\",\n      startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(), // started 5 minutes ago\n      duration: 60 * 30, // 30 minutes\n      ageRating: 0,\n    },\n  },\n  {\n    number: 2,\n    name: 'MTV',\n    description: 'Music Television',\n    entitled: true,\n    program: {\n      title: 'Beavis and Butthead',\n      description: 'American adult animated sitcom created by Mike Judge',\n      startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(), // started 20 minutes ago\n      duration: 60 * 45, // 45 minutes\n      ageRating: 18,\n    },\n  },\n  {\n    number: 3,\n    name: 'NBC',\n    description: 'NBC TV Network',\n    entitled: false,\n    program: {\n      title: 'The Tonight Show Starring Jimmy Fallon',\n      description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n      startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(), // started 10 minutes ago\n      duration: 60 * 60, // 1 hour\n      ageRating: 10,\n    },\n  },\n]\n\nexport const channels = () => Settings.get('platform', 'tv', defaultChannels)\n\nexport const randomChannel = () => channels()[~~(channels.length * Math.random())]\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nimport { channels, randomChannel } from './defaults'\n\nlet currentChannel\nconst callbacks = {}\n\nconst emit = (event, ...args) => {\n  callbacks[event] &&\n    callbacks[event].forEach(cb => {\n      cb.apply(null, args)\n    })\n}\n\n// local mock methods\nlet methods = {\n  getChannel() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      if (currentChannel) {\n        const channel = { ...currentChannel }\n        delete channel.program\n        resolve(channel)\n      } else {\n        reject('No channel found')\n      }\n    })\n  },\n  getProgram() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      currentChannel.program ? resolve(currentChannel.program) : reject('No program found')\n    })\n  },\n  setChannel(number) {\n    return new Promise((resolve, reject) => {\n      if (number) {\n        const newChannel = channels().find(c => c.number === number)\n        if (newChannel) {\n          currentChannel = newChannel\n          const channel = { ...currentChannel }\n          delete channel.program\n          emit('channelChange', channel)\n          resolve(channel)\n        } else {\n          reject('Channel not found')\n        }\n      } else {\n        reject('No channel number supplied')\n      }\n    })\n  },\n}\n\nexport const initTV = config => {\n  methods = {}\n  if (config.getChannel && typeof config.getChannel === 'function') {\n    methods.getChannel = config.getChannel\n  }\n  if (config.getProgram && typeof config.getProgram === 'function') {\n    methods.getProgram = config.getProgram\n  }\n  if (config.setChannel && typeof config.setChannel === 'function') {\n    methods.setChannel = config.setChannel\n  }\n  if (config.emit && typeof config.emit === 'function') {\n    config.emit(emit)\n  }\n}\n\n// public API\nexport default {\n  channel(number = null) {\n    return new Promise((resolve, reject) => {\n      try {\n        // call setChannel when number argument is passed, otherwise getChannel\n        methods[number ? 'setChannel' : 'getChannel'](number)\n          .then(channel => {\n            // to do: ensure consistent formatting of channel info here?\n            resolve(channel)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  program() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getProgram()\n          .then(program => {\n            // to do: ensure consistent formatting of program info here?\n            resolve(program)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  entitled() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getChannel()\n          .then(channel => {\n            'entitled' in channel ? resolve(!!channel.entitled) : reject()\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  addEventListener(event, cb) {\n    if (typeof cb === 'function') {\n      callbacks[event] = callbacks[event] || []\n      callbacks[event].push(cb)\n    } else {\n      Log.error('Please provide a function as a callback')\n    }\n  },\n  removeEventListener(event, cb = false) {\n    if (callbacks[event] && callbacks[event].length) {\n      callbacks[event] = cb ? callbacks[event].filter(_cb => _cb === cb) : []\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { initUtils } from '../Utils'\nimport { initProfile } from '../Profile'\nimport { initMetrics } from '../Metrics'\nimport { initSettings } from '../Settings'\nimport { initMediaPlayer } from '../MediaPlayer'\nimport { initVideoPlayer } from '../VideoPlayer'\nimport { initStorage } from '../Storage'\nimport { initAds } from '../Ads'\nimport { initRouter } from '../Router'\nimport { initTV } from '../TV'\nimport Application from '../Application'\n\nexport let ApplicationInstance\n\nexport default (App, appSettings, platformSettings, appData) => {\n  initSettings(appSettings, platformSettings)\n\n  initUtils(platformSettings)\n  initStorage()\n\n  // Initialize plugins\n  if (platformSettings.plugins) {\n    platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile)\n    platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics)\n    platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.ads && initAds(platformSettings.plugins.ads)\n    platformSettings.plugins.router && initRouter(platformSettings.plugins.router)\n    platformSettings.plugins.tv && initTV(platformSettings.plugins.tv)\n  }\n\n  const app = Application(App, appData, platformSettings)\n  ApplicationInstance = new app(appSettings)\n  return ApplicationInstance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport { defaultProfile } from './defaults'\n\nlet getInfo = key => {\n  const profile = { ...defaultProfile, ...Settings.get('platform', 'profile') }\n  return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key])\n}\n\nlet setInfo = (key, params) => {\n  if (key in defaultProfile) defaultProfile[key] = params\n}\n\nexport const initProfile = config => {\n  getInfo = config.getInfo\n  setInfo = config.setInfo\n}\n\nconst getOrSet = (key, params) => (params ? setInfo(key, params) : getInfo(key))\n\n// public API\nexport default {\n  ageRating(params) {\n    return getOrSet('ageRating', params)\n  },\n  city(params) {\n    return getOrSet('city', params)\n  },\n  zipCode(params) {\n    return getOrSet('zipCode', params)\n  },\n  countryCode(params) {\n    return getOrSet('countryCode', params)\n  },\n  ip(params) {\n    return getOrSet('ip', params)\n  },\n  household(params) {\n    return getOrSet('household', params)\n  },\n  language(params) {\n    return getOrSet('language', params)\n  },\n  latlon(params) {\n    return getOrSet('latlon', params)\n  },\n  locale(params) {\n    return getOrSet('locale', params)\n  },\n  mac(params) {\n    return getOrSet('mac', params)\n  },\n  operator(params) {\n    return getOrSet('operator', params)\n  },\n  platform(params) {\n    return getOrSet('platform', params)\n  },\n  packages(params) {\n    return getOrSet('packages', params)\n  },\n  uid(params) {\n    return getOrSet('uid', params)\n  },\n  stbType(params) {\n    return getOrSet('stbType', params)\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Log from '../Log'\n\nexport default class VideoTexture extends Lightning.Component {\n  static _template() {\n    return {\n      Video: {\n        alpha: 1,\n        visible: false,\n        pivot: 0.5,\n        texture: { type: Lightning.textures.StaticTexture, options: {} },\n      },\n    }\n  }\n\n  set videoEl(v) {\n    this._videoEl = v\n  }\n\n  get videoEl() {\n    return this._videoEl\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  get videoTexture() {\n    return this.videoView.texture\n  }\n\n  get isVisible() {\n    return this.videoView.alpha === 1 && this.videoView.visible === true\n  }\n\n  _init() {\n    this._createVideoTexture()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n\n    this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision()\n    this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision()\n  }\n\n  start() {\n    const stage = this.stage\n    if (!this._updateVideoTexture) {\n      this._updateVideoTexture = () => {\n        if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n          const gl = stage.gl\n\n          const currentTime = new Date().getTime()\n\n          // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n          // We'll fallback to fixed 30fps in this case.\n          const frameCount = this.videoEl.webkitDecodedFrameCount\n\n          const mustUpdate = frameCount\n            ? this._lastFrame !== frameCount\n            : this._lastTime < currentTime - 30\n\n          if (mustUpdate) {\n            this._lastTime = currentTime\n            this._lastFrame = frameCount\n            try {\n              gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n              gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n              gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n              this._lastFrame = this.videoEl.webkitDecodedFrameCount\n              this.videoView.visible = true\n\n              this.videoTexture.options.w = this.videoEl.width\n              this.videoTexture.options.h = this.videoEl.height\n              const expectedAspectRatio = this.videoView.w / this.videoView.h\n              const realAspectRatio = this.videoEl.width / this.videoEl.height\n\n              if (expectedAspectRatio > realAspectRatio) {\n                this.videoView.scaleX = realAspectRatio / expectedAspectRatio\n                this.videoView.scaleY = 1\n              } else {\n                this.videoView.scaleY = expectedAspectRatio / realAspectRatio\n                this.videoView.scaleX = 1\n              }\n            } catch (e) {\n              Log.error('texImage2d video', e)\n              this.stop()\n            }\n            this.videoTexture.source.forceRenderUpdate()\n          }\n        }\n      }\n    }\n    if (!this._updatingVideoTexture) {\n      stage.on('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = true\n    }\n  }\n\n  stop() {\n    const stage = this.stage\n    stage.removeListener('frameStart', this._updateVideoTexture)\n    this._updatingVideoTexture = false\n    this.videoView.visible = false\n\n    if (this.videoTexture.options.source) {\n      const gl = stage.gl\n      gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n      gl.clearColor(0, 0, 0, 1)\n      gl.clear(gl.COLOR_BUFFER_BIT)\n    }\n  }\n\n  position(top, left) {\n    this.videoView.patch({\n      smooth: {\n        x: left,\n        y: top,\n      },\n    })\n  }\n\n  size(width, height) {\n    this.videoView.patch({\n      smooth: {\n        w: width,\n        h: height,\n      },\n    })\n  }\n\n  show() {\n    this.videoView.setSmooth('alpha', 1)\n  }\n\n  hide() {\n    this.videoView.setSmooth('alpha', 0)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Metrics from '../Metrics'\nimport Log from '../Log'\nimport Ads from '../Ads'\n\nimport events from './events'\nimport autoSetupMixin from '../helpers/autoSetupMixin'\nimport easeExecution from '../helpers/easeExecution'\nimport { ApplicationInstance } from '../Launch'\nimport Settings from '../Settings'\nimport VideoTexture from './VideoTexture'\n\nexport let mediaUrl = url => url\nlet videoEl\nlet videoTexture\nlet metrics\nlet consumer\nlet precision = 1\nlet textureMode = false\n\nexport const initVideoPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\n// todo: add this in a 'Registry' plugin\n// to be able to always clean this up on app close\nlet eventHandlers = {}\n\nconst state = {\n  adsEnabled: false,\n  playing: false,\n  _playingAds: false,\n  get playingAds() {\n    return this._playingAds\n  },\n  set playingAds(val) {\n    if (this._playingAds !== val) {\n      this._playingAds = val\n      fireOnConsumer(val === true ? 'AdStart' : 'AdEnd')\n    }\n  },\n  skipTime: false,\n  playAfterSeek: null,\n}\n\nconst hooks = {\n  play() {\n    state.playing = true\n  },\n  pause() {\n    state.playing = false\n  },\n  seeked() {\n    state.playAfterSeek === true && videoPlayerPlugin.play()\n    state.playAfterSeek = null\n  },\n  abort() {\n    deregisterEventListeners()\n  },\n}\n\nconst withPrecision = val => Math.round(precision * val) + 'px'\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$videoPlayer' + event, args, videoEl.currentTime)\n    consumer.fire('$videoPlayerEvent', event, args, videoEl.currentTime)\n  }\n}\n\nconst fireHook = (event, args) => {\n  hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args)\n}\n\nexport const setupVideoTag = () => {\n  const videoEls = document.getElementsByTagName('video')\n  if (videoEls && videoEls.length) {\n    return videoEls[0]\n  } else {\n    const videoEl = document.createElement('video')\n    videoEl.setAttribute('id', 'video-player')\n    videoEl.setAttribute('width', withPrecision(1920))\n    videoEl.setAttribute('height', withPrecision(1080))\n    videoEl.setAttribute('crossorigin', 'anonymous')\n    videoEl.style.position = 'absolute'\n    videoEl.style.zIndex = '1'\n    videoEl.style.display = 'none'\n    videoEl.style.visibility = 'hidden'\n    videoEl.style.top = withPrecision(0)\n    videoEl.style.left = withPrecision(0)\n    videoEl.style.width = withPrecision(1920)\n    videoEl.style.height = withPrecision(1080)\n    document.body.appendChild(videoEl)\n    return videoEl\n  }\n}\n\nexport const setUpVideoTexture = () => {\n  if (!ApplicationInstance.tag('VideoTexture')) {\n    const el = ApplicationInstance.stage.c({\n      type: VideoTexture,\n      ref: 'VideoTexture',\n      zIndex: 0,\n      videoEl,\n    })\n    ApplicationInstance.childList.addAt(el, 0)\n  }\n  return ApplicationInstance.tag('VideoTexture')\n}\n\nconst registerEventListeners = () => {\n  Log.info('VideoPlayer', 'Registering event listeners')\n  Object.keys(events).forEach(event => {\n    const handler = e => {\n      // Fire a metric for each event (if it exists on the metrics object)\n      if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n        metrics[event]({ currentTime: videoEl.currentTime })\n      }\n      // fire an internal hook\n      fireHook(event, { videoElement: videoEl, event: e })\n\n      // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n      fireOnConsumer(events[event], { videoElement: videoEl, event: e })\n    }\n\n    eventHandlers[event] = handler\n    videoEl.addEventListener(event, handler)\n  })\n}\n\nconst deregisterEventListeners = () => {\n  Log.info('VideoPlayer', 'Deregistering event listeners')\n  Object.keys(eventHandlers).forEach(event => {\n    videoEl.removeEventListener(event, eventHandlers[event])\n  })\n  eventHandlers = {}\n}\n\nconst videoPlayerPlugin = {\n  consumer(component) {\n    consumer = component\n  },\n\n  position(top = 0, left = 0) {\n    videoEl.style.left = withPrecision(left)\n    videoEl.style.top = withPrecision(top)\n    if (textureMode === true) {\n      videoTexture.position(top, left)\n    }\n  },\n\n  size(width = 1920, height = 1080) {\n    videoEl.style.width = withPrecision(width)\n    videoEl.style.height = withPrecision(height)\n    videoEl.width = parseFloat(videoEl.style.width)\n    videoEl.height = parseFloat(videoEl.style.height)\n    if (textureMode === true) {\n      videoTexture.size(width, height)\n    }\n  },\n\n  area(top = 0, right = 1920, bottom = 1080, left = 0) {\n    this.position(top, left)\n    this.size(right - left, bottom - top)\n  },\n\n  open(url, details = {}) {\n    if (!this.canInteract) return\n    metrics = Metrics.media(url)\n    // prep the media url to play depending on platform\n    url = mediaUrl(url)\n\n    // if url is same as current clear (which is effectively a reload)\n    if (this.src == url) {\n      this.clear()\n    }\n\n    this.hide()\n    deregisterEventListeners()\n\n    // preload the video to get duration (for ads)\n    //.. currently actually not working because loadedmetadata didn't work reliably on Sky boxes\n    videoEl.setAttribute('src', url)\n    videoEl.load()\n\n    // const onLoadedMetadata = () => {\n    // videoEl.removeEventListener('loadedmetadata', onLoadedMetadata)\n    const config = { enabled: state.adsEnabled, duration: 300 } // this.duration ||\n    if (details.videoId) {\n      config.caid = details.videoId\n    }\n    Ads.get(config, consumer).then(ads => {\n      state.playingAds = true\n      ads.prerolls().then(() => {\n        state.playingAds = false\n        registerEventListeners()\n        if (this.src !== url) {\n          videoEl.setAttribute('src', url)\n          videoEl.load()\n        }\n        this.show()\n        setTimeout(() => {\n          this.play()\n        })\n      })\n    })\n    // }\n\n    // videoEl.addEventListener('loadedmetadata', onLoadedMetadata)\n  },\n\n  reload() {\n    if (!this.canInteract) return\n    const url = videoEl.getAttribute('src')\n    this.close()\n    this.open(url)\n  },\n\n  close() {\n    Ads.cancel()\n    if (state.playingAds) {\n      state.playingAds = false\n      Ads.stop()\n      // call self in next tick\n      setTimeout(() => {\n        this.close()\n      })\n    }\n    if (!this.canInteract) return\n    this.clear()\n    this.hide()\n    deregisterEventListeners()\n  },\n\n  clear() {\n    if (!this.canInteract) return\n    // pause the video first to disable sound\n    this.pause()\n    if (textureMode === true) videoTexture.stop()\n    fireOnConsumer('Clear', { videoElement: videoEl })\n    videoEl.removeAttribute('src')\n    videoEl.load()\n  },\n\n  play() {\n    if (!this.canInteract) return\n    if (textureMode === true) videoTexture.start()\n    videoEl.play()\n  },\n\n  pause() {\n    if (!this.canInteract) return\n    videoEl.pause()\n  },\n\n  playPause() {\n    if (!this.canInteract) return\n    this.playing === true ? this.pause() : this.play()\n  },\n\n  mute(muted = true) {\n    if (!this.canInteract) return\n    videoEl.muted = muted\n  },\n\n  loop(looped = true) {\n    videoEl.loop = looped\n  },\n\n  seek(time) {\n    if (!this.canInteract) return\n    if (!this.src) return\n    // define whether should continue to play after seek is complete (in seeked hook)\n    if (state.playAfterSeek === null) {\n      state.playAfterSeek = !!state.playing\n    }\n    // pause before actually seeking\n    this.pause()\n    // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n    videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1))\n  },\n\n  skip(seconds) {\n    if (!this.canInteract) return\n    if (!this.src) return\n\n    state.skipTime = (state.skipTime || videoEl.currentTime) + seconds\n    easeExecution(() => {\n      this.seek(state.skipTime)\n      state.skipTime = false\n    }, 300)\n  },\n\n  show() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.show()\n    } else {\n      videoEl.style.display = 'block'\n      videoEl.style.visibility = 'visible'\n    }\n  },\n\n  hide() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.hide()\n    } else {\n      videoEl.style.display = 'none'\n      videoEl.style.visibility = 'hidden'\n    }\n  },\n\n  enableAds(enabled = true) {\n    state.adsEnabled = enabled\n  },\n\n  /* Public getters */\n  get duration() {\n    return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration)\n  },\n\n  get currentTime() {\n    return videoEl && videoEl.currentTime\n  },\n\n  get muted() {\n    return videoEl && videoEl.muted\n  },\n\n  get looped() {\n    return videoEl && videoEl.loop\n  },\n\n  get src() {\n    return videoEl && videoEl.getAttribute('src')\n  },\n\n  get playing() {\n    return state.playing\n  },\n\n  get playingAds() {\n    return state.playingAds\n  },\n\n  get canInteract() {\n    // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n    return state.playingAds === false\n  },\n\n  get top() {\n    return videoEl && parseFloat(videoEl.style.top)\n  },\n\n  get left() {\n    return videoEl && parseFloat(videoEl.style.left)\n  },\n\n  get bottom() {\n    return videoEl && parseFloat(videoEl.style.top - videoEl.style.height)\n  },\n\n  get right() {\n    return videoEl && parseFloat(videoEl.style.left - videoEl.style.width)\n  },\n\n  get width() {\n    return videoEl && parseFloat(videoEl.style.width)\n  },\n\n  get height() {\n    return videoEl && parseFloat(videoEl.style.height)\n  },\n\n  get visible() {\n    if (textureMode === true) {\n      return videoTexture.isVisible\n    } else {\n      return videoEl && videoEl.style.display === 'block'\n    }\n  },\n\n  get adsEnabled() {\n    return state.adsEnabled\n  },\n\n  // prefixed with underscore to indicate 'semi-private'\n  // because it's not recommended to interact directly with the video element\n  get _videoEl() {\n    return videoEl\n  },\n}\n\nexport default autoSetupMixin(videoPlayerPlugin, () => {\n  precision =\n    (ApplicationInstance &&\n      ApplicationInstance.stage &&\n      ApplicationInstance.stage.getRenderPrecision()) ||\n    precision\n\n  videoEl = setupVideoTag()\n\n  textureMode = Settings.get('platform', 'textureMode', false)\n  if (textureMode === true) {\n    videoTexture = setUpVideoTexture()\n  }\n})\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mediaUrl } from '../VideoPlayer'\n\nlet consumer\n\nlet getAds = () => {\n  // todo: enable some default ads during development, maybe from the settings.json\n  return Promise.resolve({\n    prerolls: [],\n    midrolls: [],\n    postrolls: [],\n  })\n}\n\nexport const initAds = config => {\n  if (config.getAds) {\n    getAds = config.getAds\n  }\n}\n\nconst state = {\n  active: false,\n}\n\nconst playSlot = (slot = []) => {\n  return slot.reduce((promise, ad) => {\n    return promise.then(() => {\n      return playAd(ad)\n    })\n  }, Promise.resolve(null))\n}\n\nconst playAd = ad => {\n  return new Promise(resolve => {\n    if (state.active === false) {\n      Log.info('Ad', 'Skipping add due to inactive state')\n      return resolve()\n    }\n    // is it safe to rely on videoplayer plugin already created the video tag?\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.style.display = 'block'\n    videoEl.style.visibility = 'visible'\n    videoEl.src = mediaUrl(ad.url)\n    videoEl.load()\n\n    let timeEvents = null\n    let timeout\n\n    const cleanup = () => {\n      // remove all listeners\n      Object.keys(handlers).forEach(handler =>\n        videoEl.removeEventListener(handler, handlers[handler])\n      )\n      resolve()\n    }\n    const handlers = {\n      play() {\n        Log.info('Ad', 'Play ad', ad.url)\n        fireOnConsumer('Play', ad)\n        sendBeacon(ad.callbacks, 'defaultImpression')\n      },\n      ended() {\n        fireOnConsumer('Ended', ad)\n        sendBeacon(ad.callbacks, 'complete')\n        cleanup()\n      },\n      timeupdate() {\n        if (!timeEvents && videoEl.duration) {\n          // calculate when to fire the time based events (now that duration is known)\n          timeEvents = {\n            firstQuartile: videoEl.duration / 4,\n            midPoint: videoEl.duration / 2,\n            thirdQuartile: (videoEl.duration / 4) * 3,\n          }\n          Log.info('Ad', 'Calculated quartiles times', { timeEvents })\n        }\n        if (\n          timeEvents &&\n          timeEvents.firstQuartile &&\n          videoEl.currentTime >= timeEvents.firstQuartile\n        ) {\n          fireOnConsumer('FirstQuartile', ad)\n          delete timeEvents.firstQuartile\n          sendBeacon(ad.callbacks, 'firstQuartile')\n        }\n        if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n          fireOnConsumer('MidPoint', ad)\n          delete timeEvents.midPoint\n          sendBeacon(ad.callbacks, 'midPoint')\n        }\n        if (\n          timeEvents &&\n          timeEvents.thirdQuartile &&\n          videoEl.currentTime >= timeEvents.thirdQuartile\n        ) {\n          fireOnConsumer('ThirdQuartile', ad)\n          delete timeEvents.thirdQuartile\n          sendBeacon(ad.callbacks, 'thirdQuartile')\n        }\n      },\n      stalled() {\n        fireOnConsumer('Stalled', ad)\n        timeout = setTimeout(() => {\n          cleanup()\n        }, 5000) // make timeout configurable\n      },\n      canplay() {\n        timeout && clearTimeout(timeout)\n      },\n      error() {\n        fireOnConsumer('Error', ad)\n        cleanup()\n      },\n      // this doesn't work reliably on sky box, moved logic to timeUpdate event\n      // loadedmetadata() {\n      //   // calculate when to fire the time based events (now that duration is known)\n      //   timeEvents = {\n      //     firstQuartile: videoEl.duration / 4,\n      //     midPoint: videoEl.duration / 2,\n      //     thirdQuartile: (videoEl.duration / 4) * 3,\n      //   }\n      // },\n      abort() {\n        cleanup()\n      },\n      // todo: pause, resume, mute, unmute beacons\n    }\n    // add all listeners\n    Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]))\n\n    videoEl.play()\n  })\n}\n\nconst sendBeacon = (callbacks, event) => {\n  if (callbacks && callbacks[event]) {\n    Log.info('Ad', 'Sending beacon', event, callbacks[event])\n    return callbacks[event].reduce((promise, url) => {\n      return promise.then(() =>\n        fetch(url)\n          // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n          // note: for fetch failed http responses don't throw an Error :)\n          .then(response => {\n            if (response.status === 200) {\n              fireOnConsumer('Beacon' + event + 'Sent')\n            } else {\n              fireOnConsumer('Beacon' + event + 'Failed' + response.status)\n            }\n            Promise.resolve(null)\n          })\n          .catch(() => {\n            Promise.resolve(null)\n          })\n      )\n    }, Promise.resolve(null))\n  } else {\n    Log.info('Ad', 'No callback found for ' + event)\n  }\n}\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$ad' + event, args)\n    consumer.fire('$adEvent', event, args)\n  }\n}\n\nexport default {\n  get(config, videoPlayerConsumer) {\n    if (config.enabled === false) {\n      return Promise.resolve({\n        prerolls() {\n          return Promise.resolve()\n        },\n      })\n    }\n    consumer = videoPlayerConsumer\n\n    return new Promise(resolve => {\n      Log.info('Ad', 'Starting session')\n      getAds(config).then(ads => {\n        Log.info('Ad', 'API result', ads)\n        resolve({\n          prerolls() {\n            if (ads.preroll) {\n              state.active = true\n              fireOnConsumer('PrerollSlotImpression', ads)\n              sendBeacon(ads.preroll.callbacks, 'slotImpression')\n              return playSlot(ads.preroll.ads).then(() => {\n                fireOnConsumer('PrerollSlotEnd', ads)\n                sendBeacon(ads.preroll.callbacks, 'slotEnd')\n                state.active = false\n              })\n            }\n            return Promise.resolve()\n          },\n          midrolls() {\n            return Promise.resolve()\n          },\n          postrolls() {\n            return Promise.resolve()\n          },\n        })\n      })\n    })\n  },\n  cancel() {\n    Log.info('Ad', 'Cancel Ad')\n    state.active = false\n  },\n  stop() {\n    Log.info('Ad', 'Stop Ad')\n    state.active = false\n    // fixme: duplication\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.pause()\n    videoEl.removeAttribute('src')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default (sourceObject, setup = () => {}) => {\n  let ready = false\n\n  const doSetup = () => {\n    if (ready === false) {\n      setup()\n      ready = true\n    }\n  }\n\n  return Object.keys(sourceObject).reduce((obj, key) => {\n    if (typeof sourceObject[key] === 'function') {\n      obj[key] = function() {\n        doSetup()\n        return sourceObject[key].apply(sourceObject, arguments)\n      }\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n      obj.__defineGetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject)\n      })\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n      obj.__defineSetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(\n          sourceObject,\n          arguments\n        )\n      })\n    } else {\n      obj[key] = sourceObject[key]\n    }\n    return obj\n  }, {})\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class ScaledImageTexture extends Lightning.textures.ImageTexture {\n  constructor(stage) {\n    super(stage)\n    this._scalingOptions = undefined\n  }\n\n  set options(options) {\n    this.resizeMode = this._scalingOptions = options\n  }\n\n  _getLookupId() {\n    return `${this._src}-${this._scalingOptions.type}-${this._scalingOptions.w}-${this._scalingOptions.h}`\n  }\n\n  getNonDefaults() {\n    const obj = super.getNonDefaults()\n    if (this._src) {\n      obj.src = this._src\n    }\n    return obj\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Pin from '../Pin'\n\nclass PinInput extends Lightning.Component {\n  static _template() {\n    return {\n      w: 120,\n      h: 150,\n      rect: true,\n      color: 0xff949393,\n      alpha: 0.5,\n      shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n      Nr: {\n        w: w => w,\n        y: 24,\n        text: {\n          text: '',\n          textColor: 0xff333333,\n          fontSize: 80,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n        },\n      },\n    }\n  }\n\n  set index(v) {\n    this.x = v * (120 + 24)\n  }\n\n  set nr(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    if (v) {\n      this.setSmooth('alpha', 1)\n    } else {\n      this.setSmooth('alpha', 0.5)\n    }\n\n    this.tag('Nr').patch({\n      text: {\n        text: (v && v.toString()) || '',\n        fontSize: v === '*' ? 120 : 80,\n      },\n    })\n\n    if (v && v !== '*') {\n      this._timeout = setTimeout(() => {\n        this._timeout = null\n        this.nr = '*'\n      }, 750)\n    }\n  }\n}\n\nexport default class PinDialog extends Lightning.Component {\n  static _template() {\n    return {\n      w: w => w,\n      h: h => h,\n      rect: true,\n      color: 0xdd000000,\n      alpha: 0.000001,\n      Dialog: {\n        w: 648,\n        h: 320,\n        y: h => (h - 320) / 2,\n        x: w => (w - 648) / 2,\n        rect: true,\n        color: 0xdd333333,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n        Info: {\n          y: 24,\n          x: 48,\n          text: { text: 'Please enter your PIN', fontSize: 32 },\n        },\n        Msg: {\n          y: 260,\n          x: 48,\n          text: { text: '', fontSize: 28, textColor: 0xffffffff },\n        },\n        Code: {\n          x: 48,\n          y: 96,\n        },\n      },\n    }\n  }\n\n  _init() {\n    const children = []\n    for (let i = 0; i < 4; i++) {\n      children.push({\n        type: PinInput,\n        index: i,\n      })\n    }\n\n    this.tag('Code').children = children\n  }\n\n  get pin() {\n    if (!this._pin) this._pin = ''\n    return this._pin\n  }\n\n  set pin(v) {\n    if (v.length <= 4) {\n      const maskedPin = new Array(Math.max(v.length - 1, 0)).fill('*', 0, v.length - 1)\n      v.length && maskedPin.push(v.length > this._pin.length ? v.slice(-1) : '*')\n      for (let i = 0; i < 4; i++) {\n        this.tag('Code').children[i].nr = maskedPin[i] || ''\n      }\n      this._pin = v\n    }\n  }\n\n  get msg() {\n    if (!this._msg) this._msg = ''\n    return this._msg\n  }\n\n  set msg(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    this._msg = v\n    if (this._msg) {\n      this.tag('Msg').text = this._msg\n      this.tag('Info').setSmooth('alpha', 0.5)\n      this.tag('Code').setSmooth('alpha', 0.5)\n    } else {\n      this.tag('Msg').text = ''\n      this.tag('Info').setSmooth('alpha', 1)\n      this.tag('Code').setSmooth('alpha', 1)\n    }\n    this._timeout = setTimeout(() => {\n      this.msg = ''\n    }, 2000)\n  }\n\n  _firstActive() {\n    this.setSmooth('alpha', 1)\n  }\n\n  _handleKey(event) {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      const val = parseInt(event.key)\n      if (val > -1) {\n        this.pin += val\n      }\n    }\n  }\n\n  _handleBack() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      if (this.pin.length) {\n        this.pin = this.pin.slice(0, this.pin.length - 1)\n      } else {\n        Pin.hide()\n        this.resolve(false)\n      }\n    }\n  }\n\n  _handleEnter() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      Pin.submit(this.pin)\n        .then(val => {\n          this.msg = 'Unlocking ...'\n          setTimeout(() => {\n            Pin.hide()\n          }, 1000)\n          this.resolve(val)\n        })\n        .catch(e => {\n          this.msg = e\n          this.reject(e)\n        })\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet ws = null;\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket;\n}\nvar ws_1 = ws;\n\nconst requestsQueue = {};\nconst listeners = {};\n\nvar requestQueueResolver = data => {\n  if (typeof data === 'string') {\n    data = JSON.parse(data.normalize().replace(/\\\\x([0-9A-Fa-f]{2})/g, ''));\n  }\n  if (data.id) {\n    const request = requestsQueue[data.id];\n    if (request) {\n      if ('result' in data) request.resolve(data.result);\n      else request.reject(data.error);\n      delete requestsQueue[data.id];\n    } else {\n      console.log('no pending request found with id ' + data.id);\n    }\n  }\n};\n\nvar notificationListener = data => {\n  if (typeof data === 'string') {\n    data = JSON.parse(data.normalize().replace(/\\\\x([0-9A-Fa-f]{2})/g, ''));\n  }\n  if (!data.id && data.method) {\n    const callbacks = listeners[data.method];\n    if (callbacks && Array.isArray(callbacks) && callbacks.length) {\n      callbacks.forEach(callback => {\n        callback(data.params);\n      });\n    }\n  }\n};\n\nconst protocol = 'ws://';\nconst host = 'localhost';\nconst endpoint = '/jsonrpc';\nconst port = 80;\nvar makeWebsocketAddress = options => {\n  return [\n    (options && options.protocol) || protocol,\n    (options && options.host) || host,\n    ':' + ((options && options.port) || port),\n    (options && options.endpoint) || endpoint,\n    options && options.token ? '?token=' + options.token : null,\n  ].join('')\n};\n\nconst protocols = 'notification';\nlet socket = null;\nvar connect = options => {\n  return new Promise((resolve, reject) => {\n    if (socket && socket.readyState === 1) return resolve(socket)\n    if (socket && socket.readyState === 0) {\n      const waitForOpen = () => {\n        socket.removeEventListener('open', waitForOpen);\n        resolve(socket);\n      };\n      return socket.addEventListener('open', waitForOpen)\n    }\n    if (socket === null) {\n      socket = new ws_1(makeWebsocketAddress(options), protocols);\n      socket.addEventListener('message', message => {\n        if (options.debug) {\n          console.log(' ');\n          console.log('API REPONSE:');\n          console.log(JSON.stringify(message.data, null, 2));\n          console.log(' ');\n        }\n        requestQueueResolver(message.data);\n      });\n      socket.addEventListener('message', message => {\n        notificationListener(message.data);\n      });\n      socket.addEventListener('error', () => {\n        notificationListener({\n          method: 'client.ThunderJS.events.error',\n        });\n        socket = null;\n      });\n      const handleConnectClosure = event => {\n        socket = null;\n        reject(event);\n      };\n      socket.addEventListener('close', handleConnectClosure);\n      socket.addEventListener('open', () => {\n        notificationListener({\n          method: 'client.ThunderJS.events.connect',\n        });\n        socket.removeEventListener('close', handleConnectClosure);\n        socket.addEventListener('close', () => {\n          notificationListener({\n            method: 'client.ThunderJS.events.disconnect',\n          });\n          socket = null;\n        });\n        resolve(socket);\n      });\n    } else {\n      socket = null;\n      reject('Socket error');\n    }\n  })\n};\n\nvar makeBody = (requestId, plugin, method, params, version) => {\n  params ? delete params.version : null;\n  const body = {\n    jsonrpc: '2.0',\n    id: requestId,\n    method: [plugin, version, method].join('.'),\n  };\n  params || params === false\n    ?\n      typeof params === 'object' && Object.keys(params).length === 0\n      ? null\n      : (body.params = params)\n    : null;\n  return body\n};\n\nvar getVersion = (versionsConfig, plugin, params) => {\n  const defaultVersion = 1;\n  let version;\n  if ((version = params && params.version)) {\n    return version\n  }\n  return versionsConfig\n    ? versionsConfig[plugin] || versionsConfig.default || defaultVersion\n    : defaultVersion\n};\n\nlet id = 0;\nvar makeId = () => {\n  id = id + 1;\n  return id\n};\n\nvar execRequest = (options, body) => {\n  return connect(options).then(connection => {\n    connection.send(JSON.stringify(body));\n  })\n};\n\nvar API = options => {\n  return {\n    request(plugin, method, params) {\n      return new Promise((resolve, reject) => {\n        const requestId = makeId();\n        const version = getVersion(options.versions, plugin, params);\n        const body = makeBody(requestId, plugin, method, params, version);\n        if (options.debug) {\n          console.log(' ');\n          console.log('API REQUEST:');\n          console.log(JSON.stringify(body, null, 2));\n          console.log(' ');\n        }\n        requestsQueue[requestId] = {\n          body,\n          resolve,\n          reject,\n        };\n        execRequest(options, body).catch(e => {\n          reject(e);\n        });\n      })\n    },\n  }\n};\n\nvar DeviceInfo = {\n  freeRam(params) {\n    return this.call('systeminfo', params).then(res => {\n      return res.freeram\n    })\n  },\n  version(params) {\n    return this.call('systeminfo', params).then(res => {\n      return res.version\n    })\n  },\n};\n\nvar plugins = {\n  DeviceInfo,\n};\n\nfunction listener(plugin, event, callback, errorCallback) {\n  const thunder = this;\n  const index = register.call(this, plugin, event, callback, errorCallback);\n  return {\n    dispose() {\n      const listener_id = makeListenerId(plugin, event);\n      if (listeners[listener_id] === undefined) return\n      listeners[listener_id].splice(index, 1);\n      if (listeners[listener_id].length === 0) {\n        unregister.call(thunder, plugin, event, errorCallback);\n      }\n    },\n  }\n}\nconst makeListenerId = (plugin, event) => {\n  return ['client', plugin, 'events', event].join('.')\n};\nconst register = function(plugin, event, callback, errorCallback) {\n  const listener_id = makeListenerId(plugin, event);\n  if (!listeners[listener_id]) {\n    listeners[listener_id] = [];\n    if (plugin !== 'ThunderJS') {\n      const method = 'register';\n      const request_id = listener_id\n        .split('.')\n        .slice(0, -1)\n        .join('.');\n      const params = {\n        event,\n        id: request_id,\n      };\n      this.api.request(plugin, method, params).catch(e => {\n        if (typeof errorCallback === 'function') errorCallback(e.message);\n      });\n    }\n  }\n  listeners[listener_id].push(callback);\n  return listeners[listener_id].length - 1\n};\nconst unregister = function(plugin, event, errorCallback) {\n  const listener_id = makeListenerId(plugin, event);\n  delete listeners[listener_id];\n  if (plugin !== 'ThunderJS') {\n    const method = 'unregister';\n    const request_id = listener_id\n      .split('.')\n      .slice(0, -1)\n      .join('.');\n    const params = {\n      event,\n      id: request_id,\n    };\n    this.api.request(plugin, method, params).catch(e => {\n      if (typeof errorCallback === 'function') errorCallback(e.message);\n    });\n  }\n};\n\nlet api;\nvar thunderJS = options => {\n  if (\n    options.token === undefined &&\n    typeof window !== 'undefined' &&\n    window.thunder &&\n    typeof window.thunder.token === 'function'\n  ) {\n    options.token = window.thunder.token();\n  }\n  api = API(options);\n  return wrapper({ ...thunder(options), ...plugins })\n};\nconst resolve = (result, args) => {\n  if (\n    typeof result !== 'object' ||\n    (typeof result === 'object' && (!result.then || typeof result.then !== 'function'))\n  ) {\n    result = new Promise((resolve, reject) => {\n      result instanceof Error === false ? resolve(result) : reject(result);\n    });\n  }\n  const cb = typeof args[args.length - 1] === 'function' ? args[args.length - 1] : null;\n  if (cb) {\n    result.then(res => cb(null, res)).catch(err => cb(err));\n  } else {\n    return result\n  }\n};\nconst thunder = options => ({\n  options,\n  plugin: false,\n  call() {\n    const args = [...arguments];\n    if (this.plugin) {\n      if (args[0] !== this.plugin) {\n        args.unshift(this.plugin);\n      }\n    }\n    const plugin = args[0];\n    const method = args[1];\n    if (typeof this[plugin][method] == 'function') {\n      return this[plugin][method](args[2])\n    }\n    return this.api.request.apply(this, args)\n  },\n  registerPlugin(name, plugin) {\n    this[name] = wrapper(Object.assign(Object.create(thunder), plugin, { plugin: name }));\n  },\n  subscribe() {\n  },\n  on() {\n    const args = [...arguments];\n    if (['connect', 'disconnect', 'error'].indexOf(args[0]) !== -1) {\n      args.unshift('ThunderJS');\n    } else {\n      if (this.plugin) {\n        if (args[0] !== this.plugin) {\n          args.unshift(this.plugin);\n        }\n      }\n    }\n    return listener.apply(this, args)\n  },\n  once() {\n    console.log('todo ...');\n  },\n});\nconst wrapper = obj => {\n  return new Proxy(obj, {\n    get(target, propKey) {\n      const prop = target[propKey];\n      if (propKey === 'api') {\n        return api\n      }\n      if (typeof prop !== 'undefined') {\n        if (typeof prop === 'function') {\n          if (['on', 'once', 'subscribe'].indexOf(propKey) > -1) {\n            return function(...args) {\n              return prop.apply(this, args)\n            }\n          }\n          return function(...args) {\n            return resolve(prop.apply(this, args), args)\n          }\n        }\n        if (typeof prop === 'object') {\n          return wrapper(\n            Object.assign(Object.create(thunder(target.options)), prop, { plugin: propKey })\n          )\n        }\n        return prop\n      } else {\n        if (target.plugin === false) {\n          return wrapper(\n            Object.assign(Object.create(thunder(target.options)), {}, { plugin: propKey })\n          )\n        }\n        return function(...args) {\n          args.unshift(propKey);\n          return target.call.apply(this, args)\n        }\n      }\n    },\n  })\n};\n\nexport default thunderJS;\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render items in main view.\n */\nexport default class ListItem extends Lightning.Component {\n  /**\n   * Function to render various elements in the main view item.\n   */\n  static _template() {\n    return {\n      Item: {\n        x: 30,\n        y: 18,\n        Shadow: {\n          alpha: 0,\n          color: 0xffa9a9a9,\n        },\n        Title: {\n          text: {\n            fontSize: 27,\n            textColor: 0xffffffff,\n          },\n          mountX: 0.5,\n          alpha: 0,\n        },\n        Bg: {},\n        Image: {},\n      },\n    }\n  }\n\n  _init() {\n    if (this.data.show) {\n      this.tag('Title').patch({\n        x: this.x_text,\n        y: this.y_text,\n        alpha: 1,\n        text: { text: this.data.title },\n      })\n    }\n    this.tag('Title').patch({\n      x: this.x_text,\n      y: this.y_text,\n      text: { text: this.data.displayName },\n    })\n    this.tag('Shadow').patch({\n      scale: this.unfocus,\n      texture: Lightning.Tools.getShadowRect(this.w, this.h, 4, 10, 0),\n    })\n    this.tag('Bg').patch({\n      rect: true,\n      color: 0xff000000,\n      w: this.w,\n      h: this.h,\n    })\n    if (this.data.url.startsWith('/images')) {\n      this.tag('Image').patch({\n        src: Utils.asset(this.data.url),\n        w: this.w,\n        h: this.h,\n        scale: this.unfocus,\n      })\n    } else {\n      this.tag('Image').patch({ src: this.data.url, w: this.w, h: this.h })\n    }\n  }\n\n  /**\n   * Function to change properties of item during focus.\n   */\n  _focus() {\n    this.tag('Bg').scale = this.focus\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.focus })\n    this.tag('Title').patch({\n      x: this.x_text,\n      y: this.y_text,\n      text: { text: this.data.displayName },\n    })\n    this.tag('Shadow').patch({\n      scale: this.focus,\n      x: -7,\n      y: -7,\n      alpha: 1,\n      texture: Lightning.Tools.getShadowRect(this.w + 14, this.h + 14, 4, 10, 0),\n    })\n    this.tag('Title').patch({ alpha: 1 })\n    this.tag('Item').patch({ zIndex: 1 })\n  }\n\n  /**\n   * Function to change properties of item during unfocus.\n   */\n  _unfocus() {\n    this.tag('Bg').scale = this.unfocus\n    this.tag('Image').patch({ x: 0, y: 0, w: this.w, h: this.h, scale: this.unfocus })\n    this.tag('Shadow').patch({ scale: this.unfocus, alpha: 0 })\n    this.tag('Title').patch({ alpha: 0 })\n    this.tag('Item').patch({ zIndex: 0 })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\nvar activatedWeb = false\nvar activatedLightning = false\nvar activatedCobalt = false\nvar activatedAmazon = false\nvar webUrl = ''\nvar lightningUrl = ''\nvar activatedNative = false\nvar nativeUrl = ''\nvar cobaltUrl = ''\nconst config = {\n  host: '127.0.0.1',\n  port: 9998,\n  default: 1,\n}\nvar thunder = ThunderJS(config)\n/**\n * Class that contains functions which commuicates with thunder API's\n */\nexport default class AppApi {\n  checkForInternet() {\n    return new Promise((resolve, reject) => {\n      let i = 0\n      var poll = () => {\n        i++\n        this.getIP().then(result => {\n          if (result == true) {\n            resolve(result)\n          } else if (i < 10) poll()\n          else resolve(false)\n        })\n      }\n      poll()\n    })\n  }\n\n  /**\n   * Function to launch Html app.\n   * @param {String} url url of app.\n   */\n  getIP() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.System'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'getDeviceInfo', { params: 'estb_ip' })\n            .then(result => {\n              resolve(result.success)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {})\n    })\n  }\n  /**\n   * Function to get resolution of the display screen.\n   */\n  getResolution() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.DisplaySettings'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'getCurrentResolution', { params: 'HDMI0' })\n            .then(result => {\n              resolve(result.resolution)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {\n          console.log('Display Error', err)\n        })\n    })\n  }\n\n  /**\n   * Function to set the display resolution.\n   */\n  setResolution() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.DisplaySettings'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'setCurrentResolution', {\n              videoDisplay: 'HDMI0',\n              resolution: '1080p',\n              persist: true,\n            })\n            .then(result => {\n              resolve(result.success)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {\n          console.log('Display Error', err)\n        })\n    })\n  }\n\n  /**\n   * Function to launch Html app.\n   * @param {String} url url of app.\n   */\n  launchWeb(url) {\n    const childCallsign = 'HtmlApp'\n    if (webUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launch', {\n          callsign: childCallsign,\n          type: childCallsign,\n          uri: url,\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {})\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    webUrl = url\n    activatedWeb = true\n  }\n\n  /**\n   * Function to launch Lightning app.\n   * @param {String} url url of app.\n   */\n  launchLightning(url) {\n    const childCallsign = 'LightningApp'\n    if (lightningUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launch', {\n          callsign: childCallsign,\n          type: childCallsign,\n          uri: url,\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {})\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    lightningUrl = url\n    activatedLightning = true\n  }\n\n  /**\n   * Function to launch Cobalt app.\n   * @param {String} url url of app.\n   */\n  launchCobalt(url) {\n    const childCallsign = 'Cobalt'\n    thunder\n      .call('org.rdk.RDKShell', 'launch', {\n        callsign: childCallsign,\n        type: childCallsign,\n      })\n      .then(() => {\n        thunder.call('org.rdk.RDKShell', 'moveToFront', {\n          client: childCallsign,\n        })\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n      })\n      .catch(err => {})\n    activatedCobalt = true\n  }\n\n  /**\n   * Function to launch Amazon Prime app.\n   */\n  launchAmazon() {\n    const childCallsign = \"Amazon\";\n    thunder\n      .call(\"org.rdk.RDKShell\", \"launch\", {\n      callsign: childCallsign,\n      type: childCallsign\n    })\n    .then(() => {\n      thunder.call(\"org.rdk.RDKShell\", \"moveToFront\", {\n        client: childCallsign\n      });\n      thunder.call(\"org.rdk.RDKShell\", \"setFocus\", { client: childCallsign });\n    })\n    .catch(err => {});\n    activatedAmazon = true;\n  }\n\n  /**\n   * Function to launch Resident app.\n   * @param {String} url url of app.\n   */\n  launchResident(url) {\n    const childCallsign = 'ResidentApp'\n    thunder\n      .call('org.rdk.RDKShell', 'launch', {\n        callsign: childCallsign,\n        type: childCallsign,\n        uri: url,\n      })\n      .then(() => {\n        thunder.call('org.rdk.RDKShell', 'moveToFront', {\n          client: childCallsign,\n        })\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n      })\n      .catch(err => {\n        console.log('org.rdk.RDKShell launch ' + JSON.stringify(err))\n      })\n  }\n\n  /**\n   * Function to suspend html app.\n   */\n  suspendWeb() {\n    webUrl = ''\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'HtmlApp' })\n  }\n\n  /**\n   * Function to suspend lightning app.\n   */\n  suspendLightning() {\n    lightningUrl = ''\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'LightningApp' })\n  }\n\n  /**\n   * Function to suspend cobalt app.\n   */\n  suspendCobalt() {\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'Cobalt' })\n  }\n\n  /**\n   * Function to suspend Amazon Prime app.\n   */\n  suspendAmazon() {\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'Amazon' })\n  }\n\n  /**\n   * Function to deactivate html app.\n   */\n  deactivateWeb() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'HtmlApp' })\n    activatedWeb = false\n    webUrl = ''\n  }\n\n  /**\n   * Function to deactivate cobalt app.\n   */\n  deactivateCobalt() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'Cobalt' })\n    activatedCobalt = false\n    cobaltUrl = ''\n  }\n\n  /**\n   * Function to deactivate Amazon Prime app.\n   */\n  deactivateAmazon() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'Amazon' })\n    activatedAmazon = false\n  }\n\n  /**\n   * Function to deactivate lightning app.\n   */\n  deactivateLightning() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'LightningApp' })\n    activatedLightning = false\n    lightningUrl = ''\n  }\n\n  /**\n   * Function to set visibility to client apps.\n   * @param {client} client client app.\n   * @param {visible} visible value of visibility.\n   */\n  setVisibility(client, visible) {\n    thunder.call('org.rdk.RDKShell', 'setVisibility', {\n      client: client,\n      visible: visible,\n    })\n  }\n  /**\n   * Function to launch Native app.\n   * @param {String} url url of app.\n   */\n  launchNative(url) {\n    const childCallsign = 'testApp'\n    if (nativeUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launchApplication', {\n          client: childCallsign,\n          uri: url,\n          mimeType: 'application/native'\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {\n          console.log('org.rdk.RDKShell launch ' + JSON.stringify(err))\n        })\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    nativeUrl = url\n    activatedNative = true\n  }\n\n\n\n/**\n   * Function to kill native app.\n   */\n  killNative() {\n    thunder.call('org.rdk.RDKShell', 'kill', { callsign: 'testApp' })\n    activatedNative = false\n    nativeUrl = ''\n  }\n\n  static pluginStatus(plugin) {\n    switch (plugin) {\n      case 'WebApp':\n        return activatedWeb\n      case 'Cobalt':\n        return activatedCobalt\n      case 'Lightning':\n        return activatedLightning\n      case 'Amazon':\n        return activatedAmazon\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Variable to store the timer\n */\nvar timeout\n\n/**\n * Class to render the UI controls for the video player.\n */\nexport default class PlayerControls extends Lightning.Component {\n  /**\n   * Function to create components for the player controls.\n   */\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 410,\n      color: 0x4025262a,\n      Title: {\n        x: 90,\n        y: 15,\n      },\n      Subtitle: {\n        x: 90,\n        y: 88.5,\n      },\n      NetworkLogo: {\n        x: 1740,\n        y: 82.5,\n      },\n      TimeBar: {\n        x: 90,\n        y: 163.5,\n        texture: Lightning.Tools.getRoundRect(1740, 6, 6, 0, 0, true, 0x80eef1f3),\n      },\n      ProgressBar: {\n        x: 90,\n        y: 163.5,\n      },\n      CurrentTime: {\n        x: 90,\n        y: 184.5,\n      },\n      TotalTime: {\n        x: 1680,\n        y: 184.5,\n      },\n      Buttons: {\n        x: 820,\n        y: 240,\n        children: [\n          { src: Utils.asset('images/player/rewind.png'), x: 17, y: 17 },\n          { src: Utils.asset('images/player/pause-focus.png'), x: 17, y: 17 },\n          { src: Utils.asset('images/player/fast-forward.png'), x: 17, y: 17 },\n        ].map((item, idx) => ({\n          x: idx * 100,\n          texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n          ControlIcon: {\n            x: item.x,\n            y: item.y,\n            texture: Lightning.Tools.getSvgTexture(item.src, 50, 50),\n          },\n        })),\n      },\n      Audio: {\n        x: 90,\n        y: 240,\n        texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xff8e8e8e),\n        AudioOptions: {\n          x: 0,\n          y: 25,\n          w: 240,\n          h: 90,\n          text: {\n            fontSize: 30,\n            text: 'Audio Options',\n            textColor: 0xffffffff,\n            textAlign: 'center',\n          },\n        },\n      },\n      Extras: {\n        x: 1700,\n        y: 240,\n        texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xff8e8e8e),\n        ExtrasOptions: {\n          x: 0,\n          y: 25,\n          w: 130,\n          h: 90,\n          text: {\n            fontSize: 30,\n            text: 'Extras',\n            textColor: 0xffffffff,\n            textAlign: 'center',\n          },\n        },\n      },\n    }\n  }\n\n  _init() {\n    /**\n     * Variable to store the duration of the video content.\n     */\n    this.videoDuration = 0\n    this.tag('Buttons').children[0].patch({\n          alpha: 0.4\n    })\n    this.tag('Buttons').children[2].patch({\n      alpha: 0.4\n    })\n    this.tag('Audio').patch({\n      alpha: 0.4\n    })\n    this.tag('Extras').patch({\n      alpha: 0.4\n    })\n  }\n\n  /**\n   * Function to set focus to player controls when the player controls are shown.\n   */\n  _focus() {\n    this._index = 1\n    this.toggle = false\n    this._setState('PlayPause')\n  }\n\n  /**\n   * Function to handle the player controls when they are hidden.\n   */\n  _unfocus() {\n    this._setState('Hidden')\n    clearTimeout(timeout)\n  }\n\n  /**\n   * Function to set the title in the video controls.\n   * @param {String} title title to be displayed in video controls.\n   */\n  set title(title) {\n    this.tag('Title').patch({\n      text: {\n        fontSize: 52.5,\n        textAlign: 'center',\n        text: title,\n      },\n    })\n  }\n\n  /**\n   * Function to set the subtitle in the video control menu.\n   * @param {String} subtitle sub title to be displayed.\n   */\n  set subtitle(subtitle) {\n    this.tag('Subtitle').patch({\n      text: {\n        fontSize: 36,\n        textAlign: 'center',\n        text: subtitle,\n      },\n    })\n  }\n\n  /**\n   * Function to set the network logo in the video control menu.\n   * @param {String} logoPath path to the logo.\n   */\n  set logoPath(logoPath) {\n    this.tag('NetworkLogo').patch({ src: logoPath })\n  }\n\n  /**\n   * Function to set the duration of the video.\n   * @param {String} duration video duration to be set.\n   */\n  set duration(duration) {\n    this.videoDuration = duration\n    this.tag('TotalTime').patch({\n      text: {\n        fontSize: 33,\n        textAlign: 'center',\n        text: this.SecondsTohhmmss(duration),\n      },\n    })\n  }\n\n  /**\n   * Function to set the current video time.\n   * @param {String} currentTime current time to be set.\n   */\n  set currentTime(currentTime) {\n    this.tag('CurrentTime').patch({\n      text: {\n        fontSize: 33,\n        textAlign: 'center',\n        text: this.SecondsTohhmmss(currentTime),\n      },\n    })\n    this.tag('ProgressBar').patch({\n      texture: Lightning.Tools.getRoundRect(\n        (1740 * currentTime) / this.videoDuration,\n        6,\n        6,\n        0,\n        0,\n        true,\n        0xffffffff\n      ),\n      SeekBar: {\n        x: (1740 * currentTime) / this.videoDuration,\n        y: -12,\n        texture: Lightning.Tools.getRoundRect(30, 30, 15, 0, 0, true, 0xffffffff),\n      },\n    })\n  }\n\n  /**\n   * Function to convert time in seconds to hh:mm:ss format.\n   * @param {String} totalSeconds time in seconds.\n   */\n  SecondsTohhmmss(totalSeconds) {\n    this.hours = Math.floor(totalSeconds / 3600)\n    this.minutes = Math.floor((totalSeconds - this.hours * 3600) / 60)\n    this.seconds = totalSeconds - this.hours * 3600 - this.minutes * 60\n    this.seconds = Math.round(totalSeconds) - this.hours * 3600 - this.minutes * 60\n    this.result = this.hours < 10 ? '0' + this.hours : this.hours\n    this.result += ':' + (this.minutes < 10 ? '0' + this.minutes : this.minutes)\n    this.result += ':' + (this.seconds < 10 ? '0' + this.seconds : this.seconds)\n    return this.result\n  }\n\n  /**\n   * Function to hide player controls.\n   */\n  hidePlayerControls() {\n    this.signal('hide')\n  }\n\n  /**\n   * Function to reset the player controls.\n   */\n  reset(state = 'play') {\n    this._setState('PlayPause')\n    if (state === 'pause' || state === 'stop') {\n      this.tag('Buttons')\n        .children[1].tag('ControlIcon')\n        .patch({\n          texture: Lightning.Tools.getSvgTexture(\n            Utils.asset('images/player/play-focus.png'),\n            50,\n            50\n          ),\n          x: 17,\n        })\n      this.toggle = 1\n      return\n    }\n    this.tag('Buttons')\n      .children[1].tag('ControlIcon')\n      .patch({\n        texture: Lightning.Tools.getSvgTexture(\n          Utils.asset('images/player/pause-focus.png'),\n          50,\n          50\n        ),\n        x: 17,\n      })\n    this.toggle = 0\n  }\n\n  /**\n   * Timer function to track the inactivity of the player controls.\n   */\n  timer() {\n    clearTimeout(timeout)\n    timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n\n  /**\n   * Function that defines the different states of the player controls.\n   */\n  static _states() {\n    return [\n      class AudioOptions extends this {\n        $enter() {\n          this.timer()\n          this.tag('Audio').patch({\n            texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Audio').tag('AudioOptions').color = 0xff000000\n        }\n        $exit() {\n          this.tag('Audio').patch({\n            texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Audio').tag('AudioOptions').color = 0xffffffff\n        }\n        _handleRight() {\n          this._setState('Rewind')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class PlayPause extends this {\n        $enter() {\n          this.focus = this.toggle\n            ? Utils.asset('images/player/play-focus.png')\n            : Utils.asset('images/player/pause-focus.png')\n          this.timer()\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.focus, 50, 50)\n            })\n        }\n        $exit() {\n          this.unfocus = this.toggle\n            ? Utils.asset('images/player/play.png')\n            : Utils.asset('images/player/pause.png')\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.unfocus, 50, 50)\n            })\n        }\n        _handleEnter() {\n          if (this.toggle) {\n            this.signal('play')\n          } else {\n            this.signal('pause')\n          }\n          this.toggle = !this.toggle\n          this.focus = this.toggle\n            ? Utils.asset('images/player/play-focus.png')\n            : Utils.asset('images/player/pause-focus.png')\n          this.timer()\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.focus, 50, 50)\n            })\n        }\n        _handleRight() {\n          // this._setState('Forward')\n        }\n        _handleLeft() {\n          // this._setState('Rewind')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Forward extends this {\n        $enter() {\n          this.timer()\n          this.tag('Buttons').children[2].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[2].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/fast-forward-focus.png'),\n                50,\n                50\n              ),\n            })\n        }\n        $exit() {\n          this.tag('Buttons').children[2].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[2].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/fast-forward.png'),\n                50,\n                50\n              ),\n            })\n        }\n        _handleRight() {\n          this._setState('Extras')\n        }\n        _handleLeft() {\n          this._setState('PlayPause')\n        }\n        _handleEnter() {\n          this.signal('fastfwd')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Rewind extends this {\n        $enter() {\n          this.timer()\n          this.tag('Buttons').children[0].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[0].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/rewind-focus.png'),\n                50,\n                50\n              ),\n            })\n        }\n        $exit() {\n          this.tag('Buttons').children[0].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[0].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/rewind.png'),\n                50,\n                50\n              ),\n            })\n        }\n        _handleLeft() {\n          this._setState('AudioOptions')\n        }\n        _handleRight() {\n          this._setState('PlayPause')\n        }\n        _handleEnter() {\n          this.signal('fastrwd')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Extras extends this {\n        $enter() {\n          this.tag('Extras').patch({\n            texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Extras').tag('ExtrasOptions').color = 0xff000000\n          this.timer()\n        }\n        _handleLeft() {\n          this._setState('Forward')\n        }\n        _getFocused() {\n          this.timer()\n        }\n        $exit() {\n          this.tag('Extras').patch({\n            texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Extras').tag('ExtrasOptions').color = 0xffffffff\n        }\n      },\n      class Hidden extends this {\n        _getFocused() {}\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Router, Storage } from '@lightningjs/sdk'\nimport ListItem from '../items/ListItem.js'\nimport ThunderJS from 'ThunderJS'\nimport AppApi from '../api/AppApi.js'\n\n/** Class for main view component in home UI */\nexport default class MainView extends Lightning.Component {\n  /**\n   * Function to render various elements in main view.\n   */\n  static _template() {\n    return {\n      MainView: {\n        x: 451,\n        y: 25,\n        w: 1469,\n        h: 820,\n        AppList: {\n          x: 0,\n          y: 0,\n          type: Lightning.components.ListComponent,\n          w: 1469,\n          h: 209,\n          itemSize: 204 + 20,\n          roll: true,\n          rollMax: 1469,\n          horizontal: true,\n          itemScrollOffset: -5,\n          clipping: true,\n        },\n        MetroApps: {\n          x: 0,\n          y: 184,\n          type: Lightning.components.ListComponent,\n          w: 1469,\n          h: 209,\n          itemSize: 204 + 20,\n          roll: true,\n          rollMax: 1469,\n          horizontal: true,\n          itemScrollOffset: -5,\n          clipping: true,\n        },\n        TVShows: {\n          x: 0,\n          y: 184+184,\n          w: 1469,\n          h: 335,\n          type: Lightning.components.ListComponent,\n          roll: true,\n          itemSize: 428 + 20,\n          horizontal: true,\n          rollMax: 1444 + 25,\n          clipping: true,\n        },\n        Settings: {\n          x: 0,\n          y: 494+184,\n          w: 1469,\n          h: 335,\n          type: Lightning.components.ListComponent,\n          roll: true,\n          itemSize: 428 + 20,\n          horizontal: true,\n          rollMax: 1469,\n          clipping: true,\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.settingsScreen = false\n    this._setState('AppList')\n    this.indexVal = 0\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    };\n    var thunder = ThunderJS(config);\n    thunder.on('Controller', 'statechange', notification => {\n      if (notification && (notification.callsign == 'Cobalt' || notification.callsign == 'Amazon') && notification.state == 'Deactivation') {\n        var appApi = new AppApi();\n        Storage.set('applicationType', '');\n        appApi.setVisibility('ResidentApp', true);\n        thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n          console.log('ResidentApp moveToFront Success' + JSON.stringify(result));\n        });\n        thunder\n          .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n          .then(result => {\n            console.log('ResidentApp setFocus Success' + JSON.stringify(result));\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      }\n    });\n  }\n\n  _active() {\n    if (this.settingsScreen) {\n      let app = this.parent.parent\n      this._appAnimation = app.animation({\n        duration: 0,\n        repeat: 0,\n        stopMethod: 'immediate',\n        actions: [\n          { p: 'x', v: { 0: 0, 1: -320 } },\n          { p: 'y', v: { 0: 0, 1: -180 } },\n          { p: 'scale', v: { 0: 1, 1: 1.17 } },\n        ],\n      })\n      this._appAnimation.start()\n      this.settingsScreen = false\n    }\n  }\n\n  /**\n   * Function to set details of items in app list.\n   */\n  set appItems(items) {\n    this.tag('AppList').items = items.map(info => {\n      return {\n        w: 204,\n        h: 126,\n        type: ListItem,\n        data: info,\n        focus: 1.2,\n        unfocus: 1,\n        x_text: 106,\n        y_text: 140,\n      }\n    })\n    this.tag('AppList').start()\n  }\n\n  set metroApps(items){\n    this.tag('MetroApps').items = items.map(info => {\n      return {\n        w: 204,\n        h: 126,\n        type: ListItem,\n        data: info,\n        focus: 1.2,\n        unfocus: 1,\n        x_text: 106,\n        y_text: 140,\n      }\n    })\n    this.tag('MetroApps').start()\n  }\n\n  /**\n   * Function to set details of items in tv shows list.\n   */\n  set tvShowItems(items) {\n    this.tag('TVShows').items = items.map(info => {\n      return {\n        w: 428,\n        h: 252,\n        type: ListItem,\n        data: info,\n        focus: 1.08,\n        unfocus: 1,\n        x_text: 218,\n        y_text: 264,\n      }\n    })\n    this.tag('TVShows').start()\n  }\n\n  /**\n   * Function to set details of items in settings list\n   */\n  set settingsItems(items) {\n    this.tag('Settings').items = items.map(info => {\n      return {\n        w: 428,\n        h: 252,\n        type: ListItem,\n        data: info,\n        focus: 1.08,\n        unfocus: 1,\n        x_text: 218,\n        y_text: 264,\n      }\n    })\n    this.tag('Settings').start()\n  }\n\n  /**\n   * Function to set the state in main view.\n   */\n  set index(index) {\n    this.indexVal = index\n    if (this.indexVal == 0) {\n      this._setState('AppList')\n    } else if (this.indexVal == 1) {\n      this._setState('MetroApps')\n    } else if (this.indexVal == 2) {\n      this._setState('TVShows')\n    } else if(this.indexVal == 3) {\n      this._setState('Settings')\n    }\n  }\n\n  /**\n   * Function to reset the main view rows to initial state.\n   */\n  reset() {\n    for (var i = this.tag('AppList').index; i > 0; i--) {\n      this.tag('AppList').setPrevious()\n    }\n    for (var i = this.tag('MetroApps').index; i > 0; i--) {\n      this.tag('MetroApps').setPrevious()\n    }\n    for (var i = this.tag('TVShows').index; i > 0; i--) {\n      this.tag('TVShows').setPrevious()\n    }\n    for (var i = this.tag('Settings').index; i > 0; i--) {\n      this.tag('Settings').setPrevious()\n    }\n  }\n\n  /**\n   * Function to define various states needed for main view.\n   */\n  static _states() {\n    return [\n      class AppList extends this {\n        _getFocused() {\n          if (this.tag('AppList').length) {\n            return this.tag('AppList').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('AppList').length - 1 != this.tag('AppList').index) {\n            this.tag('AppList').setNext()\n            return this.tag('AppList').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('AppList').index) {\n            this.tag('AppList').setPrevious()\n            return this.tag('AppList').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 0)\n          }\n        }\n        _handleDown() {\n          this._setState('MetroApps')\n        }\n        _handleEnter() {\n          var appApi = new AppApi();\n          var applicationType = this.tag('AppList').items[this.tag('AppList').index].data.applicationType;\n          this.uri = this.tag('AppList').items[this.tag('AppList').index].data.uri;\n          var appApi = new AppApi();\n          applicationType = this.tag('AppList').items[this.tag('AppList').index].data.applicationType;\n          Storage.set('applicationType', applicationType);\n          this.uri = this.tag('AppList').items[this.tag('AppList').index].data.uri;\n          if (Storage.get('applicationType') == 'Cobalt') {\n            appApi.launchCobalt(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'WebApp') {\n            appApi.launchWeb(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Lightning') {\n            appApi.launchLightning(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Native') {\n            appApi.launchNative(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Amazon') {\n            appApi.launchAmazon();\n            appApi.setVisibility('ResidentApp', false);\n          }\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          };\n          var thunder = ThunderJS(config);\n          console.log('_handleKey', key.keyCode);\n          if (key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            var appApi = new AppApi();\n            if (Storage.get('applicationType') == 'Cobalt') {\n              Storage.set('applicationType', '');\n              appApi.suspendCobalt();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'WebApp') {\n              Storage.set('applicationType', '');\n              appApi.deactivateWeb();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Lightning') {\n              Storage.set('applicationType', '');\n              appApi.deactivateLightning();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Native') {\n              Storage.set('applicationType', '');\n              appApi.killNative();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Amazon') {\n              Storage.set('applicationType', '');\n              appApi.suspendAmazon();\n              appApi.setVisibility('ResidentApp', true);\n            }\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder\n              .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success')\n              })\n              .catch(err => {\n                console.log('Error', err)\n              })\n          }else return false\n        }\n      },\n      class MetroApps extends this {\n        _getFocused() {\n          if (this.tag('MetroApps').length) {\n            return this.tag('MetroApps').element\n          }\n        }\n        _handleUp() {\n          this._setState('AppList')\n        }\n        _handleRight() {\n          if (this.tag('MetroApps').length - 1 != this.tag('MetroApps').index) {\n            this.tag('MetroApps').setNext()\n            return this.tag('MetroApps').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('MetroApps').index) {\n            this.tag('MetroApps').setPrevious()\n            return this.tag('MetroApps').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 1)\n          }\n        }\n        _handleDown() {\n          this._setState('TVShows')\n        }\n        _handleEnter() {\n          var appApi = new AppApi();\n          var applicationType = this.tag('MetroApps').items[this.tag('MetroApps').index].data.applicationType;\n          this.uri = this.tag('MetroApps').items[this.tag('MetroApps').index].data.uri;\n          var appApi = new AppApi();\n          applicationType = this.tag('MetroApps').items[this.tag('MetroApps').index].data.applicationType;\n          Storage.set('applicationType', applicationType);\n          this.uri = this.tag('MetroApps').items[this.tag('MetroApps').index].data.uri;\n          if (Storage.get('applicationType') == 'Cobalt') {\n            appApi.launchCobalt(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'WebApp') {\n            appApi.launchWeb(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Lightning') {\n            appApi.launchLightning(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          } else if (Storage.get('applicationType') == 'Native') {\n            appApi.launchNative(this.uri);\n            appApi.setVisibility('ResidentApp', false);\n          }\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          };\n          var thunder = ThunderJS(config);\n          console.log('_handleKey', key.keyCode);\n          if (key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            var appApi = new AppApi();\n            if (Storage.get('applicationType') == 'Cobalt') {\n              Storage.set('applicationType', '');\n              appApi.suspendCobalt();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'WebApp') {\n              Storage.set('applicationType', '');\n              appApi.deactivateWeb();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Lightning') {\n              Storage.set('applicationType', '');\n              appApi.deactivateLightning();\n              appApi.setVisibility('ResidentApp', true);\n            } else if (Storage.get('applicationType') == 'Native') {\n              Storage.set('applicationType', '');\n              appApi.killNative();\n              appApi.setVisibility('ResidentApp', true);\n            } else return false;\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n              console.log('ResidentApp moveToFront Success');\n            });\n            thunder\n              .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success')\n              })\n              .catch(err => {\n                console.log('Error', err)\n              })\n          } else return false;\n        }\n      },\n      class TVShows extends this {\n        _getFocused() {\n          if (this.tag('TVShows').length) {\n            return this.tag('TVShows').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('TVShows').length - 1 != this.tag('TVShows').index) {\n            this.tag('TVShows').setNext()\n            return this.tag('TVShows').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('TVShows').index) {\n            this.tag('TVShows').setPrevious()\n            return this.tag('TVShows').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 2)\n          }\n        }\n        _handleUp() {\n          this._setState('MetroApps')\n        }\n        _handleDown() {\n          this._setState('Settings')\n        }\n        _handleEnter() {\n          this.fireAncestors('$goToPlayer')\n        }\n      },\n      class Settings extends this {\n        $enter(){\n          this.fireAncestors('$scroll',-200)\n        }\n        _getFocused() {\n          if (this.tag('Settings').length) {\n            return this.tag('Settings').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('Settings').length - 1 != this.tag('Settings').index) {\n            this.tag('Settings').setNext()\n          }\n          return this.tag('Settings').element\n        }\n        _handleLeft() {\n          if (0 != this.tag('Settings').index) {\n            this.tag('Settings').setPrevious()\n            return this.tag('Settings').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 3)\n          }\n        }\n        _handleUp() {\n          this._setState('TVShows')\n        }\n        _handleEnter() {\n          this.settingsType = this.tag('Settings').items[\n            this.tag('Settings').index\n          ].data.displayName\n\n          if (this.settingsType == 'Bluetooth') {\n            this.settingsScreen = true\n            Router.navigate('settings/BluetoothScreen', false)\n          } else if (this.settingsType == 'Wi-Fi') {\n            this.settingsScreen = true\n            Router.navigate('settings/WiFiScreen', false)\n          }\n        }\n        $exit(){\n          this.fireAncestors('$scroll',0)\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render items in side panel.\n */\nexport default class SidePanelItem extends Lightning.Component {\n  /**\n   * Function to render various elements in the side panel item.\n   */\n  static _template() {\n    return {\n      Item: {\n        Title: {\n          text: {\n            fontSize: 27,\n            textColor: 0xffffffff,\n          },\n          mountX: 0.5,\n          alpha: 0,\n        },\n        Image: {\n          x: 0,\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.tag('Title').patch({ x: this.x_text, y: this.y_text, text: { text: this.data.title } })\n    this.tag('Image').patch({\n      src: Utils.asset(this.data.url),\n      w: this.w,\n      h: this.h,\n      scale: this.unfocus,\n    })\n  }\n\n  /**\n   * Function to change properties of item during focus.\n   */\n  _focus() {\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.focus })\n    this.tag('Title').patch({ alpha: 1 })\n    this.tag('Item').patch({ zIndex: 1 })\n  }\n\n  /**\n   * Function to change properties of item during unfocus.\n   */\n  _unfocus() {\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.unfocus })\n    this.tag('Title').patch({ alpha: 0 })\n    this.tag('Item').patch({ zIndex: 0 })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport SidePanelItem from '../items/SidePanelItem.js'\n\n/** Class for side panel in home UI */\nexport default class SidePanel extends Lightning.Component {\n  static _template() {\n    return {\n      SidePanel: {\n        x: 130,\n        y: 0,\n        w: 240,\n        h: 750,\n        type: Lightning.components.ListComponent,\n        roll: true,\n        horizontal: false,\n        invertDirection: true,\n      },\n    }\n  }\n\n  _init() {\n    this._setState('SidePanel')\n    this.indexVal = 0\n  }\n\n  /**\n   * Function to set items in side panel.\n   */\n  set sidePanelItems(items) {\n    this.tag('SidePanel').patch({ x: 130 })\n    this.tag('SidePanel').items = items.map((info, index) => {\n      this.data = info\n      return {\n        w: 204,\n        h: 184,\n        y: index == 0 ? 30 : (index == 1 ? 115 :(index == 2 ? 260 : 470)),\n        type: SidePanelItem,\n        data: info,\n        focus: 0.7,\n        unfocus: 0.6,\n        x_text: 100,\n        y_text: 160,\n        text_focus: 1.1,\n        text_unfocus: 0.9,\n      }\n    })\n    this.tag('SidePanel').start()\n  }\n\n  /**\n   * Function to reset items in side panel.\n   */\n  set resetSidePanelItems(items) {\n    this.tag('SidePanel').patch({ x: 90 })\n    this.tag('SidePanel').items = items.map((info, index) => {\n      return {\n        w: 204,\n        h: 184,\n        y: index == 0 ? 25 : (index == 1 ? 105 :(index == 2 ? 260 : 470)),\n        type: SidePanelItem,\n        data: info,\n        focus: 0.7,\n        unfocus: 0.4,\n        x_text: 100,\n        y_text: 160,\n        text_focus: 1.1,\n        text_unfocus: 0.9,\n      }\n    })\n    this.tag('SidePanel').start()\n  }\n  /**\n   * Function to set scaling to side panel.\n   */\n  set scale(scale) {\n    this.tag('SidePanel').patch({ scale: scale })\n  }\n\n  /**\n   * Function to set x coordinate of side panel.\n   */\n  set x(x) {\n    this.tag('SidePanel').patch({ x: x })\n  }\n\n  /**\n   * Function to set index value of side panel.\n   */\n  set index(index) {\n    this.indexVal = index\n  }\n\n  static _states() {\n    return [\n      class SidePanel extends this {\n        _getFocused() {\n          if (this.tag('SidePanel').length) {\n            if(this.indexVal==3){\n              this.fireAncestors('$scroll',-200)\n            }\n            else{\n              this.fireAncestors('$scroll',0)\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          }\n        }\n        _handleKey(key) {\n          if (key.keyCode == 39 || key.keyCode == 13) {\n            this.fireAncestors('$goToMainView', this.indexVal)\n          } else if (key.keyCode == 40) {\n            if (this.tag('SidePanel').length - 1 != this.indexVal) {\n              this.indexVal = this.indexVal + 1\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          } else if (key.keyCode == 38) {\n            if (0 != this.indexVal) {\n              this.indexVal = this.indexVal - 1\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          } else return false;\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport ThunderJS from 'ThunderJS'\n\n/** Class for top panel in home UI */\nexport default class TopPanel extends Lightning.Component {\n  static _template() {\n    return {\n      TopPanel: {\n        x: 90,\n        y: 60,\n        w: 1740,\n        h: 120,\n        Mic: {\n          x: 120,\n          y: 60,\n          mountY: 0.5,\n          src: Utils.asset('/images/topPanel/mic.png'),\n          w: 60,\n          h: 60,\n        },\n        Search: {\n          x: 250,\n          y: 60,\n          mountY: 0.5,\n          text: { text: 'Search TV shows, movies and more', fontSize: 33 },\n        },\n        Time: {\n          x: 1500,\n          y: 60,\n          mountY: 0.5,\n          text: { text: '', fontSize: 38 },\n        },\n      },\n    }\n  }\n  _init() {\n    this.timeZone = 'America/New_York'\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    thunder\n      .call('org.rdk.System', 'getTimeZoneDST')\n      .then(result => {\n        if (result.success) {\n          try {\n            new Date().toLocaleDateString('en-US', { timeZone: result.timeZone })\n            this.timeZone = result.timeZone\n          } catch (err) {\n            this.timeZone = 'America/New_York'\n          }\n        }\n      })\n      .catch(err => {\n        this.timeZone = 'America/New_York'\n      })\n  }\n\n  _build() {\n    setInterval(() => {\n      this.tag('Time').patch({ text: { text: this.updateTime() } })\n    }, 1000)\n  }\n\n  /**\n   * Function to update time in home UI.\n   */\n  updateTime() {\n    let date = new Date()\n    date = new Date(date.toLocaleString('en-US', { timeZone: this.timeZone }))\n    let hours = date.getHours()\n    let minutes = date.getMinutes()\n    let ampm = hours >= 12 ? 'pm' : 'am'\n    hours = hours % 12\n    hours = hours ? hours : 12\n    minutes = minutes < 10 ? '0' + minutes : minutes\n    let strTime = hours + '.' + minutes + ' ' + ampm\n    return strTime\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport PlayerControls from './PlayerControl.js'\n\n/**\n * Class to render AAMP video player.\n */\nexport default class AAMPVideoPlayer extends Lightning.Component {\n  /**\n   * Function to render player controls.\n   */\n  static _template() {\n    return {\n      PlayerControls: {\n        type: PlayerControls,\n        x: 0,\n        y: 810,\n        alpha: 0,\n        signals: {\n          pause: 'pause',\n          play: 'play',\n          hide: 'hidePlayerControls',\n          fastfwd: 'fastfwd',\n          fastrwd: 'fastrwd',\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.x = 0\n    this.y = 0\n    this.w = 0\n    this.h = 0\n    this.videoEl = document.createElement('video')\n    this.videoEl.setAttribute('id', 'video-player')\n    this.videoEl.style.position = 'absolute'\n    this.videoEl.style.zIndex = '1'\n    this.videoEl.setAttribute('width', '100%')\n    this.videoEl.setAttribute('height', '100%')\n    this.videoEl.setAttribute('src', 'placeholder.mp4')\n    this.videoEl.setAttribute('type', 'video/ave')\n    document.body.appendChild(this.videoEl)\n    this.playbackSpeeds = [-16, -8, -4, -2, 1, 2, 4, 8, 16]\n    this.playerStatesEnum = { idle: 0, initializing: 1, playing: 8, paused: 6, seeking: 7 }\n    this.player = null\n    this.playbackRateIndex = this.playbackSpeeds.indexOf(1)\n    this.defaultInitConfig = {\n      initialBitrate: 2500000,\n      offset: 0,\n      networkTimeout: 10,\n      preferredAudioLanguage: 'en',\n      liveOffset: 15,\n      drmConfig: null,\n    }\n  }\n\n  /**\n   * Function to set video coordinates.\n   * @param {int} x x position of video\n   * @param {int} y y position of video\n   * @param {int} w width of video\n   * @param {int} h height of video\n   */\n  setVideoRect(x, y, w, h) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n    var xPos = 0.67 * x\n    var yPos = 0.67 * y\n    var wPos = 0.67 * w\n    var hPos = 0.67 * h\n    this.player.setVideoRect(xPos, yPos, wPos, hPos)\n  }\n\n  /**\n   * Event handler to store the current playback state.\n   * @param  event playback state of the video.\n   */\n  _playbackStateChanged(event) {\n    switch (event.state) {\n      case this.player.playerStatesEnum.idle:\n        this.playerState = this.player.playerStatesEnum.idle\n        break\n      case this.player.playerStatesEnum.initializing:\n        this.playerState = this.player.playerStatesEnum.initializing\n        break\n      case this.player.playerStatesEnum.playing:\n        this.playerState = this.player.playerStatesEnum.playing\n        break\n      case this.player.playerStatesEnum.paused:\n        this.playerState = this.player.playerStatesEnum.paused\n        break\n      case this.player.playerStatesEnum.seeking:\n        this.playerState = this.player.playerStatesEnum.seeking\n        break\n      default:\n        break\n    }\n  }\n\n  /**\n   * Event handler to handle the event of completion of a video playback.\n   */\n  _mediaEndReached() {\n    this.load(this.videoInfo)\n    this.setVideoRect(this.x, this.y, this.w, this.h)\n  }\n\n  /**\n   * Event handler to handle the event of changing the playback speed.\n   */\n  _mediaSpeedChanged() {}\n\n  /**\n   * Event handler to handle the event of bit rate change.\n   */\n  _bitrateChanged() {}\n\n  /**\n   * Function to handle the event of playback failure.\n   */\n  _mediaPlaybackFailed() {\n    this.load(this.videoInfo)\n  }\n\n  /**\n   * Function to handle the event of playback progress.\n   * @param event playback event.\n   */\n  _mediaProgressUpdate(event) {\n    this.position = event.positionMiliseconds / 1000\n    this.tag('PlayerControls').currentTime = this.position\n  }\n\n  /**\n   * Function to handle the event of starting the playback.\n   */\n  _mediaPlaybackStarted() {\n    // this.tag('PlayerControls').reset()\n    // this.tag('PlayerControls').setSmooth('alpha', 1)\n    // this.tag('PlayerControls').setSmooth('y', 675, { duration: 1 })\n    // this.timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n\n  /**\n   * Function to handle the event of change in the duration of the playback content.\n   */\n  _mediaDurationChanged() {}\n\n  /**\n   * Function to create the video player instance for video playback and its initial settings.\n   */\n  createPlayer() {\n    if (this.player !== null) {\n      this.destroy()\n      this.player = null\n    }\n\n    try {\n      this.player = new AAMPMediaPlayer()\n      this.player.addEventListener('playbackStateChanged', this._playbackStateChanged)\n      this.player.addEventListener('playbackCompleted', this._mediaEndReached.bind(this))\n      this.player.addEventListener('playbackSpeedChanged', this._mediaSpeedChanged)\n      this.player.addEventListener('bitrateChanged', this._bitrateChanged)\n      this.player.addEventListener('playbackFailed', this._mediaPlaybackFailed.bind(this))\n      this.player.addEventListener('playbackProgressUpdate', this._mediaProgressUpdate.bind(this))\n      this.player.addEventListener('playbackStarted', this._mediaPlaybackStarted.bind(this))\n      this.player.addEventListener('durationChanged', this._mediaDurationChanged)\n      this.playerState = this.playerStatesEnum.idle\n    } catch (error) {\n      console.error('AAMPMediaPlayer is not defined')\n    }\n  }\n\n  /**\n   * Loads the player with video URL.\n   * @param videoInfo the url and the info regarding the video like title.\n   */\n  load(videoInfo) {\n    this.createPlayer()\n    this.videoInfo = videoInfo\n    this.configObj = this.defaultInitConfig\n    this.configObj.drmConfig = this.videoInfo.drmConfig\n    this.player.initConfig(this.configObj)\n    this.player.load(videoInfo.url)\n\n    this.tag('PlayerControls').title = videoInfo.title\n    this.tag('PlayerControls').subtitle = videoInfo.subtitle\n    this.tag('PlayerControls').logoPath = videoInfo.logoPath\n    this.tag('PlayerControls').duration = this.player.getDurationSec()\n    this.tag('PlayerControls').currentTime = 0\n    this.play()\n  }\n\n  /**\n   * Starts playback when enough data is buffered at play head.\n   */\n  play() {\n    this.player.play()\n    this.playbackRateIndex = this.playbackSpeeds.indexOf(1)\n  }\n\n  /**\n   * Pauses playback.\n   */\n  pause() {\n    this.player.pause()\n  }\n\n  /**\n   * Stop playback and free resources.\n   */\n  stop() {\n    this.player.stop()\n    this.hidePlayerControls()\n  }\n\n  /**\n   * Function to perform fast forward of the video content.\n   */\n  fastfwd() {\n    if (this.playbackRateIndex < this.playbackSpeeds.length - 1) {\n      this.playbackRateIndex++\n    }\n    this.rate = this.playbackSpeeds[this.playbackRateIndex]\n    this.player.setPlaybackRate(this.rate)\n  }\n\n  /**\n   * Function to perform fast rewind of the video content.\n   */\n  fastrwd() {\n    if (this.playbackRateIndex > 0) {\n      this.playbackRateIndex--\n    }\n    this.rate = this.playbackSpeeds[this.playbackRateIndex]\n    this.player.setPlaybackRate(this.rate)\n  }\n\n  /**\n   * Function that returns player instance.\n   * @returns player instance.\n   */\n  getPlayer() {\n    return this.player\n  }\n\n  /**\n   * Function to release the video player instance when not in use.\n   */\n  destroy() {\n    if (this.player.getCurrentState() !== this.playerStatesEnum.idle) {\n      this.player.stop()\n    }\n    this.player.removeEventListener('playbackStateChanged', this._playbackStateChanged)\n    this.player.removeEventListener('playbackCompleted', this._mediaEndReached)\n    this.player.removeEventListener('playbackSpeedChanged', this._mediaSpeedChanged)\n    this.player.removeEventListener('bitrateChanged', this._bitrateChanged)\n    this.player.removeEventListener('playbackFailed', this._mediaPlaybackFailed.bind(this))\n    this.player.removeEventListener('playbackProgressUpdate', this._mediaProgressUpdate.bind(this))\n    this.player.removeEventListener('playbackStarted', this._mediaPlaybackStarted.bind(this))\n    this.player.removeEventListener('durationChanged', this._mediaDurationChanged)\n    this.player.release()\n    this.player = null\n    this.hidePlayerControls()\n  }\n\n  /**\n   * Function to hide the player controls.\n   */\n  hidePlayerControls() {\n    this.tag('PlayerControls').setSmooth('y', 1080, { duration: 0.7 })\n    this.tag('PlayerControls').setSmooth('alpha', 0, { duration: 0.7 })\n    this._setState('HideControls')\n  }\n\n  /**\n   * Function to show the player controls.\n   */\n  showPlayerControls() {\n    this.tag('PlayerControls').reset()\n    this.tag('PlayerControls').setSmooth('alpha', 1)\n    this.tag('PlayerControls').setSmooth('y', 675, { duration: 0.7 })\n    this._setState('ShowControls')\n    this.timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n  /**\n   * Function to display player controls on down key press.\n   */\n  _handleDown() {\n    this.tag('PlayerControls').setSmooth('alpha', 1, { duration: 1 })\n    this.tag('PlayerControls').setSmooth('y', 675, { duration: 1 })\n    this._setState('ShowControls')\n    clearTimeout(this.timeout)\n  }\n\n  /**\n   *Function to hide player control on up key press.\n   */\n  _handleUp() {\n    this.hidePlayerControls()\n    this._setState('HideControls')\n  }\n  /**\n   * Function to define the different states of the video player.\n   */\n  static _states() {\n    return [\n      class ShowControls extends this {\n        _getFocused() {\n          return this.tag('PlayerControls')\n        }\n      },\n      class HideControls extends this {\n        _getFocused() {}\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for app listings.\n */\nexport var appListInfo = [\n  {\n    displayName: 'Test Youtube',\n    applicationType: 'Cobalt',\n    uri: 'https://www.youtube.com/tv',\n    url: '/images/apps/youtube.png',\n  },\n  {\n    displayName: 'Test Xumo',\n    applicationType: 'WebApp',\n    uri: 'https://x1box-app.xumo.com/3.0.70/index.html',\n    url: '/images/apps/xumo.png',\n  },\n  {\n    displayName: 'Bluetooth Audio',\n    applicationType: 'Lightning',\n    uri: 'https://rdkwiki.com/rdk-apps/BluetoothAudio/index.html',\n    url: '/images/apps/netflix.png',\n  },\n  {\n    displayName: 'Test Prime video',\n    applicationType: 'Amazon',\n    uri: '',\n    url: '/images/apps/prime.png',\n  },\n]\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE\r\n * file the following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n/**\r\n * Class which contains data for tv shows listings.\r\n */\r\nexport var tvShowsInfo = [\r\n  {\r\n    displayName: 'Fantasy-Island',\r\n    url: '/images/tvShows/fantasy-island.jpg',\r\n  },\r\n  {\r\n    displayName: 'Onward',\r\n    url: '/images/tvShows/onward.jpg',\r\n  },\r\n  {\r\n    displayName: 'Let it Snow',\r\n    url: '/images/tvShows/let-it-snow.png',\r\n  },\r\n  {\r\n    displayName: 'Do Little',\r\n    url: '/images/tvShows/do-little.jpg',\r\n  },\r\n  {\r\n    displayName: 'Summerland',\r\n    url: '/images/tvShows/summerland.jpg',\r\n  },\r\n]\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for settings listings.\n */\nexport var settingsInfo = [\n  {\n    displayName: 'Bluetooth',\n    url: '/images/settings/bluetooth.jpg',\n  },\n  {\n    displayName: 'Wi-Fi',\n    url: '/images/settings/wifi.jpg',\n  },\n]\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE\r\n * file the following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n/**\r\n * Class which contains data for listings in side panel.\r\n */\r\nexport var sidePanelInfo = [\r\n  {\r\n    title: 'Apps',\r\n    url: '/images/sidePanel/menu.png',\r\n  },\r\n  {\r\n    title: 'Metro Apps',\r\n    url: '/images/sidePanel/metro.png',\r\n  },\r\n  {\r\n    title: 'TV Shows',\r\n    url: '/images/sidePanel/video.png',\r\n  },\r\n  {\r\n    title: 'Settings',\r\n    url: '/images/sidePanel/settings.png',\r\n  },\r\n]\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for UI selection.\n */\nexport var uiInfo = [\n  {\n    title: 'DEFAULT',\n    url: '',\n  },\n  {\n    title: 'TATA',\n    url: 'http://35.155.171.121:8088/index.html',\n  },\n  {\n    title: 'EPAM',\n    url: 'https://px-apps.sys.comcast.net/lightning_apps/diagnostics/dist/index.html',\n  },\n]\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for metro app listings.\n */\nexport var metroAppsInfo = [\n  {\n    displayName: \"CNN\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.CNN\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.CNN.png\"\n  },\n  {\n    displayName: \"VimeoRelease\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.VimeoRelease\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.VimeoRelease.png\"\n  },\n  {\n    displayName: \"WeatherNetwork\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.WeatherNetwork\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.WeatherNetwork.png\"\n  },\n  {\n    displayName: \"EuroNews\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.Euronews\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.Euronews.png\"\n  },\n  {\n    displayName: \"AccuWeather\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.AccuWeather\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.AccuWeather.png\"\n  },\n  {\n    displayName: \"BaebleMusic\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.BaebleMusic\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.BaebleMusic.png\"\n  },\n  {\n    displayName: \"Aljazeera\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.Aljazeera\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.Aljazeera.png\"\n  },\n  {\n    displayName: \"GuessThatCity\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.GuessThatCity\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.GuessThatCity.png\"\n  },\n  {\n    displayName: \"Radioline\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.Radioline\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.Radioline.png\"\n  },\n  {\n    displayName: \"WallStreetJournal\",\n    applicationType: \"Lightning\",\n    uri:\n      \"https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d#app:com.metrological.app.WallStreetJournal\",\n    url: \"http://cdn-ipv6.metrological.com/lightning/apps/com.metrological.ui.FutureUI/2.0.15-ea2bf91/static/images/applications/com.metrological.app.WallStreetJournal.png\"\n  }\n];\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { appListInfo } from './../../static/data/AppListInfo.js'\nimport { tvShowsInfo } from './../../static/data/TvShowsInfo.js'\nimport { settingsInfo } from './../../static/data/SettingsInfo.js'\nimport { sidePanelInfo } from './../../static/data/SidePanelInfo.js'\nimport { uiInfo } from './../../static/data/UIInfo'\nimport { metroAppsInfo } from \"./../../static/data/MetroAppsInfo.js\"\n\n/**\n * Class that returns the data required for home screen.\n */\nexport default class HomeApi {\n  /**\n   * Function to get details for app listing.\n   */\n  getAppListInfo() {\n    return appListInfo\n  }\n\n  /**\n   * Function to get details for tv shows listings.\n   */\n  getTVShowsInfo() {\n    return tvShowsInfo\n  }\n\n  /**\n   * Function to get details for settings listings.\n   */\n  getSettingsInfo() {\n    return settingsInfo\n  }\n\n  /**\n   * Function to get details for side panel.\n   */\n  getSidePanelInfo() {\n    return sidePanelInfo\n  }\n\n  /**\n   * Function to get details of different UI\n   */\n  getUIInfo() {\n    return uiInfo\n  }\n\n  /**\n   * Function to details of metro apps\n   */\n  getMetroInfo() {\n    return metroAppsInfo\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport MainView from '../views/MainView.js'\nimport SidePanel from '../views/SidePanel.js'\nimport TopPanel from '../views/TopPanel.js'\nimport AAMPVideoPlayer from '../player/AAMPVideoPlayer.js'\nimport HomeApi from '../api/HomeApi.js'\n\n/** Class for home screen UI */\nexport default class HomeScreen extends Lightning.Component {\n  /**\n   * Function to render various elements in home screen.\n   */\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 1,\n      },\n      TopPanel: {\n        type: TopPanel,\n      },\n      View:{\n        x: 0,\n        y: 200,\n        w: 1920,\n        h: 1080,\n        clipping: true,\n        SidePanel: {\n          type: SidePanel,\n        },\n        MainView: {\n          w:1920,\n          h:1080,\n          type: MainView,\n        },\n      },\n      Player: { type: AAMPVideoPlayer },\n    }\n  }\n\n  _init() {\n    this.homeApi = new HomeApi()\n    var appItems = this.homeApi.getAppListInfo()\n    const URL_PARAMS = new window.URLSearchParams(window.location.search)\n    var data = URL_PARAMS.get('data')\n    console.log(data)\n    var prop_apps = 'applications'\n    var prop_displayname = 'displayName'\n    var prop_uri = 'uri'\n    var prop_apptype = 'applicationType'\n    var prop_url = 'url'\n    var appdetails = []\n    var appdetails_format = []\n    var usbApps = 0\n    try {\n      if (data != null && JSON.parse(data).hasOwnProperty(prop_apps)) {\n        appdetails = JSON.parse(data).applications\n        for (var i = 0; i < appdetails.length; i++) {\n          if (\n            appdetails[i].hasOwnProperty(prop_displayname) &&\n            appdetails[i].hasOwnProperty(prop_uri) &&\n            appdetails[i].hasOwnProperty(prop_apptype) &&\n            appdetails[i].hasOwnProperty(prop_url)\n          ) {\n            appdetails_format.push(appdetails[i])\n            usbApps++\n          }\n        }\n        for (var i = 0; i < appItems.length; i++) {\n          appdetails_format.push(appItems[i])\n        }\n      } else {\n        appdetails_format = appItems\n      }\n    } catch (e) {\n      appdetails_format = appItems\n      console.log('Query data is not proper: ' + e)\n    }\n    this.tag('MainView').appItems = appdetails_format\n    this.tag('MainView').metroApps = this.homeApi.getMetroInfo()\n    this.tag('MainView').tvShowItems = this.homeApi.getTVShowsInfo()\n    this.tag('MainView').settingsItems = this.homeApi.getSettingsInfo()\n    this.tag('SidePanel').sidePanelItems = this.homeApi.getSidePanelInfo()\n    this.sidePanelData = this.homeApi.getSidePanelInfo()\n    this._setState('SidePanel')\n    this.initialLoad = true\n  }\n\n  _active() {\n    if (this.initialLoad) {\n      let home = this\n      this._homeAnimation = home.animation({\n        duration: 0.5,\n        repeat: 0,\n        stopMethod: 'immediate',\n        actions: [\n          { p: 'scale', v: { 0: 5, 1: 1 } },\n          { p: 'x', v: { 0: -1920, 1: 0 } },\n          { p: 'y', v: { 0: -1080, 1: 0 } },\n        ],\n      })\n      this._homeAnimation.start()\n      this.initialLoad = false\n    }\n  }\n\n  /**\n   * Function to start video playback.\n   */\n  play() {\n    this.player = this.tag('Player')\n    try {\n      this.player.load({\n        title: 'Parkour event',\n        subtitle: 'm3u8',\n        url:\n          'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        drmConfig: null,\n      })\n      this.zoomOut(0.1)\n      this.hide()\n      this._setState('Playing')\n      this.player.setVideoRect(0, 0, 1920, 1080)\n    } catch (error) {\n      this._setState('MainView')\n      console.error('Playback Failed ' + error)\n    }\n  }\n\n  /**\n   * Function to zoom in main view of home UI.\n   */\n  zoomIn(duration) {\n    this._sidePanelAnimation = this.tag('SidePanel').animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [{ p: 'x', v: { 0: 130, 1: 280 } }],\n    })\n    this._sidePanelAnimation.start()\n    this.tag('SidePanel').resetSidePanelItems = this.sidePanelData\n    let app = this\n    this._appAnimation = app.animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'x', v: { 0: 0, 1: -320 } },\n        { p: 'y', v: { 0: 0, 1: -180 } },\n        { p: 'scale', v: { 0: 1, 1: 1.17 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  /**\n   * Function to zoom out main view of home UI.\n   */\n  zoomOut(duration) {\n    this._sidePanelAnimation = this.tag('SidePanel').animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [{ p: 'x', v: { 0: 280, 1: 130 } }],\n    })\n    this._sidePanelAnimation.start()\n    this.tag('SidePanel').sidePanelItems = this.sidePanelData\n    let app = this\n    this._appAnimation = app.animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'x', v: { 0: -320, 1: 0 } },\n        { p: 'y', v: { 0: -180, 1: 0 } },\n        { p: 'scale', v: { 0: 1.17, 1: 1 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  /**\n   * Fireancestor to set the state to side panel.\n   * @param {index} index index value of side panel item.\n   */\n  $goToSidePanel(index) {\n    this.zoomOut(0.7)\n    this.tag('SidePanel').index = index\n    this._setState('SidePanel')\n  }\n\n  /**\n   * Fireancestor to set the state to main view.\n   * @param {index} index index value of main view row.\n   */\n  $goToMainView(index) {\n    this.zoomIn(0.7)\n    this.tag('MainView').index = index\n    this._setState('MainView')\n  }\n\n  /**\n   * Fireancestor to set the state to player.\n   */\n  $goToPlayer() {\n    this._setState('Player')\n    this.play()\n  }\n\n  /**\n   * Function to scroll\n   */\n  $scroll(y){\n    this.tag('SidePanel').setSmooth('y',y,{duration:0.5})\n    this.tag('MainView').setSmooth('y',y,{duration:0.5})\n  }\n\n  /**\n   * Function to hide the home UI.\n   */\n  hide() {\n    this.tag('Background').patch({ alpha: 0 })\n    this.tag('MainView').patch({ alpha: 0 })\n    this.tag('TopPanel').patch({ alpha: 0 })\n    this.tag('SidePanel').patch({ alpha: 0 })\n  }\n\n  /**\n   * Function to show home UI.\n   */\n  show() {\n    this.tag('Background').patch({ alpha: 1 })\n    this.tag('MainView').patch({ alpha: 1 })\n    this.tag('TopPanel').patch({ alpha: 1 })\n    this.tag('SidePanel').patch({ alpha: 1 })\n  }\n\n  /**\n   * Function to define various states needed for home screen.\n   */\n  static _states() {\n    return [\n      class TopPanel extends this {\n        _getFocused() {\n          return this.tag('TopPanel')\n        }\n      },\n      class SidePanel extends this {\n        _getFocused() {\n          return this.tag('SidePanel')\n        }\n      },\n      class MainView extends this {\n        _getFocused() {\n          return this.tag('MainView')\n        }\n      },\n      class Playing extends this {\n        _getFocused() {\n          return this.tag('Player')\n        }\n\n        stopPlayer(){\n          this.zoomIn(0);\n          this._setState('MainView');\n          this.player.stop();\n          this.show();\n        }\n\n        _handleKey(key) {\n          if ( key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            this.stopPlayer()\n          } else if (key.keyCode == 227 || key.keyCode == 179){\n            this.stopPlayer()\n            return false;\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\n/**\n * Class for Bluetooth thunder plugin apis.\n */\n\nexport default class BluetoothApi {\n  constructor() {\n    console.log('Bluetooth constructor')\n    this._events = new Map()\n    this._devices = []\n    this._pairedDevices = []\n    this._connectedDevices = []\n  }\n\n  /**\n   * Function to activate the Bluetooth plugin\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      }\n      this._thunder = ThunderJS(config)\n      this.callsign = 'org.rdk.Bluetooth'\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log('Bluetooth activated', result)\n          this._thunder.on(this.callsign, 'onDiscoveredDevice', notification => {\n            console.log('onDiscoveredDevice ' + JSON.stringify(notification))\n            this.getDiscoveredDevices().then(() => {\n              this._events.get('onDiscoveredDevice')(notification)\n            })\n          })\n          this._thunder.on(this.callsign, 'onStatusChanged', notification => {\n            console.log('onStatusChanged ' + notification.newStatus)\n            if (notification.newStatus === 'PAIRING_CHANGE') {\n              this.getPairedDevices().then(() => {\n                this._events.get('onPairingChange')(notification)\n              })\n            } else if (notification.newStatus === 'CONNECTION_CHANGE') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onConnectionChange')(notification)\n              })\n            } else if (notification.newStatus === 'DISCOVERY_STARTED') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onDiscoveryStarted')()\n              })\n            } else if (notification.newStatus === 'DISCOVERY_COMPLETED') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onDiscoveryCompleted')()\n              })\n            }\n          })\n          this._thunder.on(this.callsign, 'onPairingRequest', notification => {\n            console.log('onPairingRequest ' + JSON.stringify(notification))\n            this._events.get('onPairingRequest')(notification)\n          })\n          this._thunder.on(this.callsign, 'onRequestFailed', notification => {\n            console.log('onRequestFailed ' + JSON.stringify(notification))\n            this._events.get('onRequestFailed')(notification)\n          })\n          this._thunder.on(this.callsign, 'onConnectionRequest', notification => {\n            console.log('onConnectionRequest ' + JSON.stringify(notification))\n            this._events.get('onConnectionRequest')(notification)\n          })\n          resolve('Blutooth activated')\n        })\n        .catch(err => {\n          console.error('Activation failure', err)\n          reject('Bluetooth activation failed', err)\n        })\n    })\n  }\n\n  /**\n   *\n   * @param {string} eventId\n   * @param {function} callback\n   * Function to register the events for the Bluetooth plugin.\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback)\n  }\n\n  /**\n   * Function to deactivate the Bluetooth plugin.\n   */\n  deactivate() {\n    this._events = new Map()\n    this._thunder = null\n  }\n\n  /**\n   * Function to disable the Bluetooth stack.\n   */\n  disable() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'disable')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't disable : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to enable the Bluetooth stack.\n   */\n  enable() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'enable')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't enable : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to start scanning for the Bluetooth devices.\n   */\n  startScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'startScan', {\n          timeout: '10',\n          profile: 'KEYBOARD,MOUSE,JOYSTICK',\n        })\n        .then(result => {\n          console.log('scanning : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to stop scanning for the Bluetooth devices.\n   */\n  stopScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'startScan', {})\n        .then(result => {\n          console.log('stopped scanning : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function returns the discovered Bluetooth devices.\n   */\n  getDiscoveredDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getDiscoveredDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._devices = result.discoveredDevices\n          resolve(result.discoveredDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get discovered devices : ${err}`)\n          reject()\n        })\n    })\n  }\n  get discoveredDevices() {\n    return this._devices\n  }\n\n  /**\n   * Function returns the paired Bluetooth devices.\n   */\n  getPairedDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getPairedDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._pairedDevices = result.pairedDevices\n          resolve(result.pairedDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get paired devices : ${err}`)\n          reject()\n        })\n    })\n  }\n  get pairedDevices() {\n    return this._pairedDevices\n  }\n\n  /**\n   * Function returns the connected Bluetooth devices.\n   */\n  getConnectedDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getConnectedDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._connectedDevices = result.connectedDevices\n          resolve(result.connectedDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get connected devices : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  get connectedDevices() {\n    return this._connectedDevices\n  }\n\n  /**\n   *\n   * Function to connect a Bluetooth device.\n   * @param {number} deviceID Device ID of the Bluetoth client.\n   * @param {string} deviceType Device type of the Bluetooth client.\n   */\n  connect(deviceID, deviceType) {\n    return new Promise((resolve, reject) => {\n      console.log(deviceID)\n      this._thunder\n        .call('org.rdk.Bluetooth', 'connect', {\n          deviceID: deviceID,\n          deviceType: deviceType,\n          profile: deviceType,\n        })\n        .then(result => {\n          console.log('connected : ' + result.success)\n          resolve(result.success)\n        })\n        .catch(err => {\n          console.error('Connection failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to disconnect a Bluetooth device.\n   *@param {number} deviceID Device ID of the Bluetoth client.\n   *@param {string} deviceType Device type of the Bluetooth client.\n   */\n  disconnect(deviceID, deviceType) {\n    console.log(deviceID)\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'disconnect', {\n          deviceID: deviceID,\n          deviceType: deviceType,\n        })\n        .then(result => {\n          console.log('disconnected : ' + result.success)\n          if (result.success) resolve(true)\n          else reject()\n        })\n        .catch(err => {\n          console.error('disconnect failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to unpair a Bluetooth device.\n   * @param {number} deviceId\n   */\n  unpair(deviceId) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'unpair', { deviceID: deviceId })\n        .then(result => {\n          console.log('unpaired : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('unpair failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to pair a Bluetooth device.\n   * @param {number} deviceId\n   */\n  pair(deviceId) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'pair', { deviceID: deviceId })\n        .then(result => {\n          console.log('paired : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error on pairing', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to respond to client the Bluetooth event.\n   * @param {number} deviceID Device ID of the Bluetooth client.\n   * @param {string} eventType Name of the event.\n   * @param {string} responseValue Response sent to the Bluetooth client.\n   */\n  respondToEvent(deviceID, eventType, responseValue) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'respondToEvent', {\n          deviceID: deviceID,\n          eventType: eventType,\n          responseValue: responseValue,\n        })\n        .then(result => {\n          console.log('responded to event : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error on respondToEvent', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to get the discoverable name of the Bluetooth plugin.\n   */\n  getName() {\n    return new Promise((resolve, reject) => {\n      this._thunder.call('org.rdk.Bluetooth', 'getName').then(result => {\n        resolve(result.name)\n      })\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**Color constants */\nexport var COLORS = {\n  textColor: 0xffffffff,\n  titleColor: 0xffffffff,\n  hightlightColor: 0xffc0c0c0,\n  headingColor: 0xffffffff,\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for rendering items in UI list.\n */\nexport default class Item extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        w: 200,\n        h: 65,\n        rect: true,\n        color: COLORS.hightlightColor,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents for an item in UI list.\n   */\n  set item(item) {\n    this._item = item\n    this.tag('Item').patch({\n      Name: {\n        x: 100,\n        y: 32.5,\n        mount: 0.5,\n        text: { text: item.title, textColor: 0xffffffff, fontSize: 35 },\n      },\n    })\n  }\n\n  /**\n   * Set width of the item.\n   */\n  set width(width) {\n    this.tag('Item').w = width\n  }\n\n  /**\n   * Set height of the item.\n   */\n  set height(height) {\n    this.tag('Item').h = height\n  }\n\n  _focus() {\n    this.tag('Item').scale = 1.1\n  }\n\n  _unfocus() {\n    this.tag('Item').scale = 1\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils, Router } from '@lightningjs/sdk'\nimport AAMPVideoPlayer from './../player/AAMPVideoPlayer'\nimport ThunderCalls from './../api/AppApi'\nimport BluetoothApi from './../api/BluetoothApi'\nimport HomeApi from '../api/HomeApi'\nimport AppApi from '../api/AppApi'\nimport Item from './../items/item'\n\n/**\n * Class for splash screen.\n */\nexport default class SplashScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Splashscreen: {\n        w: 1920,\n        h: 1080,\n        alpha: 0,\n        //just to cache the image\n        Cache: {\n          w: 0,\n          h: 0,\n          x: -1920,\n          src: Utils.asset('images/tvShows/background.jpg'),\n        },\n        Img: {\n          mount: 0.5,\n          x: 1920 / 2,\n          y: 1080 / 2,\n          src: Utils.asset('images/RDKLogo.png'),\n        },\n      },\n      SplashVideo: {\n        w: 1920,\n        h: 1080,\n        alpha: 0,\n        Player: { type: AAMPVideoPlayer, w: 1920, h: 1080, x: 0, y: 0 },\n      },\n      AutoRemotePair: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          w: 1600,\n          y: 474,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: 'Pair Your Remote',\n            textColor: 0xffffffff,\n          },\n        },\n        Description: {\n          w: 1300,\n          y: 550,\n          x: 150,\n          text: {\n            fontSize: 35,\n            textAlign: 'center',\n            maxLines: 2,\n            text: 'Please put the remote in pairing mode, scanning will start in a minute',\n\n            textColor: 0xffe5e5e5,\n          },\n        },\n        LoadingIcon: {\n          x: 750,\n          y: 600,\n          alpha: 0,\n          src: Utils.asset('images/loading.png'),\n        },\n        RemoteImg: {\n          x: 1300,\n          y: 300,\n          src: Utils.asset('images/remote.png'),\n        },\n      },\n      ConnectivityScreen: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          w: 1920,\n          y: 325,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: \"You're not connected to the internet\",\n            textColor: 0xffffffff,\n          },\n        },\n        Description: {\n          w: 1920,\n          y: 400,\n          text: {\n            fontSize: 35,\n            textAlign: 'center',\n            maxLines: 2,\n            text:\n              'Please connect to either a wired connection or a WiFi Network, For WiFi network press home and then go to settings',\n            wordWrapWidth: 1400,\n            textColor: 0xffe5e5e5,\n          },\n        },\n      },\n      UISwitch: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          x: 1920 / 2,\n          y: 400,\n          mountX: 0.5,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: 'Choose your UI',\n            textColor: 0xffffffff,\n          },\n        },\n        UIList: {\n          x: 1920 / 2 + 20,\n          y: 500,\n          type: Lightning.components.ListComponent,\n          w: 224 * 3,\n          h: 100,\n          itemSize: 204 + 20,\n          roll: true,\n          mountX: 0.5,\n        },\n      },\n    }\n  }\n  /**\n   * Function to be excuted when the Bluetooth screen is enabled.\n   */\n  _enable() {\n    this.remotePaired = true\n    this.hasInternet = true\n\n    this._bt = new BluetoothApi()\n    this._bt.activate()\n    this._bt\n      .getPairedDevices()\n      .then(() => this._bt.getConnectedDevices())\n      .then(() => {\n        let paired = this._bt.pairedDevices\n        let connected = this._bt.connectedDevices\n\n        if (paired.length == 0 && connected.length == 0) {\n          this.remotePaired = false\n        }\n      })\n    // this.startVideo()\n    // var thunderCalls = new ThunderCalls()\n    // thunderCalls.checkForInternet().then(result => {\n    //   this.hasInternet = result\n    // })\n\n    this._setState('Splashscreen')\n  }\n  /**\n   * Function to be executed when the Bluetooth screen is disabled from the screen.\n   */\n  _disable() {\n    if (this._bt) this._bt.deactivate()\n    if (this.player) this.player.stop()\n  }\n\n  _init() {\n    this.appApi = new AppApi()\n    var homeApi = new HomeApi()\n    this.tag('UISwitch.UIList').items = homeApi.getUIInfo().map((item, index) => {\n      return {\n        ref: 'UI' + index,\n        w: 204,\n        h: 100,\n        type: Item,\n        item: item,\n      }\n    })\n  }\n  /**\n   * Function to startVideo.\n   */\n  startVideo() {\n    this.player = this.tag('SplashVideo.Player')\n    try {\n      this.player.load({\n        title: '',\n        subtitle: '',\n        image: '',\n        url: 'https://rdkwiki.com/rdk-apps/splash/splash.MOV',\n        drmConfig: null,\n      })\n      //this.player.setVideoRect(0, 0, 1280, 720)\n      // this.player.pause()\n    } catch (error) {\n      this.player = null\n      console.log('###########', error)\n    }\n  }\n\n  /**\n   * Function to handle the different states of the app.\n   */\n  static _states() {\n    return [\n      class Splashscreen extends this {\n        $enter() {\n          const myAnimation = this.tag('Splashscreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 0, 1: 1 } }],\n          })\n          myAnimation.start()\n\n          this.screenTimeout = setTimeout(() => {\n            this._setState('SplashVideo')\n          }, 5000)\n        }\n        _handleKey(event) {\n          if (event.keyCode == 83) this._setState('UISwitch')\n        }\n        $exit() {\n          const myAnimation = this.tag('Splashscreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n          window.clearTimeout(this.screenTimeout)\n        }\n      },\n      class SplashVideo extends this {\n        $enter() {\n          const myAnimation = this.tag('SplashVideo').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 0, 1: 1 } }],\n          })\n          myAnimation.start()\n          this.startVideo()\n          this.timeout = setTimeout(() => {\n            if (this.remotePaired == false) this._setState('AutoRemotePair')\n            else if (this.hasInternet == false) this._setState('ConnectivityScreen')\n            else Router.navigate('home')\n          }, 5000)\n        }\n        $exit() {\n          const myAnimation = this.tag('SplashVideo').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.on('finish', p => {\n            if (this.player) this.player.stop()\n          })\n          myAnimation.start()\n          window.clearTimeout(this.timeout)\n        }\n        _handleKey(event) {\n          if (event.keyCode == 83) this._setState('UISwitch')\n        }\n      },\n      class ConnectivityScreen extends this {\n        $enter() {\n          const myAnimation = this.tag('ConnectivityScreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          myAnimation.start()\n          setTimeout(() => {\n            Router.navigate('home')\n          }, 5000)\n        }\n        $exit() {\n          const myAnimation = this.tag('ConnectivityScreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n        _handleKey() {\n          Router.navigate('home')\n        }\n      },\n      class AutoRemotePair extends this {\n        $enter() {\n          const myAnimation = this.tag('AutoRemotePair').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          var connected = false\n          var timer = setTimeout(() => {\n            if (!connected)\n              this.tag('AutoRemotePair.Description').text =\n                'Please put the remote in pairing mode, No Bluetooth device found'\n            setTimeout(() => {\n              if (this.hasInternet == false) this._setState('ConnectivityScreen')\n              else Router.navigate('home')\n            }, 1000)\n          }, 10000)\n          var error = () => {\n            this.tag('AutoRemotePair.Description').text =\n              'Please put the remote in pairing mode, , No Bluetooth device found'\n            setTimeout(() => {\n              if (this.hasInternet == false) this._setState('ConnectivityScreen')\n              else Router.navigate('home')\n            }, 1000)\n          }\n          myAnimation.start()\n          setTimeout(() => {\n            this.tag('AutoRemotePair.Description').text =\n              'Please put the remote in pairing mode, Scanning...'\n            const rotateAnimation = this.tag('AutoRemotePair.LoadingIcon').animation({\n              duration: 1,\n              repeat: -1,\n              stopMethod: 'immediate',\n              stopDelay: 0.2,\n              actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n            })\n            rotateAnimation.play()\n            this.tag('AutoRemotePair.LoadingIcon').alpha = 1\n            this._bt.startScan()\n            this._bt.registerEvent('onDiscoveredDevice', () => {\n              let discovered = this._bt.discoveredDevices\n              if (discovered.length > 0) {\n                this._bt.pair(discovered[0].deviceID)\n              } else {\n                error()\n              }\n            })\n          }, 5000)\n          this._bt.registerEvent('onPairingChange', () => {\n            let pairedDevices = this._bt.pairedDevices\n            if (pairedDevices.length > 0) {\n              this._bt.connect(pairedDevices[0].deviceID, pairedDevices[0].deviceType)\n            } else {\n              setTimeout(() => {\n                this._bt.getPairedDevices().then(() => {\n                  let pairedDevices = this._bt.pairedDevices\n                  if (pairedDevices.length > 0) {\n                    this._bt.connect(pairedDevices[0].deviceID, pairedDevices[0].deviceType)\n                  } else {\n                    error()\n                  }\n                })\n              }, 2000)\n            }\n          })\n          this._bt.registerEvent('onConnectionChange', () => {\n            let connectedDevices = this._bt.connectedDevices\n            if (connectedDevices.length > 0) {\n              this.tag('AutoRemotePair.Description').text =\n                'Please put the remote in pairing mode, Connected to ' + connectedDevices[0].name\n              connected = true\n              clearTimeout(timer)\n              setTimeout(() => {\n                if (this.hasInternet == false) this._setState('ConnectivityScreen')\n                else Router.navigate('home')\n              }, 2000)\n            } else {\n              setTimeout(() => {\n                this._bt.getConnectedDevices().then(() => {\n                  let connectedDevices = this._bt.connectedDevices\n                  if (connectedDevices.length > 0) {\n                    this.tag('AutoRemotePair.Description').text =\n                      'Please put the remote in pairing mode, Connected to ' +\n                      connectedDevices[0].name\n                    connected = true\n                    clearTimeout(timer)\n                    setTimeout(() => {\n                      if (this.hasInternet == false) this._setState('ConnectivityScreen')\n                      else Router.navigate('home')\n                    }, 2000)\n                  } else {\n                    error()\n                  }\n                })\n              }, 2000)\n            }\n          })\n        }\n        $exit() {\n          const myAnimation = this.tag('AutoRemotePair').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n      },\n      class UISwitch extends this {\n        $enter() {\n          const myAnimation = this.tag('UISwitch').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          myAnimation.start()\n        }\n        _getFocused() {\n          return this.tag('UISwitch.UIList').element\n        }\n        _handleRight() {\n          if (this.tag('UISwitch.UIList').length - 1 != this.tag('UISwitch.UIList').index) {\n            this.tag('UISwitch.UIList').setNext()\n            return this.tag('UISwitch.UIList').element\n          }\n        }\n        _handleLeft() {\n          if (this.tag('UISwitch.UIList').index > 0) {\n            this.tag('UISwitch.UIList').setPrevious()\n            return this.tag('UISwitch.UIList').element\n          }\n        }\n        _handleEnter() {\n          if (this.tag('UISwitch.UIList').element._item.title != 'DEFAULT') {\n            this.appApi.launchResident(this.tag('UISwitch.UIList').element._item.url)\n          } else {\n            if (this.remotePaired == false) this._setState('AutoRemotePair')\n            else if (this.hasInternet == false) this._setState('ConnectivityScreen')\n            else Router.navigate('home')\n          }\n        }\n        $exit() {\n          const myAnimation = this.tag('UISwitch').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for rendering items in Settings screen.\n */\nexport default class SettingsItem extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents for an item in settings screen.\n   */\n  set item(item) {\n    this._item = item\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: this.tag('Item').h / 2,\n        mountY: 0.5,\n        text: { text: item, fontSize: 25, textColor: COLORS.textColor },\n      },\n    })\n  }\n\n  /**\n   * Set width of the item.\n   */\n  set width(width) {\n    this.tag('Item').w = width\n  }\n\n  /**\n   * Set height of the item.\n   */\n  set height(height) {\n    this.tag('Item').h = height\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport SettingsItem from './SettingsItem'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for the item in the Bluetooth screen.\n */\nexport default class BluetoothItem extends SettingsItem {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents of an item in the Bluetooth screen.\n   */\n  set item(item) {\n    this._item = item\n    this.connected = item.connected ? 'Connected' : 'Not Connected'\n    this.status = item.paired ? this.connected : 'Not Paired'\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: 32.5,\n        mountY: 0.5,\n        text: { text: item.name, fontSize: 25, textColor: COLORS.textColor },\n      },\n\n      Right: {\n        x: 1920 / 3 - 80,\n        mountX: 1,\n        y: 32.5,\n        mountY: 0.5,\n        flex: { direction: 'row' },\n        Text: { x: 0, flexItem: {}, text: { text: this.status, fontSize: 25 } },\n        Info: {\n          color: 0xff0000ff,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/info.png'), 32.5, 32.5),\n        },\n      },\n    })\n    if (this.status == 'Connected') {\n      this.tag('Item.Right.Info').visible = false\n    } else {\n      this.tag('Item.Right.Info').visible = true\n    }\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\nimport SettingsItem from './../items/SettingsItem'\n\n/**\n * Class for pairing screen for the Bluetooth.\n */\nexport default class BluetoothPairingScreen extends Lightning.Component {\n  static _template() {\n    return {\n      PairingScreen: {\n        x: 0,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      Title: {\n        x: 20,\n        y: 100,\n        text: { text: '', fontSize: 30, textColor: COLORS.titleColor },\n      },\n      List: {\n        x: 20,\n        y: 150,\n        type: Lightning.components.ListComponent,\n        w: 1920 / 3,\n        h: 400,\n        itemSize: 65,\n        horizontal: false,\n        invertDirection: true,\n        roll: true,\n      },\n      Status: {\n        x: 20,\n        y: 500,\n        Text: {\n          text: {\n            text: 'Enter the below code in your Bluetooth device and press enter',\n            wordWrapWidth: 1920 / 3 - 70,\n            fontSize: 30,\n          },\n        },\n        Code: {\n          x: 0,\n          y: 60,\n          text: { text: '' },\n        },\n        visible: false,\n      },\n    }\n  }\n  set item(item) {\n    this.tag('Status').visible = false\n    this.tag('Title').text = item.name\n    var options = []\n    this._item = item\n    if (item.paired) {\n      if (item.connected) {\n        options = ['Disconnect', 'Unpair', 'Cancel']\n      } else {\n        options = ['Connect', 'Unpair', 'Cancel']\n      }\n    } else {\n      options = ['Pair', 'Cancel']\n    }\n    this.tag('List').items = options.map((item, index) => {\n      return {\n        ref: item,\n        w: 1920 / 3,\n        h: 65,\n        type: SettingsItem,\n        item: item,\n      }\n    })\n  }\n\n  set code(code) {\n    this.tag('Status.Code').text.text = code\n    this.tag('Status').visible = true\n  }\n\n  _getFocused() {\n    return this.tag('List').element\n  }\n\n  _handleDown() {\n    this.tag('List').setNext()\n  }\n\n  _handleUp() {\n    this.tag('List').setPrevious()\n  }\n\n  _handleEnter() {\n    this.fireAncestors('$pressEnter', this.tag('List').element.ref)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport BluetoothItem from '../items/BluetoothItem'\nimport BluetoothApi from './../api/BluetoothApi'\nimport BluetoothPairingScreen from './BluetoothPairingScreen'\nimport { COLORS } from './../colors/Colors'\n\n/**\n * Class for Bluetooth screen.\n */\nexport default class BluetoothScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Title: {\n        x: 1920 - 1920 / 3 + 1920 / 6,\n        y: 50,\n        text: { text: 'Bluetooth', textColor: COLORS.headingColor },\n        mountX: 0.5,\n      },\n      Switch: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 150,\n        rect: true,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n        color: 0x00c0c0c0,\n        w: 1920 / 3 - 70,\n        h: 50,\n        Text: {\n          x: 0,\n          text: { text: 'Bluetooth', textColor: COLORS.titleColor },\n        },\n        Button: {\n          x: 1920 / 3 - 80,\n          y: 10,\n          mountX: 1,\n          src: Utils.asset('images/switch-on.png'),\n        },\n      },\n      Name: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 200,\n        text: {\n          text: 'Now discoverable as',\n          textColor: COLORS.textColor,\n          fontSize: 20,\n        },\n      },\n      Networks: {\n        x: 1920 - 1920 / 3,\n        y: 250,\n        flex: { direction: 'column' },\n        PairedNetworks: {\n          flexItem: { margin: 20 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'My Devices',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          List: {\n            x: 0,\n            y: 65,\n            type: Lightning.components.ListComponent,\n            w: 1920 / 3,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        AvailableNetworks: {\n          flexItem: { margin: 20, marginTop: 30 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'Other Devices',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          Loader: {\n            x: 250,\n            y: -10,\n            w: 50,\n            h: 50,\n            color: 0xff000000,\n            src: Utils.asset('images/loader.png'),\n            visible: false,\n          },\n\n          List: {\n            x: 0,\n            y: 65,\n            w: 1920 / 3,\n            h: 100,\n            type: Lightning.components.ListComponent,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        visible: false,\n      },\n      PairingScreen: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        visible: false,\n        type: BluetoothPairingScreen,\n      },\n      Message: {\n        x: 1920 - 1920 / 3 + 40,\n        y: 950,\n        text: { text: '' },\n      },\n    }\n  }\n\n  _init() {\n    this.loadingAnimation = this.tag('Networks.AvailableNetworks.Loader').animation({\n      duration: 1,\n      repeat: -1,\n      stopMethod: 'immediate',\n      stopDelay: 0.2,\n      actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n    })\n    this.loadingAnimation.play()\n    this._bt = new BluetoothApi()\n    this._bluetooth = true\n    this._activateBluetooth()\n    this._setState('Switch')\n    this._bluetooth = true\n    if (this._bluetooth) {\n      this.tag('Networks').visible = true\n    }\n    this._pairedNetworks = this.tag('Networks.PairedNetworks')\n    this._availableNetworks = this.tag('Networks.AvailableNetworks')\n    this.renderDeviceList()\n  }\n  _active() {\n    this._setState('Switch')\n  }\n  /**\n   * Function to be excuted when the Bluetooth screen is enabled.\n   */\n  _enable() {\n    if (this._bluetooth) {\n      this._bt.startScan()\n    }\n    this.scanTimer = setInterval(() => {\n      if (this._bluetooth) {\n        this._bt.startScan()\n      }\n    }, 15000)\n  }\n\n  /**\n   * Function to be executed when the Bluetooth screen is disabled from the screen.\n   */\n  _disable() {\n    clearInterval(this.scanTimer)\n  }\n\n  /**\n   * Function to render list of Bluetooth devices\n   */\n  renderDeviceList() {\n    this._bt.getPairedDevices().then(result => {\n      this._pairedList = result\n      this._pairedNetworks.h = this._pairedList.length * 65 + 30\n      this._pairedNetworks.tag('List').h = this._pairedList.length * 65\n      this._pairedNetworks.tag('List').items = this._pairedList.map((item, index) => {\n        item.paired = true\n        return {\n          ref: 'Paired' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: BluetoothItem,\n          item: item,\n        }\n      })\n    })\n    this._bt.getDiscoveredDevices().then(result => {\n      this._discoveredList = result\n      this._otherList = this._discoveredList.filter(device => {\n        if (!device.paired) {\n          result = this._pairedList.map(a => a.deviceID)\n          if (result.includes(device.deviceID)) {\n            return false\n          } else return device\n        }\n      })\n      this._availableNetworks.h = this._otherList.length * 65 + 30\n      this._availableNetworks.tag('List').h = this._otherList.length * 65\n      this._availableNetworks.tag('List').items = this._otherList.map((item, index) => {\n        return {\n          ref: 'Other' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: BluetoothItem,\n          item: item,\n        }\n      })\n    })\n  }\n\n  static _states() {\n    return [\n      class Switch extends this {\n        $enter() {\n          this.tag('Switch').color = COLORS.hightlightColor\n        }\n        $exit() {\n          this.tag('Switch').color = 0x00c0c0c0\n        }\n        _handleDown() {\n          if (this._bluetooth) {\n            if (this._pairedNetworks.tag('List').length > 0) {\n              this._setState('PairedDevices')\n            } else if (this._availableNetworks.tag('List').length > 0) {\n              this._setState('AvailableDevices')\n            }\n          }\n        }\n        _handleEnter() {\n          this.switch()\n        }\n      },\n      class PairedDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._pairedNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('MyDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('MyDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._pairedNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class AvailableDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._availableNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('AvailableDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('AvailableDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._availableNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class PairingScreen extends this {\n        $enter() {\n          this._disable()\n          this._bt.stopScan()\n        }\n        _getFocused() {\n          return this.tag('PairingScreen')\n        }\n        $pressEnter(option) {\n          if (option === 'Cancel') {\n            this._setState('Switch')\n          } else if (option === 'Pair') {\n            this._bt.pair(this._availableNetworks.tag('List').element._item.deviceID).then(() => {})\n          } else if (option === 'Connect') {\n            this._bt\n              .connect(\n                this._pairedNetworks.tag('List').element._item.deviceID,\n                this._pairedNetworks.tag('List').element._item.deviceType\n              )\n              .then(result => {\n                if (!result) {\n                  this.tag('Message').text = 'CONNECTION FAILED'\n                  this._setState('Switch')\n                }\n                setTimeout(() => {\n                  this.tag('Message').text = ''\n                }, 2000)\n              })\n          } else if (option === 'Disconnect') {\n            this._bt\n              .disconnect(\n                this._pairedNetworks.tag('List').element._item.deviceID,\n                this._pairedNetworks.tag('List').element._item.deviceType\n              )\n              .then(() => {})\n            this._setState('Switch')\n          } else if (option === 'Unpair') {\n            this._bt.unpair(this._pairedNetworks.tag('List').element._item.deviceID).then(() => {})\n            this._setState('Switch')\n          }\n        }\n        $exit() {\n          this.tag('PairingScreen').visible = false\n          this._enable()\n        }\n      },\n    ]\n  }\n\n  /**\n   * Function to navigate through the lists in the screen.\n   * @param {string} listname\n   * @param {string} dir\n   */\n  _navigate(listname, dir) {\n    let list\n    if (listname === 'MyDevices') list = this._pairedNetworks.tag('List')\n    else if (listname === 'AvailableDevices') list = this._availableNetworks.tag('List')\n    if (dir === 'down') {\n      if (list.index < list.length - 1) list.setNext()\n      else if (list.index == list.length - 1) {\n        if (listname === 'MyDevices' && this._availableNetworks.tag('List').length > 0) {\n          this._setState('AvailableDevices')\n        }\n      }\n    } else if (dir === 'up') {\n      if (list.index > 0) list.setPrevious()\n      else if (list.index == 0) {\n        if (listname === 'AvailableDevices' && this._pairedNetworks.tag('List').length > 0) {\n          this._setState('PairedDevices')\n        } else {\n          this._setState('Switch')\n        }\n      }\n    }\n  }\n\n  /**\n   * Function to turn on and off Bluetooth.\n   */\n  switch() {\n    if (this._bluetooth) {\n      this._bt.disable().then(result => {\n        if (result.success) {\n          this._bluetooth = false\n          this.tag('Networks').visible = false\n          this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n        }\n      })\n    } else {\n      this._bt.enable().then(result => {\n        if (result.success) {\n          this._bluetooth = true\n          this.tag('Networks').visible = true\n          this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n          this.renderDeviceList()\n          this._bt.startScan()\n        }\n      })\n    }\n  }\n\n  /**\n   * Function to activate Bluetooth plugin.\n   */\n  _activateBluetooth() {\n    this._bt.activate().then(() => {\n      this._bt.registerEvent('onDiscoveredDevice', () => {\n        this.renderDeviceList()\n      })\n      this._bt.registerEvent('onPairingChange', status => {\n        this._bt.startScan()\n        this.renderDeviceList()\n        this._setState('Switch')\n      })\n      this._bt.registerEvent('onPairingRequest', notification => {\n        if (notification.pinRequired === 'true' && notification.pinValue) {\n          //this.fireAncestors('$rerenderDeviceOptions', notification.pinValue)\n          this.tag('PairingScreen').code = notification.pinValue\n        } else {\n          this.respondToPairingRequest(notification.deviceID, 'ACCEPTED')\n        }\n      })\n      this._bt.registerEvent('onConnectionChange', notification => {\n        this._bt.startScan()\n        console.log('CONNECTION CHANGED' + JSON.stringify(notification))\n        this.renderDeviceList()\n        this._setState('Switch')\n        if (notification.connected) {\n          this.tag('Message').text = 'CONNECTION SUCCESS'\n        } else {\n          this.tag('Message').text = 'CONNECTION FAILED'\n        }\n        setTimeout(() => {\n          this.tag('Message').text = ''\n        }, 2000)\n      })\n      this._bt.registerEvent('onDiscoveryCompleted', () => {\n        this.tag('Networks.AvailableNetworks.Loader').visible = false\n        this.renderDeviceList()\n      })\n      this._bt.registerEvent('onDiscoveryStarted', () => {\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      })\n      this._bt.registerEvent('onRequestFailed', notification => {\n        this._bt.startScan()\n        this.renderDeviceList()\n        this._setState('Switch')\n        this.tag('Message').text = notification.newStatus\n        setTimeout(() => {\n          this.tag('Message').text = ''\n        }, 2000)\n      })\n      //this._bt.startScan()\n      this._bt.getName().then(name => {\n        this.tag('Name').text.text = `Now discoverable as \"${name}\"`\n      })\n      // this._bluetooth = true\n      // this.tag('Networks').visible = true\n      // this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n      // this.renderDeviceList()\n    })\n  }\n\n  /**\n   * Function to respond to Bluetooth client.\n   * @param {number} deviceID\n   * @param {string} responseValue\n   */\n  respondToPairingRequest(deviceID, responseValue) {\n    this._bt.respondToEvent(deviceID, 'onPairingRequest', responseValue)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport SettingsItem from './SettingsItem'\nimport { COLORS } from '../colors/Colors'\n\nexport default class WiFiItem extends SettingsItem {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents of an item in the Bluetooth screen.\n   */\n  set item(item) {\n    this._item = item\n    this.status = item.connected ? 'Connected' : 'Not Connected'\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: 32.5,\n        mountY: 0.5,\n        text: { text: item.ssid, fontSize: 25, textColor: COLORS.textColor },\n      },\n\n      Right: {\n        x: 1920 / 3 - 80,\n        mountX: 1,\n        y: 32.5,\n        mountY: 0.5,\n        flex: { direction: 'row' },\n        Lock: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/wifi-lock.png'), 32.5, 32.5),\n        },\n        Icon: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/wifi-icon.png'), 32.5, 32.5),\n        },\n        Info: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/info.png'), 32.5, 32.5),\n        },\n      },\n    })\n    if (item.security == '0' || item.security == '15') {\n      this.tag('Item.Right.Lock').visible = false\n    } else {\n      this.tag('Item.Right.Lock').visible = true\n    }\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\n\nexport const WiFiState = {\n  UNINSTALLED: 0,\n  DISABLED: 1,\n  DISCONNECTED: 2,\n  PAIRING: 3,\n  CONNECTING: 4,\n  CONNECTED: 5,\n  FAILED: 6,\n}\n\nexport default class Wifi {\n  constructor() {\n    this._events = new Map()\n  }\n\n  /**\n   * Function to activate the wifi plugin.\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      }\n      this._thunder = ThunderJS(config)\n      this.callsign = 'org.rdk.Wifi'\n      this._thunder.call('Controller', 'activate', { callsign: 'org.rdk.Network' }).then(result => {\n        this._thunder.on('org.rdk.Network', 'onIPAddressStatusChanged', notification => {\n          if (this._events.has('onIPAddressStatusChanged')) {\n            this._events.get('onIPAddressStatusChanged')(notification)\n          }\n        })\n        this._thunder.on('org.rdk.Network','onDefaultInterfaceChanged',notification=>{\n          if (this._events.has('onDefaultInterfaceChanged')) {\n            this._events.get('onDefaultInterfaceChanged')(notification)\n          }\n        })\n      })\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log('Wifi activated', result)\n\n          this.getCurrentState().then(state => {\n            if (state === WiFiState.DISABLED) {\n              this.setEnabled(true)\n            }\n          })\n\n          this._thunder.on(this.callsign, 'onWIFIStateChanged', notification => {\n            console.log('onWIFIStateChanged: ' + notification.state)\n            if (this._events.has('onWIFIStateChanged')) {\n              this._events.get('onWIFIStateChanged')(notification)\n            }\n          })\n          this._thunder.on(this.callsign, 'onError', notification => {\n            console.log('Error: ' + notification)\n            if (this._events.has('onError')) {\n              this._events.get('onError')(notification)\n            }\n          })\n\n          this._thunder.on(this.callsign, 'onAvailableSSIDs', notification => {\n            console.log('AvailableSSIDs: ' + JSON.stringify(notification))\n            if (notification.moreData === false) {\n              this.stopScan()\n              notification.ssids = notification.ssids.filter(\n                (item, pos) => notification.ssids.findIndex(e => e.ssid === item.ssid) === pos\n              )\n              if (this._events.has('onAvailableSSIDs')) {\n                this._events.get('onAvailableSSIDs')(notification)\n              }\n            }\n          })\n\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Wifi activation failed: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   *Register events and event listeners.\n   * @param {string} eventId\n   * @param {function} callback\n   *\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback)\n  }\n\n  /**\n   * Deactivates wifi plugin.\n   */\n  deactivate() {\n    this._events = new Map()\n    this._thunder = null\n  }\n\n  /**\n   * Returns connected SSIDs\n   */\n  getConnectedSSID() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getConnectedSSID')\n        .then(result => {\n          console.log('ConnectedSSID: ' + result.ssid)\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`getConnectedSSID fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Start scanning for available wifi.\n   */\n  discoverSSIDs() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'startScan', { incremental: false, ssid: '', frequency: '' })\n        .then(result => {\n          console.log('startScan success')\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`startScan fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Stops scanning for networks.\n   */\n  stopScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'stopScan')\n        .then(result => {\n          console.log('stopScan success')\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`stopScan fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Function to connect to an SSID\n   * @param {object} device\n   * @param {string} passphrase\n   */\n  connect(device, passphrase) {\n    return new Promise((resolve, reject) => {\n      this.disconnect().then(() => {\n        console.log(`connect SSID ${device.ssid}`)\n        this._thunder\n          .call(this.callsign, 'connect', {\n            ssid: device.ssid,\n            passphrase: passphrase,\n            securityMode: device.security,\n          })\n          .then(result => {\n            console.log(`connected SSID ${device.ssid}`)\n            resolve(result)\n          })\n          .catch(err => {\n            console.error(`Connection failed: ${err}`)\n            reject(err)\n          })\n      }, reject)\n    })\n  }\n\n  /**\n   * Function to disconnect from the SSID.\n   */\n  disconnect() {\n    return new Promise((resolve, reject) => {\n      this._thunder.call(this.callsign, 'disconnect', {}).then(\n        result => {\n          console.log('WiFi disconnected: ' + JSON.stringify(result))\n          resolve(result)\n        },\n        err => {\n          console.error(`Can't disconnect WiFi: ${err}`)\n          reject(err)\n        }\n      )\n    })\n  }\n\n  /**\n   * Returns current state of the Wi-Fi plugin.\n   */\n  getCurrentState() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getCurrentState')\n        .then(result => {\n          console.log(`WiFi state: ${result.state}`)\n          resolve(result.state)\n        })\n        .catch(err => {\n          console.error(`Can't get WiFi state: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Enables/Disables the Wi-Fi.\n   * @param {bool} bool\n   */\n  setEnabled(bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'setEnabled', { enable: bool })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Function to get paired SSID.\n   */\n  getPaired() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getPairedSSID', {})\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't get paired: ${err}`)\n          reject(err)\n        })\n    })\n  }\n  getDefaultInterface() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'getDefaultInterface', {})\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n  setInterface(inter, bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'setInterfaceEnabled', {\n          interface: inter,\n          persist: true,\n          enabled: bool,\n        })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n  setDefaultInterface(interfaceName, bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'setDefaultInterface', {\n          interface: interfaceName,\n          persist: bool,\n        })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\n\n/**\n * Class to render the keypad for the wifi screen.\n */\nexport default class Keypad extends Lightning.Component {\n  static _template() {\n    return {\n      Wrapper: {\n        flex: { direction: 'row' },\n      },\n    }\n  }\n\n  /**\n   * Function to add items to the list.\n   */\n  set items(items) {\n    this._scroll = true\n    this.tag('Wrapper').children = items\n    this._index = 0\n    if (items.length > 0) {\n      this._setState('Filled')\n    } else {\n      this._setState('Empty')\n    }\n  }\n\n  set wrap(bool) {\n    if (bool) {\n      let wrapper = this.tag('Wrapper')\n      wrapper.w = 428\n      wrapper.h = 56\n      this.tag('Wrapper').patch({\n        flex: { direction: 'row', wrap: true },\n      })\n    }\n    this._wrap = true\n  }\n  get items() {\n    return this.tag('Wrapper').children\n  }\n\n  get currentItem() {\n    return this.items[this._index]\n  }\n\n  get length() {\n    return this.items.length\n  }\n\n  set orientation(v) {\n    this._orientation = v\n    if (v === 'horizontal') {\n      this.tag('Wrapper').patch({ flex: { direction: 'row' } })\n    } else {\n      this.tag('Wrapper').patch({ flex: { direction: 'column' } })\n    }\n  }\n\n  get orientation() {\n    return this._orientation || 'horizontal'\n  }\n\n  set jump(bool) {\n    this._jump = bool\n  }\n\n  get jump() {\n    return this._jump || false\n  }\n\n  set jumpToStart(bool) {\n    this._jumpToStart = bool\n  }\n\n  get jumpToStart() {\n    return this._jumpToStart !== undefined ? this._jumpToStart : this.jump\n  }\n\n  set jumpToEnd(bool) {\n    this._jumpToEnd = bool\n  }\n\n  get jumpToEnd() {\n    return this._jumpToEnd !== undefined ? this._jumpToEnd : this.jump\n  }\n\n  _navigate(dir) {\n    this._prevY = this.currentItem.finalY\n    const ori = this.orientation\n    if (dir === 'right' || dir === 'left' || dir === 'up' || dir === 'down') {\n      const length = this.items.length\n      const currentIndex = this._index\n      let targetIndex = currentIndex + 1\n      if (dir === 'left' || (dir === 'up' && this._wrap === false)) {\n        targetIndex = currentIndex - 1\n      }\n      if (dir === 'up' && this._wrap === true) {\n        let n = Math.floor(this.tag('Wrapper').w / this.currentItem.finalW)\n        let pos = currentIndex - n\n        targetIndex = currentIndex - n >= 0 ? pos : -1\n      }\n      if (dir === 'down' && this._wrap === true) {\n        let n = Math.floor(this.tag('Wrapper').w / this.currentItem.finalW)\n        let pos = currentIndex + n\n        targetIndex = pos < length ? pos : -1\n        if (targetIndex == -1) return this.fireAncestors('$listEnd')\n      }\n      if (targetIndex < 0) {\n        return this.fireAncestors('$listStart')\n      }\n      if (targetIndex > -1 && targetIndex < length) {\n        this._index = targetIndex\n      } else if (this.jump || this.jumpToStart || this.jumpToEnd) {\n        if (targetIndex < 0 && this.jumpToEnd) {\n          this._index = targetIndex + length\n        } else if (targetIndex === length && this.jumpToStart) {\n          this._index = 0\n        }\n      } else {\n        return false\n      }\n\n      if (currentIndex !== this._index) {\n        this.indexChanged({ index: this._index, previousIndex: currentIndex })\n      }\n    }\n    //return false\n  }\n\n  setIndex(targetIndex) {\n    if (targetIndex > -1 && targetIndex < this.items.length) {\n      const currentIndex = this._index\n      this._index = targetIndex\n      this.indexChanged({ index: this._index, previousIndex: currentIndex })\n    }\n  }\n\n  indexChanged(event) {\n    this.signal('indexChanged', event)\n  }\n\n  _getFocused() {\n    return this\n  }\n\n  _construct() {\n    this._index = 0\n  }\n\n  _init() {\n    this._setState('Empty')\n  }\n\n  static _states() {\n    return [\n      class Empty extends this {},\n      class Filled extends this {\n        _getFocused() {\n          return this.currentItem\n        }\n        _handleRight() {\n          return this._navigate('right')\n        }\n\n        _handleLeft() {\n          return this._navigate('left')\n        }\n\n        _handleUp() {\n          return this._navigate('up')\n        }\n\n        _handleDown() {\n          return this._navigate('down')\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render the key for wifi screen\n */\nexport default class Key extends Lightning.Component {\n  _construct() {\n    this._keyType = 'alphanum'\n    this._fontSize = 36\n  }\n  static _template() {\n    return {\n      Border: {\n        w: this.width,\n        h: this.height,\n        type: Lightning.components.BorderComponent,\n        colorBorder: 0xff000000,\n      },\n    }\n  }\n  set item(item) {\n    this._key = item\n    this.tag('Border').w = this.w\n    this.tag('Border').h = this.h\n    this.tag('Border').colorBorder = 0xff000000\n    this.tag('Border').content = {\n      Focus: {\n        rect: true,\n        w: this.w,\n        h: this.h,\n        color: 0x00c0c0c0,\n      },\n\n      Key: {\n        x: this.w / 2,\n        y: this.h / 2,\n        mount: 0.5,\n        text: { text: item, fontSize: this._fontSize, fontFace: 'Light' },\n      },\n    }\n    if (this._keyType == 'delete') {\n      this.tag('Border').content = {\n        Key: {\n          src: Utils.asset('images/del.png'),\n          zIndex: 10,\n        },\n      }\n    }\n  }\n  set keyType(type) {\n    this._keyType = type\n  }\n  set fontSize(size) {\n    this._fontSize = size\n  }\n  _focus() {\n    this.tag('Border').content = {\n      Focus: { color: 0xffc0c0c0 },\n      Key: {\n        color: 0xff000000,\n      },\n    }\n    this.tag('Border').colorBorder = 0xffc0c0c0\n  }\n  _unfocus() {\n    this.tag('Border').content = {\n      Focus: { color: 0x00c0c0c0 },\n      Key: {\n        color: 0xffffffff,\n      },\n    }\n    this.tag('Border').colorBorder = 0xff000000\n  }\n  _handleEnter() {\n    this.fireAncestors('$pressedKey', this._key, this._keyType)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class that contains the data for the keypad.\n */\nexport default class KeyDetails {\n  getAlphabet() {\n    let alphabet = 'abcdefghijklmnopqrstuvwxyz  '.split('')\n    return alphabet\n  }\n  getSymbols() {\n    let symbols = '1234567890+/:;()$$@\"\\'.,?!#*-'.split('')\n    return symbols\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport Key from './Key'\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render the key for type selection\n */\nexport default class SelectionKey extends Key {\n  set item(item) {\n    this._key = item\n  }\n  _init() {\n    this._arr = [\n      [25, 0, 0, 25],\n      [0, 0, 0, 0],\n      [0, 25, 25, 0],\n    ]\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          53,\n          this._arr[this._keyType],\n          1,\n          0xff000000,\n          true,\n          0x00000000\n        ),\n      },\n      Text: {\n        x: this.w / 2,\n        y: this.h / 2,\n        mount: 0.5,\n        text: { text: this._key, fontSize: 24, textColor: 0xffffffff, fontFace: 'Regular' },\n      },\n    })\n  }\n\n  _focus() {\n    this.tag('Text').text.fontStyle = 'Bold'\n    this.tag('Text').text.textColor = 0xff000000\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          56,\n          this._arr[this._keyType],\n          0,\n          0xffc0c0c0,\n          true,\n          0xffc0c0c0\n        ),\n      },\n    })\n  }\n\n  _unfocus() {\n    this.tag('Text').text.fontStyle = 'normal'\n    this.tag('Text').text.textColor = 0xffffffff\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          53,\n          this._arr[this._keyType],\n          1,\n          0xff000000,\n          true,\n          0x00000000\n        ),\n      },\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport Keypad from './Keypad'\nimport Key from './Key'\nimport Api from './KeyDetails'\nimport SelectionKey from './SelectionKey'\n\n/**\n * Class to render the wifi password screen.\n */\nexport default class WiFiPasswordScreen extends Lightning.Component {\n  _construct() {\n    this._width = 428\n    this._height = 56\n    this._radius = 28\n    this._strokeWidth = 2\n    this.keySpace = 5\n  }\n  static _template() {\n    return {}\n  }\n  _init() {\n    this._api = new Api()\n\n    this.patch({\n      src: Utils.asset('images/tvShows/background.jpg'),\n      w: 440,\n      h: 560,\n      Entry: {\n        x: 4,\n        y: 10,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0xff1b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Text: {\n          x: 20,\n          y: this._height / 2 + 5,\n          mountY: 0.5,\n          text: { text: 'Password', fontSize: 18, fontFace: 'Light', textColor: 0xffa5a5a5 },\n        },\n        Pwd: {\n          x: 130,\n          y: this._height / 2 + 5,\n          mountY: 0.5,\n          text: {\n            text: '',\n            fontSize: 24,\n            fontFace: 'Light',\n            textColor: 0xffc0c0c0,\n            wordWrapWidth: this._width - 130,\n            wordWrap: false,\n            textOverflow: 'ellipsis',\n          },\n        },\n      },\n      Selection: {\n        x: 4,\n        y: this._height + 21,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0x001b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Types: {\n          type: Lightning.components.ListComponent,\n          itemSize: 143,\n          w: this._width,\n          h: this._height,\n          clipping: true,\n          roll: true,\n          zIndex: 10,\n        },\n      },\n      Keypad: {\n        x: 9,\n        y: (this._height + 21) * 2,\n        w: this._width,\n        wrap: true,\n        type: Keypad,\n      },\n      FunctionalKeys: {\n        x: 9,\n        y: (this._height + 21) * 5 + 15,\n        w: this._width,\n        wrap: true,\n        type: Keypad,\n      },\n      Submit: {\n        x: 4,\n        y: (this._height + 21) * 5 + 15 + 61,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0xff1b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Text: {\n          x: this._width / 2,\n          y: this._height / 2,\n          mount: 0.5,\n          text: { text: 'Submit', fontSize: 24, fontFace: 'Light', textColor: 0xffffffff },\n        },\n      },\n    })\n    this.setKeypad('abc')\n    let clear = {\n      ref: 'Keyclear',\n      w: 117,\n      h: 56,\n      type: Key,\n      fontSize: 24,\n      item: 'CLEAR',\n      keyType: 'clear',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    let space = {\n      ref: 'Keyspace',\n      w: 178,\n      h: 56,\n      type: Key,\n      fontSize: 24,\n      item: 'Space',\n      keyType: 'space',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    let del = {\n      ref: 'Keydel',\n      w: 117,\n      h: 56,\n      keyType: 'delete',\n      type: Key,\n      fontSize: 24,\n      item: '',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    this.tag('FunctionalKeys').items = [clear, space, del]\n    this.tag('Selection.Types').items = ['abc', 'ABC', '#+-'].map((item, index) => {\n      return {\n        ref: 'Item',\n        w: this._width / 3,\n        h: this._height,\n        fontSize: 24,\n        keyType: index,\n        item: item,\n        type: SelectionKey,\n        clipping: true,\n        //keyType: 'selection' + index,\n      }\n    })\n  }\n  _active() {\n    this.tag('Selection.Types').start()\n    this._setState('Selection')\n  }\n  _inactive() {\n    this.tag('Entry.Pwd').text.text = ''\n  }\n  $pressedKey(key, keyType) {\n    console.log(key)\n    let pwd = this.tag('Entry.Pwd')\n    if (keyType === 'alphanum') {\n      pwd.text.text = pwd.text.text + key\n    } else if (keyType === 'clear') {\n      pwd.text.text = ''\n    } else if (keyType === 'space') {\n      pwd.text.text = pwd.text.text + ' '\n    } else if (keyType === 'delete') {\n      pwd.text.text = pwd.text.text.substring(0, pwd.text.text.length - 1)\n    }\n  }\n  setKeypad(type) {\n    let data = []\n    if (type === 'abc') data = this._api.getAlphabet()\n    else if (type === '#+-') data = this._api.getSymbols()\n    else if (type === 'ABC') {\n      data = this._api.getAlphabet().map(i => {\n        return i.toUpperCase()\n      })\n    }\n    this.tag('Keypad').items = []\n    this.tag('Keypad').items = data.map(index => {\n      return {\n        ref: 'Key' + index,\n        w: 56,\n        h: 56,\n        type: Key,\n        item: index,\n        flexItem: { marginRight: 5, marginBottom: 5 },\n      }\n    })\n  }\n  static _states() {\n    return [\n      class Selection extends this {\n        $enter() {\n          this.setKeypad(this.tag('Selection.Types').element._key)\n        }\n        _getFocused() {\n          return this.tag('Selection.Types').element\n        }\n        _handleRight() {\n          if (this.tag('Selection.Types').index < this.tag('Selection.Types').length - 1) {\n            this.tag('Selection.Types').setNext()\n            this.setKeypad(this.tag('Selection.Types').element._key)\n          }\n        }\n        _handleLeft() {\n          if (this.tag('Selection.Types').index != 0) {\n            this.tag('Selection.Types').setPrevious()\n            this.setKeypad(this.tag('Selection.Types').element._key)\n          }\n        }\n        _handleDown() {\n          this._setState('Keypad')\n        }\n      },\n      class Keypad extends this {\n        _getFocused() {\n          return this.tag('Keypad')\n        }\n        $listEnd() {\n          this._setState('Function')\n        }\n        $listStart() {\n          this._setState('Selection')\n        }\n      },\n      class Function extends this {\n        _getFocused() {\n          return this.tag('FunctionalKeys')\n        }\n        _handleUp() {\n          this._setState('Keypad')\n        }\n        $listEnd() {\n          console.log('down')\n          this._setState('Submit')\n        }\n        $listStart() {\n          this._setState('Keypad')\n        }\n      },\n      class Submit extends this {\n        $enter() {\n          this.patch({\n            Submit: {\n              x: 0,\n              y: (this._height + 21) * 5 + 15 + 61,\n              texture: Lightning.Tools.getRoundRect(\n                this._width,\n                this._height,\n                this._radius,\n                this._strokeWidth,\n                0x00c0c0c0,\n                true,\n                0xffc0c0c0\n              ),\n            },\n          })\n          this.tag('Submit.Text').text.textColor = 0xff000000\n        }\n        $exit() {\n          this.patch({\n            Submit: {\n              x: 0,\n              y: (this._height + 21) * 5 + 15 + 61,\n              texture: Lightning.Tools.getRoundRect(\n                this._width,\n                this._height,\n                this._radius,\n                this._strokeWidth,\n                0xff1b1b1b,\n                true,\n                0x00c0c0c0\n              ),\n            },\n          })\n          this.tag('Submit.Text').text.textColor = 0xffffffff\n        }\n        _handleEnter() {\n          this.fireAncestors('$password', this.tag('Entry.Pwd').text.text)\n        }\n        _handleUp() {\n          console.log('Up')\n          this._setState('Function')\n        }\n        _handleLeft() {\n          this._setState('Function')\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\nimport SettingsItem from './../items/SettingsItem'\nimport WiFiPasswordScreen from './wifipasswordscreen/WiFiPasswordScreen'\nexport default class BluetoothPairingScreen extends Lightning.Component {\n  static _template() {\n    return {\n      PairingScreen: {\n        x: 0,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      Title: {\n        x: 20,\n        y: 100,\n        text: { text: '', fontSize: 30, textColor: COLORS.titleColor },\n      },\n      List: {\n        x: 20,\n        y: 150,\n        type: Lightning.components.ListComponent,\n        w: 1920 / 3,\n        h: 400,\n        itemSize: 65,\n        horizontal: false,\n        invertDirection: true,\n        roll: true,\n      },\n      Password: {\n        type: WiFiPasswordScreen,\n        x: 1920 / 3 / 2,\n        y: 350,\n        mountX: 0.5,\n        w: 428,\n        h: 56,\n        alpha: 0,\n      },\n    }\n  }\n  set item(item) {\n    this.tag('Title').text = item.ssid\n    var options = []\n    this._item = item\n    if (item.connected) {\n      options = ['Disconnect', 'Cancel']\n    } else {\n      options = ['Connect', 'Cancel']\n    }\n\n    this.tag('List').items = options.map((item, index) => {\n      return {\n        ref: item,\n        w: 1920 / 3,\n        h: 65,\n        type: SettingsItem,\n        item: item,\n      }\n    })\n    this._setState('Pair')\n  }\n\n  static _states() {\n    return [\n      class Password extends this {\n        $enter() {\n          this.tag('Password').alpha = 1\n        }\n        _getFocused() {\n          return this.tag('Password')\n        }\n        $password(password) {\n          this.fireAncestors('$startConnect', password)\n        }\n        $exit() {\n          this.tag('Password').alpha = 0\n        }\n        _handleKey(event) {\n          if (\n            event.keyCode == 27 ||\n            event.keyCode == 77 ||\n            event.keyCode == 49 ||\n            event.keyCode == 158\n          ) {\n            this._setState('Pair')\n          } else return false\n        }\n      },\n      class Pair extends this {\n        $enter() {}\n        _getFocused() {\n          return this.tag('List').element\n        }\n        _handleDown() {\n          this.tag('List').setNext()\n        }\n        _handleUp() {\n          this.tag('List').setPrevious()\n        }\n        _handleEnter() {\n          if (this.tag('List').element.ref == 'Connect' && this._item.security != '0') {\n            this._setState('Password')\n          } else {\n            this.fireAncestors('$pressEnter', this.tag('List').element.ref)\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport WiFiItem from '../items/WiFiItem'\nimport WiFiApi from './../api/WifiApi'\nimport WiFiPairingScreen from './WiFiPairingScreen'\nimport ThunderJS from 'ThunderJS'\nimport { COLORS } from './../colors/Colors'\n\n/**\n * Class for WiFi screen.\n */\nexport default class WiFiScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Title: {\n        x: 1920 - 1920 / 3 + 1920 / 6,\n        y: 50,\n        text: { text: 'Wi-Fi', textColor: COLORS.headingColor },\n        mountX: 0.5,\n      },\n      Switch: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 150,\n        rect: true,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n        color: 0x00c0c0c0,\n        w: 1920 / 3 - 70,\n        h: 50,\n        Text: {\n          x: 0,\n          text: { text: 'Wi-Fi', textColor: COLORS.titleColor },\n        },\n        Button: {\n          x: 1920 / 3 - 80,\n          y: 10,\n          mountX: 1,\n          src: Utils.asset('images/switch-off.png'),\n        },\n      },\n      Networks: {\n        x: 1920 - 1920 / 3,\n        y: 250,\n        flex: { direction: 'column' },\n        PairedNetworks: {\n          flexItem: { margin: 20 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'My Network',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          List: {\n            x: 0,\n            y: 65,\n            type: Lightning.components.ListComponent,\n            w: 1920 / 3,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        AvailableNetworks: {\n          flexItem: { margin: 20, marginTop: 30 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'Other Networks',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          Loader: {\n            x: 250,\n            y: -10,\n            w: 50,\n            h: 50,\n            color: 0xff000000,\n            src: Utils.asset('images/loader.png'),\n            visible: false,\n          },\n\n          List: {\n            x: 0,\n            y: 65,\n            w: 1920 / 3,\n            h: 100,\n            type: Lightning.components.ListComponent,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        visible: false,\n      },\n      PairingScreen: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        visible: false,\n        type: WiFiPairingScreen,\n      },\n      IpAddress: {\n        x: 1820,\n        y: 920,\n        mountX: 1,\n        mountY: 0,\n        text: {\n          text: 'IP:NA',\n          textColor: COLORS.titleColor,\n          fontSize: 30,\n        },\n      },\n    }\n  }\n  _active() {\n    this._setState('Switch')\n  }\n\n  _init() {\n    this.loadingAnimation = this.tag('Networks.AvailableNetworks.Loader').animation({\n      duration: 1,\n      repeat: -1,\n      stopMethod: 'immediate',\n      stopDelay: 0.2,\n      actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n    })\n    this.loadingAnimation.play()\n    this._wifi = new WiFiApi()\n    this.wifiStatus = false\n    this._activateWiFi()\n    this._setState('Switch')\n    //this.wifiStatus = true\n    if (this.wiFiStatus) {\n      this.tag('Networks').visible = true\n    }\n    this._pairedNetworks = this.tag('Networks.PairedNetworks')\n    this._availableNetworks = this.tag('Networks.AvailableNetworks')\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const systemCallsign = 'org.rdk.System'\n    thunder.Controller.activate({ callsign: systemCallsign })\n      .then(() => {\n        this.displayIp()\n      })\n      .catch(err => {\n        console.log('System Error', err)\n      })\n    this._wifi.registerEvent('onIPAddressStatusChanged', notification => {\n      if (notification.status == 'ACQUIRED') {\n        this.tag('IpAddress').text.text = 'IP:' + notification.ip4Address\n      } else if (notification.status == 'LOST') {\n        this.tag('IpAddress').text.text = 'IP:NA'\n      }\n    })\n    this._wifi.registerEvent('onDefaultInterfaceChanged', notification => {\n      console.log(notification)\n      if (notification.newInterfaceName == 'WIFI') {\n        this._wifi.setEnabled(true).then(result => {\n          if (result.success) {\n            this.wifiStatus = true\n            this.tag('Networks').visible = true\n            this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n            this._wifi.discoverSSIDs()\n            this.tag('Networks.AvailableNetworks.Loader').visible = true\n          }\n        })\n      } else if (\n        notification.newInterfaceName == 'ETHERNET' ||\n        notification.oldInterfaceName == 'WIFI'\n      ) {\n        this._wifi.disconnect()\n        this.wifiStatus = false\n        this.tag('Networks').visible = false\n        this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n        this._setState('Switch')\n      }\n    })\n  }\n  displayIp() {\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const systemCallsign = 'org.rdk.System'\n    thunder\n      .call(systemCallsign, 'getDeviceInfo', { params: 'estb_ip' })\n      .then(result => {\n        this.tag('IpAddress').text.text = 'IP:' + result.estb_ip\n      })\n      .catch(err => {\n        console.log('IpAddress Error', err)\n      })\n  }\n\n  /**\n   * Function to be executed when the Wi-Fi screen is enabled.\n   */\n  _enable() {\n    if (this.wifiStatus) {\n      this._wifi.discoverSSIDs()\n      this.tag('Networks.AvailableNetworks.Loader').visible = true\n    }\n    this.scanTimer = setInterval(() => {\n      if (this.wifiStatus) {\n        this._wifi.discoverSSIDs()\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      }\n    }, 5000)\n  }\n\n  /**\n   * Function to be executed when the Wi-Fi screen is disabled.\n   */\n  _disable() {\n    clearInterval(this.scanTimer)\n  }\n\n  /**\n   * Function to render list of Wi-Fi networks.\n   */\n  renderDeviceList(ssids) {\n    this._wifi.getConnectedSSID().then(result => {\n      if (result.ssid != '') {\n        this._pairedList = [result]\n      } else {\n        this._pairedList = []\n      }\n      this._pairedNetworks.h = this._pairedList.length * 65 + 30\n      this._pairedNetworks.tag('List').h = this._pairedList.length * 65\n      this._pairedNetworks.tag('List').items = this._pairedList.map((item, index) => {\n        item.connected = true\n        return {\n          ref: 'Paired' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: WiFiItem,\n          item: item,\n        }\n      })\n\n      this._otherList = ssids.filter(device => {\n        result = this._pairedList.map(a => a.ssid)\n        if (result.includes(device.ssid)) {\n          return false\n        } else return device\n      })\n      this._availableNetworks.h = this._otherList.length * 65 + 30\n      this._availableNetworks.tag('List').h = this._otherList.length * 65\n      this._availableNetworks.tag('List').items = this._otherList.map((item, index) => {\n        item.connected = false\n        return {\n          ref: 'Other' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: WiFiItem,\n          item: item,\n        }\n      })\n    })\n  }\n\n  static _states() {\n    return [\n      class Switch extends this {\n        $enter() {\n          this.tag('Switch').color = COLORS.hightlightColor\n        }\n        $exit() {\n          this.tag('Switch').color = 0x00c0c0c0\n        }\n        _handleDown() {\n          if (this.wifiStatus) {\n            if (this._pairedNetworks.tag('List').length > 0) {\n              this._setState('PairedDevices')\n            } else if (this._availableNetworks.tag('List').length > 0) {\n              this._setState('AvailableDevices')\n            }\n          }\n        }\n        _handleEnter() {\n          this.switch()\n        }\n      },\n      class PairedDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._pairedNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('MyDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('MyDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._pairedNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class AvailableDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._availableNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('AvailableDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('AvailableDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._availableNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class PairingScreen extends this {\n        $enter() {\n          this._wifi.stopScan()\n          this._disable()\n        }\n        _getFocused() {\n          return this.tag('PairingScreen')\n        }\n        $pressEnter(option) {\n          if (option === 'Cancel') {\n            this._setState('Switch')\n          } else if (option === 'Connect') {\n            if (this._availableNetworks.tag('List').element) {\n              this._wifi\n                .connect(this._availableNetworks.tag('List').element._item, '')\n                .then(() => {})\n            }\n            this._setState('Switch')\n          } else if (option === 'Disconnect') {\n            this._wifi.disconnect().then(() => {})\n            this._setState('Switch')\n          }\n        }\n        $startConnect(password) {\n          if (this._availableNetworks.tag('List').element && password != null) {\n            this._wifi.connect(this._availableNetworks.tag('List').element._item, password)\n          } else {\n            this.patch({\n              FailureMessage: {\n                x: (1920 * 2) / 3 + 40,\n                y: 950,\n                text: { text: 'FAILED' },\n              },\n            })\n            setTimeout(() => {\n              this.childList.remove(this.tag('FailureMessage'))\n            }, 2000)\n          }\n          this._setState('Switch')\n        }\n        $exit() {\n          this.tag('PairingScreen').visible = false\n          this._enable()\n        }\n      },\n    ]\n  }\n\n  /**\n   * Function to navigate through the lists in the screen.\n   * @param {string} listname\n   * @param {string} dir\n   */\n  _navigate(listname, dir) {\n    let list\n    if (listname === 'MyDevices') list = this._pairedNetworks.tag('List')\n    else if (listname === 'AvailableDevices') list = this._availableNetworks.tag('List')\n    if (dir === 'down') {\n      if (list.index < list.length - 1) list.setNext()\n      else if (list.index == list.length - 1) {\n        if (listname === 'MyDevices' && this._availableNetworks.tag('List').length > 0) {\n          this._setState('AvailableDevices')\n        }\n      }\n    } else if (dir === 'up') {\n      if (list.index > 0) list.setPrevious()\n      else if (list.index == 0) {\n        if (listname === 'AvailableDevices' && this._pairedNetworks.tag('List').length > 0) {\n          this._setState('PairedDevices')\n        } else {\n          this._setState('Switch')\n        }\n      }\n    }\n  }\n\n  /**\n   * Function to turn on and off Wi-Fi.\n   */\n  switch() {\n    if (this.wifiStatus) {\n      this._wifi.setInterface('ETHERNET', true).then(result => {\n        if (result.success) {\n          this._wifi.setDefaultInterface('ETHERNET', true).then(result => {\n            if (result.success) {\n              this._wifi.disconnect()\n              this.wifiStatus = false\n              this.tag('Networks').visible = false\n              this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n            }\n          })\n        }\n      })\n    } else {\n      this._wifi.setInterface('WIFI', true).then(result => {\n        if (result.success) {\n          this._wifi.setDefaultInterface('WIFI', false).then(result => {\n            if (result.success) {\n              this._wifi.setEnabled(true).then(result => {\n                if (result.success) {\n                  this.wifiStatus = true\n                  this.tag('Networks').visible = true\n                  this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n                  this._wifi.discoverSSIDs()\n                  this.tag('Networks.AvailableNetworks.Loader').visible = true\n                }\n              })\n            }\n          })\n        }\n      })\n    }\n  }\n\n  /**\n   * Function to activate Wi-Fi plugin.\n   */\n  _activateWiFi() {\n    this._wifi.activate().then(() => {\n      this._wifi.getDefaultInterface().then(result => {\n        if (result.interface == 'WIFI') {\n          this.switch()\n        }\n      })\n    })\n    //this._wifi.discoverSSIDs()\n    this.tag('Networks.AvailableNetworks.Loader').visible = true\n    this._wifi.registerEvent('onWIFIStateChanged', notification => {\n      if (notification.state === 2 || notification.state === 5) {\n        this._wifi.discoverSSIDs()\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      }\n      this._setState('Switch')\n    })\n    this._wifi.registerEvent('onError', notification => {\n      this._wifi.discoverSSIDs()\n      this.tag('Networks.AvailableNetworks.Loader').visible = true\n      if (notification.code == 4) {\n        this.patch({\n          FailureMessage: {\n            x: (1920 * 2) / 3 + 40,\n            y: 950,\n            text: { text: 'INCORRECT PASSWORD' },\n          },\n        })\n        setTimeout(() => {\n          this.childList.remove(this.tag('FailureMessage'))\n        }, 2000)\n      }\n      this._setState('Switch')\n    })\n    this._wifi.registerEvent('onAvailableSSIDs', notification => {\n      this.tag('Networks.AvailableNetworks.Loader').visible = false\n      this.renderDeviceList(notification.ssids)\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils, Router, Storage } from '@lightningjs/sdk'\nimport BluetoothScreen from './BluetoothScreen'\nimport WiFiScreen from './WifiScreen'\n\n/**\n * Class for settings screen.\n */\n\nexport default class SettingsScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n      },\n      Sidebar: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      WiFiScreen: {\n        type: WiFiScreen,\n        visible: false,\n      },\n      BluetoothScreen: {\n        type: BluetoothScreen,\n        visible: false,\n      },\n    }\n  }\n\n  //   /**\n  //  * Function to be excuted when the Bluetooth screen is enabled.\n  //  */\n  _enable() {\n    this._appAnimation = this.animation({\n      duration: 0.3,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n        { p: 'y', v: { 0: 1080, 1: 0 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  // /**\n  //  * Function to be executed when the Bluetooth screen is disabled from the screen.\n  //  */\n  _disable() {\n    this._appAnimation = this.animation({\n      duration: 0.3,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n        { p: 'y', v: { 0: 0, 1: 1080 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  set screen(screen) {\n    this._setState(screen)\n  }\n\n  set params(args) {\n    if (args.animation != undefined) {\n      args.animation.start()\n    }\n  }\n\n  static _states() {\n    return [\n      class BluetoothScreen extends this {\n        $enter() {\n          this.tag('BluetoothScreen').visible = true\n        }\n        _getFocused() {\n          return this.tag('BluetoothScreen')\n        }\n        $exit() {\n          this.tag('BluetoothScreen').visible = false\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          if (\n            (Storage.get('applicationType')=='') &&\n            (key.keyCode == 77 ||\n            key.keyCode == 49 ||\n            key.keyCode == 36 ||\n            key.keyCode == 158 ||\n            key.keyCode == 27 ||\n            (key.keyCode == 73 && key.ctrlKey == true))\n          ) {\n            this._appAnimation = this.animation({\n              duration: 0.5,\n              repeat: 0,\n              stopMethod: 'immediate',\n              actions: [\n                { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n                { p: 'y', v: { 0: 0, 1: 1080 } },\n              ],\n            })\n            this._appAnimation.start()\n            this._appAnimation.on('finish', p => {\n              Router.navigate('home')\n            })\n          } else return false;\n        }\n      },\n      class WiFiScreen extends this {\n        $enter() {\n          this.tag('WiFiScreen').visible = true\n        }\n        _getFocused() {\n          return this.tag('WiFiScreen')\n        }\n        $exit() {\n          this.tag('WiFiScreen').visible = false\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          if (\n            (Storage.get('applicationType')=='') &&\n            (key.keyCode == 77 ||\n            key.keyCode == 49 ||\n            key.keyCode == 36 ||\n            key.keyCode == 158 ||\n            key.keyCode == 27 ||\n            (key.keyCode == 73 && key.ctrlKey == true))\n          ) {\n            this._appAnimation = this.animation({\n              duration: 0.3,\n              repeat: 0,\n              stopMethod: 'immediate',\n              actions: [\n                { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n                { p: 'y', v: { 0: 0, 1: 1080 } },\n              ],\n            })\n            this._appAnimation.start()\n            this._appAnimation.on('finish', p => {\n              Router.navigate('home')\n            })\n          } else return false;\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Router } from '@lightningjs/sdk'\n\nexport default class Error extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 1080,\n      color: 0xffb70606,\n      Label: {\n        x: 100,\n        y: 100,\n        text: {\n          text: 'Error',\n          fontSize: 22,\n        },\n      },\n    }\n  }\n\n  _handleEnter() {\n    Router.navigate('home')\n  }\n\n  _focus() {\n    console.log('focus error page')\n  }\n\n  set error(obj) {\n    const { page, error } = obj\n    console.log(page, error)\n\n    const errorMessage = `\nerror while loading page: ${page.constructor.name}\npress enter to navigate to home\n--\nloaded via hash: ${page[Symbol.for('hash')]}\nresulted in route: ${page[Symbol.for('route')]}\n--\n${error.toString()}`\n\n    this.tag('Label').text = errorMessage\n  }\n\n  pageTransition() {\n    return 'up'\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport Home from './../screens/HomeScreen'\nimport SplashScreen from './../screens/SplashScreen'\nimport Settings from './../screens/SettingsScreen'\nimport Error from './../screens/Error'\n\nexport default {\n  root: 'home',\n  routes: [\n    {\n      path: 'home',\n      component: Home,\n      before() {\n        console.log('before home!')\n        return Promise.resolve()\n      },\n      cache: 10,\n    },\n    {\n      path: 'settings/:screen',\n      options: {\n        preventStorage: true,\n        clearHistory: true,\n        reuseInstance: true\n      },\n      component: Settings,\n      cache: 10,\n    },\n    {\n      path: 'splash',\n      component: SplashScreen,\n      options: {\n        preventStorage: true,\n        clearHistory: true,\n        reuseInstance: false\n      },\n      cache: 10,\n    },\n    {\n      path: '!',\n      component: Error,\n    },\n    {\n      path: '*',\n      component: Home,\n    },\n  ],\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS';\n/**\n * Class for Xcast thunder plugin apis.\n */\n\nexport default class XcastApi {\n  constructor() {\n    console.log('Xcast constructor');\n    this._events = new Map();\n  }\n\n  /**\n   * Function to activate the Xcast plugin\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      };\n      this._thunder = ThunderJS(config);\n      this.callsign = 'org.rdk.Xcast';\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log(result);\n          console.log('Xcast activation success');\n          this._thunder\n            .call('org.rdk.Xcast', 'getEnabled')\n            .then(result => {\n              if (result.success) {\n                console.log('Xcast enabled');\n                this._thunder.on(this.callsign, 'onApplicationLaunchRequest', notification => {\n                  console.log('onApplicationLaunchRequest ' + JSON.stringify(notification));\n                  if (this._events.has('onApplicationLaunchRequest')) {\n                    this._events.get('onApplicationLaunchRequest')(notification);\n                  }\n                });\n                this._thunder.on(this.callsign, 'onApplicationHideRequest', notification => {\n                  console.log('onApplicationHideRequest ' + JSON.stringify(notification));\n                  if (this._events.has('onApplicationHideRequest')) {\n                    this._events.get('onApplicationHideRequest')(notification);\n                  }\n                });\n                this._thunder.on(this.callsign, 'onApplicationResumeRequest', notification => {\n                  console.log('onApplicationResumeRequest ' + JSON.stringify(notification));\n                  if (this._events.has('onApplicationResumeRequest')) {\n                    this._events.get('onApplicationResumeRequest')(notification);\n                  }\n                });\n                this._thunder.on(this.callsign, 'onApplicationStopRequest', notification => {\n                  console.log('onApplicationStopRequest ' + JSON.stringify(notification));\n                  if (this._events.has('onApplicationStopRequest')) {\n                    this._events.get('onApplicationStopRequest')(notification);\n                  }\n                });\n                resolve(true);\n              } else {\n                console.log('Xcast enabled failed');\n              }\n            })\n            .catch(err => {\n              console.error('Enabling failure', err);\n              reject('Xcast enabling failed', err);\n            });\n        })\n        .catch(err => {\n          console.error('Activation failure', err);\n          reject('Xcast activation failed', err);\n        });\n    });\n  }\n\n  /**\n   *\n   * @param {string} eventId\n   * @param {function} callback\n   * Function to register the events for the Xcast plugin.\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback);\n  }\n\n  /**\n   * Function to deactivate the Xcast plugin.\n   */\n  deactivate() {\n    this._events = new Map();\n    this._thunder = null;\n  }\n\n  /**\n   * Function to notify the state of the app.\n   */\n  onApplicationStateChanged(params) {\n    return new Promise((resolve, reject) => {\n      console.log('Notifying back');\n      this._thunder.call('org.rdk.Xcast', 'onApplicationStateChanged', params).then(result => {\n        console.log(result);\n        resolve(result);\n      });\n    });\n  }\n\n  static supportedApps() {\n    var xcastApps = { AmazonInstantVideo: 'Amazon', YouTube: 'Cobalt' };\n    return xcastApps;\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Utils, Router, Storage } from '@lightningjs/sdk';\nimport ThunderJS from 'ThunderJS';\nimport routes from './api/routes';\nimport AppApi from '../src/api/AppApi.js';\nimport XcastApi from '../src/api/XcastApi';\n\nconst config = {\n  host: '127.0.0.1',\n  port: 9998,\n  default: 1,\n};\nvar thunder = ThunderJS(config);\nvar appApi = new AppApi();\n\nexport default class App extends Router.App {\n  static getFonts() {\n    return [{ family: 'Regular', url: Utils.asset('fonts/Roboto-Regular.ttf') }];\n  }\n  _setup() {\n    Router.startRouter(routes, this);\n    document.onkeydown = e => {\n      if (e.keyCode == 8) {\n        e.preventDefault();\n      }\n    };\n  }\n\n  _init() {\n    this.xcastApi = new XcastApi();\n    var thunder = ThunderJS(config);\n    const rdkshellCallsign = 'org.rdk.RDKShell';\n    thunder.Controller.activate({ callsign: rdkshellCallsign })\n      .then(result => {\n        console.log('Successfully activated RDK Shell');\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 27,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 77,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 36,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 49,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 158,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 227,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 179,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success');\n          })\n          .catch(err => {\n            console.log('Error', err);\n          });\n      })\n      .catch(err => {\n        console.log('Error', err);\n      });\n  }\n\n  deactivateChildApp(plugin) {\n    var appApi = new AppApi();\n    switch (plugin) {\n      case 'WebApp':\n        appApi.deactivateWeb();\n        break;\n      case 'Cobalt':\n        appApi.suspendCobalt();\n        break;\n      case 'Lightning':\n        appApi.deactivateLightning();\n        break;\n      case 'Native':\n        appApi.killNative();\n        break;\n      case 'Amazon':\n        appApi.suspendAmazon();\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Function to register event listeners for Xcast plugin.\n   */\n  registerXcastListeners() {\n    this.xcastApi.registerEvent('onApplicationLaunchRequest', notification => {\n      console.log('Received a launch request ' + JSON.stringify(notification));\n      if (this.xcastApps(notification.applicationName)) {\n        let applicationName = this.xcastApps(notification.applicationName);\n        console.log('Launch ' + this.xcastApps(notification.applicationName));\n        if (applicationName == 'Amazon' && Storage.get('applicationType') != 'Amazon') {\n          this.deactivateChildApp(Storage.get('applicationType'));\n          appApi.launchAmazon();\n          Storage.set('applicationType', 'Amazon');\n          appApi.setVisibility('ResidentApp', false);\n          let params = { applicationName: notification.applicationName, state: 'running' };\n          this.xcastApi.onApplicationStateChanged(params);\n        } else if (applicationName == 'Cobalt' && Storage.get('applicationType') != 'Cobalt') {\n          this.deactivateChildApp(Storage.get('applicationType'));\n          appApi.launchCobalt();\n          Storage.set('applicationType', 'Cobalt');\n          appApi.setVisibility('ResidentApp', false);\n          let params = {\n            applicationName: notification.applicationName,\n            state: 'running',\n          };\n          this.xcastApi.onApplicationStateChanged(params);\n        }\n      }\n    });\n    this.xcastApi.registerEvent('onApplicationHideRequest', notification => {\n      console.log('Received a hide request ' + JSON.stringify(notification));\n      if (this.xcastApps(notification.applicationName)) {\n        let applicationName = this.xcastApps(notification.applicationName);\n        console.log('Hide ' + this.xcastApps(notification.applicationName));\n        if (applicationName === 'Amazon' && Storage.get('applicationType') === 'Amazon') {\n          appApi.suspendAmazon();\n          let params = { applicationName: notification.applicationName, state: 'stopped' };\n          this.xcastApi.onApplicationStateChanged(params);\n        } else if (applicationName === 'Cobalt' && Storage.get('applicationType') === 'Cobalt') {\n          appApi.suspendCobalt();\n          let params = { applicationName: notification.applicationName, state: 'stopped' };\n          this.xcastApi.onApplicationStateChanged(params);\n        }\n        Storage.set('applicationType', '');\n        appApi.setVisibility('ResidentApp', true);\n        thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n          console.log('ResidentApp moveToFront Success');\n        });\n      }\n    });\n    this.xcastApi.registerEvent('onApplicationResumeRequest', notification => {\n      console.log('Received a resume request ' + JSON.stringify(notification));\n      if (this.xcastApps(notification.applicationName)) {\n        let applicationName = this.xcastApps(notification.applicationName);\n        console.log('Resume ' + this.xcastApps(notification.applicationName));\n        if (applicationName == 'Amazon' && Storage.get('applicationType') != 'Amazon') {\n          this.deactivateChildApp(Storage.get('applicationType'));\n          appApi.launchAmazon();\n          Storage.set('applicationType', 'Amazon');\n          appApi.setVisibility('ResidentApp', false);\n          let params = { applicationName: notification.applicationName, state: 'running' };\n          this.xcastApi.onApplicationStateChanged(params);\n        } else if (applicationName == 'Cobalt' && Storage.get('applicationType') != 'Cobalt') {\n          this.deactivateChildApp(Storage.get('applicationType'));\n          appApi.launchCobalt();\n          Storage.set('applicationType', 'Cobalt');\n          appApi.setVisibility('ResidentApp', false);\n          let params = { applicationName: notification.applicationName, state: 'running' };\n          this.xcastApi.onApplicationStateChanged(params);\n        }\n      }\n    });\n    this.xcastApi.registerEvent('onApplicationStopRequest', notification => {\n      console.log('Received a stop request ' + JSON.stringify(notification));\n      if (this.xcastApps(notification.applicationName)) {\n        console.log('Stop ' + this.xcastApps(notification.applicationName));\n        let applicationName = this.xcastApps(notification.applicationName);\n        if (applicationName === 'Amazon' && Storage.get('applicationType') === 'Amazon') {\n          appApi.deactivateAmazon();\n          Storage.set('applicationType', '');\n          appApi.setVisibility('ResidentApp', true);\n          thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n            console.log('ResidentApp moveToFront Success');\n          });\n          let params = { applicationName: notification.applicationName, state: 'stopped' };\n          this.xcastApi.onApplicationStateChanged(params);\n        } else if (applicationName === 'Cobalt' && Storage.get('applicationType') === 'Cobalt') {\n          appApi.deactivateCobalt();\n          Storage.set('applicationType', '');\n          appApi.setVisibility('ResidentApp', true);\n          thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n            console.log('ResidentApp moveToFront Success');\n          });\n          let params = { applicationName: notification.applicationName, state: 'stopped' };\n          this.xcastApi.onApplicationStateChanged(params);\n        }\n      }\n    });\n    this.xcastApi.registerEvent('onApplicationStateRequest', notification => {\n      console.log('Received a state request ' + JSON.stringify(notification));\n      if (this.xcastApps(notification.applicationName)) {\n        let applicationName = this.xcastApps(notification.applicationName);\n        let status = AppApi.pluginStatus(applicationName);\n        let params = { applicationName: notification.applicationName, state: 'stopped' };\n        if (status) {\n          params.status = 'running';\n        }\n        this.xcastApi.onApplicationStateChanged(params);\n        console.log('State of ' + this.xcastApps(notification.applicationName));\n      }\n    });\n  }\n\n  /**\n   * Function to get the plugin name for the application name.\n   * @param {string} app App instance.\n   */\n  xcastApps(app) {\n    if (Object.keys(XcastApi.supportedApps()).includes(app)) {\n      return XcastApi.supportedApps()[app];\n    } else return false;\n  }\n\n  _handleKey(key) {\n    if (key.keyCode == 227) {\n      var showMax = 'https://ott-app.dstv.com/';\n      this.deactivateChildApp(Storage.get('applicationType'));\n      appApi.launchWeb(showMax);\n      Storage.set('applicationType', 'WebApp');\n      appApi.setVisibility('ResidentApp', false);\n    } else if (key.keyCode == 179 && Storage.get('applicationType') != 'Cobalt') {\n      this.deactivateChildApp(Storage.get('applicationType'));\n      appApi.launchCobalt();\n      Storage.set('applicationType', 'Cobalt');\n      appApi.setVisibility('ResidentApp', false);\n    } else if (key.keyCode == 27 || key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n      this.deactivateChildApp(Storage.get('applicationType'));\n      Storage.set('applicationType', '');\n      appApi.setVisibility('ResidentApp', true);\n      thunder.call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' }).then(result => {\n        console.log('ResidentApp moveToFront Success');\n      });\n      thunder\n        .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n        .then(result => {\n          console.log('ResidentApp moveToFront Success');\n        })\n        .catch(err => {\n          console.log('Error', err);\n        });\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Launch } from '@lightningjs/sdk'\nimport App from './App.js'\n\nexport default function() {\n  return Launch(App, ...arguments)\n}\n"],"names":["settings","subscribers","[object Object]","type","key","fallback","val","obj","keys","split","i","length","undefined","Object","dotGrab","this","get","value","forEach","subscriber","publish","callback","push","index","findIndex","cb","splice","getOwnPropertyNames","prepLog","args","Array","from","shift","Info","Debug","Warn","Error","Settings","console","log","apply","arguments","debug","error","warn","sendMetric","event","params","Log","info","errorMetric","message","code","visible","Metric","events","options","reduce","name","types","app","page","user","media","url","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","timeupdate","volumechange","waiting","timeout","basePath","proxyUrl","asset","relPath","makeQueryString","ensureUrlWithProtocol","test","window","location","protocol","origin","makeFullStaticPath","pathname","path","charAt","cleanUpPathName","substr","slice","parts","indexOf","pop","join","operator","map","encodeURIComponent","lng","mediaUrl","Lightning","Component","localCookie","e","forceCookies","_checkIfLocalStorageWorks","getItem","_getItemLocalStorage","setItem","_setItemLocalStorage","removeItem","_removeItemLocalStorage","clear","_clearLocalStorage","_getItemCookie","_setItemCookie","_removeItemCookie","_clearCookies","localStorage","t","document","cookie","match","RegExp","replace","o","Date","r","getTime","toUTCString","namespace","lc","namespacedKey","JSON","parse","stringify","isFunction","v","isObject","isBoolean","isPage","Element","isComponentConstructor","prototype","isArray","ucfirst","toUpperCase","isString","isPromise","method","result","then","symbols","route","Symbol","hash","store","fromHistory","expires","resume","backtrack","moveOnAxes","axis","direction","bounds","Promise","resolve","patch","smooth","duration","delay","transition","on","fade","alpha","crossFade","up","down","left","right","isMergeableObject","isNonNullObject","isSpecial","stringValue","toString","call","isReactElement","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","emptyTarget","defaultArrayMerge","target","source","concat","element","getKeys","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","propertyIsOnObject","object","property","_","mergeObject","destination","propertyIsUnsafe","hasOwnProperty","getMergeFunction","customMerge","arrayMerge","sourceIsArray","all","deepmergeAll","array","prev","next","cjs","warned","deprecated","force","LocalizedString","String","sub","string","arg","Locale","__enabled","fetch","resp","json","loadFromObject","lang","language","tr","__trObj","trObj","fallbackLanguage","values","str","VersionLabel","rect","color","h","w","x","y","mount","Text","text","fontSize","lineHeight","tag","version","sdkVersion","loadTexture","renderWidth","renderHeight","FpsIndicator","texture","Tools","getRoundRect","Background","Counter","textAlign","config","interval","threshold","fps","lastFps","fpsCalculator","stage","dt","off","setInterval","showFps","bind","clearInterval","Math","abs","bgColor","setSmooth","meta","translations","setTranslations","setLanguage","reject","default","translationsObj","Utils","response","catch","registry","eventListeners","timeouts","intervals","targets","timeoutId","setTimeout","id","clearTimeout","intervalId","handler","addEventListener","targetIndex","fn","removeEventListener","_event","removeEventListeners","clearTimeouts","clearIntervals","AppInstance","defaultOptions","clearColor","canvas2d","defaultFontFace","8","13","27","37","38","39","40","174","175","178","250","191","409","App","appData","platformSettings","Application","Deepmerge","super","loadFonts","fonts","getFonts","load","locale","getLocale","loadLanguage","Metrics","loaded","c","ref","zIndex","forceZIndexContext","showVersion","childList","a","FpsCounter","_setup","closeApp","clearSubscribers","Registry","onClose","close","remove","gc","destroy","family","descriptors","fontFace","FontFace","add","promise","file","initLanguage","focus","_focussed","_refocus","innerHeight","RoutedApp","Pages","Loading","Label","Widgets","widget","_widget","restore","pages","widgets","getActivePage","running","Map","resolved","expired","rejected","active","move","bucket","has","payload","prop","records","set","delete","commands","ready","now","stop","start","command","getHash","setHash","application","widgetsHost","pagesHost","providers","modifiers","widgetsPerRoute","routeHooks","routerConfig","activeWidget","rootHash","bootRequest","activeRoute","activeHash","forcedHash","previousState","activePage","register","history","initialised","updateHash","lastHash","hasRegex","isWildcard","setupRoutes","routesConfig","bootPage","bootComponent","root","boot","beforeEachRoute","routes","component","hook","cache","before","after","beforeNavigate","stack","create","getWidgetReferences","async","routeReg","loader","state","_setState","share","doTransition","onRouteFulfilled","handleError","getPageByRoute","isConstruct","sharedInstance","provide","isCreated","mustReuse","constructor","isPageExpired","loadType","send","triggers","emit","addPersistData","hashmod","updateHistory","getPageStackLocation","isNaN","updateWidgets","cleanUp","execProvider","shared","stats","errorPage","storeHash","getMod","regStore","configPrevent","configStore","toStore","mod","routemod","urlValues","getValuesFromHash","pageData","size","k","persist","incorrectParams","pageIn","pageOut","pageTransition","easing","hasCustomTransitions","smoothIn","smoothInOut","transitionsDisabled","Transitions","p","configured","toLowerCase","lazyDestroy","destroyOnBack","keepAlive","read","doCleanup","_routedType","scale","getPageFromStack","item","j","getFloor","stripRegex","char","getRouteByHash","getUrlParts","candidates","floor","matches","entries","getRoutesByFloor","hashParts","hasLookupId","isNamedGroup","regexStore","isMatching","regMatches","fullRoute","regex","lookupId","substring","routeParts","routePart","hashPart","storeId","exec","routeRegex","expression","sort","getNamedGroup","storage","decodeURIComponent","to","handleHashChange","override","resolveHashChange","navigate","stored","idx","contents","module","urlParams","flag","mustUpdateHash","flags","reg","createRegister","step","hashLastPart","_handleAppClose","capture","parseInt","hasBootPage","URLSearchParams","getQueryStringParams","isDirectLoad","reload","focusWidget","getByRef","getWidgetByName","handleRemote","restoreFocus","updateConfig","attached","startRouter","instance","appInstance","provider","routerSettings","isObj","getConfigMap","children","_handleBack","preventDefault","_captureKey","focusPage","getActiveWidget","getActiveRoute","getActiveHash","defaultChannels","number","description","entitled","program","title","startTime","ageRating","channels","randomChannel","random","currentChannel","callbacks","methods","getChannel","channel","getProgram","setChannel","newChannel","find","ApplicationInstance","appSettings","initSettings","initUtils","plugins","profile","getInfo","setInfo","initProfile","metrics","initMetrics","mediaPlayer","initMediaPlayer","initVideoPlayer","ads","initAds","router","initRouter","tv","initTV","VideoTexture","Video","pivot","textures","StaticTexture","videoEl","_videoEl","videoView","videoTexture","isVisible","_createVideoTexture","gl","glTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","width","height","getRenderPrecision","_updateVideoTexture","videoWidth","currentTime","frameCount","webkitDecodedFrameCount","_lastFrame","_lastTime","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","expectedAspectRatio","realAspectRatio","scaleX","scaleY","forceRenderUpdate","_updatingVideoTexture","removeListener","COLOR_BUFFER_BIT","top","consumer","precision","textureMode","eventHandlers","adsEnabled","_playingAds","playingAds","fireOnConsumer","skipTime","playAfterSeek","hooks","videoPlayerPlugin","deregisterEventListeners","withPrecision","round","fire","registerEventListeners","fireHook","videoElement","style","position","parseFloat","bottom","details","canInteract","src","hide","setAttribute","enabled","videoId","caid","Ads","prerolls","show","getAttribute","open","cancel","removeAttribute","muted","looped","loop","time","max","min","seconds","seek","display","visibility","Infinity","sourceObject","setup","doSetup","getOwnPropertyDescriptor","__defineGetter__","__defineSetter__","autoSetupMixin","videoEls","getElementsByTagName","createElement","body","appendChild","setupVideoTag","el","addAt","setUpVideoTexture","getAds","midrolls","postrolls","playAd","ad","timeEvents","cleanup","handlers","sendBeacon","firstQuartile","midPoint","thirdQuartile","status","videoPlayerConsumer","preroll","slot","playSlot","ImageTexture","ws","WebSocket","ws_1","requestsQueue","listeners","notificationListener","data","normalize","socket","connect","readyState","waitForOpen","host","port","endpoint","token","makeWebsocketAddress","request","requestQueueResolver","handleConnectClosure","API","plugin","requestId","versionsConfig","getVersion","versions","jsonrpc","makeBody","connection","execRequest","DeviceInfo","res","freeram","listener","errorCallback","thunder","listener_id","makeListenerId","unregister","api","thunderJS","wrapper","unshift","assign","Proxy","propKey","err","ListItem","Item","Shadow","Title","textColor","mountX","Bg","Image","x_text","y_text","displayName","unfocus","getShadowRect","startsWith","activatedWeb","activatedLightning","activatedCobalt","activatedAmazon","webUrl","lightningUrl","nativeUrl","ThunderJS","AppApi","poll","getIP","systemcCallsign","Controller","activate","callsign","success","resolution","videoDisplay","childCallsign","uri","client","mimeType","MainView","AppList","components","ListComponent","itemSize","roll","rollMax","horizontal","itemScrollOffset","clipping","MetroApps","TVShows","settingsScreen","indexVal","notification","appApi","Storage","setVisibility","parent","_appAnimation","animation","repeat","stopMethod","actions","0","1","appItems","items","metroApps","tvShowItems","settingsItems","setPrevious","setNext","reset","fireAncestors","applicationType","launchCobalt","launchWeb","launchLightning","launchNative","launchAmazon","keyCode","suspendCobalt","deactivateWeb","deactivateLightning","killNative","suspendAmazon","settingsType","Router","SidePanelItem","SidePanel","invertDirection","sidePanelItems","text_focus","text_unfocus","resetSidePanelItems","TopPanel","Mic","mountY","Search","Time","timeZone","toLocaleDateString","updateTime","date","toLocaleString","hours","getHours","minutes","getMinutes","ampm","PlayerControls","Subtitle","NetworkLogo","TimeBar","ProgressBar","CurrentTime","TotalTime","Buttons","ControlIcon","getSvgTexture","Audio","AudioOptions","Extras","ExtrasOptions","videoDuration","_index","toggle","subtitle","logoPath","SecondsTohhmmss","SeekBar","totalSeconds","signal","hidePlayerControls","timer","PlayPause","Forward","Rewind","Hidden","AAMPVideoPlayer","signals","fastfwd","fastrwd","playbackSpeeds","playerStatesEnum","idle","initializing","paused","player","playbackRateIndex","defaultInitConfig","initialBitrate","offset","networkTimeout","preferredAudioLanguage","liveOffset","drmConfig","xPos","yPos","wPos","hPos","setVideoRect","playerState","videoInfo","positionMiliseconds","AAMPMediaPlayer","_playbackStateChanged","_mediaEndReached","_mediaSpeedChanged","_bitrateChanged","_mediaPlaybackFailed","_mediaProgressUpdate","_mediaPlaybackStarted","_mediaDurationChanged","createPlayer","configObj","initConfig","getDurationSec","rate","setPlaybackRate","getCurrentState","release","ShowControls","HideControls","appListInfo","tvShowsInfo","settingsInfo","sidePanelInfo","uiInfo","metroAppsInfo","HomeApi","HomeScreen","View","Player","homeApi","getAppListInfo","search","appdetails","appdetails_format","applications","getMetroInfo","getTVShowsInfo","getSettingsInfo","getSidePanelInfo","sidePanelData","initialLoad","home","_homeAnimation","zoomOut","_sidePanelAnimation","zoomIn","Playing","stopPlayer","BluetoothApi","_events","_devices","_pairedDevices","_connectedDevices","_thunder","getDiscoveredDevices","newStatus","getPairedDevices","getConnectedDevices","eventId","discoveredDevices","pairedDevices","connectedDevices","deviceID","deviceType","deviceId","eventType","responseValue","COLORS","shader","shaders","RoundedRectangle","radius","_item","Name","SplashScreen","Splashscreen","Cache","Img","SplashVideo","AutoRemotePair","Description","maxLines","LoadingIcon","RemoteImg","ConnectivityScreen","wordWrapWidth","UISwitch","UIList","remotePaired","hasInternet","_bt","paired","connected","deactivate","getUIInfo","image","screenTimeout","startVideo","myAnimation","stopDelay","sm","PI","startScan","registerEvent","discovered","pair","launchResident","SettingsItem","Left","BluetoothItem","Right","flex","flexItem","marginLeft","BluetoothPairingScreen","PairingScreen","List","Status","Code","BluetoothScreen","Switch","Button","Networks","PairedNetworks","margin","AvailableNetworks","marginTop","Loader","Message","loadingAnimation","_bluetooth","_activateBluetooth","_pairedNetworks","_availableNetworks","renderDeviceList","scanTimer","_pairedList","_discoveredList","_otherList","device","includes","switch","PairedDevices","_navigate","AvailableDevices","_disable","stopScan","option","disconnect","unpair","_enable","listname","dir","list","disable","enable","pinRequired","pinValue","respondToPairingRequest","getName","respondToEvent","WiFiItem","ssid","Lock","Icon","security","WiFiState","Wifi","setEnabled","moreData","ssids","pos","incremental","frequency","passphrase","securityMode","bool","inter","interface","interfaceName","Keypad","Wrapper","_scroll","wrap","_wrap","currentItem","orientation","_orientation","jump","_jump","jumpToStart","_jumpToStart","jumpToEnd","_jumpToEnd","_prevY","finalY","currentIndex","n","finalW","indexChanged","previousIndex","Empty","Filled","Key","_keyType","_fontSize","Border","BorderComponent","colorBorder","_key","content","Focus","keyType","KeyDetails","SelectionKey","_arr","fontStyle","WiFiPasswordScreen","_width","_height","_radius","_strokeWidth","keySpace","_api","Api","Entry","Pwd","wordWrap","textOverflow","Selection","Types","FunctionalKeys","Submit","setKeypad","marginRight","marginBottom","space","del","pwd","getAlphabet","getSymbols","Function","Password","password","Pair","WiFiScreen","WiFiPairingScreen","IpAddress","_wifi","WiFiApi","wifiStatus","_activateWiFi","wiFiStatus","displayIp","ip4Address","newInterfaceName","discoverSSIDs","oldInterfaceName","estb_ip","getConnectedSSID","FailureMessage","setInterface","setDefaultInterface","getDefaultInterface","SettingsScreen","Sidebar","screen","ctrlKey","errorMessage","Home","preventStorage","clearHistory","reuseInstance","XcastApi","AmazonInstantVideo","YouTube","onkeydown","xcastApi","rdkshellCallsign","xcastApps","applicationName","deactivateChildApp","onApplicationStateChanged","deactivateAmazon","deactivateCobalt","pluginStatus","supportedApps","Launch"],"mappings":"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"}