{"version":3,"file":"appBundle.js","sources":["../node_modules/@lightningjs/sdk/src/Settings/index.js","../node_modules/@lightningjs/sdk/src/Log/index.js","../node_modules/@lightningjs/sdk/src/Metrics/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/events.js","../node_modules/@lightningjs/sdk/src/helpers/easeExecution.js","../node_modules/@lightningjs/sdk/src/Utils/index.js","../node_modules/@lightningjs/sdk/src/Profile/helpers.js","../node_modules/@lightningjs/sdk/src/Profile/defaults.js","../node_modules/@lightningjs/sdk/src/Profile/index.js","../../../../../../Users/deepak.p/AppData/Roaming/npm/node_modules/@lightningjs/cli/src/alias/lightningjs-core.js","../node_modules/@lightningjs/sdk/src/MediaPlayer/index.js","../node_modules/localCookie/module/localCookie.js","../node_modules/@lightningjs/sdk/src/Storage/index.js","../node_modules/@lightningjs/sdk/src/Router/utils.js","../node_modules/@lightningjs/sdk/src/Router/transitions.js","../node_modules/deepmerge/dist/cjs.js","../node_modules/@lightningjs/sdk/src/Locale/index.js","../node_modules/@lightningjs/sdk/src/VersionLabel/index.js","../node_modules/@lightningjs/sdk/src/FpsCounter/index.js","../node_modules/@lightningjs/sdk/src/Language/index.js","../node_modules/@lightningjs/sdk/src/Registry/index.js","../node_modules/@lightningjs/sdk/src/Application/index.js","../node_modules/@lightningjs/sdk/src/Router/base.js","../node_modules/@lightningjs/sdk/src/Router/stats.js","../node_modules/@lightningjs/sdk/src/Router/index.js","../node_modules/@lightningjs/sdk/src/TV/defaults.js","../node_modules/@lightningjs/sdk/src/TV/index.js","../node_modules/@lightningjs/sdk/src/Launch/index.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/VideoTexture.js","../node_modules/@lightningjs/sdk/src/VideoPlayer/index.js","../node_modules/@lightningjs/sdk/src/Ads/index.js","../node_modules/@lightningjs/sdk/src/helpers/autoSetupMixin.js","../node_modules/@lightningjs/sdk/src/Img/ScaledImageTexture.js","../node_modules/@lightningjs/sdk/src/Pin/dialog.js","../src/items/ListItem.js","../node_modules/ThunderJS/module/thunderJS.js","../src/api/AppApi.js","../src/player/PlayerControl.js","../src/views/MainView.js","../src/items/SidePanelItem.js","../src/views/SidePanel.js","../src/views/TopPanel.js","../src/player/AAMPVideoPlayer.js","../static/data/AppListInfo.js","../static/data/TvShowsInfo.js","../static/data/SettingsInfo.js","../static/data/SidePanelInfo.js","../static/data/UIInfo.js","../src/api/HomeApi.js","../src/screens/HomeScreen.js","../src/api/BluetoothApi.js","../src/colors/Colors.js","../src/items/item.js","../src/screens/SplashScreen.js","../src/items/SettingsItem.js","../src/items/BluetoothItem.js","../src/screens/BluetoothPairingScreen.js","../src/screens/BluetoothScreen.js","../src/items/WiFiItem.js","../src/api/WifiApi.js","../src/screens/wifipasswordscreen/Keypad.js","../src/screens/wifipasswordscreen/Key.js","../src/screens/wifipasswordscreen/KeyDetails.js","../src/screens/wifipasswordscreen/SelectionKey.js","../src/screens/wifipasswordscreen/WiFiPasswordScreen.js","../src/screens/WiFiPairingScreen.js","../src/screens/WifiScreen.js","../src/screens/SettingsScreen.js","../src/screens/Error.js","../src/api/routes.js","../src/App.js","../src/index.js"],"sourcesContent":["/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst settings = {}\nconst subscribers = {}\n\nexport const initSettings = (appSettings, platformSettings) => {\n  settings['app'] = appSettings\n  settings['platform'] = platformSettings\n  settings['user'] = {}\n}\n\nconst publish = (key, value) => {\n  subscribers[key] && subscribers[key].forEach(subscriber => subscriber(value))\n}\n\nconst dotGrab = (obj = {}, key) => {\n  const keys = key.split('.')\n  for (let i = 0; i < keys.length; i++) {\n    obj = obj[keys[i]] = obj[keys[i]] !== undefined ? obj[keys[i]] : {}\n  }\n  return typeof obj === 'object' ? (Object.keys(obj).length ? obj : undefined) : obj\n}\n\nexport default {\n  get(type, key, fallback = undefined) {\n    const val = dotGrab(settings[type], key)\n    return val !== undefined ? val : fallback\n  },\n  has(type, key) {\n    return !!this.get(type, key)\n  },\n  set(key, value) {\n    settings['user'][key] = value\n    publish(key, value)\n  },\n  subscribe(key, callback) {\n    subscribers[key] = subscribers[key] || []\n    subscribers[key].push(callback)\n  },\n  unsubscribe(key, callback) {\n    if (callback) {\n      const index = subscribers[key] && subscribers[key].findIndex(cb => cb === callback)\n      index > -1 && subscribers[key].splice(index, 1)\n    } else {\n      if (key in subscribers) {\n        subscribers[key] = []\n      }\n    }\n  },\n  clearSubscribers() {\n    for (const key of Object.getOwnPropertyNames(subscribers)) {\n      delete subscribers[key]\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst prepLog = (type, args) => {\n  const colors = {\n    Info: 'green',\n    Debug: 'gray',\n    Warn: 'orange',\n    Error: 'red',\n  }\n\n  args = Array.from(args)\n  return [\n    '%c' + (args.length > 1 && typeof args[0] === 'string' ? args.shift() : type),\n    'background-color: ' + colors[type] + '; color: white; padding: 2px 4px; border-radius: 2px',\n    args,\n  ]\n}\n\nexport default {\n  info() {\n    Settings.get('platform', 'log') && console.log.apply(console, prepLog('Info', arguments))\n  },\n  debug() {\n    Settings.get('platform', 'log') && console.debug.apply(console, prepLog('Debug', arguments))\n  },\n  error() {\n    Settings.get('platform', 'log') && console.error.apply(console, prepLog('Error', arguments))\n  },\n  warn() {\n    Settings.get('platform', 'log') && console.warn.apply(console, prepLog('Warn', arguments))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nlet sendMetric = (type, event, params) => {\n  Log.info('Sending metric', type, event, params)\n}\n\nexport const initMetrics = config => {\n  sendMetric = config.sendMetric\n}\n\n// available metric per category\nconst metrics = {\n  app: ['launch', 'loaded', 'ready', 'close'],\n  page: ['view', 'leave'],\n  user: ['click', 'input'],\n  media: [\n    'abort',\n    'canplay',\n    'ended',\n    'pause',\n    'play',\n    // with some videos there occur almost constant suspend events ... should investigate\n    // 'suspend',\n    'volumechange',\n    'waiting',\n    'seeking',\n    'seeked',\n  ],\n}\n\n// error metric function (added to each category)\nconst errorMetric = (type, message, code, visible, params = {}) => {\n  params = { params, ...{ message, code, visible } }\n  sendMetric(type, 'error', params)\n}\n\nconst Metric = (type, events, options = {}) => {\n  return events.reduce(\n    (obj, event) => {\n      obj[event] = (name, params = {}) => {\n        params = { ...options, ...(name ? { name } : {}), ...params }\n        sendMetric(type, event, params)\n      }\n      return obj\n    },\n    {\n      error(message, code, params) {\n        errorMetric(type, message, code, params)\n      },\n      event(name, params) {\n        sendMetric(type, name, params)\n      },\n    }\n  )\n}\n\nconst Metrics = types => {\n  return Object.keys(types).reduce(\n    (obj, type) => {\n      // media metric works a bit different!\n      // it's a function that accepts a url and returns an object with the available metrics\n      // url is automatically passed as a param in every metric\n      type === 'media'\n        ? (obj[type] = url => Metric(type, types[type], { url }))\n        : (obj[type] = Metric(type, types[type]))\n      return obj\n    },\n    { error: errorMetric, event: sendMetric }\n  )\n}\n\nexport default Metrics(metrics)\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default {\n  abort: 'Abort',\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  durationchange: 'DurationChange',\n  emptied: 'Emptied',\n  encrypted: 'Encrypted',\n  ended: 'Ended',\n  error: 'Error',\n  interruptbegin: 'InterruptBegin',\n  interruptend: 'InterruptEnd',\n  loadeddata: 'LoadedData',\n  loadedmetadata: 'LoadedMetadata',\n  loadstart: 'LoadStart',\n  pause: 'Pause',\n  play: 'Play',\n  playing: 'Playing',\n  progress: 'Progress',\n  ratechange: 'Ratechange',\n  seeked: 'Seeked',\n  seeking: 'Seeking',\n  stalled: 'Stalled',\n  // suspend: 'Suspend', // this one is called a looooot for some videos\n  timeupdate: 'TimeUpdate',\n  volumechange: 'VolumeChange',\n  waiting: 'Waiting',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet timeout = null\n\nexport default (cb, delay) => {\n  clearTimeout(timeout)\n  timeout = setTimeout(() => {\n    cb()\n  }, delay)\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet basePath\nlet proxyUrl\n\nexport const initUtils = config => {\n  basePath = ensureUrlWithProtocol(makeFullStaticPath(window.location.pathname, config.path || '/'))\n\n  if (config.proxyUrl) {\n    proxyUrl = ensureUrlWithProtocol(config.proxyUrl)\n  }\n}\n\nexport default {\n  asset(relPath) {\n    return basePath + relPath\n  },\n  proxyUrl(url, options = {}) {\n    return proxyUrl ? proxyUrl + '?' + makeQueryString(url, options) : url\n  },\n  makeQueryString() {\n    return makeQueryString(...arguments)\n  },\n  // since imageworkers don't work without protocol\n  ensureUrlWithProtocol() {\n    return ensureUrlWithProtocol(...arguments)\n  },\n}\n\nexport const ensureUrlWithProtocol = url => {\n  if (/^\\/\\//.test(url)) {\n    return window.location.protocol + url\n  }\n  if (!/^(?:https?:)/i.test(url)) {\n    return window.location.origin + url\n  }\n  return url\n}\n\nexport const makeFullStaticPath = (pathname = '/', path) => {\n  // ensure path has traling slash\n  path = path.charAt(path.length - 1) !== '/' ? path + '/' : path\n\n  // if path is URL, we assume it's already the full static path, so we just return it\n  if (/^(?:https?:)?(?:\\/\\/)/.test(path)) {\n    return path\n  }\n\n  if (path.charAt(0) === '/') {\n    return path\n  } else {\n    // cleanup the pathname (i.e. remove possible index.html)\n    pathname = cleanUpPathName(pathname)\n\n    // remove possible leading dot from path\n    path = path.charAt(0) === '.' ? path.substr(1) : path\n    // ensure path has leading slash\n    path = path.charAt(0) !== '/' ? '/' + path : path\n    return pathname + path\n  }\n}\n\nexport const cleanUpPathName = pathname => {\n  if (pathname.slice(-1) === '/') return pathname.slice(0, -1)\n  const parts = pathname.split('/')\n  if (parts[parts.length - 1].indexOf('.') > -1) parts.pop()\n  return parts.join('/')\n}\n\nconst makeQueryString = (url, options = {}, type = 'url') => {\n  // add operator as an option\n  options.operator = 'metrological' // Todo: make this configurable (via url?)\n  // add type (= url or qr) as an option, with url as the value\n  options[type] = url\n\n  return Object.keys(options)\n    .map(key => {\n      return encodeURIComponent(key) + '=' + encodeURIComponent('' + options[key])\n    })\n    .join('&')\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst formatLocale = locale => {\n  if (locale && locale.length === 2) {\n    return `${locale.toLowerCase()}-${locale.toUpperCase()}`\n  } else {\n    return locale\n  }\n}\n\nexport const getLocale = defaultValue => {\n  if ('language' in navigator) {\n    const locale = formatLocale(navigator.language)\n    return Promise.resolve(locale)\n  } else {\n    return Promise.resolve(defaultValue)\n  }\n}\n\nexport const getLanguage = defaultValue => {\n  if ('language' in navigator) {\n    const language = formatLocale(navigator.language).slice(0, 2)\n    return Promise.resolve(language)\n  } else {\n    return Promise.resolve(defaultValue)\n  }\n}\n\nexport const getCountryCode = defaultValue => {\n  if ('language' in navigator) {\n    const countryCode = formatLocale(navigator.language).slice(3, 5)\n    return Promise.resolve(countryCode)\n  } else {\n    return Promise.resolve(defaultValue)\n  }\n}\n\nconst hasOrAskForGeoLocationPermission = () => {\n  return new Promise(resolve => {\n    // force to prompt for location permission\n    if (Settings.get('platform', 'forceBrowserGeolocation') === true) resolve(true)\n    if ('permissions' in navigator && typeof navigator.permissions.query === 'function') {\n      navigator.permissions.query({ name: 'geolocation' }).then(status => {\n        resolve(status.state === 'granted' || status.status === 'granted')\n      })\n    } else {\n      resolve(false)\n    }\n  })\n}\n\nexport const getLatLon = defaultValue => {\n  return new Promise(resolve => {\n    hasOrAskForGeoLocationPermission().then(granted => {\n      if (granted === true) {\n        if ('geolocation' in navigator) {\n          navigator.geolocation.getCurrentPosition(\n            // success\n            result =>\n              result && result.coords && resolve([result.coords.latitude, result.coords.longitude]),\n            // error\n            () => resolve(defaultValue),\n            // options\n            {\n              enableHighAccuracy: true,\n              timeout: 5000,\n              maximumAge: 0,\n            }\n          )\n        } else {\n          return queryForLatLon().then(result => resolve(result || defaultValue))\n        }\n      } else {\n        return queryForLatLon().then(result => resolve(result || defaultValue))\n      }\n    })\n  })\n}\n\nconst queryForLatLon = () => {\n  return new Promise(resolve => {\n    fetch('https://geolocation-db.com/json/')\n      .then(response => response.json())\n      .then(({ latitude, longitude }) =>\n        latitude && longitude ? resolve([latitude, longitude]) : resolve(false)\n      )\n      .catch(() => resolve(false))\n  })\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getLocale, getLanguage, getCountryCode, getLatLon } from './helpers'\n\nexport const defaultProfile = {\n  ageRating: 'adult',\n  city: 'New York',\n  zipCode: '27505',\n  countryCode: () => getCountryCode('US'),\n  ip: '127.0.0.1',\n  household: 'b2244e9d4c04826ccd5a7b2c2a50e7d4',\n  language: () => getLanguage('en'),\n  latlon: () => getLatLon([40.7128, 74.006]),\n  locale: () => getLocale('en-US'),\n  mac: '00:00:00:00:00:00',\n  operator: 'Metrological',\n  platform: 'Metrological',\n  packages: [],\n  uid: 'ee6723b8-7ab3-462c-8d93-dbf61227998e',\n  stbType: 'Metrological',\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport { defaultProfile } from './defaults'\n\nlet getInfo = key => {\n  const profile = { ...defaultProfile, ...Settings.get('platform', 'profile') }\n  return Promise.resolve(typeof profile[key] === 'function' ? profile[key]() : profile[key])\n}\n\nlet setInfo = (key, params) => {\n  if (key in defaultProfile) defaultProfile[key] = params\n}\n\nexport const initProfile = config => {\n  getInfo = config.getInfo\n  setInfo = config.setInfo\n}\n\nconst getOrSet = (key, params) => (params ? setInfo(key, params) : getInfo(key))\n\n// public API\nexport default {\n  ageRating(params) {\n    return getOrSet('ageRating', params)\n  },\n  city(params) {\n    return getOrSet('city', params)\n  },\n  zipCode(params) {\n    return getOrSet('zipCode', params)\n  },\n  countryCode(params) {\n    return getOrSet('countryCode', params)\n  },\n  ip(params) {\n    return getOrSet('ip', params)\n  },\n  household(params) {\n    return getOrSet('household', params)\n  },\n  language(params) {\n    return getOrSet('language', params)\n  },\n  latlon(params) {\n    return getOrSet('latlon', params)\n  },\n  locale(params) {\n    return getOrSet('locale', params)\n  },\n  mac(params) {\n    return getOrSet('mac', params)\n  },\n  operator(params) {\n    return getOrSet('operator', params)\n  },\n  platform(params) {\n    return getOrSet('platform', params)\n  },\n  packages(params) {\n    return getOrSet('packages', params)\n  },\n  uid(params) {\n    return getOrSet('uid', params)\n  },\n  stbType(params) {\n    return getOrSet('stbType', params)\n  },\n}\n","/*\r\n * If not stated otherwise in this file or this component's LICENSE file the\r\n * following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the License);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nexport default window.lng\r\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Metrics from '../Metrics'\nimport Settings from '../Settings'\nimport Log from '../Log'\n\nconst events = [\n  'timeupdate',\n  'error',\n  'ended',\n  'loadeddata',\n  'canplay',\n  'play',\n  'playing',\n  'pause',\n  'loadstart',\n  'seeking',\n  'seeked',\n  'encrypted',\n]\n\nlet mediaUrl = url => url\n\nexport const initMediaPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\nexport default class Mediaplayer extends Lightning.Component {\n  _construct() {\n    this._skipRenderToTexture = false\n    this._metrics = null\n    this._textureMode = Settings.get('platform', 'textureMode') || false\n    Log.info('Texture mode: ' + this._textureMode)\n  }\n\n  static _template() {\n    return {\n      Video: {\n        VideoWrap: {\n          VideoTexture: {\n            visible: false,\n            pivot: 0.5,\n            texture: { type: Lightning.textures.StaticTexture, options: {} },\n          },\n        },\n      },\n    }\n  }\n\n  set skipRenderToTexture(v) {\n    this._skipRenderToTexture = v\n  }\n\n  get textureMode() {\n    return this._textureMode\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  _init() {\n    //re-use videotag if already there\n    const videoEls = document.getElementsByTagName('video')\n    if (videoEls && videoEls.length > 0) this.videoEl = videoEls[0]\n    else {\n      this.videoEl = document.createElement('video')\n      this.videoEl.setAttribute('id', 'video-player')\n      this.videoEl.style.position = 'absolute'\n      this.videoEl.style.zIndex = '1'\n      this.videoEl.style.display = 'none'\n      this.videoEl.setAttribute('width', '100%')\n      this.videoEl.setAttribute('height', '100%')\n\n      this.videoEl.style.visibility = this.textureMode ? 'hidden' : 'visible'\n      document.body.appendChild(this.videoEl)\n    }\n    if (this.textureMode && !this._skipRenderToTexture) {\n      this._createVideoTexture()\n    }\n\n    this.eventHandlers = []\n  }\n\n  _registerListeners() {\n    events.forEach(event => {\n      const handler = e => {\n        if (this._metrics && this._metrics[event] && typeof this._metrics[event] === 'function') {\n          this._metrics[event]({ currentTime: this.videoEl.currentTime })\n        }\n        this.fire(event, { videoElement: this.videoEl, event: e })\n      }\n      this.eventHandlers.push(handler)\n      this.videoEl.addEventListener(event, handler)\n    })\n  }\n\n  _deregisterListeners() {\n    Log.info('Deregistering event listeners MediaPlayer')\n    events.forEach((event, index) => {\n      this.videoEl.removeEventListener(event, this.eventHandlers[index])\n    })\n    this.eventHandlers = []\n  }\n\n  _attach() {\n    this._registerListeners()\n  }\n\n  _detach() {\n    this._deregisterListeners()\n    this.close()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n  }\n\n  _startUpdatingVideoTexture() {\n    if (this.textureMode && !this._skipRenderToTexture) {\n      const stage = this.stage\n      if (!this._updateVideoTexture) {\n        this._updateVideoTexture = () => {\n          if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n            const gl = stage.gl\n\n            const currentTime = new Date().getTime()\n\n            // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n            // We'll fallback to fixed 30fps in this case.\n            const frameCount = this.videoEl.webkitDecodedFrameCount\n\n            const mustUpdate = frameCount\n              ? this._lastFrame !== frameCount\n              : this._lastTime < currentTime - 30\n\n            if (mustUpdate) {\n              this._lastTime = currentTime\n              this._lastFrame = frameCount\n              try {\n                gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n                this._lastFrame = this.videoEl.webkitDecodedFrameCount\n                this.videoTextureView.visible = true\n\n                this.videoTexture.options.w = this.videoEl.videoWidth\n                this.videoTexture.options.h = this.videoEl.videoHeight\n                const expectedAspectRatio = this.videoTextureView.w / this.videoTextureView.h\n                const realAspectRatio = this.videoEl.videoWidth / this.videoEl.videoHeight\n                if (expectedAspectRatio > realAspectRatio) {\n                  this.videoTextureView.scaleX = realAspectRatio / expectedAspectRatio\n                  this.videoTextureView.scaleY = 1\n                } else {\n                  this.videoTextureView.scaleY = expectedAspectRatio / realAspectRatio\n                  this.videoTextureView.scaleX = 1\n                }\n              } catch (e) {\n                Log.error('texImage2d video', e)\n                this._stopUpdatingVideoTexture()\n                this.videoTextureView.visible = false\n              }\n              this.videoTexture.source.forceRenderUpdate()\n            }\n          }\n        }\n      }\n      if (!this._updatingVideoTexture) {\n        stage.on('frameStart', this._updateVideoTexture)\n        this._updatingVideoTexture = true\n      }\n    }\n  }\n\n  _stopUpdatingVideoTexture() {\n    if (this.textureMode) {\n      const stage = this.stage\n      stage.removeListener('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = false\n      this.videoTextureView.visible = false\n\n      if (this.videoTexture.options.source) {\n        const gl = stage.gl\n        gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n        gl.clearColor(0, 0, 0, 1)\n        gl.clear(gl.COLOR_BUFFER_BIT)\n      }\n    }\n  }\n\n  updateSettings(settings = {}) {\n    // The Component that 'consumes' the media player.\n    this._consumer = settings.consumer\n\n    if (this._consumer && this._consumer.getMediaplayerSettings) {\n      // Allow consumer to add settings.\n      settings = Object.assign(settings, this._consumer.getMediaplayerSettings())\n    }\n\n    if (!Lightning.Utils.equalValues(this._stream, settings.stream)) {\n      if (settings.stream && settings.stream.keySystem) {\n        navigator\n          .requestMediaKeySystemAccess(\n            settings.stream.keySystem.id,\n            settings.stream.keySystem.config\n          )\n          .then(keySystemAccess => {\n            return keySystemAccess.createMediaKeys()\n          })\n          .then(createdMediaKeys => {\n            return this.videoEl.setMediaKeys(createdMediaKeys)\n          })\n          .then(() => {\n            if (settings.stream && settings.stream.src) this.open(settings.stream.src)\n          })\n          .catch(() => {\n            console.error('Failed to set up MediaKeys')\n          })\n      } else if (settings.stream && settings.stream.src) {\n        // This is here to be backwards compatible, will be removed\n        // in future sdk release\n        if (Settings.get('app', 'hls')) {\n          if (!window.Hls) {\n            window.Hls = class Hls {\n              static isSupported() {\n                console.warn('hls-light not included')\n                return false\n              }\n            }\n          }\n          if (window.Hls.isSupported()) {\n            if (!this._hls) this._hls = new window.Hls({ liveDurationInfinity: true })\n            this._hls.loadSource(settings.stream.src)\n            this._hls.attachMedia(this.videoEl)\n            this.videoEl.style.display = 'block'\n          }\n        } else {\n          this.open(settings.stream.src)\n        }\n      } else {\n        this.close()\n      }\n      this._stream = settings.stream\n    }\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPos)\n  }\n\n  _setHide(hide) {\n    if (this.textureMode) {\n      this.tag('Video').setSmooth('alpha', hide ? 0 : 1)\n    } else {\n      this.videoEl.style.visibility = hide ? 'hidden' : 'visible'\n    }\n  }\n\n  open(url, settings = { hide: false, videoPosition: null }) {\n    // prep the media url to play depending on platform (mediaPlayerplugin)\n    url = mediaUrl(url)\n    this._metrics = Metrics.media(url)\n    Log.info('Playing stream', url)\n    if (this.application.noVideo) {\n      Log.info('noVideo option set, so ignoring: ' + url)\n      return\n    }\n    // close the video when opening same url as current (effectively reloading)\n    if (this.videoEl.getAttribute('src') === url) {\n      this.close()\n    }\n    this.videoEl.setAttribute('src', url)\n\n    // force hide, then force show (in next tick!)\n    // (fixes comcast playback rollover issue)\n    this.videoEl.style.visibility = 'hidden'\n    this.videoEl.style.display = 'none'\n\n    setTimeout(() => {\n      this.videoEl.style.display = 'block'\n      this.videoEl.style.visibility = 'visible'\n    })\n\n    this._setHide(settings.hide)\n    this._setVideoArea(settings.videoPosition || [0, 0, 1920, 1080])\n  }\n\n  close() {\n    // We need to pause first in order to stop sound.\n    this.videoEl.pause()\n    this.videoEl.removeAttribute('src')\n\n    // force load to reset everything without errors\n    this.videoEl.load()\n\n    this._clearSrc()\n\n    this.videoEl.style.display = 'none'\n  }\n\n  playPause() {\n    if (this.isPlaying()) {\n      this.doPause()\n    } else {\n      this.doPlay()\n    }\n  }\n\n  get muted() {\n    return this.videoEl.muted\n  }\n\n  set muted(v) {\n    this.videoEl.muted = v\n  }\n\n  get loop() {\n    return this.videoEl.loop\n  }\n\n  set loop(v) {\n    this.videoEl.loop = v\n  }\n\n  isPlaying() {\n    return this._getState() === 'Playing'\n  }\n\n  doPlay() {\n    this.videoEl.play()\n  }\n\n  doPause() {\n    this.videoEl.pause()\n  }\n\n  reload() {\n    var url = this.videoEl.getAttribute('src')\n    this.close()\n    this.videoEl.src = url\n  }\n\n  getPosition() {\n    return Promise.resolve(this.videoEl.currentTime)\n  }\n\n  setPosition(pos) {\n    this.videoEl.currentTime = pos\n  }\n\n  getDuration() {\n    return Promise.resolve(this.videoEl.duration)\n  }\n\n  seek(time, absolute = false) {\n    if (absolute) {\n      this.videoEl.currentTime = time\n    } else {\n      this.videoEl.currentTime += time\n    }\n  }\n\n  get videoTextureView() {\n    return this.tag('Video').tag('VideoTexture')\n  }\n\n  get videoTexture() {\n    return this.videoTextureView.texture\n  }\n\n  _setVideoArea(videoPos) {\n    if (Lightning.Utils.equalValues(this._videoPos, videoPos)) {\n      return\n    }\n\n    this._videoPos = videoPos\n\n    if (this.textureMode) {\n      this.videoTextureView.patch({\n        smooth: {\n          x: videoPos[0],\n          y: videoPos[1],\n          w: videoPos[2] - videoPos[0],\n          h: videoPos[3] - videoPos[1],\n        },\n      })\n    } else {\n      const precision = this.stage.getRenderPrecision()\n      this.videoEl.style.left = Math.round(videoPos[0] * precision) + 'px'\n      this.videoEl.style.top = Math.round(videoPos[1] * precision) + 'px'\n      this.videoEl.style.width = Math.round((videoPos[2] - videoPos[0]) * precision) + 'px'\n      this.videoEl.style.height = Math.round((videoPos[3] - videoPos[1]) * precision) + 'px'\n    }\n  }\n\n  _fireConsumer(event, args) {\n    if (this._consumer) {\n      this._consumer.fire(event, args)\n    }\n  }\n\n  _equalInitData(buf1, buf2) {\n    if (!buf1 || !buf2) return false\n    if (buf1.byteLength != buf2.byteLength) return false\n    const dv1 = new Int8Array(buf1)\n    const dv2 = new Int8Array(buf2)\n    for (let i = 0; i != buf1.byteLength; i++) if (dv1[i] != dv2[i]) return false\n    return true\n  }\n\n  error(args) {\n    this._fireConsumer('$mediaplayerError', args)\n    this._setState('')\n    return ''\n  }\n\n  loadeddata(args) {\n    this._fireConsumer('$mediaplayerLoadedData', args)\n  }\n\n  play(args) {\n    this._fireConsumer('$mediaplayerPlay', args)\n  }\n\n  playing(args) {\n    this._fireConsumer('$mediaplayerPlaying', args)\n    this._setState('Playing')\n  }\n\n  canplay(args) {\n    this.videoEl.play()\n    this._fireConsumer('$mediaplayerStart', args)\n  }\n\n  loadstart(args) {\n    this._fireConsumer('$mediaplayerLoad', args)\n  }\n\n  seeked() {\n    this._fireConsumer('$mediaplayerSeeked', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  seeking() {\n    this._fireConsumer('$mediaplayerSeeking', {\n      currentTime: this.videoEl.currentTime,\n      duration: this.videoEl.duration || 1,\n    })\n  }\n\n  durationchange(args) {\n    this._fireConsumer('$mediaplayerDurationChange', args)\n  }\n\n  encrypted(args) {\n    const video = args.videoElement\n    const event = args.event\n    // FIXME: Double encrypted events need to be properly filtered by Gstreamer\n    if (video.mediaKeys && !this._equalInitData(this._previousInitData, event.initData)) {\n      this._previousInitData = event.initData\n      this._fireConsumer('$mediaplayerEncrypted', args)\n    }\n  }\n\n  static _states() {\n    return [\n      class Playing extends this {\n        $enter() {\n          this._startUpdatingVideoTexture()\n        }\n        $exit() {\n          this._stopUpdatingVideoTexture()\n        }\n        timeupdate() {\n          this._fireConsumer('$mediaplayerProgress', {\n            currentTime: this.videoEl.currentTime,\n            duration: this.videoEl.duration || 1,\n          })\n        }\n        ended(args) {\n          this._fireConsumer('$mediaplayerEnded', args)\n          this._setState('')\n        }\n        pause(args) {\n          this._fireConsumer('$mediaplayerPause', args)\n          this._setState('Playing.Paused')\n        }\n        _clearSrc() {\n          this._fireConsumer('$mediaplayerStop', {})\n          this._setState('')\n        }\n        static _states() {\n          return [class Paused extends this {}]\n        }\n      },\n    ]\n  }\n}\n","class localCookie{constructor(e){return e=e||{},this.forceCookies=e.forceCookies||!1,!0===this._checkIfLocalStorageWorks()&&!0!==e.forceCookies?{getItem:this._getItemLocalStorage,setItem:this._setItemLocalStorage,removeItem:this._removeItemLocalStorage,clear:this._clearLocalStorage}:{getItem:this._getItemCookie,setItem:this._setItemCookie,removeItem:this._removeItemCookie,clear:this._clearCookies}}_checkIfLocalStorageWorks(){if(\"undefined\"==typeof localStorage)return!1;try{return localStorage.setItem(\"feature_test\",\"yes\"),\"yes\"===localStorage.getItem(\"feature_test\")&&(localStorage.removeItem(\"feature_test\"),!0)}catch(e){return!1}}_getItemLocalStorage(e){return window.localStorage.getItem(e)}_setItemLocalStorage(e,t){return window.localStorage.setItem(e,t)}_removeItemLocalStorage(e){return window.localStorage.removeItem(e)}_clearLocalStorage(){return window.localStorage.clear()}_getItemCookie(e){var t=document.cookie.match(RegExp(\"(?:^|;\\\\s*)\"+function(e){return e.replace(/([.*+?\\^${}()|\\[\\]\\/\\\\])/g,\"\\\\$1\")}(e)+\"=([^;]*)\"));return t&&\"\"===t[1]&&(t[1]=null),t?t[1]:null}_setItemCookie(e,t){document.cookie=`${e}=${t}`}_removeItemCookie(e){document.cookie=`${e}=;Max-Age=-99999999;`}_clearCookies(){document.cookie.split(\";\").forEach(e=>{document.cookie=e.replace(/^ +/,\"\").replace(/=.*/,\"=;expires=Max-Age=-99999999\")})}}export default localCookie;\r\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\nimport localCookie from 'localCookie'\n\nlet namespace\nlet lc\n\nexport const initStorage = () => {\n  namespace = Settings.get('platform', 'appId')\n  // todo: pass options (for example to force the use of cookies)\n  lc = new localCookie()\n}\n\nconst namespacedKey = key => (namespace ? [namespace, key].join('.') : key)\n\nexport default {\n  get(key) {\n    try {\n      return JSON.parse(lc.getItem(namespacedKey(key)))\n    } catch (e) {\n      return null\n    }\n  },\n  set(key, value) {\n    try {\n      lc.setItem(namespacedKey(key), JSON.stringify(value))\n      return true\n    } catch (e) {\n      return false\n    }\n  },\n  remove(key) {\n    lc.removeItem(namespacedKey(key))\n  },\n  clear() {\n    if (namespace) {\n      lc.keys().forEach(key => {\n        // remove the item if in the namespace\n        key.indexOf(namespace + '.') === 0 ? lc.removeItem(key) : null\n      })\n    } else {\n      lc.clear()\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\n\nexport const isFunction = v => {\n  return typeof v === 'function'\n}\n\nexport const isObject = v => {\n  return typeof v === 'object' && v !== null\n}\n\nexport const isBoolean = v => {\n  return typeof v === 'boolean'\n}\n\nexport const isPage = v => {\n  if (v instanceof Lightning.Element || isComponentConstructor(v)) {\n    return true\n  }\n  return false\n}\n\nexport const isComponentConstructor = type => {\n  return type.prototype && 'isComponent' in type.prototype\n}\n\nexport const isArray = v => {\n  return Array.isArray(v)\n}\n\nexport const ucfirst = v => {\n  return `${v.charAt(0).toUpperCase()}${v.slice(1)}`\n}\n\nexport const isString = v => {\n  return typeof v === 'string'\n}\n\nexport const isPromise = (method, args) => {\n  let result\n  if (isFunction(method)) {\n    try {\n      result = method.apply(null)\n    } catch (e) {\n      result = e\n    }\n  } else {\n    result = method\n  }\n  return isObject(result) && isFunction(result.then)\n}\n\nexport const getConfigMap = () => {\n  const routerSettings = Settings.get('platform', 'router')\n  const isObj = isObject(routerSettings)\n  return [\n    'backtrack',\n    'gcOnUnload',\n    'destroyOnHistoryBack',\n    'lazyCreate',\n    'lazyDestroy',\n    'reuseInstance',\n    'autoRestoreRemote',\n    'numberNavigation',\n    'updateHash',\n  ].reduce((config, key) => {\n    config.set(key, isObj ? routerSettings[key] : Settings.get('platform', key))\n    return config\n  }, new Map())\n}\n\nexport const incorrectParams = (cb, route) => {\n  const isIncorrect = /^\\w*?\\s?\\(\\s?\\{.*?\\}\\s?\\)/i\n  if (isIncorrect.test(cb.toString())) {\n    console.warn(\n      [\n        `DEPRECATION: The data-provider for route: ${route} is not correct.`,\n        '\"page\" is no longer a property of the params object but is now the first function parameter: ',\n        'https://github.com/rdkcentral/Lightning-SDK/blob/feature/router/docs/plugins/router/dataproviding.md#data-providing',\n        \"It's supported for now but will be removed in a future release.\",\n      ].join('\\n')\n    )\n    return true\n  }\n  return false\n}\n\nexport const getQueryStringParams = hash => {\n  const getQuery = /([?&].*)/\n  const matches = getQuery.exec(hash)\n  const params = {}\n\n  if (matches && matches.length) {\n    const urlParams = new URLSearchParams(matches[1])\n    for (const [key, value] of urlParams.entries()) {\n      params[key] = value\n    }\n    return params\n  }\n  return false\n}\n\nexport const symbols = {\n  route: Symbol('route'),\n  hash: Symbol('hash'),\n  store: Symbol('store'),\n  fromHistory: Symbol('fromHistory'),\n  expires: Symbol('expires'),\n  resume: Symbol('resume'),\n  backtrack: Symbol('backtrack'),\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst fade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      if (o) {\n        o.visible = false\n      }\n      resolve()\n    })\n  })\n}\n\nconst crossFade = (i, o) => {\n  return new Promise(resolve => {\n    i.patch({\n      alpha: 0,\n      visible: true,\n      smooth: {\n        alpha: [1, { duration: 0.5, delay: 0.1 }],\n      },\n    })\n    if (o) {\n      o.patch({\n        smooth: {\n          alpha: [0, { duration: 0.5, delay: 0.3 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition('alpha').on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst moveOnAxes = (axis, direction, i, o) => {\n  const bounds = axis === 'x' ? 1920 : 1080\n  return new Promise(resolve => {\n    i.patch({\n      [`${axis}`]: direction ? bounds * -1 : bounds,\n      visible: true,\n      smooth: {\n        [`${axis}`]: [0, { duration: 0.4, delay: 0.2 }],\n      },\n    })\n    // out is optional\n    if (o) {\n      o.patch({\n        [`${axis}`]: 0,\n        smooth: {\n          [`${axis}`]: [direction ? bounds : bounds * -1, { duration: 0.4, delay: 0.2 }],\n        },\n      })\n    }\n    // resolve on y finish\n    i.transition(axis).on('finish', () => {\n      resolve()\n    })\n  })\n}\n\nconst up = (i, o) => {\n  return moveOnAxes('y', 0, i, o)\n}\n\nconst down = (i, o) => {\n  return moveOnAxes('y', 1, i, o)\n}\n\nconst left = (i, o) => {\n  return moveOnAxes('x', 0, i, o)\n}\n\nconst right = (i, o) => {\n  return moveOnAxes('x', 1, i, o)\n}\n\nexport default {\n  fade,\n  crossFade,\n  up,\n  down,\n  left,\n  right,\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Simple module for localization of strings.\n *\n * How to use:\n * 1. Create localization file with following JSON format:\n * {\n *   \"en\" :{\n *     \"how\": \"How do you want your egg today?\",\n *     \"boiledEgg\": \"Boiled egg\",\n *     \"softBoiledEgg\": \"Soft-boiled egg\",\n *     \"choice\": \"How to choose the egg\",\n *     \"buyQuestion\": \"I'd like to buy {0} eggs, {1} dollars each.\"\n *   },\n *\n *   \"it\": {\n *     \"how\": \"Come vuoi il tuo uovo oggi?\",\n *     \"boiledEgg\": \"Uovo sodo\",\n *     \"softBoiledEgg\": \"Uovo alla coque\",\n *     \"choice\": \"Come scegliere l'uovo\",\n *     \"buyQuestion\": \"Mi piacerebbe comprare {0} uova, {1} dollari ciascuna.\"\n *   }\n * }\n *\n * 2. Use Locale's module load method, specifying path to your localization file and set chosen language, e.g.:\n *    > Locale.load('static/locale/locale.json');\n *    > Locale.setLanguage('en');\n *\n * 3. Use localization strings:\n *    > console.log(Locale.tr.how);\n *    How do you want your egg today?\n *    > console.log(Locale.tr.boiledEgg);\n *    Boiled egg\n *\n * 4. String formatting\n *    > console.log(Locale.tr.buyQuestion.format(10, 0.5));\n *    I'd like to buy 10 eggs, 0.5 dollars each.\n */\n\nimport Log from '../Log'\n\nlet warned = false\nconst deprecated = (force = false) => {\n  if (force === true || warned === false) {\n    console.warn(\n      \"The 'Locale'-plugin in the Lightning-SDK is deprecated and will be removed in future releases. \\n\\n Please consider using the new 'Language'-plugin instead.\"\n    )\n  }\n  warned = true\n}\nclass Locale {\n  constructor() {\n    this.__enabled = false\n  }\n\n  /**\n   * Loads translation object from external json file.\n   *\n   * @param {String} path Path to resource.\n   * @return {Promise}\n   */\n  async load(path) {\n    if (!this.__enabled) {\n      return\n    }\n\n    await fetch(path)\n      .then(resp => resp.json())\n      .then(resp => {\n        this.loadFromObject(resp)\n      })\n  }\n\n  /**\n   * Sets language used by module.\n   *\n   * @param {String} lang\n   */\n  setLanguage(lang) {\n    deprecated()\n    this.__enabled = true\n    this.language = lang\n  }\n\n  /**\n   * Returns reference to translation object for current language.\n   *\n   * @return {Object}\n   */\n  get tr() {\n    deprecated(true)\n    return this.__trObj[this.language]\n  }\n\n  /**\n   * Loads translation object from existing object (binds existing object).\n   *\n   * @param {Object} trObj\n   */\n  loadFromObject(trObj) {\n    deprecated()\n    const fallbackLanguage = 'en'\n    if (Object.keys(trObj).indexOf(this.language) === -1) {\n      Log.warn('No translations found for: ' + this.language)\n      if (Object.keys(trObj).indexOf(fallbackLanguage) > -1) {\n        Log.warn('Using fallback language: ' + fallbackLanguage)\n        this.language = fallbackLanguage\n      } else {\n        const error = 'No translations found for fallback language: ' + fallbackLanguage\n        Log.error(error)\n        throw Error(error)\n      }\n    }\n\n    this.__trObj = trObj\n    for (const lang of Object.values(this.__trObj)) {\n      for (const str of Object.keys(lang)) {\n        lang[str] = new LocalizedString(lang[str])\n      }\n    }\n  }\n}\n\n/**\n * Extended string class used for localization.\n */\nclass LocalizedString extends String {\n  /**\n   * Returns formatted LocalizedString.\n   * Replaces each placeholder value (e.g. {0}, {1}) with corresponding argument.\n   *\n   * E.g.:\n   * > new LocalizedString('{0} and {1} and {0}').format('A', 'B');\n   * A and B and A\n   *\n   * @param  {...any} args List of arguments for placeholders.\n   */\n  format(...args) {\n    const sub = args.reduce((string, arg, index) => string.split(`{${index}}`).join(arg), this)\n    return new LocalizedString(sub)\n  }\n}\n\nexport default new Locale()\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class VersionLabel extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xbb0078ac,\n      h: 40,\n      w: 100,\n      x: w => w - 50,\n      y: h => h - 50,\n      mount: 1,\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 5,\n        x: 20,\n        text: {\n          fontSize: 22,\n          lineHeight: 26,\n        },\n      },\n    }\n  }\n\n  _firstActive() {\n    this.tag('Text').text = `APP - v${this.version}\\nSDK - v${this.sdkVersion}`\n    this.tag('Text').loadTexture()\n    this.w = this.tag('Text').renderWidth + 40\n    this.h = this.tag('Text').renderHeight + 5\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Settings from '../Settings'\nimport Log from '../Log'\nexport default class FpsIndicator extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      color: 0xffffffff,\n      texture: Lightning.Tools.getRoundRect(80, 80, 40),\n      h: 80,\n      w: 80,\n      x: 100,\n      y: 100,\n      mount: 1,\n      Background: {\n        x: 3,\n        y: 3,\n        texture: Lightning.Tools.getRoundRect(72, 72, 36),\n        color: 0xff008000,\n      },\n      Counter: {\n        w: w => w,\n        h: h => h,\n        y: 10,\n        text: {\n          fontSize: 32,\n          textAlign: 'center',\n        },\n      },\n      Text: {\n        w: w => w,\n        h: h => h,\n        y: 48,\n        text: {\n          fontSize: 15,\n          textAlign: 'center',\n          text: 'FPS',\n        },\n      },\n    }\n  }\n\n  _setup() {\n    this.config = {\n      ...{\n        log: false,\n        interval: 500,\n        threshold: 1,\n      },\n      ...Settings.get('platform', 'showFps'),\n    }\n\n    this.fps = 0\n    this.lastFps = this.fps - this.config.threshold\n\n    const fpsCalculator = () => {\n      this.fps = ~~(1 / this.stage.dt)\n    }\n    this.stage.on('frameStart', fpsCalculator)\n    this.stage.off('framestart', fpsCalculator)\n    this.interval = setInterval(this.showFps.bind(this), this.config.interval)\n  }\n\n  _firstActive() {\n    this.showFps()\n  }\n\n  _detach() {\n    clearInterval(this.interval)\n  }\n\n  showFps() {\n    if (Math.abs(this.lastFps - this.fps) <= this.config.threshold) return\n    this.lastFps = this.fps\n    // green\n    let bgColor = 0xff008000\n    // orange\n    if (this.fps <= 40 && this.fps > 20) bgColor = 0xffffa500\n    // red\n    else if (this.fps <= 20) bgColor = 0xffff0000\n\n    this.tag('Background').setSmooth('color', bgColor)\n    this.tag('Counter').text = `${this.fps}`\n\n    this.config.log && Log.info('FPS', this.fps)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Utils from '../Utils'\n\nlet meta = {}\nlet translations = {}\nlet language = null\nlet dictionary = null\n\nexport const initLanguage = (file, language = null) => {\n  return new Promise((resolve, reject) => {\n    fetch(file)\n      .then(response => response.json())\n      .then(json => {\n        setTranslations(json)\n        // set language (directly or in a promise)\n        typeof language === 'object' && 'then' in language && typeof language.then === 'function'\n          ? language\n              .then(lang =>\n                setLanguage(lang)\n                  .then(resolve)\n                  .catch(reject)\n              )\n              .catch(e => {\n                Log.error(e)\n                reject(e)\n              })\n          : setLanguage(language)\n              .then(resolve)\n              .catch(reject)\n      })\n      .catch(() => {\n        const error = 'Language file ' + file + ' not found'\n        Log.error(error)\n        reject(error)\n      })\n  })\n}\n\nconst setTranslations = obj => {\n  if ('meta' in obj) {\n    meta = { ...obj.meta }\n    delete obj.meta\n  }\n  translations = obj\n}\n\nconst setLanguage = lng => {\n  language = null\n  dictionary = null\n\n  return new Promise((resolve, reject) => {\n    if (lng in translations) {\n      language = lng\n    } else {\n      if ('map' in meta && lng in meta.map && meta.map[lng] in translations) {\n        language = meta.map[lng]\n      } else if ('default' in meta && meta.default in translations) {\n        language = meta.default\n        const error =\n          'Translations for Language ' +\n          language +\n          ' not found. Using default language ' +\n          meta.default\n        Log.warn(error)\n        reject(error)\n      } else {\n        const error = 'Translations for Language ' + language + ' not found.'\n        Log.error(error)\n        reject(error)\n      }\n    }\n\n    if (language) {\n      Log.info('Setting language to', language)\n\n      const translationsObj = translations[language]\n      if (typeof translationsObj === 'object') {\n        dictionary = translationsObj\n        resolve()\n      } else if (typeof translationsObj === 'string') {\n        const url = Utils.asset(translationsObj)\n\n        fetch(url)\n          .then(response => response.json())\n          .then(json => {\n            // save the translations for this language (to prevent loading twice)\n            translations[language] = json\n            dictionary = json\n            resolve()\n          })\n          .catch(e => {\n            const error = 'Error while fetching ' + url\n            Log.error(error, e)\n            reject(error)\n          })\n      }\n    }\n  })\n}\n\nexport default {\n  translate(key) {\n    let replacements = [...arguments].slice(1)\n\n    // no replacements so just translated string\n    if (replacements.length === 0) {\n      return (dictionary && dictionary[key]) || key\n    } else {\n      if (replacements.length === 1 && typeof replacements[0] === 'object') {\n        replacements = replacements.pop()\n      }\n\n      return Object.keys(\n        // maps array input to an object {0: 'item1', 1: 'item2'}\n        Array.isArray(replacements) ? Object.assign({}, replacements) : replacements\n      ).reduce((text, replacementKey) => {\n        return text.replace(\n          new RegExp('{\\\\s?' + replacementKey + '\\\\s?}', 'g'),\n          replacements[replacementKey]\n        )\n      }, (dictionary && dictionary[key]) || key)\n    }\n  },\n\n  translations(obj) {\n    setTranslations(obj)\n  },\n\n  set(language) {\n    return setLanguage(language)\n  },\n\n  available() {\n    const languageKeys = Object.keys(translations)\n    return languageKeys.map(key => ({ code: key, name: (meta.names && meta.names[key]) || key }))\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nconst registry = {\n  eventListeners: [],\n  timeouts: [],\n  intervals: [],\n  targets: [],\n}\n\nexport default {\n  // Timeouts\n  setTimeout(cb, timeout, ...params) {\n    const timeoutId = setTimeout(\n      () => {\n        registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n        cb.apply(null, params)\n      },\n      timeout,\n      params\n    )\n    Log.info('Set Timeout', 'ID: ' + timeoutId)\n    registry.timeouts.push(timeoutId)\n    return timeoutId\n  },\n\n  clearTimeout(timeoutId) {\n    if (registry.timeouts.indexOf(timeoutId) > -1) {\n      registry.timeouts = registry.timeouts.filter(id => id !== timeoutId)\n      Log.info('Clear Timeout', 'ID: ' + timeoutId)\n      clearTimeout(timeoutId)\n    } else {\n      Log.error('Clear Timeout', 'ID ' + timeoutId + ' not found')\n    }\n  },\n\n  clearTimeouts() {\n    registry.timeouts.forEach(timeoutId => {\n      this.clearTimeout(timeoutId)\n    })\n  },\n\n  // Intervals\n  setInterval(cb, interval, ...params) {\n    const intervalId = setInterval(\n      () => {\n        registry.intervals = registry.intervals.filter(id => id !== intervalId)\n        cb.apply(null, params)\n      },\n      interval,\n      params\n    )\n    Log.info('Set Interval', 'ID: ' + intervalId)\n    registry.intervals.push(intervalId)\n    return intervalId\n  },\n\n  clearInterval(intervalId) {\n    if (registry.intervals.indexOf(intervalId) > -1) {\n      registry.intervals = registry.intervals.filter(id => id !== intervalId)\n      Log.info('Clear Interval', 'ID: ' + intervalId)\n      clearInterval(intervalId)\n    } else {\n      Log.error('Clear Interval', 'ID ' + intervalId + ' not found')\n    }\n  },\n\n  clearIntervals() {\n    registry.intervals.forEach(intervalId => {\n      this.clearInterval(intervalId)\n    })\n  },\n\n  // Event listeners\n  addEventListener(target, event, handler) {\n    target.addEventListener(event, handler)\n    let targetIndex =\n      registry.targets.indexOf(target) > -1\n        ? registry.targets.indexOf(target)\n        : registry.targets.push(target) - 1\n\n    registry.eventListeners[targetIndex] = registry.eventListeners[targetIndex] || {}\n    registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][event] || []\n    registry.eventListeners[targetIndex][event].push(handler)\n    Log.info('Add eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler)\n  },\n\n  removeEventListener(target, event, handler) {\n    const targetIndex = registry.targets.indexOf(target)\n    if (\n      targetIndex > -1 &&\n      registry.eventListeners[targetIndex] &&\n      registry.eventListeners[targetIndex][event] &&\n      registry.eventListeners[targetIndex][event].indexOf(handler) > -1\n    ) {\n      registry.eventListeners[targetIndex][event] = registry.eventListeners[targetIndex][\n        event\n      ].filter(fn => fn !== handler)\n      Log.info('Remove eventListener', 'Target:', target, 'Event: ' + event, 'Handler:', handler)\n      target.removeEventListener(event, handler)\n    } else {\n      Log.error(\n        'Remove eventListener',\n        'Not found',\n        'Target',\n        target,\n        'Event: ' + event,\n        'Handler',\n        handler\n      )\n    }\n  },\n\n  // if `event` is omitted, removes all registered event listeners for target\n  // if `target` is also omitted, removes all registered event listeners\n  removeEventListeners(target, event) {\n    if (target && event) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        registry.eventListeners[targetIndex][event].forEach(handler => {\n          this.removeEventListener(target, event, handler)\n        })\n      }\n    } else if (target) {\n      const targetIndex = registry.targets.indexOf(target)\n      if (targetIndex > -1) {\n        Object.keys(registry.eventListeners[targetIndex]).forEach(_event => {\n          this.removeEventListeners(target, _event)\n        })\n      }\n    } else {\n      Object.keys(registry.eventListeners).forEach(targetIndex => {\n        this.removeEventListeners(registry.targets[targetIndex])\n      })\n    }\n  },\n\n  // Clear everything (to be called upon app close for proper cleanup)\n  clear() {\n    this.clearTimeouts()\n    this.clearIntervals()\n    this.removeEventListeners()\n    registry.eventListeners = []\n    registry.timeouts = []\n    registry.intervals = []\n    registry.targets = []\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Deepmerge from 'deepmerge'\nimport Lightning from '../Lightning'\nimport Locale from '../Locale'\nimport Metrics from '../Metrics'\nimport VersionLabel from '../VersionLabel'\nimport FpsCounter from '../FpsCounter'\nimport Log from '../Log'\nimport Settings from '../Settings'\nimport { initLanguage } from '../Language'\nimport Utils from '../Utils'\nimport Registry from '../Registry'\n\nimport { version as sdkVersion } from '../../package.json'\n\nexport let AppInstance\nexport let AppData\n\nconst defaultOptions = {\n  stage: { w: 1920, h: 1080, clearColor: 0x00000000, canvas2d: false },\n  debug: false,\n  defaultFontFace: 'RobotoRegular',\n  keys: {\n    8: 'Back',\n    13: 'Enter',\n    27: 'Menu',\n    37: 'Left',\n    38: 'Up',\n    39: 'Right',\n    40: 'Down',\n    174: 'ChannelDown',\n    175: 'ChannelUp',\n    178: 'Stop',\n    250: 'PlayPause',\n    191: 'Search', // Use \"/\" for keyboard\n    409: 'Search',\n  },\n}\n\nif (window.innerHeight === 720) {\n  defaultOptions.stage['w'] = 1280\n  defaultOptions.stage['h'] = 720\n  defaultOptions.stage['precision'] = 0.6666666667\n}\n\nexport default function(App, appData, platformSettings) {\n  return class Application extends Lightning.Application {\n    constructor(options) {\n      const config = Deepmerge(defaultOptions, options)\n      super(config)\n      this.config = config\n    }\n\n    static _template() {\n      return {\n        w: 1920,\n        h: 1080,\n      }\n    }\n\n    _setup() {\n      Promise.all([\n        this.loadFonts((App.config && App.config.fonts) || (App.getFonts && App.getFonts()) || []),\n        // to be deprecated\n        Locale.load((App.config && App.config.locale) || (App.getLocale && App.getLocale())),\n        App.language && this.loadLanguage(App.language()),\n      ])\n        .then(() => {\n          Metrics.app.loaded()\n\n          AppData = appData\n\n          AppInstance = this.stage.c({\n            ref: 'App',\n            type: App,\n            zIndex: 1,\n            forceZIndexContext: !!platformSettings.showVersion || !!platformSettings.showFps,\n          })\n\n          this.childList.a(AppInstance)\n\n          Log.info('App version', this.config.version)\n          Log.info('SDK version', sdkVersion)\n\n          if (platformSettings.showVersion) {\n            this.childList.a({\n              ref: 'VersionLabel',\n              type: VersionLabel,\n              version: this.config.version,\n              sdkVersion: sdkVersion,\n              zIndex: 1,\n            })\n          }\n\n          if (platformSettings.showFps) {\n            this.childList.a({\n              ref: 'FpsCounter',\n              type: FpsCounter,\n              zIndex: 1,\n            })\n          }\n\n          super._setup()\n        })\n        .catch(console.error)\n    }\n\n    _handleBack() {\n      this.closeApp()\n    }\n\n    _handleExit() {\n      this.closeApp()\n    }\n\n    closeApp() {\n      Log.info('Closing App')\n\n      Settings.clearSubscribers()\n      Registry.clear()\n\n      if (platformSettings.onClose && typeof platformSettings.onClose === 'function') {\n        platformSettings.onClose()\n      } else {\n        this.close()\n      }\n    }\n\n    close() {\n      Log.info('Closing App')\n      this.childList.remove(this.tag('App'))\n\n      // force texture garbage collect\n      this.stage.gc()\n      this.destroy()\n    }\n\n    loadFonts(fonts) {\n      return new Promise((resolve, reject) => {\n        fonts\n          .map(({ family, url, descriptors }) => () => {\n            const fontFace = new FontFace(family, 'url(' + url + ')', descriptors || {})\n            document.fonts.add(fontFace)\n            return fontFace.load()\n          })\n          .reduce((promise, method) => {\n            return promise.then(() => method())\n          }, Promise.resolve(null))\n          .then(resolve)\n          .catch(reject)\n      })\n    }\n\n    loadLanguage(config) {\n      let file = Utils.asset('translations.json')\n      let language = null\n\n      if (typeof config === 'object' && ('file' in config || 'language' in config)) {\n        language = config.language || null\n        file = config.file && config.file\n      } else {\n        language = config\n      }\n\n      return initLanguage(file, language)\n    }\n\n    set focus(v) {\n      this._focussed = v\n      this._refocus()\n    }\n\n    _getFocused() {\n      return this._focussed || this.tag('App')\n    }\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport { getActivePage, restore } from './index'\n\nexport class RoutedApp extends Lightning.Component {\n  static _template() {\n    return {\n      Pages: {\n        forceZIndexContext: true,\n      },\n      /**\n       * This is a default Loading page that will be made visible\n       * during data-provider on() you CAN override in child-class\n       */\n      Loading: {\n        rect: true,\n        w: 1920,\n        h: 1080,\n        color: 0xff000000,\n        visible: false,\n        zIndex: 99,\n        Label: {\n          mount: 0.5,\n          x: 960,\n          y: 540,\n          text: {\n            text: 'Loading..',\n          },\n        },\n      },\n    }\n  }\n\n  static _states() {\n    return [\n      class Loading extends this {\n        $enter() {\n          this.tag('Loading').visible = true\n        }\n\n        $exit() {\n          this.tag('Loading').visible = false\n        }\n      },\n      class Widgets extends this {\n        $enter(args, widget) {\n          // store widget reference\n          this._widget = widget\n\n          // since it's possible that this behaviour\n          // is non-remote driven we force a recalculation\n          // of the focuspath\n          this._refocus()\n        }\n\n        _getFocused() {\n          // we delegate focus to selected widget\n          // so it can consume remotecontrol presses\n          return this._widget\n        }\n\n        // if we want to widget to widget focus delegation\n        reload(widget) {\n          this._widget = widget\n          this._refocus()\n        }\n\n        _handleKey() {\n          restore()\n        }\n      },\n    ]\n  }\n\n  /**\n   * Return location where pages need to be stored\n   */\n  get pages() {\n    return this.tag('Pages')\n  }\n\n  /**\n   * Tell router where widgets are stored\n   */\n  get widgets() {\n    return this.tag('Widgets')\n  }\n\n  /**\n   * we MUST register _handleBack method so the Router\n   * can override it\n   * @private\n   */\n  _handleBack() {}\n\n  /**\n   * we MUST register _captureKey for dev quick-navigation\n   * (via keyboard 1-9)\n   */\n  _captureKey() {}\n\n  /**\n   * We MUST return Router.activePage() so the new Page\n   * can listen to the remote-control.\n   */\n  _getFocused() {\n    return getActivePage()\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport Settings from '../Settings'\n\nimport { isObject } from './utils'\n\nconst running = new Map()\nconst resolved = new Map()\nconst expired = new Map()\nconst rejected = new Map()\nconst active = new Map()\n\nconst send = (hash, key, value) => {\n  if (!Settings.get('platform', 'stats')) {\n    return\n  }\n  if (!key && !value) {\n    if (!running.has(hash)) {\n      running.set(hash, {\n        start: Date.now(),\n      })\n    }\n  } else {\n    if (running.has(hash)) {\n      if (key && value) {\n        const payload = running.get(hash)\n        payload[key] = value\n      }\n    }\n  }\n  if (key && commands[key]) {\n    const command = commands[key]\n    if (command) {\n      command.call(null, hash)\n    }\n  }\n}\n\nconst move = (hash, bucket, args) => {\n  if (active.has(hash)) {\n    const payload = active.get(hash)\n    const route = payload.route\n\n    // we group by route so store\n    // the hash in the payload\n    payload.hash = hash\n\n    if (isObject(args)) {\n      Object.keys(args).forEach(prop => {\n        payload[prop] = args[prop]\n      })\n    }\n    if (bucket.has(route)) {\n      const records = bucket.get(route)\n      records.push(payload)\n      bucket.set(route, records)\n    } else {\n      // we add by route and group all\n      // resolved hashes against that route\n      bucket.set(route, [payload])\n    }\n    active.delete(hash)\n  }\n}\n\nconst commands = {\n  ready: hash => {\n    if (running.has(hash)) {\n      const payload = running.get(hash)\n      payload.ready = Date.now()\n      active.set(hash, payload)\n\n      running.delete(hash)\n    }\n  },\n  stop: hash => {\n    move(hash, resolved, {\n      stop: Date.now(),\n    })\n  },\n  error: hash => {\n    move(hash, rejected, {\n      error: Date.now(),\n    })\n  },\n  expired: hash => {\n    move(hash, expired, {\n      expired: Date.now,\n    })\n  },\n}\n\nconst output = (label, bucket) => {\n  Log.info(`Output: ${label}`, bucket)\n  for (let [route, records] of bucket.entries()) {\n    Log.debug(`route: ${route}`, records)\n  }\n}\n\nexport let getStats = () => {\n  output('Resolved', resolved)\n  output('Expired', expired)\n  output('Rejected', rejected)\n  output('Expired', expired)\n  output('Still active', active)\n  output('Still running', running)\n}\n\nexport const initStats = config => {\n  if (config.getStats) {\n    getStats = config.getStats\n  }\n}\n\nexport default {\n  send,\n  getStats,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  isFunction,\n  isPage,\n  isComponentConstructor,\n  isArray,\n  ucfirst,\n  isObject,\n  isBoolean,\n  isString,\n  getConfigMap,\n  incorrectParams,\n  isPromise,\n  getQueryStringParams,\n  symbols,\n} from './utils'\n\nimport Transitions from './transitions'\nimport Log from '../Log'\nimport { AppInstance } from '../Application'\nimport { RoutedApp } from './base'\nimport stats from './stats'\n\nlet getHash = () => {\n  return document.location.hash\n}\n\nlet setHash = url => {\n  document.location.hash = url\n}\n\nexport const initRouter = config => {\n  if (config.getHash) {\n    getHash = config.getHash\n  }\n  if (config.setHash) {\n    setHash = config.setHash\n  }\n}\n\n/*\nrouThor ==[x]\n */\n\n// instance of Lightning.Application\nlet application\n\n//instance of Lightning.Component\nlet app\n\nlet stage\nlet widgetsHost\nlet pagesHost\n\nconst pages = new Map()\nconst providers = new Map()\nconst modifiers = new Map()\nconst widgetsPerRoute = new Map()\n\nlet register = new Map()\nlet routerConfig\n\n// widget that has focus\nlet activeWidget\nlet rootHash\nlet bootRequest\nlet history = []\nlet initialised = false\nlet activeRoute\nlet activeHash\nlet updateHash = true\nlet forcedHash\nlet lastHash = true\nlet previousState\n\n// page that has focus\nlet activePage\nconst hasRegex = /\\{\\/(.*?)\\/([igm]{0,3})\\}/g\nconst isWildcard = /^[!*$]$/\n\n/**\n * Setup Page router\n * @param config - route config object\n * @param instance - instance of the app\n */\nexport const startRouter = (config, instance) => {\n  // backwards compatible\n  let { appInstance, routes, provider = () => {}, widgets = () => {} } = config\n\n  if (instance && isPage(instance)) {\n    app = instance\n  }\n\n  if (!app) {\n    app = appInstance || AppInstance\n  }\n\n  application = app.application\n  pagesHost = application.childList\n  stage = app.stage\n  routerConfig = getConfigMap()\n\n  // test if required to host pages in a different child\n  if (app.pages) {\n    pagesHost = app.pages.childList\n  }\n\n  // test if app uses widgets\n  if (app.widgets && app.widgets.children) {\n    widgetsHost = app.widgets.childList\n    // hide all widgets on boot\n    widgetsHost.forEach(w => (w.visible = false))\n  }\n\n  // register step back handler\n  app._handleBack = e => {\n    step(-1)\n    e.preventDefault()\n  }\n\n  // register step back handler\n  app._captureKey = capture.bind(null)\n\n  if (isArray(routes)) {\n    setupRoutes(config)\n    start()\n  } else if (isFunction(routes)) {\n    // register route data bindings\n    provider()\n    // register routes\n    routes()\n    // register widgets\n    widgets()\n  }\n}\n\nexport const setupRoutes = routesConfig => {\n  let bootPage = routesConfig.bootComponent\n\n  if (!initialised) {\n    rootHash = routesConfig.root\n    if (isFunction(routesConfig.boot)) {\n      boot(routesConfig.boot)\n    }\n    if (bootPage && isPage(bootPage)) {\n      route('@boot-page', routesConfig.bootComponent)\n    }\n    if (isBoolean(routesConfig.updateHash)) {\n      updateHash = routesConfig.updateHash\n    }\n    initialised = true\n  }\n\n  routesConfig.routes.forEach(r => {\n    route(r.path, r.component || r.hook, r.options)\n    if (r.widgets) {\n      widget(r.path, r.widgets)\n    }\n\n    if (isFunction(r.on)) {\n      on(r.path, r.on, r.cache || 0)\n    }\n    if (isFunction(r.before)) {\n      before(r.path, r.before, r.cache || 0)\n    }\n    if (isFunction(r.after)) {\n      after(r.path, r.after, r.cache || 0)\n    }\n  })\n}\n\n/**\n * create a new route\n * @param route - {string}\n * @param type - {(Lightning.Component|Function()*)}\n * @param modifiers - {Object{}} - preventStorage | clearHistory | storeLast\n */\nexport const route = (route, type, config) => {\n  route = route.replace(/\\/+$/, '')\n  // if the route is defined we try to push\n  // the new type on to the stack\n  if (pages.has(route)) {\n    let stack = pages.get(route)\n    if (!isArray(stack)) {\n      stack = [stack]\n    }\n\n    // iterate stack and look if there is page instance\n    // attached to the route\n    const hasPage = stack.filter(o => isPage(o, stage))\n    if (hasPage.length) {\n      // only allow multiple functions for route\n      if (isFunction(type) && !isPage(type, stage)) {\n        stack.push(type)\n      } else {\n        console.warn(`Page for route('${route}') already exists`)\n      }\n    } else {\n      if (isFunction(type)) {\n        stack.push(type)\n      } else {\n        if (!routerConfig.get('lazyCreate')) {\n          type = isComponentConstructor(type) ? create(type) : type\n          pagesHost.a(type)\n        }\n        stack.push(type)\n      }\n    }\n    pages.set(route, stack)\n  } else {\n    if (isPage(type, stage)) {\n      // if flag lazy eq false we (test) and create\n      // correct component and add it to the childList\n      if (!routerConfig.get('lazyCreate')) {\n        type = isComponentConstructor(type) ? create(type) : type\n        pagesHost.a(type)\n      }\n    }\n\n    // if lazy we just store the constructor or function\n    pages.set(route, [type])\n\n    // store router modifiers\n    if (config) {\n      modifiers.set(route, config)\n    }\n  }\n}\n\n/**\n * create a route and define it as root.\n * Upon boot we will automatically point browser hash\n * to the defined route\n * @param route - {string}\n * @param type - {(Lightning.Component|Function()*)}\n */\nexport const root = (url, type, config) => {\n  rootHash = url.replace(/\\/+$/, '')\n  route(url, type, config)\n}\n\n/**\n * Define the widgets that need to become visible per route\n * @param url\n * @param widgets\n */\nexport const widget = (url, widgets = []) => {\n  if (!widgetsPerRoute.has(url)) {\n    if (!isArray(widgets)) {\n      widgets = [widgets]\n    }\n    widgetsPerRoute.set(url, widgets)\n  } else {\n    console.warn(`Widgets already exist for ${url}`)\n  }\n}\n\nconst create = type => {\n  const page = stage.c({ type, visible: false })\n  // if the app has widgets we make them available\n  // as an object on the app instance\n  if (widgetsHost) {\n    page.widgets = getWidgetReferences()\n  }\n\n  return page\n}\n\n/**\n * The actual loading of the component\n * @param {String} route - the route blueprint, used for data provider look up\n * @param {String} hash - current hash we're routing to\n * */\nconst load = async ({ route, hash }) => {\n  let expired = false\n  // for now we maintain one instance of the\n  // navigation register and create a local copy\n  // that we hand over to the loader\n  const routeReg = new Map(register)\n  try {\n    const payload = await loader({ hash, route, routeReg })\n    if (payload && payload.hash === lastHash) {\n      // in case of on() providing we need to reset\n      // app state;\n      if (app.state === 'Loading') {\n        if (previousState === 'Widgets') {\n          app._setState('Widgets', [activeWidget])\n        } else {\n          app._setState('')\n        }\n      }\n      // if instance is share between routes\n      // we directly return the payload\n      if (payload.share) {\n        return payload\n      }\n      await doTransition(payload.page, activePage)\n    } else {\n      expired = true\n    }\n    // on expired we only cleanup\n    if (expired) {\n      Log.debug('[router]:', `Rejected ${payload.hash} because route to ${lastHash} started`)\n      if (payload.create && !payload.share) {\n        // remove from render-tree\n        pagesHost.remove(payload.page)\n      }\n    } else {\n      onRouteFulfilled(payload, routeReg)\n      // resolve promise\n      return payload.page\n    }\n  } catch (payload) {\n    if (!expired) {\n      if (payload.create && !payload.share) {\n        // remove from render-tree\n        pagesHost.remove(payload.page)\n      }\n      handleError(payload)\n    }\n  }\n}\n\nconst loader = async ({ route, hash, routeReg: register }) => {\n  let type = getPageByRoute(route)\n  let isConstruct = isComponentConstructor(type)\n  let sharedInstance = false\n  let provide = false\n  let page = null\n  let isCreated = false\n\n  // if it's an instance bt we're not coming back from\n  // history we test if we can re-use this instance\n  if (!isConstruct && !register.get(symbols.backtrack)) {\n    if (!mustReuse(route)) {\n      type = type.constructor\n      isConstruct = true\n    }\n  }\n\n  // If type is not a constructor\n  if (!isConstruct) {\n    page = type\n    // if we have have a data route for current page\n    if (providers.has(route)) {\n      if (isPageExpired(type) || type[symbols.hash] !== hash) {\n        provide = true\n      }\n    }\n    let currentRoute = activePage && activePage[symbols.route]\n    // if the new route is equal to the current route it means that both\n    // route share the Component instance and stack location / since this case\n    // is conflicting with the way before() and after() loading works we flag it,\n    // and check platform settings in we want to re-use instance\n    if (route === currentRoute) {\n      sharedInstance = true\n    }\n  } else {\n    page = create(type)\n    pagesHost.a(page)\n    // test if need to request data provider\n    if (providers.has(route)) {\n      provide = true\n    }\n    isCreated = true\n  }\n\n  // we store hash and route as properties on the page instance\n  // that way we can easily calculate new behaviour on page reload\n  page[symbols.hash] = hash\n  page[symbols.route] = route\n\n  const payload = {\n    page,\n    route,\n    hash,\n    register,\n    create: isCreated,\n    share: sharedInstance,\n    event: [isCreated ? 'mounted' : 'changed'],\n  }\n\n  try {\n    if (provide) {\n      const { type: loadType } = providers.get(route)\n      // update payload\n      payload.loadType = loadType\n\n      // update statistics\n      send(hash, `${loadType}-start`, Date.now())\n      await triggers[sharedInstance ? 'shared' : loadType](payload)\n      send(hash, `${loadType}-end`, Date.now())\n\n      if (hash !== lastHash) {\n        return false\n      } else {\n        emit(page, 'dataProvided')\n        // resolve promise\n        return payload\n      }\n    } else {\n      addPersistData(payload)\n      return payload\n    }\n  } catch (e) {\n    payload.error = e\n    return Promise.reject(payload)\n  }\n}\n\n/**\n * Will be called when a new navigate() request has completed\n * and has not been expired due to it's async nature\n * @param page\n * @param route\n * @param event\n * @param hash\n * @param register\n */\nconst onRouteFulfilled = ({ page, route, event, hash, share }, register) => {\n  // clean up history if modifier is set\n  if (hashmod(hash, 'clearHistory')) {\n    history.length = 0\n  } else if (activeHash && !isWildcard.test(route)) {\n    updateHistory(activeHash)\n  }\n\n  // we only update the stackLocation if a route\n  // is not expired before it resolves\n  const location = getPageStackLocation(route)\n\n  if (!isNaN(location)) {\n    let stack = pages.get(route)\n    stack[location] = page\n    pages.set(route, stack)\n  }\n\n  if (event) {\n    emit(page, event)\n  }\n\n  // only update widgets if we have a host\n  if (widgetsHost) {\n    updateWidgets(page)\n  }\n\n  // force refocus of the app\n  app._refocus()\n\n  // we want to clean up if there is an\n  // active page that is not being shared\n  // between current and previous route\n  if (activePage && !share) {\n    cleanUp(activePage, activePage[symbols.route], register)\n  }\n\n  // flag this navigation cycle as ready\n  send(hash, 'ready')\n\n  activePage = page\n  activeRoute = route\n  activeHash = hash\n\n  Log.info('[route]:', route)\n  Log.info('[hash]:', hash)\n}\n\nconst triggerAfter = args => {\n  // after() we execute the provider\n  // and resolve immediately\n  try {\n    execProvider(args)\n  } catch (e) {\n    // we fail silently\n  }\n  return Promise.resolve()\n}\n\nconst triggerBefore = args => {\n  // before() we continue only when data resolved\n  return execProvider(args)\n}\n\nconst triggerOn = args => {\n  // on() we need to place the app in\n  // a Loading state and recover from it\n  // on resolve\n  previousState = app.state || ''\n  app._setState('Loading')\n  return execProvider(args)\n}\n\nconst triggerShared = args => {\n  return execProvider(args)\n}\n\nconst triggers = {\n  on: triggerOn,\n  after: triggerAfter,\n  before: triggerBefore,\n  shared: triggerShared,\n}\n\nconst emit = (page, events = [], params = {}) => {\n  if (!isArray(events)) {\n    events = [events]\n  }\n  events.forEach(e => {\n    const event = `_on${ucfirst(e)}`\n    if (isFunction(page[event])) {\n      page[event](params)\n    }\n  })\n}\n\nconst send = (hash, key, value) => {\n  stats.send(hash, key, value)\n}\n\nconst handleError = args => {\n  if (!args.page) {\n    console.error(args)\n  } else {\n    const hash = args.page[symbols.hash]\n    // flag this navigation cycle as rejected\n    send(hash, 'e', args.error)\n    // force expire\n    args.page[symbols.expires] = Date.now()\n    if (pages.has('!')) {\n      load({ route: '!', hash }).then(errorPage => {\n        errorPage.error = { page: args.page, error: args.error }\n        // on() loading type will force the app to go\n        // in a loading state so on error we need to\n        // go back to root state\n        if (app.state === 'Loading') {\n          app._setState('')\n        }\n        // make sure we delegate focus to the error page\n        if (activePage !== errorPage) {\n          activePage = errorPage\n          app._refocus()\n        }\n      })\n    } else {\n      Log.error(args.page, args.error)\n    }\n  }\n}\n\nconst updateHistory = hash => {\n  const storeHash = getMod(hash, 'store')\n  const regStore = register.get(symbols.store)\n  let configPrevent = hashmod(hash, 'preventStorage')\n  let configStore = true\n\n  if ((isBoolean(storeHash) && storeHash === false) || configPrevent) {\n    configStore = false\n  }\n\n  if (regStore && configStore) {\n    const toStore = hash.replace(/^\\//, '')\n    const location = history.indexOf(toStore)\n    // store hash if it's not a part of history or flag for\n    // storage of same hash is true\n    if (location === -1 || routerConfig.get('storeSameHash')) {\n      history.push(toStore)\n    } else {\n      // if we visit the same route we want to sync history\n      history.push(history.splice(location, 1)[0])\n    }\n  }\n}\n\nexport const mustReuse = route => {\n  const mod = routemod(route, 'reuseInstance')\n  const config = routerConfig.get('reuseInstance')\n\n  // route always has final decision\n  if (isBoolean(mod)) {\n    return mod\n  }\n  return !(isBoolean(config) && config === false)\n}\n\nexport const boot = cb => {\n  bootRequest = cb\n}\n\nconst addPersistData = ({ page, route, hash, register = new Map() }) => {\n  const urlValues = getValuesFromHash(hash, route)\n  const pageData = new Map([...urlValues, ...register])\n  const params = {}\n\n  // make dynamic url data available to the page\n  // as instance properties\n  for (let [name, value] of pageData) {\n    page[name] = value\n    params[name] = value\n  }\n\n  // check navigation register for persistent data\n  if (register.size) {\n    const obj = {}\n    for (let [k, v] of register) {\n      obj[k] = v\n    }\n    page.persist = obj\n  }\n\n  // make url data and persist data available\n  // via params property\n  page.params = params\n  emit(page, ['urlParams'], params)\n\n  return params\n}\n\nconst execProvider = args => {\n  const { cb, expires } = providers.get(args.route)\n  const params = addPersistData(args)\n  /**\n   * In the first version of the Router, a reference to the page is made\n   * available to the callback function as property of {params}.\n   * Since this is error prone (named url parts are also being spread inside this object)\n   * we made the page reference the first parameter and url values the second.\n   * -\n   * We keep it backwards compatible for now but a warning is showed in the console.\n   */\n  if (incorrectParams(cb, args.route)) {\n    // keep page as params property backwards compatible for now\n    return cb({ page: args.page, ...params }).then(() => {\n      args.page[symbols.expires] = Date.now() + expires\n    })\n  } else {\n    return cb(args.page, { ...params }).then(() => {\n      args.page[symbols.expires] = Date.now() + expires\n    })\n  }\n}\n\n/**\n * execute transition between new / old page and\n * toggle the defined widgets\n * @todo: platform override default transition\n * @param pageIn\n * @param pageOut\n */\nconst doTransition = (pageIn, pageOut = null) => {\n  let transition = pageIn.pageTransition || pageIn.easing\n\n  const hasCustomTransitions = !!(pageIn.smoothIn || pageIn.smoothInOut || transition)\n  const transitionsDisabled = routerConfig.get('disableTransitions')\n\n  if (pageIn.easing) {\n    console.warn('easing() method is deprecated and will be removed. Use pageTransition()')\n  }\n  // default behaviour is a visibility toggle\n  if (!hasCustomTransitions || transitionsDisabled) {\n    pageIn.visible = true\n    if (pageOut) {\n      pageOut.visible = false\n    }\n    return Promise.resolve()\n  }\n\n  if (transition) {\n    let type\n    try {\n      type = transition.call(pageIn, pageIn, pageOut)\n    } catch (e) {\n      type = 'crossFade'\n    }\n\n    if (isPromise(type)) {\n      return type\n    }\n\n    if (isString(type)) {\n      const fn = Transitions[type]\n      if (fn) {\n        return fn(pageIn, pageOut)\n      }\n    }\n\n    // keep backwards compatible for now\n    if (pageIn.smoothIn) {\n      // provide a smooth function that resolves itself\n      // on transition finish\n      const smooth = (p, v, args = {}) => {\n        return new Promise(resolve => {\n          pageIn.visible = true\n          pageIn.setSmooth(p, v, args)\n          pageIn.transition(p).on('finish', () => {\n            resolve()\n          })\n        })\n      }\n      return pageIn.smoothIn({ pageIn, smooth })\n    }\n  }\n\n  return Transitions.crossFade(pageIn, pageOut)\n}\n\n/**\n * update the visibility of the available widgets\n * for the current page / route\n * @param page\n */\nconst updateWidgets = page => {\n  const route = page[symbols.route]\n\n  // force lowercase lookup\n  const configured = (widgetsPerRoute.get(route) || []).map(ref => ref.toLowerCase())\n\n  widgetsHost.forEach(widget => {\n    widget.visible = configured.indexOf(widget.ref.toLowerCase()) !== -1\n    if (widget.visible) {\n      emit(widget, ['activated'], page)\n    }\n  })\n  if (app.state === 'Widgets' && activeWidget && !activeWidget.visible) {\n    app._setState('')\n  }\n}\n\nconst cleanUp = (page, route, register) => {\n  const lazyDestroy = routerConfig.get('lazyDestroy')\n  const destroyOnBack = routerConfig.get('destroyOnHistoryBack')\n  const keepAlive = read('keepAlive', register)\n  const isFromHistory = read(symbols.backtrack, register)\n  let doCleanup = false\n\n  if (isFromHistory && (destroyOnBack || lazyDestroy)) {\n    doCleanup = true\n  } else if (lazyDestroy && !keepAlive) {\n    doCleanup = true\n  }\n\n  if (doCleanup) {\n    // in lazy create mode we store constructor\n    // and remove the actual page from host\n    const stack = pages.get(route)\n    const location = getPageStackLocation(route)\n\n    // grab original class constructor if statemachine routed\n    // else store constructor\n    stack[location] = page._routedType || page.constructor\n    pages.set(route, stack)\n\n    // actual remove of page from memory\n    pagesHost.remove(page)\n\n    // force texture gc() if configured\n    // so we can cleanup textures in the same tick\n    if (routerConfig.get('gcOnUnload')) {\n      stage.gc()\n    }\n  } else {\n    // If we're not removing the page we need to\n    // reset it's properties\n    page.patch({\n      x: 0,\n      y: 0,\n      scale: 1,\n      alpha: 1,\n      visible: false,\n    })\n  }\n  send(page[symbols.hash], 'stop')\n}\n\n/**\n * Test if page passed cache-time\n * @param page\n * @returns {boolean}\n */\nconst isPageExpired = page => {\n  if (!page[symbols.expires]) {\n    return false\n  }\n\n  const expires = page[symbols.expires]\n  const now = Date.now()\n\n  return now >= expires\n}\n\nconst getPageByRoute = route => {\n  return getPageFromStack(route).item\n}\n\n/**\n * Returns the current location of a page constructor or\n * page instance for a route\n * @param route\n */\nconst getPageStackLocation = route => {\n  return getPageFromStack(route).index\n}\n\nconst getPageFromStack = route => {\n  if (!pages.has(route)) {\n    return false\n  }\n\n  let index = -1\n  let item = null\n  let stack = pages.get(route)\n  if (!Array.isArray(stack)) {\n    stack = [stack]\n  }\n\n  for (let i = 0, j = stack.length; i < j; i++) {\n    if (isPage(stack[i], stage)) {\n      index = i\n      item = stack[i]\n      break\n    }\n  }\n\n  return { index, item }\n}\n\n/**\n * Simple route length calculation\n * @param route {string}\n * @returns {number} - floor\n */\nconst getFloor = route => {\n  return stripRegex(route).split('/').length\n}\n\n/**\n * Test if a route is part regular expressed\n * and replace it for a simple character\n * @param route\n * @returns {*}\n */\nconst stripRegex = (route, char = 'R') => {\n  // if route is part regular expressed we replace\n  // the regular expression for a character to\n  // simplify floor calculation and backtracking\n  if (hasRegex.test(route)) {\n    route = route.replace(hasRegex, char)\n  }\n  return route\n}\n\n/**\n * return all stored routes that live on the same floor\n * @param floor\n * @returns {Array}\n */\nconst getRoutesByFloor = floor => {\n  const matches = []\n  // simple filter of level candidates\n  for (let [route] of pages.entries()) {\n    if (getFloor(route) === floor) {\n      matches.push(route)\n    }\n  }\n  return matches\n}\n\n/**\n * return a matching route by provided hash\n * hash: home/browse/12 will match:\n * route: home/browse/:categoryId\n * @param hash {string}\n * @returns {string|boolean} - route\n */\nconst getRouteByHash = hash => {\n  const getUrlParts = /(\\/?:?[@\\w%\\s-]+)/g\n  // grab possible candidates from stored routes\n  const candidates = getRoutesByFloor(getFloor(hash))\n  // break hash down in chunks\n  const hashParts = hash.match(getUrlParts) || []\n  // test if the part of the hash has a replace\n  // regex lookup id\n  const hasLookupId = /\\/:\\w+?@@([0-9]+?)@@/\n  const isNamedGroup = /^\\/:/\n\n  // to simplify the route matching and prevent look around\n  // in our getUrlParts regex we get the regex part from\n  // route candidate and store them so that we can reference\n  // them when we perform the actual regex against hash\n  let regexStore = []\n\n  let matches = candidates.filter(route => {\n    let isMatching = true\n\n    if (isWildcard.test(route)) {\n      return false\n    }\n\n    // replace regex in route with lookup id => @@{storeId}@@\n    if (hasRegex.test(route)) {\n      const regMatches = route.match(hasRegex)\n      if (regMatches && regMatches.length) {\n        route = regMatches.reduce((fullRoute, regex) => {\n          const lookupId = regexStore.length\n          fullRoute = fullRoute.replace(regex, `@@${lookupId}@@`)\n          regexStore.push(regex.substring(1, regex.length - 1))\n          return fullRoute\n        }, route)\n      }\n    }\n\n    const routeParts = route.match(getUrlParts) || []\n\n    for (let i = 0, j = routeParts.length; i < j; i++) {\n      const routePart = routeParts[i]\n      const hashPart = hashParts[i]\n\n      // Since we support catch-all and regex driven name groups\n      // we first test for regex lookup id and see if the regex\n      // matches the value from the hash\n      if (hasLookupId.test(routePart)) {\n        const routeMatches = hasLookupId.exec(routePart)\n        const storeId = routeMatches[1]\n        const routeRegex = regexStore[storeId]\n\n        // split regex and modifiers so we can use both\n        // to create a new RegExp\n        // eslint-disable-next-line\n        const regMatches = /\\/([^\\/]+)\\/([igm]{0,3})/.exec(routeRegex)\n\n        if (regMatches && regMatches.length) {\n          const expression = regMatches[1]\n          const modifiers = regMatches[2]\n\n          const regex = new RegExp(`^/${expression}$`, modifiers)\n\n          if (!regex.test(hashPart)) {\n            isMatching = false\n          }\n        }\n      } else if (isNamedGroup.test(routePart)) {\n        // we kindly skip namedGroups because this is dynamic\n        // we only need to the static and regex drive parts\n        continue\n      } else if (hashPart && routePart.toLowerCase() !== hashPart.toLowerCase()) {\n        isMatching = false\n      }\n    }\n    return isMatching\n  })\n\n  if (matches.length) {\n    // we give prio to static routes over dynamic\n    matches = matches.sort(a => {\n      return isNamedGroup.test(a) ? -1 : 1\n    })\n    return matches[0]\n  }\n\n  return false\n}\n\n/**\n * Extract dynamic values from location hash and return a namedgroup\n * of key (from route) value (from hash) pairs\n * @param hash {string} - the actual location hash\n * @param route {string} - the route as defined in route\n */\nconst getValuesFromHash = (hash, route) => {\n  // replace the regex definition from the route because\n  // we already did the matching part\n  route = stripRegex(route, '')\n\n  const getUrlParts = /(\\/?:?[\\w%\\s-]+)/g\n  const hashParts = hash.match(getUrlParts) || []\n  const routeParts = route.match(getUrlParts) || []\n  const getNamedGroup = /^\\/:([\\w-]+)\\/?/\n\n  return routeParts.reduce((storage, value, index) => {\n    const match = getNamedGroup.exec(value)\n    if (match && match.length) {\n      storage.set(match[1], decodeURIComponent(hashParts[index].replace(/^\\//, '')))\n    }\n    return storage\n  }, new Map())\n}\n\nconst handleHashChange = override => {\n  const hash = override || getHash()\n  const route = getRouteByHash(hash)\n\n  // add a new record for page statistics\n  send(hash)\n\n  // store last requested hash so we can\n  // prevent a route that resolved later\n  // from displaying itself\n  lastHash = hash\n\n  if (route) {\n    // would be strange if this fails but we do check\n    if (pages.has(route)) {\n      let stored = pages.get(route)\n      send(hash, 'route', route)\n\n      if (!isArray(stored)) {\n        stored = [stored]\n      }\n\n      stored.forEach((type, idx, stored) => {\n        if (isPage(type, stage)) {\n          load({ route, hash }).then(() => {\n            app._refocus()\n          })\n        } else if (isPromise(type)) {\n          type()\n            .then(contents => {\n              return contents.default\n            })\n            .then(module => {\n              // flag dynamic as loaded\n              stored[idx] = module\n\n              return load({ route, hash })\n            })\n            .then(() => {\n              app._refocus()\n            })\n        } else {\n          const urlParams = getValuesFromHash(hash, route)\n          const params = {}\n          for (const key of urlParams.keys()) {\n            params[key] = urlParams.get(key)\n          }\n          // invoke\n          type.call(null, app, { ...params })\n        }\n      })\n    }\n  } else {\n    if (pages.has('*')) {\n      load({ route: '*', hash }).then(() => {\n        app._refocus()\n      })\n    }\n  }\n}\n\nconst getMod = (hash, key) => {\n  const config = modifiers.get(getRouteByHash(hash))\n  if (isObject(config)) {\n    return config[key]\n  }\n}\n\nconst hashmod = (hash, key) => {\n  return routemod(getRouteByHash(hash), key)\n}\n\nconst routemod = (route, key) => {\n  if (modifiers.has(route)) {\n    const config = modifiers.get(route)\n    return config[key]\n  }\n}\n\nconst read = (flag, register) => {\n  if (register.has(flag)) {\n    return register.get(flag)\n  }\n  return false\n}\n\nconst createRegister = flags => {\n  const reg = new Map()\n  // store user defined and router\n  // defined flags in register\n  ;[...Object.keys(flags), ...Object.getOwnPropertySymbols(flags)].forEach(key => {\n    reg.set(key, flags[key])\n  })\n  return reg\n}\n\nexport const navigate = (url, args, store = true) => {\n  let hash = getHash()\n\n  // for now we use one register instance and create a local\n  // copy for the loader\n  register.clear()\n\n  if (!mustUpdateHash() && forcedHash) {\n    hash = forcedHash\n  }\n\n  if (isObject(args)) {\n    register = createRegister(args)\n  } else if (isBoolean(args) && !args) {\n    // if explicit set to false we don't want\n    // to store the route\n    store = args\n  }\n\n  // we only store complete routes, so we set\n  // a special register flag\n  register.set(symbols.store, store)\n\n  if (hash.replace(/^#/, '') !== url) {\n    if (!mustUpdateHash()) {\n      forcedHash = url\n      handleHashChange(url)\n    } else {\n      setHash(url)\n    }\n  } else if (read('reload', register)) {\n    handleHashChange(hash)\n  }\n}\n\n/**\n * Directional step in history\n * @param direction\n */\nexport const step = (direction = 0) => {\n  if (!direction) {\n    return false\n  }\n\n  // is we still have routes in our history\n  // we splice the last of and navigate to that route\n  if (history.length) {\n    // for now we only support history back\n    const route = history.splice(history.length - 1, 1)\n    return navigate(route[0], { [symbols.backtrack]: true }, false)\n  } else if (routerConfig.get('backtrack')) {\n    const hashLastPart = /(\\/:?[\\w%\\s-]+)$/\n    let hash = stripRegex(getHash())\n    let floor = getFloor(hash)\n\n    // test if we got deeplinked\n    if (floor > 1) {\n      while (floor--) {\n        // strip of last part\n        hash = hash.replace(hashLastPart, '')\n        // if we have a configured route\n        // we navigate to it\n        if (getRouteByHash(hash)) {\n          return navigate(hash, { [symbols.backtrack]: true }, false)\n        }\n      }\n    }\n  }\n\n  if (isFunction(app._handleAppClose)) {\n    return app._handleAppClose()\n  }\n\n  return false\n}\n\nconst capture = ({ key }) => {\n  // in Loading state we want to stop propagation\n  // by returning undefined\n  if (app.state === 'Loading') {\n    return\n  }\n\n  // if not set we want to continue propagation\n  // by explicitly returning false\n  if (!routerConfig.get('numberNavigation')) {\n    return false\n  }\n  key = parseInt(key)\n  if (!isNaN(key)) {\n    let match\n    let idx = 1\n    for (let route of pages.keys()) {\n      if (idx === key) {\n        match = route\n        break\n      } else {\n        idx++\n      }\n    }\n    if (match) {\n      navigate(match)\n    }\n  }\n  return false\n}\n\n// start translating url\nexport const start = () => {\n  const bootKey = '@boot-page'\n  const hasBootPage = pages.has('@boot-page')\n  const hash = getHash()\n  const params = getQueryStringParams(hash)\n\n  // if we refreshed the boot-page we don't want to\n  // redirect to this page so we force rootHash load\n  const isDirectLoad = hash.indexOf(bootKey) !== -1\n  const ready = () => {\n    if (hasBootPage) {\n      navigate('@boot-page', {\n        [symbols.resume]: isDirectLoad ? rootHash : hash || rootHash,\n        reload: true,\n      })\n    } else if (!hash && rootHash) {\n      if (isString(rootHash)) {\n        navigate(rootHash)\n      } else if (isFunction(rootHash)) {\n        rootHash().then(url => {\n          navigate(url)\n        })\n      }\n    } else {\n      handleHashChange()\n    }\n  }\n  if (isFunction(bootRequest)) {\n    bootRequest(params).then(() => {\n      ready()\n    })\n  } else {\n    ready()\n  }\n}\n\n/**\n * Data binding to a route will invoke a loading screen\n * @param {String} route - the route\n * @param {Function} cb - must return a promise\n * @param {Number} expires - seconds after first time active that data expires\n * @param {String} type - page loading type\n */\nexport const on = (route, cb, expires = 0, type = 'on') => {\n  if (providers.has(route)) {\n    console.warn(`provider for ${route} already exists`)\n  } else {\n    providers.set(route, {\n      cb,\n      expires: expires * 1000,\n      type,\n    })\n  }\n}\n\n/**\n * Request data binding for a route before\n * the page loads (active page will stay visible)\n * @param route\n * @param cb\n * @param expires\n */\nexport const before = (route, cb, expires = 0) => {\n  on(route, cb, expires, 'before')\n}\n\n/**\n * Request data binding for a route after the page has\n * been loaded\n * @param route\n * @param cb\n * @param expires\n */\nexport const after = (route, cb, expires = 0) => {\n  on(route, cb, expires, 'after')\n}\n\nconst getWidgetReferences = () => {\n  return widgetsHost.get().reduce((storage, widget) => {\n    const key = widget.ref.toLowerCase()\n    storage[key] = widget\n    return storage\n  }, {})\n}\n\nconst getWidgetByName = name => {\n  name = ucfirst(name)\n  return widgetsHost.getByRef(name) || false\n}\n\n/**\n * delegate app focus to a on-screen widget\n * @param name - {string}\n */\nexport const focusWidget = name => {\n  const widget = getWidgetByName(name)\n  if (name) {\n    // store reference\n    activeWidget = widget\n    // somewhat experimental\n    if (app.state === 'Widgets') {\n      app.reload(activeWidget)\n    } else {\n      app._setState('Widgets', [activeWidget])\n    }\n  }\n}\n\nexport const handleRemote = (type, name) => {\n  if (type === 'widget') {\n    focusWidget(name)\n  } else if (type === 'page') {\n    restoreFocus()\n  }\n}\n\n/**\n * Resume Router's page loading process after\n * the BootComponent became visible;\n */\nexport const resume = () => {\n  if (register.has(symbols.resume)) {\n    const hash = register.get(symbols.resume).replace(/^#+/, '')\n    if (getRouteByHash(hash) && hash) {\n      navigate(hash, false)\n    } else if (rootHash) {\n      navigate(rootHash, false)\n    }\n  }\n}\n\nexport const restore = () => {\n  if (routerConfig.get('autoRestoreRemote')) {\n    handleRemote('page')\n  }\n}\n\nconst hash = () => {\n  return getHash()\n}\n\nconst mustUpdateHash = () => {\n  // we need support to either turn change hash off\n  // per platform or per app\n  const updateConfig = routerConfig.get('updateHash')\n  return !((isBoolean(updateConfig) && !updateConfig) || (isBoolean(updateHash) && !updateHash))\n}\n\nexport const restoreFocus = () => {\n  activeWidget = null\n  app._setState('')\n}\n\nexport const getActivePage = () => {\n  if (activePage && activePage.attached) {\n    return activePage\n  } else {\n    return app\n  }\n}\n\nexport const getActiveRoute = () => {\n  return activeRoute\n}\n\nexport const getActiveHash = () => {\n  return activeHash\n}\n\nexport const getActiveWidget = () => {\n  return activeWidget\n}\n\n// listen to url changes\nwindow.addEventListener('hashchange', () => {\n  handleHashChange()\n})\n\n// export API\nexport default {\n  startRouter,\n  navigate,\n  root,\n  resume,\n  route,\n  on,\n  before,\n  after,\n  boot,\n  step,\n  restoreFocus,\n  focusPage: restoreFocus,\n  focusWidget,\n  handleRemote,\n  start,\n  add: setupRoutes,\n  widget,\n  hash,\n  getActivePage,\n  getActiveWidget,\n  getActiveRoute,\n  getActiveHash,\n  App: RoutedApp,\n  restore,\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Settings from '../Settings'\n\nconst defaultChannels = [\n  {\n    number: 1,\n    name: 'Metro News 1',\n    description: 'New York Cable News Channel',\n    entitled: true,\n    program: {\n      title: 'The Morning Show',\n      description: \"New York's best morning show\",\n      startTime: new Date(new Date() - 60 * 5 * 1000).toUTCString(), // started 5 minutes ago\n      duration: 60 * 30, // 30 minutes\n      ageRating: 0,\n    },\n  },\n  {\n    number: 2,\n    name: 'MTV',\n    description: 'Music Television',\n    entitled: true,\n    program: {\n      title: 'Beavis and Butthead',\n      description: 'American adult animated sitcom created by Mike Judge',\n      startTime: new Date(new Date() - 60 * 20 * 1000).toUTCString(), // started 20 minutes ago\n      duration: 60 * 45, // 45 minutes\n      ageRating: 18,\n    },\n  },\n  {\n    number: 3,\n    name: 'NBC',\n    description: 'NBC TV Network',\n    entitled: false,\n    program: {\n      title: 'The Tonight Show Starring Jimmy Fallon',\n      description: 'Late-night talk show hosted by Jimmy Fallon on NBC',\n      startTime: new Date(new Date() - 60 * 10 * 1000).toUTCString(), // started 10 minutes ago\n      duration: 60 * 60, // 1 hour\n      ageRating: 10,\n    },\n  },\n]\n\nexport const channels = () => Settings.get('platform', 'tv', defaultChannels)\n\nexport const randomChannel = () => channels()[~~(channels.length * Math.random())]\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\n\nimport { channels, randomChannel } from './defaults'\n\nlet currentChannel\nconst callbacks = {}\n\nconst emit = (event, ...args) => {\n  callbacks[event] &&\n    callbacks[event].forEach(cb => {\n      cb.apply(null, args)\n    })\n}\n\n// local mock methods\nlet methods = {\n  getChannel() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      if (currentChannel) {\n        const channel = { ...currentChannel }\n        delete channel.program\n        resolve(channel)\n      } else {\n        reject('No channel found')\n      }\n    })\n  },\n  getProgram() {\n    if (!currentChannel) currentChannel = randomChannel()\n    return new Promise((resolve, reject) => {\n      currentChannel.program ? resolve(currentChannel.program) : reject('No program found')\n    })\n  },\n  setChannel(number) {\n    return new Promise((resolve, reject) => {\n      if (number) {\n        const newChannel = channels().find(c => c.number === number)\n        if (newChannel) {\n          currentChannel = newChannel\n          const channel = { ...currentChannel }\n          delete channel.program\n          emit('channelChange', channel)\n          resolve(channel)\n        } else {\n          reject('Channel not found')\n        }\n      } else {\n        reject('No channel number supplied')\n      }\n    })\n  },\n}\n\nexport const initTV = config => {\n  methods = {}\n  if (config.getChannel && typeof config.getChannel === 'function') {\n    methods.getChannel = config.getChannel\n  }\n  if (config.getProgram && typeof config.getProgram === 'function') {\n    methods.getProgram = config.getProgram\n  }\n  if (config.setChannel && typeof config.setChannel === 'function') {\n    methods.setChannel = config.setChannel\n  }\n  if (config.emit && typeof config.emit === 'function') {\n    config.emit(emit)\n  }\n}\n\n// public API\nexport default {\n  channel(number = null) {\n    return new Promise((resolve, reject) => {\n      try {\n        // call setChannel when number argument is passed, otherwise getChannel\n        methods[number ? 'setChannel' : 'getChannel'](number)\n          .then(channel => {\n            // to do: ensure consistent formatting of channel info here?\n            resolve(channel)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  program() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getProgram()\n          .then(program => {\n            // to do: ensure consistent formatting of program info here?\n            resolve(program)\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  entitled() {\n    return new Promise((resolve, reject) => {\n      try {\n        methods\n          .getChannel()\n          .then(channel => {\n            'entitled' in channel ? resolve(!!channel.entitled) : reject()\n          })\n          .catch(reject)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  },\n  addEventListener(event, cb) {\n    if (typeof cb === 'function') {\n      callbacks[event] = callbacks[event] || []\n      callbacks[event].push(cb)\n    } else {\n      Log.error('Please provide a function as a callback')\n    }\n  },\n  removeEventListener(event, cb = false) {\n    if (callbacks[event] && callbacks[event].length) {\n      callbacks[event] = cb ? callbacks[event].filter(_cb => _cb === cb) : []\n    }\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { initUtils } from '../Utils'\nimport { initProfile } from '../Profile'\nimport { initMetrics } from '../Metrics'\nimport { initSettings } from '../Settings'\nimport { initMediaPlayer } from '../MediaPlayer'\nimport { initVideoPlayer } from '../VideoPlayer'\nimport { initStorage } from '../Storage'\nimport { initAds } from '../Ads'\nimport { initRouter } from '../Router'\nimport { initTV } from '../TV'\nimport Application from '../Application'\n\nexport let ApplicationInstance\n\nexport default (App, appSettings, platformSettings, appData) => {\n  initSettings(appSettings, platformSettings)\n\n  initUtils(platformSettings)\n  initStorage()\n\n  // Initialize plugins\n  if (platformSettings.plugins) {\n    platformSettings.plugins.profile && initProfile(platformSettings.plugins.profile)\n    platformSettings.plugins.metrics && initMetrics(platformSettings.plugins.metrics)\n    platformSettings.plugins.mediaPlayer && initMediaPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.mediaPlayer && initVideoPlayer(platformSettings.plugins.mediaPlayer)\n    platformSettings.plugins.ads && initAds(platformSettings.plugins.ads)\n    platformSettings.plugins.router && initRouter(platformSettings.plugins.router)\n    platformSettings.plugins.tv && initTV(platformSettings.plugins.tv)\n  }\n\n  const app = Application(App, appData, platformSettings)\n  ApplicationInstance = new app(appSettings)\n  return ApplicationInstance\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Log from '../Log'\n\nexport default class VideoTexture extends Lightning.Component {\n  static _template() {\n    return {\n      Video: {\n        alpha: 1,\n        visible: false,\n        pivot: 0.5,\n        texture: { type: Lightning.textures.StaticTexture, options: {} },\n      },\n    }\n  }\n\n  set videoEl(v) {\n    this._videoEl = v\n  }\n\n  get videoEl() {\n    return this._videoEl\n  }\n\n  get videoView() {\n    return this.tag('Video')\n  }\n\n  get videoTexture() {\n    return this.videoView.texture\n  }\n\n  get isVisible() {\n    return this.videoView.alpha === 1 && this.videoView.visible === true\n  }\n\n  _init() {\n    this._createVideoTexture()\n  }\n\n  _createVideoTexture() {\n    const stage = this.stage\n\n    const gl = stage.gl\n    const glTexture = gl.createTexture()\n    gl.bindTexture(gl.TEXTURE_2D, glTexture)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE)\n    this.videoTexture.options = { source: glTexture, w: this.videoEl.width, h: this.videoEl.height }\n\n    this.videoView.w = this.videoEl.width / this.stage.getRenderPrecision()\n    this.videoView.h = this.videoEl.height / this.stage.getRenderPrecision()\n  }\n\n  start() {\n    const stage = this.stage\n    if (!this._updateVideoTexture) {\n      this._updateVideoTexture = () => {\n        if (this.videoTexture.options.source && this.videoEl.videoWidth && this.active) {\n          const gl = stage.gl\n\n          const currentTime = new Date().getTime()\n\n          // When BR2_PACKAGE_GST1_PLUGINS_BAD_PLUGIN_DEBUGUTILS is not set in WPE, webkitDecodedFrameCount will not be available.\n          // We'll fallback to fixed 30fps in this case.\n          const frameCount = this.videoEl.webkitDecodedFrameCount\n\n          const mustUpdate = frameCount\n            ? this._lastFrame !== frameCount\n            : this._lastTime < currentTime - 30\n\n          if (mustUpdate) {\n            this._lastTime = currentTime\n            this._lastFrame = frameCount\n            try {\n              gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n              gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\n              gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.videoEl)\n              this._lastFrame = this.videoEl.webkitDecodedFrameCount\n              this.videoView.visible = true\n\n              this.videoTexture.options.w = this.videoEl.width\n              this.videoTexture.options.h = this.videoEl.height\n              const expectedAspectRatio = this.videoView.w / this.videoView.h\n              const realAspectRatio = this.videoEl.width / this.videoEl.height\n\n              if (expectedAspectRatio > realAspectRatio) {\n                this.videoView.scaleX = realAspectRatio / expectedAspectRatio\n                this.videoView.scaleY = 1\n              } else {\n                this.videoView.scaleY = expectedAspectRatio / realAspectRatio\n                this.videoView.scaleX = 1\n              }\n            } catch (e) {\n              Log.error('texImage2d video', e)\n              this.stop()\n            }\n            this.videoTexture.source.forceRenderUpdate()\n          }\n        }\n      }\n    }\n    if (!this._updatingVideoTexture) {\n      stage.on('frameStart', this._updateVideoTexture)\n      this._updatingVideoTexture = true\n    }\n  }\n\n  stop() {\n    const stage = this.stage\n    stage.removeListener('frameStart', this._updateVideoTexture)\n    this._updatingVideoTexture = false\n    this.videoView.visible = false\n\n    if (this.videoTexture.options.source) {\n      const gl = stage.gl\n      gl.bindTexture(gl.TEXTURE_2D, this.videoTexture.options.source)\n      gl.clearColor(0, 0, 0, 1)\n      gl.clear(gl.COLOR_BUFFER_BIT)\n    }\n  }\n\n  position(top, left) {\n    this.videoView.patch({\n      smooth: {\n        x: left,\n        y: top,\n      },\n    })\n  }\n\n  size(width, height) {\n    this.videoView.patch({\n      smooth: {\n        w: width,\n        h: height,\n      },\n    })\n  }\n\n  show() {\n    this.videoView.setSmooth('alpha', 1)\n  }\n\n  hide() {\n    this.videoView.setSmooth('alpha', 0)\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Metrics from '../Metrics'\nimport Log from '../Log'\nimport Ads from '../Ads'\n\nimport events from './events'\nimport autoSetupMixin from '../helpers/autoSetupMixin'\nimport easeExecution from '../helpers/easeExecution'\nimport { ApplicationInstance } from '../Launch'\nimport Settings from '../Settings'\nimport VideoTexture from './VideoTexture'\n\nexport let mediaUrl = url => url\nlet videoEl\nlet videoTexture\nlet metrics\nlet consumer\nlet precision = 1\nlet textureMode = false\n\nexport const initVideoPlayer = config => {\n  if (config.mediaUrl) {\n    mediaUrl = config.mediaUrl\n  }\n}\n\n// todo: add this in a 'Registry' plugin\n// to be able to always clean this up on app close\nlet eventHandlers = {}\n\nconst state = {\n  adsEnabled: false,\n  playing: false,\n  _playingAds: false,\n  get playingAds() {\n    return this._playingAds\n  },\n  set playingAds(val) {\n    if (this._playingAds !== val) {\n      this._playingAds = val\n      fireOnConsumer(val === true ? 'AdStart' : 'AdEnd')\n    }\n  },\n  skipTime: false,\n  playAfterSeek: null,\n}\n\nconst hooks = {\n  play() {\n    state.playing = true\n  },\n  pause() {\n    state.playing = false\n  },\n  seeked() {\n    state.playAfterSeek === true && videoPlayerPlugin.play()\n    state.playAfterSeek = null\n  },\n  abort() {\n    deregisterEventListeners()\n  },\n}\n\nconst withPrecision = val => Math.round(precision * val) + 'px'\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$videoPlayer' + event, args)\n    consumer.fire('$videoPlayerEvent', event, args)\n  }\n}\n\nconst fireHook = (event, args) => {\n  hooks[event] && typeof hooks[event] === 'function' && hooks[event].call(null, event, args)\n}\n\nexport const setupVideoTag = () => {\n  const videoEls = document.getElementsByTagName('video')\n  if (videoEls && videoEls.length) {\n    return videoEls[0]\n  } else {\n    const videoEl = document.createElement('video')\n    videoEl.setAttribute('id', 'video-player')\n    videoEl.setAttribute('width', withPrecision(1920))\n    videoEl.setAttribute('height', withPrecision(1080))\n    videoEl.setAttribute('crossorigin', 'anonymous')\n    videoEl.style.position = 'absolute'\n    videoEl.style.zIndex = '1'\n    videoEl.style.display = 'none'\n    videoEl.style.visibility = 'hidden'\n    videoEl.style.top = withPrecision(0)\n    videoEl.style.left = withPrecision(0)\n    videoEl.style.width = withPrecision(1920)\n    videoEl.style.height = withPrecision(1080)\n    document.body.appendChild(videoEl)\n    return videoEl\n  }\n}\n\nexport const setUpVideoTexture = () => {\n  if (!ApplicationInstance.tag('VideoTexture')) {\n    const el = ApplicationInstance.stage.c({\n      type: VideoTexture,\n      ref: 'VideoTexture',\n      zIndex: 0,\n      videoEl,\n    })\n    ApplicationInstance.childList.addAt(el, 0)\n  }\n  return ApplicationInstance.tag('VideoTexture')\n}\n\nconst registerEventListeners = () => {\n  Log.info('VideoPlayer', 'Registering event listeners')\n  Object.keys(events).forEach(event => {\n    const handler = e => {\n      // Fire a metric for each event (if it exists on the metrics object)\n      if (metrics && metrics[event] && typeof metrics[event] === 'function') {\n        metrics[event]({ currentTime: videoEl.currentTime })\n      }\n      // fire an internal hook\n      fireHook(event, { videoElement: videoEl, event: e })\n\n      // fire the event (with human friendly event name) to the consumer of the VideoPlayer\n      fireOnConsumer(events[event], { videoElement: videoEl, event: e })\n    }\n\n    eventHandlers[event] = handler\n    videoEl.addEventListener(event, handler)\n  })\n}\n\nconst deregisterEventListeners = () => {\n  Log.info('VideoPlayer', 'Deregistering event listeners')\n  Object.keys(eventHandlers).forEach(event => {\n    videoEl.removeEventListener(event, eventHandlers[event])\n  })\n  eventHandlers = {}\n}\n\nconst videoPlayerPlugin = {\n  consumer(component) {\n    consumer = component\n  },\n\n  position(top = 0, left = 0) {\n    videoEl.style.left = withPrecision(left)\n    videoEl.style.top = withPrecision(top)\n    if (textureMode === true) {\n      videoTexture.position(top, left)\n    }\n  },\n\n  size(width = 1920, height = 1080) {\n    videoEl.style.width = withPrecision(width)\n    videoEl.style.height = withPrecision(height)\n    videoEl.width = parseFloat(videoEl.style.width)\n    videoEl.height = parseFloat(videoEl.style.height)\n    if (textureMode === true) {\n      videoTexture.size(width, height)\n    }\n  },\n\n  area(top = 0, right = 1920, bottom = 1080, left = 0) {\n    this.position(top, left)\n    this.size(right - left, bottom - top)\n  },\n\n  open(url, details = {}) {\n    if (!this.canInteract) return\n    metrics = Metrics.media(url)\n    // prep the media url to play depending on platform\n    url = mediaUrl(url)\n\n    // if url is same as current clear (which is effectively a reload)\n    if (this.src == url) {\n      this.clear()\n    }\n\n    this.hide()\n    deregisterEventListeners()\n\n    // preload the video to get duration (for ads)\n    //.. currently actually not working because loadedmetadata didn't work reliably on Sky boxes\n    videoEl.setAttribute('src', url)\n    videoEl.load()\n\n    // const onLoadedMetadata = () => {\n    // videoEl.removeEventListener('loadedmetadata', onLoadedMetadata)\n    const config = { enabled: state.adsEnabled, duration: 300 } // this.duration ||\n    if (details.videoId) {\n      config.caid = details.videoId\n    }\n    Ads.get(config, consumer).then(ads => {\n      state.playingAds = true\n      ads.prerolls().then(() => {\n        state.playingAds = false\n        registerEventListeners()\n        if (this.src !== url) {\n          videoEl.setAttribute('src', url)\n          videoEl.load()\n        }\n        this.show()\n        setTimeout(() => {\n          this.play()\n        })\n      })\n    })\n    // }\n\n    // videoEl.addEventListener('loadedmetadata', onLoadedMetadata)\n  },\n\n  reload() {\n    if (!this.canInteract) return\n    const url = videoEl.getAttribute('src')\n    this.close()\n    this.open(url)\n  },\n\n  close() {\n    Ads.cancel()\n    if (state.playingAds) {\n      state.playingAds = false\n      Ads.stop()\n      // call self in next tick\n      setTimeout(() => {\n        this.close()\n      })\n    }\n    if (!this.canInteract) return\n    this.clear()\n    this.hide()\n    deregisterEventListeners()\n  },\n\n  clear() {\n    if (!this.canInteract) return\n    // pause the video first to disable sound\n    this.pause()\n    if (textureMode === true) videoTexture.stop()\n    videoEl.removeAttribute('src')\n    videoEl.load()\n  },\n\n  play() {\n    if (!this.canInteract) return\n    if (textureMode === true) videoTexture.start()\n    videoEl.play()\n  },\n\n  pause() {\n    if (!this.canInteract) return\n    videoEl.pause()\n  },\n\n  playPause() {\n    if (!this.canInteract) return\n    this.playing === true ? this.pause() : this.play()\n  },\n\n  mute(muted = true) {\n    if (!this.canInteract) return\n    videoEl.muted = muted\n  },\n\n  loop(looped = true) {\n    videoEl.loop = looped\n  },\n\n  seek(time) {\n    if (!this.canInteract) return\n    if (!this.src) return\n    // define whether should continue to play after seek is complete (in seeked hook)\n    if (state.playAfterSeek === null) {\n      state.playAfterSeek = !!state.playing\n    }\n    // pause before actually seeking\n    this.pause()\n    // currentTime always between 0 and the duration of the video (minus 0.1s to not set to the final frame and stall the video)\n    videoEl.currentTime = Math.max(0, Math.min(time, this.duration - 0.1))\n  },\n\n  skip(seconds) {\n    if (!this.canInteract) return\n    if (!this.src) return\n\n    state.skipTime = (state.skipTime || videoEl.currentTime) + seconds\n    easeExecution(() => {\n      this.seek(state.skipTime)\n      state.skipTime = false\n    }, 300)\n  },\n\n  show() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.show()\n    } else {\n      videoEl.style.display = 'block'\n      videoEl.style.visibility = 'visible'\n    }\n  },\n\n  hide() {\n    if (!this.canInteract) return\n    if (textureMode === true) {\n      videoTexture.hide()\n    } else {\n      videoEl.style.display = 'none'\n      videoEl.style.visibility = 'hidden'\n    }\n  },\n\n  enableAds(enabled = true) {\n    state.adsEnabled = enabled\n  },\n\n  /* Public getters */\n  get duration() {\n    return videoEl && (isNaN(videoEl.duration) ? Infinity : videoEl.duration)\n  },\n\n  get currentTime() {\n    return videoEl && videoEl.currentTime\n  },\n\n  get muted() {\n    return videoEl && videoEl.muted\n  },\n\n  get looped() {\n    return videoEl && videoEl.loop\n  },\n\n  get src() {\n    return videoEl && videoEl.getAttribute('src')\n  },\n\n  get playing() {\n    return state.playing\n  },\n\n  get playingAds() {\n    return state.playingAds\n  },\n\n  get canInteract() {\n    // todo: perhaps add an extra flag wether we allow interactions (i.e. pauze, mute, etc.) during ad playback\n    return state.playingAds === false\n  },\n\n  get top() {\n    return videoEl && parseFloat(videoEl.style.top)\n  },\n\n  get left() {\n    return videoEl && parseFloat(videoEl.style.left)\n  },\n\n  get bottom() {\n    return videoEl && parseFloat(videoEl.style.top - videoEl.style.height)\n  },\n\n  get right() {\n    return videoEl && parseFloat(videoEl.style.left - videoEl.style.width)\n  },\n\n  get width() {\n    return videoEl && parseFloat(videoEl.style.width)\n  },\n\n  get height() {\n    return videoEl && parseFloat(videoEl.style.height)\n  },\n\n  get visible() {\n    if (textureMode === true) {\n      return videoTexture.isVisible\n    } else {\n      return videoEl && videoEl.style.display === 'block'\n    }\n  },\n\n  get adsEnabled() {\n    return state.adsEnabled\n  },\n\n  // prefixed with underscore to indicate 'semi-private'\n  // because it's not recommended to interact directly with the video element\n  get _videoEl() {\n    return videoEl\n  },\n}\n\nexport default autoSetupMixin(videoPlayerPlugin, () => {\n  precision =\n    ApplicationInstance &&\n    ApplicationInstance.stage &&\n    ApplicationInstance.stage.getRenderPrecision()\n\n  videoEl = setupVideoTag()\n\n  textureMode = Settings.get('platform', 'textureMode', false)\n  if (textureMode === true) {\n    videoTexture = setUpVideoTexture()\n  }\n})\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Log from '../Log'\nimport { mediaUrl } from '../VideoPlayer'\n\nlet consumer\n\nlet getAds = () => {\n  // todo: enable some default ads during development, maybe from the settings.json\n  return Promise.resolve({\n    prerolls: [],\n    midrolls: [],\n    postrolls: [],\n  })\n}\n\nexport const initAds = config => {\n  if (config.getAds) {\n    getAds = config.getAds\n  }\n}\n\nconst state = {\n  active: false,\n}\n\nconst playSlot = (slot = []) => {\n  return slot.reduce((promise, ad) => {\n    return promise.then(() => {\n      return playAd(ad)\n    })\n  }, Promise.resolve(null))\n}\n\nconst playAd = ad => {\n  return new Promise(resolve => {\n    if (state.active === false) {\n      Log.info('Ad', 'Skipping add due to inactive state')\n      return resolve()\n    }\n    // is it safe to rely on videoplayer plugin already created the video tag?\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.style.display = 'block'\n    videoEl.style.visibility = 'visible'\n    videoEl.src = mediaUrl(ad.url)\n    videoEl.load()\n\n    let timeEvents = null\n    let timeout\n\n    const cleanup = () => {\n      // remove all listeners\n      Object.keys(handlers).forEach(handler =>\n        videoEl.removeEventListener(handler, handlers[handler])\n      )\n      resolve()\n    }\n    const handlers = {\n      play() {\n        Log.info('Ad', 'Play ad', ad.url)\n        fireOnConsumer('Play', ad)\n        sendBeacon(ad.callbacks, 'defaultImpression')\n      },\n      ended() {\n        fireOnConsumer('Ended', ad)\n        sendBeacon(ad.callbacks, 'complete')\n        cleanup()\n      },\n      timeupdate() {\n        if (!timeEvents && videoEl.duration) {\n          // calculate when to fire the time based events (now that duration is known)\n          timeEvents = {\n            firstQuartile: videoEl.duration / 4,\n            midPoint: videoEl.duration / 2,\n            thirdQuartile: (videoEl.duration / 4) * 3,\n          }\n          Log.info('Ad', 'Calculated quartiles times', { timeEvents })\n        }\n        if (\n          timeEvents &&\n          timeEvents.firstQuartile &&\n          videoEl.currentTime >= timeEvents.firstQuartile\n        ) {\n          fireOnConsumer('FirstQuartile', ad)\n          delete timeEvents.firstQuartile\n          sendBeacon(ad.callbacks, 'firstQuartile')\n        }\n        if (timeEvents && timeEvents.midPoint && videoEl.currentTime >= timeEvents.midPoint) {\n          fireOnConsumer('MidPoint', ad)\n          delete timeEvents.midPoint\n          sendBeacon(ad.callbacks, 'midPoint')\n        }\n        if (\n          timeEvents &&\n          timeEvents.thirdQuartile &&\n          videoEl.currentTime >= timeEvents.thirdQuartile\n        ) {\n          fireOnConsumer('ThirdQuartile', ad)\n          delete timeEvents.thirdQuartile\n          sendBeacon(ad.callbacks, 'thirdQuartile')\n        }\n      },\n      stalled() {\n        fireOnConsumer('Stalled', ad)\n        timeout = setTimeout(() => {\n          cleanup()\n        }, 5000) // make timeout configurable\n      },\n      canplay() {\n        timeout && clearTimeout(timeout)\n      },\n      error() {\n        fireOnConsumer('Error', ad)\n        cleanup()\n      },\n      // this doesn't work reliably on sky box, moved logic to timeUpdate event\n      // loadedmetadata() {\n      //   // calculate when to fire the time based events (now that duration is known)\n      //   timeEvents = {\n      //     firstQuartile: videoEl.duration / 4,\n      //     midPoint: videoEl.duration / 2,\n      //     thirdQuartile: (videoEl.duration / 4) * 3,\n      //   }\n      // },\n      abort() {\n        cleanup()\n      },\n      // todo: pause, resume, mute, unmute beacons\n    }\n    // add all listeners\n    Object.keys(handlers).forEach(handler => videoEl.addEventListener(handler, handlers[handler]))\n\n    videoEl.play()\n  })\n}\n\nconst sendBeacon = (callbacks, event) => {\n  if (callbacks && callbacks[event]) {\n    Log.info('Ad', 'Sending beacon', event, callbacks[event])\n    return callbacks[event].reduce((promise, url) => {\n      return promise.then(() =>\n        fetch(url)\n          // always resolve, also in case of a fetch error (so we don't block firing the rest of the beacons for this event)\n          // note: for fetch failed http responses don't throw an Error :)\n          .then(response => {\n            if (response.status === 200) {\n              fireOnConsumer('Beacon' + event + 'Sent')\n            } else {\n              fireOnConsumer('Beacon' + event + 'Failed' + response.status)\n            }\n            Promise.resolve(null)\n          })\n          .catch(() => {\n            Promise.resolve(null)\n          })\n      )\n    }, Promise.resolve(null))\n  } else {\n    Log.info('Ad', 'No callback found for ' + event)\n  }\n}\n\nconst fireOnConsumer = (event, args) => {\n  if (consumer) {\n    consumer.fire('$ad' + event, args)\n    consumer.fire('$adEvent', event, args)\n  }\n}\n\nexport default {\n  get(config, videoPlayerConsumer) {\n    if (config.enabled === false) {\n      return Promise.resolve({\n        prerolls() {\n          return Promise.resolve()\n        },\n      })\n    }\n    consumer = videoPlayerConsumer\n\n    return new Promise(resolve => {\n      Log.info('Ad', 'Starting session')\n      getAds(config).then(ads => {\n        Log.info('Ad', 'API result', ads)\n        resolve({\n          prerolls() {\n            if (ads.preroll) {\n              state.active = true\n              fireOnConsumer('PrerollSlotImpression', ads)\n              sendBeacon(ads.preroll.callbacks, 'slotImpression')\n              return playSlot(ads.preroll.ads).then(() => {\n                fireOnConsumer('PrerollSlotEnd', ads)\n                sendBeacon(ads.preroll.callbacks, 'slotEnd')\n                state.active = false\n              })\n            }\n            return Promise.resolve()\n          },\n          midrolls() {\n            return Promise.resolve()\n          },\n          postrolls() {\n            return Promise.resolve()\n          },\n        })\n      })\n    })\n  },\n  cancel() {\n    Log.info('Ad', 'Cancel Ad')\n    state.active = false\n  },\n  stop() {\n    Log.info('Ad', 'Stop Ad')\n    state.active = false\n    // fixme: duplication\n    const videoEl = document.getElementsByTagName('video')[0]\n    videoEl.pause()\n    videoEl.removeAttribute('src')\n  },\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default (sourceObject, setup = () => {}) => {\n  let ready = false\n\n  const doSetup = () => {\n    if (ready === false) {\n      setup()\n      ready = true\n    }\n  }\n\n  return Object.keys(sourceObject).reduce((obj, key) => {\n    if (typeof sourceObject[key] === 'function') {\n      obj[key] = function() {\n        doSetup()\n        return sourceObject[key].apply(sourceObject, arguments)\n      }\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).get === 'function') {\n      obj.__defineGetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).get.apply(sourceObject)\n      })\n    } else if (typeof Object.getOwnPropertyDescriptor(sourceObject, key).set === 'function') {\n      obj.__defineSetter__(key, function() {\n        doSetup()\n        return Object.getOwnPropertyDescriptor(sourceObject, key).set.sourceObject[key].apply(\n          sourceObject,\n          arguments\n        )\n      })\n    } else {\n      obj[key] = sourceObject[key]\n    }\n    return obj\n  }, {})\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\n\nexport default class ScaledImageTexture extends Lightning.textures.ImageTexture {\n  constructor(stage) {\n    super(stage)\n    this._scalingOptions = undefined\n  }\n\n  set options(options) {\n    this.resizeMode = this._scalingOptions = options\n  }\n\n  _getLookupId() {\n    return `${this._src}-${this._scalingOptions.type}-${this._scalingOptions.w}-${this._scalingOptions.h}`\n  }\n\n  getNonDefaults() {\n    const obj = super.getNonDefaults()\n    if (this._src) {\n      obj.src = this._src\n    }\n    return obj\n  }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Lightning from '../Lightning'\nimport Pin from '../Pin'\n\nclass PinInput extends Lightning.Component {\n  static _template() {\n    return {\n      w: 120,\n      h: 150,\n      rect: true,\n      color: 0xff949393,\n      alpha: 0.5,\n      shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n      Nr: {\n        w: w => w,\n        y: 24,\n        text: {\n          text: '',\n          textColor: 0xff333333,\n          fontSize: 80,\n          textAlign: 'center',\n          verticalAlign: 'middle',\n        },\n      },\n    }\n  }\n\n  set index(v) {\n    this.x = v * (120 + 24)\n  }\n\n  set nr(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    if (v) {\n      this.setSmooth('alpha', 1)\n    } else {\n      this.setSmooth('alpha', 0.5)\n    }\n\n    this.tag('Nr').patch({\n      text: {\n        text: (v && v.toString()) || '',\n        fontSize: v === '*' ? 120 : 80,\n      },\n    })\n\n    if (v && v !== '*') {\n      this._timeout = setTimeout(() => {\n        this._timeout = null\n        this.nr = '*'\n      }, 750)\n    }\n  }\n}\n\nexport default class PinDialog extends Lightning.Component {\n  static _template() {\n    return {\n      w: w => w,\n      h: h => h,\n      rect: true,\n      color: 0xdd000000,\n      alpha: 0.000001,\n      Dialog: {\n        w: 648,\n        h: 320,\n        y: h => (h - 320) / 2,\n        x: w => (w - 648) / 2,\n        rect: true,\n        color: 0xdd333333,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 10 },\n        Info: {\n          y: 24,\n          x: 48,\n          text: { text: 'Please enter your PIN', fontSize: 32 },\n        },\n        Msg: {\n          y: 260,\n          x: 48,\n          text: { text: '', fontSize: 28, textColor: 0xffffffff },\n        },\n        Code: {\n          x: 48,\n          y: 96,\n        },\n      },\n    }\n  }\n\n  _init() {\n    const children = []\n    for (let i = 0; i < 4; i++) {\n      children.push({\n        type: PinInput,\n        index: i,\n      })\n    }\n\n    this.tag('Code').children = children\n  }\n\n  get pin() {\n    if (!this._pin) this._pin = ''\n    return this._pin\n  }\n\n  set pin(v) {\n    if (v.length <= 4) {\n      const maskedPin = new Array(Math.max(v.length - 1, 0)).fill('*', 0, v.length - 1)\n      v.length && maskedPin.push(v.length > this._pin.length ? v.slice(-1) : '*')\n      for (let i = 0; i < 4; i++) {\n        this.tag('Code').children[i].nr = maskedPin[i] || ''\n      }\n      this._pin = v\n    }\n  }\n\n  get msg() {\n    if (!this._msg) this._msg = ''\n    return this._msg\n  }\n\n  set msg(v) {\n    this._timeout && clearTimeout(this._timeout)\n\n    this._msg = v\n    if (this._msg) {\n      this.tag('Msg').text = this._msg\n      this.tag('Info').setSmooth('alpha', 0.5)\n      this.tag('Code').setSmooth('alpha', 0.5)\n    } else {\n      this.tag('Msg').text = ''\n      this.tag('Info').setSmooth('alpha', 1)\n      this.tag('Code').setSmooth('alpha', 1)\n    }\n    this._timeout = setTimeout(() => {\n      this.msg = ''\n    }, 2000)\n  }\n\n  _firstActive() {\n    this.setSmooth('alpha', 1)\n  }\n\n  _handleKey(event) {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      const val = parseInt(event.key)\n      if (val > -1) {\n        this.pin += val\n      }\n    }\n  }\n\n  _handleBack() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      if (this.pin.length) {\n        this.pin = this.pin.slice(0, this.pin.length - 1)\n      } else {\n        Pin.hide()\n        this.resolve(false)\n      }\n    }\n  }\n\n  _handleEnter() {\n    if (this.msg) {\n      this.msg = false\n    } else {\n      Pin.submit(this.pin)\n        .then(val => {\n          this.msg = 'Unlocking ...'\n          setTimeout(() => {\n            Pin.hide()\n          }, 1000)\n          this.resolve(val)\n        })\n        .catch(e => {\n          this.msg = e\n          this.reject(e)\n        })\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render items in main view.\n */\nexport default class ListItem extends Lightning.Component {\n  /**\n   * Function to render various elements in the main view item.\n   */\n  static _template() {\n    return {\n      Item: {\n        x: 30,\n        y: 18,\n        Shadow: {\n          alpha: 0,\n          color: 0xffa9a9a9,\n        },\n        Title: {\n          text: {\n            fontSize: 27,\n            textColor: 0xffffffff,\n          },\n          mountX: 0.5,\n          alpha: 0,\n        },\n        Bg: {},\n        Image: {},\n      },\n    }\n  }\n\n  _init() {\n    if (this.data.show) {\n      this.tag('Title').patch({\n        x: this.x_text,\n        y: this.y_text,\n        alpha: 1,\n        text: { text: this.data.title },\n      })\n    }\n    this.tag('Title').patch({\n      x: this.x_text,\n      y: this.y_text,\n      text: { text: this.data.displayName },\n    })\n    this.tag('Shadow').patch({\n      scale: this.unfocus,\n      texture: Lightning.Tools.getShadowRect(this.w, this.h, 4, 10, 0),\n    })\n    this.tag('Bg').patch({\n      rect: true,\n      color: 0xff000000,\n      w: this.w,\n      h: this.h,\n    })\n    if (this.data.url.startsWith('/images')) {\n      this.tag('Image').patch({\n        src: Utils.asset(this.data.url),\n        w: this.w,\n        h: this.h,\n        scale: this.unfocus,\n      })\n    } else {\n      this.tag('Image').patch({ src: this.data.url, w: this.w, h: this.h })\n    }\n  }\n\n  /**\n   * Function to change properties of item during focus.\n   */\n  _focus() {\n    this.tag('Bg').scale = this.focus\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.focus })\n    this.tag('Title').patch({\n      x: this.x_text,\n      y: this.y_text,\n      text: { text: this.data.displayName },\n    })\n    this.tag('Shadow').patch({\n      scale: this.focus,\n      x: -7,\n      y: -7,\n      alpha: 1,\n      texture: Lightning.Tools.getShadowRect(this.w + 14, this.h + 14, 4, 10, 0),\n    })\n    this.tag('Title').patch({ alpha: 1 })\n    this.tag('Item').patch({ zIndex: 1 })\n  }\n\n  /**\n   * Function to change properties of item during unfocus.\n   */\n  _unfocus() {\n    this.tag('Bg').scale = this.unfocus\n    this.tag('Image').patch({ x: 0, y: 0, w: this.w, h: this.h, scale: this.unfocus })\n    this.tag('Shadow').patch({ scale: this.unfocus, alpha: 0 })\n    this.tag('Title').patch({ alpha: 0 })\n    this.tag('Item').patch({ zIndex: 0 })\n  }\n}\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE file the\r\n * following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the License);\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nlet ws = null;\r\nif (typeof WebSocket !== 'undefined') {\r\n  ws = WebSocket;\r\n}\r\nvar ws_1 = ws;\r\n\r\nconst requestsQueue = {};\r\nconst listeners = {};\r\n\r\nvar requestQueueResolver = data => {\r\n  if (typeof data === 'string') {\r\n    data = JSON.parse(data.normalize().replace(/\\\\x([0-9A-Fa-f]{2})/g, ''));\r\n  }\r\n  if (data.id) {\r\n    const request = requestsQueue[data.id];\r\n    if (request) {\r\n      if ('result' in data) request.resolve(data.result);\r\n      else request.reject(data.error);\r\n      delete requestsQueue[data.id];\r\n    } else {\r\n      console.log('no pending request found with id ' + data.id);\r\n    }\r\n  }\r\n};\r\n\r\nvar notificationListener = data => {\r\n  if (typeof data === 'string') {\r\n    data = JSON.parse(data.normalize().replace(/\\\\x([0-9A-Fa-f]{2})/g, ''));\r\n  }\r\n  if (!data.id && data.method) {\r\n    const callbacks = listeners[data.method];\r\n    if (callbacks && Array.isArray(callbacks) && callbacks.length) {\r\n      callbacks.forEach(callback => {\r\n        callback(data.params);\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst protocol = 'ws://';\r\nconst host = 'localhost';\r\nconst endpoint = '/jsonrpc';\r\nconst port = 80;\r\nvar makeWebsocketAddress = options => {\r\n  return [\r\n    (options && options.protocol) || protocol,\r\n    (options && options.host) || host,\r\n    ':' + ((options && options.port) || port),\r\n    (options && options.endpoint) || endpoint,\r\n    options && options.token ? '?token=' + options.token : null,\r\n  ].join('')\r\n};\r\n\r\nconst protocols = 'notification';\r\nlet socket = null;\r\nvar connect = options => {\r\n  return new Promise((resolve, reject) => {\r\n    if (socket && socket.readyState === 1) return resolve(socket)\r\n    if (socket && socket.readyState === 0) {\r\n      const waitForOpen = () => {\r\n        socket.removeEventListener('open', waitForOpen);\r\n        resolve(socket);\r\n      };\r\n      return socket.addEventListener('open', waitForOpen)\r\n    }\r\n    if (socket === null) {\r\n      socket = new ws_1(makeWebsocketAddress(options), protocols);\r\n      socket.addEventListener('message', message => {\r\n        if (options.debug) {\r\n          console.log(' ');\r\n          console.log('API REPONSE:');\r\n          console.log(JSON.stringify(message.data, null, 2));\r\n          console.log(' ');\r\n        }\r\n        requestQueueResolver(message.data);\r\n      });\r\n      socket.addEventListener('message', message => {\r\n        notificationListener(message.data);\r\n      });\r\n      socket.addEventListener('error', () => {\r\n        notificationListener({\r\n          method: 'client.ThunderJS.events.error',\r\n        });\r\n        socket = null;\r\n      });\r\n      const handleConnectClosure = event => {\r\n        socket = null;\r\n        reject(event);\r\n      };\r\n      socket.addEventListener('close', handleConnectClosure);\r\n      socket.addEventListener('open', () => {\r\n        notificationListener({\r\n          method: 'client.ThunderJS.events.connect',\r\n        });\r\n        socket.removeEventListener('close', handleConnectClosure);\r\n        socket.addEventListener('close', () => {\r\n          notificationListener({\r\n            method: 'client.ThunderJS.events.disconnect',\r\n          });\r\n          socket = null;\r\n        });\r\n        resolve(socket);\r\n      });\r\n    } else {\r\n      socket = null;\r\n      reject('Socket error');\r\n    }\r\n  })\r\n};\r\n\r\nvar makeBody = (requestId, plugin, method, params, version) => {\r\n  params ? delete params.version : null;\r\n  const body = {\r\n    jsonrpc: '2.0',\r\n    id: requestId,\r\n    method: [plugin, version, method].join('.'),\r\n  };\r\n  params || params === false\r\n    ?\r\n      typeof params === 'object' && Object.keys(params).length === 0\r\n      ? null\r\n      : (body.params = params)\r\n    : null;\r\n  return body\r\n};\r\n\r\nvar getVersion = (versionsConfig, plugin, params) => {\r\n  const defaultVersion = 1;\r\n  let version;\r\n  if ((version = params && params.version)) {\r\n    return version\r\n  }\r\n  return versionsConfig\r\n    ? versionsConfig[plugin] || versionsConfig.default || defaultVersion\r\n    : defaultVersion\r\n};\r\n\r\nlet id = 0;\r\nvar makeId = () => {\r\n  id = id + 1;\r\n  return id\r\n};\r\n\r\nvar execRequest = (options, body) => {\r\n  return connect(options).then(connection => {\r\n    connection.send(JSON.stringify(body));\r\n  })\r\n};\r\n\r\nvar API = options => {\r\n  return {\r\n    request(plugin, method, params) {\r\n      return new Promise((resolve, reject) => {\r\n        const requestId = makeId();\r\n        const version = getVersion(options.versions, plugin, params);\r\n        const body = makeBody(requestId, plugin, method, params, version);\r\n        if (options.debug) {\r\n          console.log(' ');\r\n          console.log('API REQUEST:');\r\n          console.log(JSON.stringify(body, null, 2));\r\n          console.log(' ');\r\n        }\r\n        requestsQueue[requestId] = {\r\n          body,\r\n          resolve,\r\n          reject,\r\n        };\r\n        execRequest(options, body).catch(e => {\r\n          reject(e);\r\n        });\r\n      })\r\n    },\r\n  }\r\n};\r\n\r\nvar DeviceInfo = {\r\n  freeRam(params) {\r\n    return this.call('systeminfo', params).then(res => {\r\n      return res.freeram\r\n    })\r\n  },\r\n  version(params) {\r\n    return this.call('systeminfo', params).then(res => {\r\n      return res.version\r\n    })\r\n  },\r\n};\r\n\r\nvar plugins = {\r\n  DeviceInfo,\r\n};\r\n\r\nfunction listener(plugin, event, callback, errorCallback) {\r\n  const thunder = this;\r\n  const index = register.call(this, plugin, event, callback, errorCallback);\r\n  return {\r\n    dispose() {\r\n      const listener_id = makeListenerId(plugin, event);\r\n      if (listeners[listener_id] === undefined) return\r\n      listeners[listener_id].splice(index, 1);\r\n      if (listeners[listener_id].length === 0) {\r\n        unregister.call(thunder, plugin, event, errorCallback);\r\n      }\r\n    },\r\n  }\r\n}\r\nconst makeListenerId = (plugin, event) => {\r\n  return ['client', plugin, 'events', event].join('.')\r\n};\r\nconst register = function(plugin, event, callback, errorCallback) {\r\n  const listener_id = makeListenerId(plugin, event);\r\n  if (!listeners[listener_id]) {\r\n    listeners[listener_id] = [];\r\n    if (plugin !== 'ThunderJS') {\r\n      const method = 'register';\r\n      const request_id = listener_id\r\n        .split('.')\r\n        .slice(0, -1)\r\n        .join('.');\r\n      const params = {\r\n        event,\r\n        id: request_id,\r\n      };\r\n      this.api.request(plugin, method, params).catch(e => {\r\n        if (typeof errorCallback === 'function') errorCallback(e.message);\r\n      });\r\n    }\r\n  }\r\n  listeners[listener_id].push(callback);\r\n  return listeners[listener_id].length - 1\r\n};\r\nconst unregister = function(plugin, event, errorCallback) {\r\n  const listener_id = makeListenerId(plugin, event);\r\n  delete listeners[listener_id];\r\n  if (plugin !== 'ThunderJS') {\r\n    const method = 'unregister';\r\n    const request_id = listener_id\r\n      .split('.')\r\n      .slice(0, -1)\r\n      .join('.');\r\n    const params = {\r\n      event,\r\n      id: request_id,\r\n    };\r\n    this.api.request(plugin, method, params).catch(e => {\r\n      if (typeof errorCallback === 'function') errorCallback(e.message);\r\n    });\r\n  }\r\n};\r\n\r\nlet api;\r\nvar thunderJS = options => {\r\n  if (\r\n    options.token === undefined &&\r\n    typeof window !== 'undefined' &&\r\n    window.thunder &&\r\n    typeof window.thunder.token === 'function'\r\n  ) {\r\n    options.token = window.thunder.token();\r\n  }\r\n  api = API(options);\r\n  return wrapper({ ...thunder(options), ...plugins })\r\n};\r\nconst resolve = (result, args) => {\r\n  if (\r\n    typeof result !== 'object' ||\r\n    (typeof result === 'object' && (!result.then || typeof result.then !== 'function'))\r\n  ) {\r\n    result = new Promise((resolve, reject) => {\r\n      result instanceof Error === false ? resolve(result) : reject(result);\r\n    });\r\n  }\r\n  const cb = typeof args[args.length - 1] === 'function' ? args[args.length - 1] : null;\r\n  if (cb) {\r\n    result.then(res => cb(null, res)).catch(err => cb(err));\r\n  } else {\r\n    return result\r\n  }\r\n};\r\nconst thunder = options => ({\r\n  options,\r\n  plugin: false,\r\n  call() {\r\n    const args = [...arguments];\r\n    if (this.plugin) {\r\n      if (args[0] !== this.plugin) {\r\n        args.unshift(this.plugin);\r\n      }\r\n    }\r\n    const plugin = args[0];\r\n    const method = args[1];\r\n    if (typeof this[plugin][method] == 'function') {\r\n      return this[plugin][method](args[2])\r\n    }\r\n    return this.api.request.apply(this, args)\r\n  },\r\n  registerPlugin(name, plugin) {\r\n    this[name] = wrapper(Object.assign(Object.create(thunder), plugin, { plugin: name }));\r\n  },\r\n  subscribe() {\r\n  },\r\n  on() {\r\n    const args = [...arguments];\r\n    if (['connect', 'disconnect', 'error'].indexOf(args[0]) !== -1) {\r\n      args.unshift('ThunderJS');\r\n    } else {\r\n      if (this.plugin) {\r\n        if (args[0] !== this.plugin) {\r\n          args.unshift(this.plugin);\r\n        }\r\n      }\r\n    }\r\n    return listener.apply(this, args)\r\n  },\r\n  once() {\r\n    console.log('todo ...');\r\n  },\r\n});\r\nconst wrapper = obj => {\r\n  return new Proxy(obj, {\r\n    get(target, propKey) {\r\n      const prop = target[propKey];\r\n      if (propKey === 'api') {\r\n        return api\r\n      }\r\n      if (typeof prop !== 'undefined') {\r\n        if (typeof prop === 'function') {\r\n          if (['on', 'once', 'subscribe'].indexOf(propKey) > -1) {\r\n            return function(...args) {\r\n              return prop.apply(this, args)\r\n            }\r\n          }\r\n          return function(...args) {\r\n            return resolve(prop.apply(this, args), args)\r\n          }\r\n        }\r\n        if (typeof prop === 'object') {\r\n          return wrapper(\r\n            Object.assign(Object.create(thunder(target.options)), prop, { plugin: propKey })\r\n          )\r\n        }\r\n        return prop\r\n      } else {\r\n        if (target.plugin === false) {\r\n          return wrapper(\r\n            Object.assign(Object.create(thunder(target.options)), {}, { plugin: propKey })\r\n          )\r\n        }\r\n        return function(...args) {\r\n          args.unshift(propKey);\r\n          return target.call.apply(this, args)\r\n        }\r\n      }\r\n    },\r\n  })\r\n};\r\n\r\nexport default thunderJS;\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\nvar activatedWeb = false\nvar activatedLightning = false\nvar activatedCobalt = false\nvar webUrl = ''\nvar lightningUrl = ''\nvar activatedNative = false\nvar nativeUrl = ''\nvar cobaltUrl = ''\nconst config = {\n  host: '127.0.0.1',\n  port: 9998,\n  default: 1,\n}\nvar thunder = ThunderJS(config)\n/**\n * Class that contains functions which commuicates with thunder API's\n */\nexport default class AppApi {\n  checkForInternet() {\n    return new Promise((resolve, reject) => {\n      let i = 0\n      var poll = () => {\n        i++\n        this.getIP().then(result => {\n          if (result == true) {\n            resolve(result)\n          } else if (i < 10) poll()\n          else resolve(false)\n        })\n      }\n      poll()\n    })\n  }\n\n  /**\n   * Function to launch Html app.\n   * @param {String} url url of app.\n   */\n  getIP() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.System'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'getDeviceInfo', { params: 'estb_ip' })\n            .then(result => {\n              resolve(result.success)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {})\n    })\n  }\n  /**\n   * Function to get resolution of the display screen.\n   */\n  getResolution() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.DisplaySettings'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'getCurrentResolution', { params: 'HDMI0' })\n            .then(result => {\n              resolve(result.resolution)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {\n          console.log('Display Error', err)\n        })\n    })\n  }\n\n  /**\n   * Function to set the display resolution.\n   */\n  setResolution() {\n    return new Promise((resolve, reject) => {\n      const systemcCallsign = 'org.rdk.DisplaySettings'\n      thunder.Controller.activate({ callsign: systemcCallsign })\n        .then(() => {\n          thunder\n            .call(systemcCallsign, 'setCurrentResolution', {\n              videoDisplay: 'HDMI0',\n              resolution: '1080p',\n              persist: true,\n            })\n            .then(result => {\n              resolve(result.success)\n            })\n            .catch(err => {\n              resolve(false)\n            })\n        })\n        .catch(err => {\n          console.log('Display Error', err)\n        })\n    })\n  }\n\n  /**\n   * Function to launch Html app.\n   * @param {String} url url of app.\n   */\n  launchWeb(url) {\n    const childCallsign = 'HtmlApp'\n    if (webUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launch', {\n          callsign: childCallsign,\n          type: childCallsign,\n          uri: url,\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {})\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    webUrl = url\n    activatedWeb = true\n  }\n\n  /**\n   * Function to launch Lightning app.\n   * @param {String} url url of app.\n   */\n  launchLightning(url) {\n    const childCallsign = 'LightningApp'\n    if (lightningUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launch', {\n          callsign: childCallsign,\n          type: childCallsign,\n          uri: url,\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {})\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    lightningUrl = url\n    activatedLightning = true\n  }\n\n  /**\n   * Function to launch Cobalt app.\n   * @param {String} url url of app.\n   */\n  launchCobalt(url) {\n    const childCallsign = 'Cobalt'\n    thunder\n      .call('org.rdk.RDKShell', 'launch', {\n        callsign: childCallsign,\n        type: childCallsign,\n      })\n      .then(() => {\n        thunder.call('org.rdk.RDKShell', 'moveToFront', {\n          client: childCallsign,\n        })\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n      })\n      .catch(err => {})\n    activatedCobalt = true\n  }\n\n  /**\n   * Function to launch Resident app.\n   * @param {String} url url of app.\n   */\n  launchResident(url) {\n    const childCallsign = 'ResidentApp'\n    thunder\n      .call('org.rdk.RDKShell', 'launch', {\n        callsign: childCallsign,\n        type: childCallsign,\n        uri: url,\n      })\n      .then(() => {\n        thunder.call('org.rdk.RDKShell', 'moveToFront', {\n          client: childCallsign,\n        })\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n      })\n      .catch(err => {\n        console.log('org.rdk.RDKShell launch ' + JSON.stringify(err))\n      })\n  }\n\n  /**\n   * Function to suspend html app.\n   */\n  suspendWeb() {\n    webUrl = ''\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'HtmlApp' })\n  }\n\n  /**\n   * Function to suspend lightning app.\n   */\n  suspendLightning() {\n    lightningUrl = ''\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'LightningApp' })\n  }\n\n  /**\n   * Function to suspend cobalt app.\n   */\n  suspendCobalt() {\n    thunder.call('org.rdk.RDKShell', 'suspend', { callsign: 'Cobalt' })\n  }\n\n  /**\n   * Function to deactivate html app.\n   */\n  deactivateWeb() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'HtmlApp' })\n    activatedWeb = false\n    webUrl = ''\n  }\n\n  /**\n   * Function to deactivate cobalt app.\n   */\n  deactivateCobalt() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'Cobalt' })\n    activatedCobalt = false\n    cobaltUrl = ''\n  }\n\n  /**\n   * Function to deactivate lightning app.\n   */\n  deactivateLightning() {\n    thunder.call('org.rdk.RDKShell', 'destroy', { callsign: 'LightningApp' })\n    activatedLightning = false\n    lightningUrl = ''\n  }\n\n  /**\n   * Function to set visibility to client apps.\n   * @param {client} client client app.\n   * @param {visible} visible value of visibility.\n   */\n  setVisibility(client, visible) {\n    thunder.call('org.rdk.RDKShell', 'setVisibility', {\n      client: client,\n      visible: visible,\n    })\n  }\n  /**\n   * Function to launch Native app.\n   * @param {String} url url of app.\n   */\n  launchNative(url) {\n    const childCallsign = 'testApp'\n    if (nativeUrl != url) {\n      thunder\n        .call('org.rdk.RDKShell', 'launchApplication', {\n          client: childCallsign,\n          uri: url,\n          mimeType: 'application/native'\n        })\n        .then(() => {\n          thunder.call('org.rdk.RDKShell', 'moveToFront', {\n            client: childCallsign,\n          })\n          thunder.call('org.rdk.RDKShell', 'setFocus', {\n            client: childCallsign,\n          })\n        })\n        .catch(err => {\n          console.log('org.rdk.RDKShell launch ' + JSON.stringify(err))\n        })\n    } else {\n      thunder.call('org.rdk.RDKShell', 'moveToFront', {\n        client: childCallsign,\n      })\n      thunder.call('org.rdk.RDKShell', 'setFocus', { client: childCallsign })\n    }\n    nativeUrl = url\n    activatedNative = true\n  }\n\n\n\n/**\n   * Function to kill native app.\n   */\n  killNative() {\n    thunder.call('org.rdk.RDKShell', 'kill', { callsign: 'testApp' })\n    activatedNative = false\n    nativeUrl = ''\n  }\n\n  static pluginStatus(plugin) {\n    switch (plugin) {\n      case 'WebApp':\n        return activatedWeb\n      case 'Cobalt':\n        return activatedCobalt\n      case 'Lightning':\n        return activatedLightning\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Variable to store the timer\n */\nvar timeout\n\n/**\n * Class to render the UI controls for the video player.\n */\nexport default class PlayerControls extends Lightning.Component {\n  /**\n   * Function to create components for the player controls.\n   */\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 410,\n      color: 0x4025262a,\n      Title: {\n        x: 90,\n        y: 15,\n      },\n      Subtitle: {\n        x: 90,\n        y: 88.5,\n      },\n      NetworkLogo: {\n        x: 1740,\n        y: 82.5,\n      },\n      TimeBar: {\n        x: 90,\n        y: 163.5,\n        texture: Lightning.Tools.getRoundRect(1740, 6, 6, 0, 0, true, 0x80eef1f3),\n      },\n      ProgressBar: {\n        x: 90,\n        y: 163.5,\n      },\n      CurrentTime: {\n        x: 90,\n        y: 184.5,\n      },\n      TotalTime: {\n        x: 1680,\n        y: 184.5,\n      },\n      Buttons: {\n        x: 820,\n        y: 240,\n        children: [\n          { src: Utils.asset('images/player/rewind.png'), x: 17, y: 17 },\n          { src: Utils.asset('images/player/pause-focus.png'), x: 17, y: 17 },\n          { src: Utils.asset('images/player/fast-forward.png'), x: 17, y: 17 },\n        ].map((item, idx) => ({\n          x: idx * 100,\n          texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n          ControlIcon: {\n            x: item.x,\n            y: item.y,\n            texture: Lightning.Tools.getSvgTexture(item.src, 50, 50),\n          },\n        })),\n      },\n      Audio: {\n        x: 90,\n        y: 240,\n        texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xff8e8e8e),\n        AudioOptions: {\n          x: 0,\n          y: 25,\n          w: 240,\n          h: 90,\n          text: {\n            fontSize: 30,\n            text: 'Audio Options',\n            textColor: 0xffffffff,\n            textAlign: 'center',\n          },\n        },\n      },\n      Extras: {\n        x: 1700,\n        y: 240,\n        texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xff8e8e8e),\n        ExtrasOptions: {\n          x: 0,\n          y: 25,\n          w: 130,\n          h: 90,\n          text: {\n            fontSize: 30,\n            text: 'Extras',\n            textColor: 0xffffffff,\n            textAlign: 'center',\n          },\n        },\n      },\n    }\n  }\n\n  _init() {\n    /**\n     * Variable to store the duration of the video content.\n     */\n    this.videoDuration = 0\n    this.tag('Buttons').children[0].patch({\n          alpha: 0.4\n    })\n    this.tag('Buttons').children[2].patch({\n      alpha: 0.4\n    })\n    this.tag('Audio').patch({\n      alpha: 0.4\n    })\n    this.tag('Extras').patch({\n      alpha: 0.4\n    })\n  }\n\n  /**\n   * Function to set focus to player controls when the player controls are shown.\n   */\n  _focus() {\n    this._index = 1\n    this.toggle = false\n    this._setState('PlayPause')\n  }\n\n  /**\n   * Function to handle the player controls when they are hidden.\n   */\n  _unfocus() {\n    this._setState('Hidden')\n    clearTimeout(timeout)\n  }\n\n  /**\n   * Function to set the title in the video controls.\n   * @param {String} title title to be displayed in video controls.\n   */\n  set title(title) {\n    this.tag('Title').patch({\n      text: {\n        fontSize: 52.5,\n        textAlign: 'center',\n        text: title,\n      },\n    })\n  }\n\n  /**\n   * Function to set the subtitle in the video control menu.\n   * @param {String} subtitle sub title to be displayed.\n   */\n  set subtitle(subtitle) {\n    this.tag('Subtitle').patch({\n      text: {\n        fontSize: 36,\n        textAlign: 'center',\n        text: subtitle,\n      },\n    })\n  }\n\n  /**\n   * Function to set the network logo in the video control menu.\n   * @param {String} logoPath path to the logo.\n   */\n  set logoPath(logoPath) {\n    this.tag('NetworkLogo').patch({ src: logoPath })\n  }\n\n  /**\n   * Function to set the duration of the video.\n   * @param {String} duration video duration to be set.\n   */\n  set duration(duration) {\n    this.videoDuration = duration\n    this.tag('TotalTime').patch({\n      text: {\n        fontSize: 33,\n        textAlign: 'center',\n        text: this.SecondsTohhmmss(duration),\n      },\n    })\n  }\n\n  /**\n   * Function to set the current video time.\n   * @param {String} currentTime current time to be set.\n   */\n  set currentTime(currentTime) {\n    this.tag('CurrentTime').patch({\n      text: {\n        fontSize: 33,\n        textAlign: 'center',\n        text: this.SecondsTohhmmss(currentTime),\n      },\n    })\n    this.tag('ProgressBar').patch({\n      texture: Lightning.Tools.getRoundRect(\n        (1740 * currentTime) / this.videoDuration,\n        6,\n        6,\n        0,\n        0,\n        true,\n        0xffffffff\n      ),\n      SeekBar: {\n        x: (1740 * currentTime) / this.videoDuration,\n        y: -12,\n        texture: Lightning.Tools.getRoundRect(30, 30, 15, 0, 0, true, 0xffffffff),\n      },\n    })\n  }\n\n  /**\n   * Function to convert time in seconds to hh:mm:ss format.\n   * @param {String} totalSeconds time in seconds.\n   */\n  SecondsTohhmmss(totalSeconds) {\n    this.hours = Math.floor(totalSeconds / 3600)\n    this.minutes = Math.floor((totalSeconds - this.hours * 3600) / 60)\n    this.seconds = totalSeconds - this.hours * 3600 - this.minutes * 60\n    this.seconds = Math.round(totalSeconds) - this.hours * 3600 - this.minutes * 60\n    this.result = this.hours < 10 ? '0' + this.hours : this.hours\n    this.result += ':' + (this.minutes < 10 ? '0' + this.minutes : this.minutes)\n    this.result += ':' + (this.seconds < 10 ? '0' + this.seconds : this.seconds)\n    return this.result\n  }\n\n  /**\n   * Function to hide player controls.\n   */\n  hidePlayerControls() {\n    this.signal('hide')\n  }\n\n  /**\n   * Function to reset the player controls.\n   */\n  reset(state = 'play') {\n    this._setState('PlayPause')\n    if (state === 'pause' || state === 'stop') {\n      this.tag('Buttons')\n        .children[1].tag('ControlIcon')\n        .patch({\n          texture: Lightning.Tools.getSvgTexture(\n            Utils.asset('images/player/play-focus.png'),\n            50,\n            50\n          ),\n          x: 17,\n        })\n      this.toggle = 1\n      return\n    }\n    this.tag('Buttons')\n      .children[1].tag('ControlIcon')\n      .patch({\n        texture: Lightning.Tools.getSvgTexture(\n          Utils.asset('images/player/pause-focus.png'),\n          50,\n          50\n        ),\n        x: 17,\n      })\n    this.toggle = 0\n  }\n\n  /**\n   * Timer function to track the inactivity of the player controls.\n   */\n  timer() {\n    clearTimeout(timeout)\n    timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n\n  /**\n   * Function that defines the different states of the player controls.\n   */\n  static _states() {\n    return [\n      class AudioOptions extends this {\n        $enter() {\n          this.timer()\n          this.tag('Audio').patch({\n            texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Audio').tag('AudioOptions').color = 0xff000000\n        }\n        $exit() {\n          this.tag('Audio').patch({\n            texture: Lightning.Tools.getRoundRect(240, 90, 6, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Audio').tag('AudioOptions').color = 0xffffffff\n        }\n        _handleRight() {\n          this._setState('Rewind')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class PlayPause extends this {\n        $enter() {\n          this.focus = this.toggle\n            ? Utils.asset('images/player/play-focus.png')\n            : Utils.asset('images/player/pause-focus.png')\n          this.timer()\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.focus, 50, 50)\n            })\n        }\n        $exit() {\n          this.unfocus = this.toggle\n            ? Utils.asset('images/player/play.png')\n            : Utils.asset('images/player/pause.png')\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.unfocus, 50, 50)\n            })\n        }\n        _handleEnter() {\n          if (this.toggle) {\n            this.signal('play')\n          } else {\n            this.signal('pause')\n          }\n          this.toggle = !this.toggle\n          this.focus = this.toggle\n            ? Utils.asset('images/player/play-focus.png')\n            : Utils.asset('images/player/pause-focus.png')\n          this.timer()\n          this.tag('Buttons').children[1].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n          })\n          this.tag('Buttons')\n            .children[1].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(this.focus, 50, 50)\n            })\n        }\n        _handleRight() {\n          // this._setState('Forward')\n        }\n        _handleLeft() {\n          // this._setState('Rewind')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Forward extends this {\n        $enter() {\n          this.timer()\n          this.tag('Buttons').children[2].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[2].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/fast-forward-focus.png'),\n                50,\n                50\n              ),\n            })\n        }\n        $exit() {\n          this.tag('Buttons').children[2].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[2].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/fast-forward.png'),\n                50,\n                50\n              ),\n            })\n        }\n        _handleRight() {\n          this._setState('Extras')\n        }\n        _handleLeft() {\n          this._setState('PlayPause')\n        }\n        _handleEnter() {\n          this.signal('fastfwd')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Rewind extends this {\n        $enter() {\n          this.timer()\n          this.tag('Buttons').children[0].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Buttons')\n            .children[0].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/rewind-focus.png'),\n                50,\n                50\n              ),\n            })\n        }\n        $exit() {\n          this.tag('Buttons').children[0].patch({\n            texture: Lightning.Tools.getRoundRect(80, 80, 40, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Buttons')\n            .children[0].tag('ControlIcon')\n            .patch({\n              texture: Lightning.Tools.getSvgTexture(\n                Utils.asset('images/player/rewind.png'),\n                50,\n                50\n              ),\n            })\n        }\n        _handleLeft() {\n          this._setState('AudioOptions')\n        }\n        _handleRight() {\n          this._setState('PlayPause')\n        }\n        _handleEnter() {\n          this.signal('fastrwd')\n        }\n        _getFocused() {\n          this.timer()\n        }\n      },\n\n      class Extras extends this {\n        $enter() {\n          this.tag('Extras').patch({\n            texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xffffffff),\n            scale: 1.1,\n          })\n          this.tag('Extras').tag('ExtrasOptions').color = 0xff000000\n          this.timer()\n        }\n        _handleLeft() {\n          this._setState('Forward')\n        }\n        _getFocused() {\n          this.timer()\n        }\n        $exit() {\n          this.tag('Extras').patch({\n            texture: Lightning.Tools.getRoundRect(130, 90, 6, 0, 0, true, 0xff8e8e8e),\n            scale: 1,\n          })\n          this.tag('Extras').tag('ExtrasOptions').color = 0xffffffff\n        }\n      },\n      class Hidden extends this {\n        _getFocused() {}\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Router } from '@lightningjs/sdk'\nimport ListItem from '../items/ListItem.js'\nimport ThunderJS from 'ThunderJS'\nimport AppApi from '../api/AppApi.js'\n\n/** Class for main view component in home UI */\nexport default class MainView extends Lightning.Component {\n  /**\n   * Function to render various elements in main view.\n   */\n  static _template() {\n    return {\n      MainView: {\n        x: 451,\n        y: 225,\n        w: 1469,\n        h: 820,\n        AppList: {\n          x: 0,\n          y: 0,\n          type: Lightning.components.ListComponent,\n          w: 1469,\n          h: 209,\n          itemSize: 204 + 20,\n          roll: true,\n          rollMax: 1469,\n          horizontal: true,\n          itemScrollOffset: -5,\n          clipping: true,\n        },\n        TVShows: {\n          x: 0,\n          y: 184,\n          w: 1469,\n          h: 335,\n          type: Lightning.components.ListComponent,\n          roll: true,\n          itemSize: 428 + 20,\n          horizontal: true,\n          rollMax: 1444 + 25,\n          clipping: true,\n        },\n        Settings: {\n          x: 0,\n          y: 494,\n          w: 1469,\n          h: 335,\n          type: Lightning.components.ListComponent,\n          roll: true,\n          itemSize: 428 + 20,\n          horizontal: true,\n          rollMax: 1469,\n          clipping: true,\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.settingsScreen = false\n    this._setState('AppList')\n    this.indexVal = 0\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const rdkshellCallsign = 'org.rdk.RDKShell'\n    thunder.Controller.activate({ callsign: rdkshellCallsign })\n      .then(result => {\n        console.log('Successfully activated RDK Shell')\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n      .then(result => {\n        thunder.call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 77,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success')\n          })\n          .catch(err => {\n            console.log('Error', err)\n          })\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 49,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success')\n          })\n          .catch(err => {\n            console.log('Error', err)\n          })\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 36,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success')\n          })\n          .catch(err => {\n            console.log('Error', err)\n          })\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n      .then(result => {\n        thunder\n          .call(rdkshellCallsign, 'addKeyIntercept', {\n            client: 'ResidentApp',\n            keyCode: 158,\n            modifiers: [],\n          })\n          .then(result => {\n            console.log('addKeyIntercept success')\n          })\n          .catch(err => {\n            console.log('Error', err)\n          })\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n      .then(result => {\n        thunder.on('Controller', 'statechange', notification => {\n          if (\n            notification &&\n            notification.callsign == 'Cobalt' &&\n            notification.state == 'Deactivation'\n          ) {\n            var appApi = new AppApi()\n            appApi.setVisibility('ResidentApp', true)\n            thunder\n              .call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success' + JSON.stringify(result))\n              })\n            thunder\n              .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp setFocus Success' + JSON.stringify(result))\n              })\n              .catch(err => {\n                console.log('Error', err)\n              })\n          }\n        })\n      })\n      .catch(err => {\n        console.log('Error', err)\n      })\n  }\n\n  _active() {\n    if (this.settingsScreen) {\n      let app = this.parent\n      this._appAnimation = app.animation({\n        duration: 0,\n        repeat: 0,\n        stopMethod: 'immediate',\n        actions: [\n          { p: 'x', v: { 0: 0, 1: -320 } },\n          { p: 'y', v: { 0: 0, 1: -180 } },\n          { p: 'scale', v: { 0: 1, 1: 1.17 } },\n        ],\n      })\n      this._appAnimation.start()\n      this.settingsScreen = false\n    }\n  }\n\n  /**\n   * Function to set details of items in app list.\n   */\n  set appItems(items) {\n    this.tag('AppList').items = items.map(info => {\n      return {\n        w: 204,\n        h: 126,\n        type: ListItem,\n        data: info,\n        focus: 1.2,\n        unfocus: 1,\n        x_text: 106,\n        y_text: 140,\n      }\n    })\n    this.tag('AppList').start()\n  }\n\n  /**\n   * Function to set details of items in tv shows list.\n   */\n  set tvShowItems(items) {\n    this.tag('TVShows').items = items.map(info => {\n      return {\n        w: 428,\n        h: 252,\n        type: ListItem,\n        data: info,\n        focus: 1.08,\n        unfocus: 1,\n        x_text: 218,\n        y_text: 264,\n      }\n    })\n    this.tag('TVShows').start()\n  }\n\n  /**\n   * Function to set details of items in settings list\n   */\n  set settingsItems(items) {\n    this.tag('Settings').items = items.map(info => {\n      return {\n        w: 428,\n        h: 252,\n        type: ListItem,\n        data: info,\n        focus: 1.08,\n        unfocus: 1,\n        x_text: 218,\n        y_text: 264,\n      }\n    })\n    this.tag('Settings').start()\n  }\n\n  /**\n   * Function to set the state in main view.\n   */\n  set index(index) {\n    this.indexVal = index\n    if (this.indexVal == 0) {\n      this._setState('AppList')\n    } else if (this.indexVal == 1) {\n      this._setState('TVShows')\n    } else if (this.indexVal == 2) {\n      this._setState('Settings')\n    }\n  }\n\n  /**\n   * Function to reset the main view rows to initial state.\n   */\n  reset() {\n    for (var i = this.tag('AppList').index; i > 0; i--) {\n      this.tag('AppList').setPrevious()\n    }\n    for (var i = this.tag('TVShows').index; i > 0; i--) {\n      this.tag('TVShows').setPrevious()\n    }\n    for (var i = this.tag('Settings').index; i > 0; i--) {\n      this.tag('Settings').setPrevious()\n    }\n  }\n\n  /**\n   * Function to define various states needed for main view.\n   */\n  static _states() {\n    return [\n      class AppList extends this {\n        _getFocused() {\n          if (this.tag('AppList').length) {\n            return this.tag('AppList').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('AppList').length - 1 != this.tag('AppList').index) {\n            this.tag('AppList').setNext()\n            return this.tag('AppList').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('AppList').index) {\n            this.tag('AppList').setPrevious()\n            return this.tag('AppList').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 0)\n          }\n        }\n        _handleDown() {\n          this._setState('TVShows')\n        }\n        _handleEnter() {\n          var appApi = new AppApi()\n          this.applicationType = this.tag('AppList').items[\n            this.tag('AppList').index\n          ].data.applicationType\n          this.uri = this.tag('AppList').items[this.tag('AppList').index].data.uri\n          if (this.applicationType == 'Cobalt') {\n            appApi.launchCobalt(this.uri)\n            appApi.setVisibility('ResidentApp', false)\n          } else if (this.applicationType == 'WebApp') {\n            appApi.launchWeb(this.uri)\n            appApi.setVisibility('ResidentApp', false)\n          } else if (this.applicationType == 'Lightning') {\n            appApi.launchLightning(this.uri)\n            appApi.setVisibility('ResidentApp', false)\n          } else if (this.applicationType == 'Native') {\n            appApi.launchNative(this.uri)\n            appApi.setVisibility('ResidentApp', false)\n          }\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          var thunder = ThunderJS(config)\n          console.log('_handleKey', key.keyCode)\n          if (key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            var appApi = new AppApi()\n            if (this.applicationType == 'Cobalt') {\n              appApi.suspendCobalt()\n              appApi.setVisibility('ResidentApp', true)\n            } else if (this.applicationType == 'WebApp') {\n              appApi.deactivateWeb()\n              appApi.setVisibility('ResidentApp', true)\n            } else if (this.applicationType == 'Lightning') {\n              appApi.deactivateLightning()\n              appApi.setVisibility('ResidentApp', true)\n            } else if (this.applicationType == 'Native') {\n              appApi.killNative()\n              appApi.setVisibility('ResidentApp', true)\n            }\n            thunder\n              .call('org.rdk.RDKShell', 'moveToFront', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success')\n              })\n            thunder\n              .call('org.rdk.RDKShell', 'setFocus', { client: 'ResidentApp' })\n              .then(result => {\n                console.log('ResidentApp moveToFront Success')\n              })\n              .catch(err => {\n                console.log('Error', err)\n              })\n          }\n        }\n      },\n      class TVShows extends this {\n        _getFocused() {\n          if (this.tag('TVShows').length) {\n            return this.tag('TVShows').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('TVShows').length - 1 != this.tag('TVShows').index) {\n            this.tag('TVShows').setNext()\n            return this.tag('TVShows').element\n          }\n        }\n        _handleLeft() {\n          if (0 != this.tag('TVShows').index) {\n            this.tag('TVShows').setPrevious()\n            return this.tag('TVShows').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 1)\n          }\n        }\n        _handleUp() {\n          this._setState('AppList')\n        }\n        _handleDown() {\n          this._setState('Settings')\n        }\n        _handleEnter() {\n          this.fireAncestors('$goToPlayer')\n        }\n      },\n      class Settings extends this {\n        _getFocused() {\n          if (this.tag('Settings').length) {\n            return this.tag('Settings').element\n          }\n        }\n        _handleRight() {\n          if (this.tag('Settings').length - 1 != this.tag('Settings').index) {\n            this.tag('Settings').setNext()\n          }\n          return this.tag('Settings').element\n        }\n        _handleLeft() {\n          if (0 != this.tag('Settings').index) {\n            this.tag('Settings').setPrevious()\n            return this.tag('Settings').element\n          } else {\n            this.reset()\n            this.fireAncestors('$goToSidePanel', 2)\n          }\n        }\n        _handleUp() {\n          this._setState('TVShows')\n        }\n        _handleEnter() {\n          this.settingsType = this.tag('Settings').items[\n            this.tag('Settings').index\n          ].data.displayName\n\n          if (this.settingsType == 'Bluetooth') {\n            this.settingsScreen = true\n            Router.navigate('settings/BluetoothScreen', false)\n          } else if (this.settingsType == 'Wi-Fi') {\n            this.settingsScreen = true\n            Router.navigate('settings/WiFiScreen', false)\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render items in side panel.\n */\nexport default class SidePanelItem extends Lightning.Component {\n  /**\n   * Function to render various elements in the side panel item.\n   */\n  static _template() {\n    return {\n      Item: {\n        Title: {\n          text: {\n            fontSize: 27,\n            textColor: 0xffffffff,\n          },\n          mountX: 0.5,\n          alpha: 0,\n        },\n        Image: {\n          x: 0,\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.tag('Title').patch({ x: this.x_text, y: this.y_text, text: { text: this.data.title } })\n    this.tag('Image').patch({\n      src: Utils.asset(this.data.url),\n      w: this.w,\n      h: this.h,\n      scale: this.unfocus,\n    })\n  }\n\n  /**\n   * Function to change properties of item during focus.\n   */\n  _focus() {\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.focus })\n    this.tag('Title').patch({ alpha: 1 })\n    this.tag('Item').patch({ zIndex: 1 })\n  }\n\n  /**\n   * Function to change properties of item during unfocus.\n   */\n  _unfocus() {\n    this.tag('Image').patch({ w: this.w, h: this.h, scale: this.unfocus })\n    this.tag('Title').patch({ alpha: 0 })\n    this.tag('Item').patch({ zIndex: 0 })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport SidePanelItem from '../items/SidePanelItem.js'\n\n/** Class for side panel in home UI */\nexport default class SidePanel extends Lightning.Component {\n  static _template() {\n    return {\n      SidePanel: {\n        x: 130,\n        y: 200,\n        w: 240,\n        h: 750,\n        type: Lightning.components.ListComponent,\n        roll: true,\n        horizontal: false,\n        invertDirection: true,\n      },\n    }\n  }\n\n  _init() {\n    this._setState('SidePanel')\n    this.indexVal = 0\n  }\n\n  /**\n   * Function to set items in side panel.\n   */\n  set sidePanelItems(items) {\n    this.tag('SidePanel').patch({ x: 130 })\n    this.tag('SidePanel').items = items.map((info, index) => {\n      this.data = info\n      return {\n        w: 204,\n        h: 184,\n        y: index == 0 ? 20 : index == 1 ? 180 : 370,\n        type: SidePanelItem,\n        data: info,\n        focus: 0.7,\n        unfocus: 0.6,\n        x_text: 100,\n        y_text: 160,\n        text_focus: 1.1,\n        text_unfocus: 0.9,\n      }\n    })\n    this.tag('SidePanel').start()\n  }\n\n  /**\n   * Function to reset items in side panel.\n   */\n  set resetSidePanelItems(items) {\n    this.tag('SidePanel').patch({ x: 90 })\n    this.tag('SidePanel').items = items.map((info, index) => {\n      return {\n        w: 204,\n        h: 184,\n        y: index == 0 ? 20 : index == 1 ? 180 : 370,\n        type: SidePanelItem,\n        data: info,\n        focus: 0.7,\n        unfocus: 0.4,\n        x_text: 100,\n        y_text: 160,\n        text_focus: 1.1,\n        text_unfocus: 0.9,\n      }\n    })\n    this.tag('SidePanel').start()\n  }\n  /**\n   * Function to set scaling to side panel.\n   */\n  set scale(scale) {\n    this.tag('SidePanel').patch({ scale: scale })\n  }\n\n  /**\n   * Function to set x coordinate of side panel.\n   */\n  set x(x) {\n    this.tag('SidePanel').patch({ x: x })\n  }\n\n  /**\n   * Function to set index value of side panel.\n   */\n  set index(index) {\n    this.indexVal = index\n  }\n\n  static _states() {\n    return [\n      class SidePanel extends this {\n        _getFocused() {\n          if (this.tag('SidePanel').length) {\n            return this.tag('SidePanel').items[this.indexVal]\n          }\n        }\n        _handleKey(key) {\n          if (key.keyCode == 39 || key.keyCode == 13) {\n            this.fireAncestors('$goToMainView', this.indexVal)\n          } else if (key.keyCode == 40) {\n            if (this.tag('SidePanel').length - 1 != this.indexVal) {\n              this.indexVal = this.indexVal + 1\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          } else if (key.keyCode == 38) {\n            if (0 != this.indexVal) {\n              this.indexVal = this.indexVal - 1\n            }\n            return this.tag('SidePanel').items[this.indexVal]\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport ThunderJS from 'ThunderJS'\n\n/** Class for top panel in home UI */\nexport default class TopPanel extends Lightning.Component {\n  static _template() {\n    return {\n      TopPanel: {\n        x: 90,\n        y: 60,\n        w: 1740,\n        h: 120,\n        Mic: {\n          x: 120,\n          y: 60,\n          mountY: 0.5,\n          src: Utils.asset('/images/topPanel/mic.png'),\n          w: 60,\n          h: 60,\n        },\n        Search: {\n          x: 250,\n          y: 60,\n          mountY: 0.5,\n          text: { text: 'Search TV shows, movies and more', fontSize: 33 },\n        },\n        Time: {\n          x: 1500,\n          y: 60,\n          mountY: 0.5,\n          text: { text: '', fontSize: 38 },\n        },\n      },\n    }\n  }\n  _init() {\n    this.timeZone = 'America/New_York'\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    thunder\n      .call('org.rdk.System', 'getTimeZoneDST')\n      .then(result => {\n        if (result.success) {\n          try {\n            new Date().toLocaleDateString('en-US', { timeZone: result.timeZone })\n            this.timeZone = result.timeZone\n          } catch (err) {\n            this.timeZone = 'America/New_York'\n          }\n        }\n      })\n      .catch(err => {\n        this.timeZone = 'America/New_York'\n      })\n  }\n\n  _build() {\n    setInterval(() => {\n      this.tag('Time').patch({ text: { text: this.updateTime() } })\n    }, 1000)\n  }\n\n  /**\n   * Function to update time in home UI.\n   */\n  updateTime() {\n    let date = new Date()\n    date = new Date(date.toLocaleString('en-US', { timeZone: this.timeZone }))\n    let hours = date.getHours()\n    let minutes = date.getMinutes()\n    let ampm = hours >= 12 ? 'pm' : 'am'\n    hours = hours % 12\n    hours = hours ? hours : 12\n    minutes = minutes < 10 ? '0' + minutes : minutes\n    let strTime = hours + '.' + minutes + ' ' + ampm\n    return strTime\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport PlayerControls from './PlayerControl.js'\n\n/**\n * Class to render AAMP video player.\n */\nexport default class AAMPVideoPlayer extends Lightning.Component {\n  /**\n   * Function to render player controls.\n   */\n  static _template() {\n    return {\n      PlayerControls: {\n        type: PlayerControls,\n        x: 0,\n        y: 810,\n        alpha: 0,\n        signals: {\n          pause: 'pause',\n          play: 'play',\n          hide: 'hidePlayerControls',\n          fastfwd: 'fastfwd',\n          fastrwd: 'fastrwd',\n        },\n      },\n    }\n  }\n\n  _init() {\n    this.x = 0\n    this.y = 0\n    this.w = 0\n    this.h = 0\n    this.videoEl = document.createElement('video')\n    this.videoEl.setAttribute('id', 'video-player')\n    this.videoEl.style.position = 'absolute'\n    this.videoEl.style.zIndex = '1'\n    this.videoEl.setAttribute('width', '100%')\n    this.videoEl.setAttribute('height', '100%')\n    this.videoEl.setAttribute('src', 'placeholder.mp4')\n    this.videoEl.setAttribute('type', 'video/ave')\n    document.body.appendChild(this.videoEl)\n    this.playbackSpeeds = [-16, -8, -4, -2, 1, 2, 4, 8, 16]\n    this.playerStatesEnum = { idle: 0, initializing: 1, playing: 8, paused: 6, seeking: 7 }\n    this.player = null\n    this.playbackRateIndex = this.playbackSpeeds.indexOf(1)\n    this.defaultInitConfig = {\n      initialBitrate: 2500000,\n      offset: 0,\n      networkTimeout: 10,\n      preferredAudioLanguage: 'en',\n      liveOffset: 15,\n      drmConfig: null,\n    }\n  }\n\n  /**\n   * Function to set video coordinates.\n   * @param {int} x x position of video\n   * @param {int} y y position of video\n   * @param {int} w width of video\n   * @param {int} h height of video\n   */\n  setVideoRect(x, y, w, h) {\n    this.x = x\n    this.y = y\n    this.w = w\n    this.h = h\n    var xPos = 0.67 * x\n    var yPos = 0.67 * y\n    var wPos = 0.67 * w\n    var hPos = 0.67 * h\n    this.player.setVideoRect(xPos, yPos, wPos, hPos)\n  }\n\n  /**\n   * Event handler to store the current playback state.\n   * @param  event playback state of the video.\n   */\n  _playbackStateChanged(event) {\n    switch (event.state) {\n      case this.player.playerStatesEnum.idle:\n        this.playerState = this.player.playerStatesEnum.idle\n        break\n      case this.player.playerStatesEnum.initializing:\n        this.playerState = this.player.playerStatesEnum.initializing\n        break\n      case this.player.playerStatesEnum.playing:\n        this.playerState = this.player.playerStatesEnum.playing\n        break\n      case this.player.playerStatesEnum.paused:\n        this.playerState = this.player.playerStatesEnum.paused\n        break\n      case this.player.playerStatesEnum.seeking:\n        this.playerState = this.player.playerStatesEnum.seeking\n        break\n      default:\n        break\n    }\n  }\n\n  /**\n   * Event handler to handle the event of completion of a video playback.\n   */\n  _mediaEndReached() {\n    this.load(this.videoInfo)\n    this.setVideoRect(this.x, this.y, this.w, this.h)\n  }\n\n  /**\n   * Event handler to handle the event of changing the playback speed.\n   */\n  _mediaSpeedChanged() {}\n\n  /**\n   * Event handler to handle the event of bit rate change.\n   */\n  _bitrateChanged() {}\n\n  /**\n   * Function to handle the event of playback failure.\n   */\n  _mediaPlaybackFailed() {\n    this.load(this.videoInfo)\n  }\n\n  /**\n   * Function to handle the event of playback progress.\n   * @param event playback event.\n   */\n  _mediaProgressUpdate(event) {\n    this.position = event.positionMiliseconds / 1000\n    this.tag('PlayerControls').currentTime = this.position\n  }\n\n  /**\n   * Function to handle the event of starting the playback.\n   */\n  _mediaPlaybackStarted() {\n    // this.tag('PlayerControls').reset()\n    // this.tag('PlayerControls').setSmooth('alpha', 1)\n    // this.tag('PlayerControls').setSmooth('y', 675, { duration: 1 })\n    // this.timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n\n  /**\n   * Function to handle the event of change in the duration of the playback content.\n   */\n  _mediaDurationChanged() {}\n\n  /**\n   * Function to create the video player instance for video playback and its initial settings.\n   */\n  createPlayer() {\n    if (this.player !== null) {\n      this.destroy()\n      this.player = null\n    }\n\n    try {\n      this.player = new AAMPMediaPlayer()\n      this.player.addEventListener('playbackStateChanged', this._playbackStateChanged)\n      this.player.addEventListener('playbackCompleted', this._mediaEndReached.bind(this))\n      this.player.addEventListener('playbackSpeedChanged', this._mediaSpeedChanged)\n      this.player.addEventListener('bitrateChanged', this._bitrateChanged)\n      this.player.addEventListener('playbackFailed', this._mediaPlaybackFailed.bind(this))\n      this.player.addEventListener('playbackProgressUpdate', this._mediaProgressUpdate.bind(this))\n      this.player.addEventListener('playbackStarted', this._mediaPlaybackStarted.bind(this))\n      this.player.addEventListener('durationChanged', this._mediaDurationChanged)\n      this.playerState = this.playerStatesEnum.idle\n    } catch (error) {\n      console.error('AAMPMediaPlayer is not defined')\n    }\n  }\n\n  /**\n   * Loads the player with video URL.\n   * @param videoInfo the url and the info regarding the video like title.\n   */\n  load(videoInfo) {\n    this.createPlayer()\n    this.videoInfo = videoInfo\n    this.configObj = this.defaultInitConfig\n    this.configObj.drmConfig = this.videoInfo.drmConfig\n    this.player.initConfig(this.configObj)\n    this.player.load(videoInfo.url)\n\n    this.tag('PlayerControls').title = videoInfo.title\n    this.tag('PlayerControls').subtitle = videoInfo.subtitle\n    this.tag('PlayerControls').logoPath = videoInfo.logoPath\n    this.tag('PlayerControls').duration = this.player.getDurationSec()\n    this.tag('PlayerControls').currentTime = 0\n    this.play()\n  }\n\n  /**\n   * Starts playback when enough data is buffered at play head.\n   */\n  play() {\n    this.player.play()\n    this.playbackRateIndex = this.playbackSpeeds.indexOf(1)\n  }\n\n  /**\n   * Pauses playback.\n   */\n  pause() {\n    this.player.pause()\n  }\n\n  /**\n   * Stop playback and free resources.\n   */\n  stop() {\n    this.player.stop()\n    this.hidePlayerControls()\n  }\n\n  /**\n   * Function to perform fast forward of the video content.\n   */\n  fastfwd() {\n    if (this.playbackRateIndex < this.playbackSpeeds.length - 1) {\n      this.playbackRateIndex++\n    }\n    this.rate = this.playbackSpeeds[this.playbackRateIndex]\n    this.player.setPlaybackRate(this.rate)\n  }\n\n  /**\n   * Function to perform fast rewind of the video content.\n   */\n  fastrwd() {\n    if (this.playbackRateIndex > 0) {\n      this.playbackRateIndex--\n    }\n    this.rate = this.playbackSpeeds[this.playbackRateIndex]\n    this.player.setPlaybackRate(this.rate)\n  }\n\n  /**\n   * Function that returns player instance.\n   * @returns player instance.\n   */\n  getPlayer() {\n    return this.player\n  }\n\n  /**\n   * Function to release the video player instance when not in use.\n   */\n  destroy() {\n    if (this.player.getCurrentState() !== this.playerStatesEnum.idle) {\n      this.player.stop()\n    }\n    this.player.removeEventListener('playbackStateChanged', this._playbackStateChanged)\n    this.player.removeEventListener('playbackCompleted', this._mediaEndReached)\n    this.player.removeEventListener('playbackSpeedChanged', this._mediaSpeedChanged)\n    this.player.removeEventListener('bitrateChanged', this._bitrateChanged)\n    this.player.removeEventListener('playbackFailed', this._mediaPlaybackFailed.bind(this))\n    this.player.removeEventListener('playbackProgressUpdate', this._mediaProgressUpdate.bind(this))\n    this.player.removeEventListener('playbackStarted', this._mediaPlaybackStarted.bind(this))\n    this.player.removeEventListener('durationChanged', this._mediaDurationChanged)\n    this.player.release()\n    this.player = null\n    this.hidePlayerControls()\n  }\n\n  /**\n   * Function to hide the player controls.\n   */\n  hidePlayerControls() {\n    this.tag('PlayerControls').setSmooth('y', 1080, { duration: 0.7 })\n    this.tag('PlayerControls').setSmooth('alpha', 0, { duration: 0.7 })\n    this._setState('HideControls')\n  }\n\n  /**\n   * Function to show the player controls.\n   */\n  showPlayerControls() {\n    this.tag('PlayerControls').reset()\n    this.tag('PlayerControls').setSmooth('alpha', 1)\n    this.tag('PlayerControls').setSmooth('y', 675, { duration: 0.7 })\n    this._setState('ShowControls')\n    this.timeout = setTimeout(this.hidePlayerControls.bind(this), 5000)\n  }\n  /**\n   * Function to display player controls on down key press.\n   */\n  _handleDown() {\n    this.tag('PlayerControls').setSmooth('alpha', 1, { duration: 1 })\n    this.tag('PlayerControls').setSmooth('y', 675, { duration: 1 })\n    this._setState('ShowControls')\n    clearTimeout(this.timeout)\n  }\n\n  /**\n   *Function to hide player control on up key press.\n   */\n  _handleUp() {\n    this.hidePlayerControls()\n    this._setState('HideControls')\n  }\n  /**\n   * Function to define the different states of the video player.\n   */\n  static _states() {\n    return [\n      class ShowControls extends this {\n        _getFocused() {\n          return this.tag('PlayerControls')\n        }\n      },\n      class HideControls extends this {\n        _getFocused() {}\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for app listings.\n */\nexport var appListInfo = [\n  {\n    displayName: 'Test Youtube',\n    applicationType: 'Cobalt',\n    uri: 'https://www.youtube.com/tv',\n    url: '/images/apps/youtube.png',\n  },\n  {\n    displayName: 'AppStore',\n    applicationType: 'Lightning',\n    uri: 'https://widgets.metrological.com/lightning/rdk/d431ce8577be56e82630650bf701c57d',\n    url: '/images/apps/metrological.jpg',\n  },\n  {\n    displayName: 'Test Xumo',\n    applicationType: 'WebApp',\n    uri: 'https://x1box-app.xumo.com/3.0.70/index.html',\n    url: '/images/apps/xumo.png',\n  },\n  {\n    displayName: 'Bluetooth Audio',\n    applicationType: 'Lightning',\n    uri: 'https://rdkwiki.com/rdk-apps/BluetoothAudio/index.html',\n    url: '/images/apps/netflix.png',\n  },\n  {\n    displayName: 'Test Prime video',\n    applicationType: '',\n    uri: '',\n    url: '/images/apps/prime.png',\n  },\n]\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE\r\n * file the following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n/**\r\n * Class which contains data for tv shows listings.\r\n */\r\nexport var tvShowsInfo = [\r\n  {\r\n    displayName: 'Fantasy-Island',\r\n    url: '/images/tvShows/fantasy-island.jpg',\r\n  },\r\n  {\r\n    displayName: 'Onward',\r\n    url: '/images/tvShows/onward.jpg',\r\n  },\r\n  {\r\n    displayName: 'Let it Snow',\r\n    url: '/images/tvShows/let-it-snow.png',\r\n  },\r\n  {\r\n    displayName: 'Do Little',\r\n    url: '/images/tvShows/do-little.jpg',\r\n  },\r\n  {\r\n    displayName: 'Summerland',\r\n    url: '/images/tvShows/summerland.jpg',\r\n  },\r\n]\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for settings listings.\n */\nexport var settingsInfo = [\n  {\n    displayName: 'Bluetooth',\n    url: '/images/settings/bluetooth.jpg',\n  },\n  {\n    displayName: 'Wi-Fi',\n    url: '/images/settings/wifi.jpg',\n  },\n]\n","/**\r\n * If not stated otherwise in this file or this component's LICENSE\r\n * file the following copyright and licenses apply:\r\n *\r\n * Copyright 2020 RDK Management\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n **/\r\n/**\r\n * Class which contains data for listings in side panel.\r\n */\r\nexport var sidePanelInfo = [\r\n  {\r\n    title: 'Apps',\r\n    url: '/images/sidePanel/menu.png',\r\n  },\r\n  {\r\n    title: 'TV Shows',\r\n    url: '/images/sidePanel/video.png',\r\n  },\r\n  {\r\n    title: 'Settings',\r\n    url: '/images/sidePanel/settings.png',\r\n  },\r\n]\r\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class which contains data for UI selection.\n */\nexport var uiInfo = [\n  {\n    title: 'DEFAULT',\n    url: '',\n  },\n  {\n    title: 'TATA',\n    url: 'http://35.154.217.235:8081/ ',\n  },\n  {\n    title: 'EPAM',\n    url: 'https://px-apps.sys.comcast.net/lightning_apps/diagnostics/dist/index.html',\n  },\n]\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { appListInfo } from './../../static/data/AppListInfo.js'\nimport { tvShowsInfo } from './../../static/data/TvShowsInfo.js'\nimport { settingsInfo } from './../../static/data/SettingsInfo.js'\nimport { sidePanelInfo } from './../../static/data/SidePanelInfo.js'\nimport { uiInfo } from './../../static/data/UIInfo'\n\n/**\n * Class that returns the data required for home screen.\n */\nexport default class HomeApi {\n  /**\n   * Function to get details for app listing.\n   */\n  getAppListInfo() {\n    return appListInfo\n  }\n\n  /**\n   * Function to get details for tv shows listings.\n   */\n  getTVShowsInfo() {\n    return tvShowsInfo\n  }\n\n  /**\n   * Function to get details for settings listings.\n   */\n  getSettingsInfo() {\n    return settingsInfo\n  }\n\n  /**\n   * Function to get details for side panel.\n   */\n  getSidePanelInfo() {\n    return sidePanelInfo\n  }\n  getUIInfo() {\n    return uiInfo\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport MainView from '../views/MainView.js'\nimport SidePanel from '../views/SidePanel.js'\nimport TopPanel from '../views/TopPanel.js'\nimport AAMPVideoPlayer from '../player/AAMPVideoPlayer.js'\nimport HomeApi from '../api/HomeApi.js'\n\n/** Class for home screen UI */\nexport default class HomeScreen extends Lightning.Component {\n  /**\n   * Function to render various elements in home screen.\n   */\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 1,\n      },\n      TopPanel: {\n        type: TopPanel,\n      },\n      SidePanel: {\n        type: SidePanel,\n      },\n      MainView: {\n        type: MainView,\n      },\n      Player: { type: AAMPVideoPlayer },\n    }\n  }\n\n  _init() {\n    this.homeApi = new HomeApi()\n    var appItems = this.homeApi.getAppListInfo()\n    const URL_PARAMS = new window.URLSearchParams(window.location.search)\n    var data = URL_PARAMS.get('data')\n    console.log(data)\n    var prop_apps = 'applications'\n    var prop_displayname = 'displayName'\n    var prop_uri = 'uri'\n    var prop_apptype = 'applicationType'\n    var prop_url = 'url'\n    var appdetails = []\n    var appdetails_format = []\n    var usbApps = 0\n    try {\n      if (data != null && JSON.parse(data).hasOwnProperty(prop_apps)) {\n        appdetails = JSON.parse(data).applications\n        for (var i = 0; i < appdetails.length; i++) {\n          if (\n            appdetails[i].hasOwnProperty(prop_displayname) &&\n            appdetails[i].hasOwnProperty(prop_uri) &&\n            appdetails[i].hasOwnProperty(prop_apptype) &&\n            appdetails[i].hasOwnProperty(prop_url)\n          ) {\n            appdetails_format.push(appdetails[i])\n            usbApps++\n          }\n        }\n        for (var i = 0; i < appItems.length; i++) {\n          appdetails_format.push(appItems[i])\n        }\n      } else {\n        appdetails_format = appItems\n      }\n    } catch (e) {\n      appdetails_format = appItems\n      console.log('Query data is not proper: ' + e)\n    }\n    this.tag('MainView').appItems = appdetails_format\n    this.tag('MainView').tvShowItems = this.homeApi.getTVShowsInfo()\n    this.tag('MainView').settingsItems = this.homeApi.getSettingsInfo()\n    this.tag('SidePanel').sidePanelItems = this.homeApi.getSidePanelInfo()\n    this.sidePanelData = this.homeApi.getSidePanelInfo()\n    this._setState('SidePanel')\n    this.initialLoad = true\n  }\n\n  _active() {\n    if (this.initialLoad) {\n      let home = this\n      this._homeAnimation = home.animation({\n        duration: 0.5,\n        repeat: 0,\n        stopMethod: 'immediate',\n        actions: [\n          { p: 'scale', v: { 0: 5, 1: 1 } },\n          { p: 'x', v: { 0: -1920, 1: 0 } },\n          { p: 'y', v: { 0: -1080, 1: 0 } },\n        ],\n      })\n      this._homeAnimation.start()\n      this.initialLoad = false\n    }\n  }\n\n  /**\n   * Function to start video playback.\n   */\n  play() {\n    this.player = this.tag('Player')\n    try {\n      this.player.load({\n        title: 'Parkour event',\n        subtitle: 'm3u8',\n        url:\n          'https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8',\n        drmConfig: null,\n      })\n      this.zoomOut(0.1)\n      this.hide()\n      this._setState('Playing')\n      this.player.setVideoRect(0, 0, 1920, 1080)\n    } catch (error) {\n      this._setState('MainView')\n      console.error('Playback Failed ' + error)\n    }\n  }\n\n  /**\n   * Function to zoom in main view of home UI.\n   */\n  zoomIn(duration) {\n    this._sidePanelAnimation = this.tag('SidePanel').animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [{ p: 'x', v: { 0: 130, 1: 280 } }],\n    })\n    this._sidePanelAnimation.start()\n    this.tag('SidePanel').resetSidePanelItems = this.sidePanelData\n    let app = this\n    this._appAnimation = app.animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'x', v: { 0: 0, 1: -320 } },\n        { p: 'y', v: { 0: 0, 1: -180 } },\n        { p: 'scale', v: { 0: 1, 1: 1.17 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  /**\n   * Function to zoom out main view of home UI.\n   */\n  zoomOut(duration) {\n    this._sidePanelAnimation = this.tag('SidePanel').animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [{ p: 'x', v: { 0: 280, 1: 130 } }],\n    })\n    this._sidePanelAnimation.start()\n    this.tag('SidePanel').sidePanelItems = this.sidePanelData\n    let app = this\n    this._appAnimation = app.animation({\n      duration: duration,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'x', v: { 0: -320, 1: 0 } },\n        { p: 'y', v: { 0: -180, 1: 0 } },\n        { p: 'scale', v: { 0: 1.17, 1: 1 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  /**\n   * Fireancestor to set the state to side panel.\n   * @param {index} index index value of side panel item.\n   */\n  $goToSidePanel(index) {\n    this.zoomOut(0.7)\n    this.tag('SidePanel').index = index\n    this._setState('SidePanel')\n  }\n\n  /**\n   * Fireancestor to set the state to main view.\n   * @param {index} index index value of main view row.\n   */\n  $goToMainView(index) {\n    this.zoomIn(0.7)\n    this.tag('MainView').index = index\n    this._setState('MainView')\n  }\n\n  /**\n   * Fireancestor to set the state to player.\n   */\n  $goToPlayer() {\n    this._setState('Player')\n    this.play()\n  }\n\n  /**\n   * Function to hide the home UI.\n   */\n  hide() {\n    this.tag('Background').patch({ alpha: 0 })\n    this.tag('MainView').patch({ alpha: 0 })\n    this.tag('TopPanel').patch({ alpha: 0 })\n    this.tag('SidePanel').patch({ alpha: 0 })\n  }\n\n  /**\n   * Function to show home UI.\n   */\n  show() {\n    this.tag('Background').patch({ alpha: 1 })\n    this.tag('MainView').patch({ alpha: 1 })\n    this.tag('TopPanel').patch({ alpha: 1 })\n    this.tag('SidePanel').patch({ alpha: 1 })\n  }\n\n  /**\n   * Function to define various states needed for home screen.\n   */\n  static _states() {\n    return [\n      class TopPanel extends this {\n        _getFocused() {\n          return this.tag('TopPanel')\n        }\n      },\n      class SidePanel extends this {\n        _getFocused() {\n          return this.tag('SidePanel')\n        }\n      },\n      class MainView extends this {\n        _getFocused() {\n          return this.tag('MainView')\n        }\n      },\n      class Playing extends this {\n        _getFocused() {\n          return this.tag('Player')\n        }\n\n        _handleKey(key) {\n          if (key.keyCode == 77 || key.keyCode == 49 || key.keyCode == 36 || key.keyCode == 158) {\n            this.zoomIn(0)\n            this._setState('MainView')\n            this.player.stop()\n            this.show()\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\n/**\n * Class for Bluetooth thunder plugin apis.\n */\n\nexport default class BluetoothApi {\n  constructor() {\n    console.log('Bluetooth constructor')\n    this._events = new Map()\n    this._devices = []\n    this._pairedDevices = []\n    this._connectedDevices = []\n  }\n\n  /**\n   * Function to activate the Bluetooth plugin\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      }\n      this._thunder = ThunderJS(config)\n      this.callsign = 'org.rdk.Bluetooth'\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log('Bluetooth activated', result)\n          this._thunder.on(this.callsign, 'onDiscoveredDevice', notification => {\n            console.log('onDiscoveredDevice ' + JSON.stringify(notification))\n            this.getDiscoveredDevices().then(() => {\n              this._events.get('onDiscoveredDevice')(notification)\n            })\n          })\n          this._thunder.on(this.callsign, 'onStatusChanged', notification => {\n            console.log('onStatusChanged ' + notification.newStatus)\n            if (notification.newStatus === 'PAIRING_CHANGE') {\n              this.getPairedDevices().then(() => {\n                this._events.get('onPairingChange')(notification)\n              })\n            } else if (notification.newStatus === 'CONNECTION_CHANGE') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onConnectionChange')(notification)\n              })\n            } else if (notification.newStatus === 'DISCOVERY_STARTED') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onDiscoveryStarted')()\n              })\n            } else if (notification.newStatus === 'DISCOVERY_COMPLETED') {\n              this.getConnectedDevices().then(() => {\n                this._events.get('onDiscoveryCompleted')()\n              })\n            }\n          })\n          this._thunder.on(this.callsign, 'onPairingRequest', notification => {\n            console.log('onPairingRequest ' + JSON.stringify(notification))\n            this._events.get('onPairingRequest')(notification)\n          })\n          this._thunder.on(this.callsign, 'onRequestFailed', notification => {\n            console.log('onRequestFailed ' + JSON.stringify(notification))\n            this._events.get('onRequestFailed')(notification)\n          })\n          this._thunder.on(this.callsign, 'onConnectionRequest', notification => {\n            console.log('onConnectionRequest ' + JSON.stringify(notification))\n            this._events.get('onConnectionRequest')(notification)\n          })\n          resolve('Blutooth activated')\n        })\n        .catch(err => {\n          console.error('Activation failure', err)\n          reject('Bluetooth activation failed', err)\n        })\n    })\n  }\n\n  /**\n   *\n   * @param {string} eventId\n   * @param {function} callback\n   * Function to register the events for the Bluetooth plugin.\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback)\n  }\n\n  /**\n   * Function to deactivate the Bluetooth plugin.\n   */\n  deactivate() {\n    this._events = new Map()\n    this._thunder = null\n  }\n\n  /**\n   * Function to disable the Bluetooth stack.\n   */\n  disable() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'disable')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't disable : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to enable the Bluetooth stack.\n   */\n  enable() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'enable')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't enable : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to start scanning for the Bluetooth devices.\n   */\n  startScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'startScan', {\n          timeout: '10',\n          profile: 'KEYBOARD,MOUSE,JOYSTICK',\n        })\n        .then(result => {\n          console.log('scanning : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function returns the discovered Bluetooth devices.\n   */\n  getDiscoveredDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getDiscoveredDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._devices = result.discoveredDevices\n          resolve(result.discoveredDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get discovered devices : ${err}`)\n          reject()\n        })\n    })\n  }\n  get discoveredDevices() {\n    return this._devices\n  }\n\n  /**\n   * Function returns the paired Bluetooth devices.\n   */\n  getPairedDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getPairedDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._pairedDevices = result.pairedDevices\n          resolve(result.pairedDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get paired devices : ${err}`)\n          reject()\n        })\n    })\n  }\n  get pairedDevices() {\n    return this._pairedDevices\n  }\n\n  /**\n   * Function returns the connected Bluetooth devices.\n   */\n  getConnectedDevices() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'getConnectedDevices')\n        .then(result => {\n          console.log(JSON.stringify(result))\n          this._connectedDevices = result.connectedDevices\n          resolve(result.connectedDevices)\n        })\n        .catch(err => {\n          console.error(`Can't get connected devices : ${err}`)\n          reject()\n        })\n    })\n  }\n\n  get connectedDevices() {\n    return this._connectedDevices\n  }\n\n  /**\n   *\n   * Function to connect a Bluetooth device.\n   * @param {number} deviceID Device ID of the Bluetoth client.\n   * @param {string} deviceType Device type of the Bluetooth client.\n   */\n  connect(deviceID, deviceType) {\n    return new Promise((resolve, reject) => {\n      console.log(deviceID)\n      this._thunder\n        .call('org.rdk.Bluetooth', 'connect', {\n          deviceID: deviceID,\n          deviceType: deviceType,\n          profile: deviceType,\n        })\n        .then(result => {\n          console.log('connected : ' + result.success)\n          resolve(result.success)\n        })\n        .catch(err => {\n          console.error('Connection failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to disconnect a Bluetooth device.\n   *@param {number} deviceID Device ID of the Bluetoth client.\n   *@param {string} deviceType Device type of the Bluetooth client.\n   */\n  disconnect(deviceID, deviceType) {\n    console.log(deviceID)\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'disconnect', {\n          deviceID: deviceID,\n          deviceType: deviceType,\n        })\n        .then(result => {\n          console.log('disconnected : ' + result.success)\n          if (result.success) resolve(true)\n          else reject()\n        })\n        .catch(err => {\n          console.error('disconnect failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to unpair a Bluetooth device.\n   * @param {number} deviceId\n   */\n  unpair(deviceId) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'unpair', { deviceID: deviceId })\n        .then(result => {\n          console.log('unpaired : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('unpair failed', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to pair a Bluetooth device.\n   * @param {number} deviceId\n   */\n  pair(deviceId) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'pair', { deviceID: deviceId })\n        .then(result => {\n          console.log('paired : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error on pairing', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to respond to client the Bluetooth event.\n   * @param {number} deviceID Device ID of the Bluetooth client.\n   * @param {string} eventType Name of the event.\n   * @param {string} responseValue Response sent to the Bluetooth client.\n   */\n  respondToEvent(deviceID, eventType, responseValue) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Bluetooth', 'respondToEvent', {\n          deviceID: deviceID,\n          eventType: eventType,\n          responseValue: responseValue,\n        })\n        .then(result => {\n          console.log('responded to event : ' + result.success)\n          if (result.success) resolve()\n          else reject()\n        })\n        .catch(err => {\n          console.error('Error on respondToEvent', err)\n          reject()\n        })\n    })\n  }\n\n  /**\n   * Function to get the discoverable name of the Bluetooth plugin.\n   */\n  getName() {\n    return new Promise((resolve, reject) => {\n      this._thunder.call('org.rdk.Bluetooth', 'getName').then(result => {\n        resolve(result.name)\n      })\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**Color constants */\nexport var COLORS = {\n  textColor: 0xffffffff,\n  titleColor: 0xffffffff,\n  hightlightColor: 0xffc0c0c0,\n  headingColor: 0xffffffff,\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for rendering items in UI list.\n */\nexport default class Item extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        w: 200,\n        h: 65,\n        rect: true,\n        color: COLORS.hightlightColor,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents for an item in UI list.\n   */\n  set item(item) {\n    this._item = item\n    this.tag('Item').patch({\n      Name: {\n        x: 100,\n        y: 32.5,\n        mount: 0.5,\n        text: { text: item.title, textColor: 0xffffffff, fontSize: 35 },\n      },\n    })\n  }\n\n  /**\n   * Set width of the item.\n   */\n  set width(width) {\n    this.tag('Item').w = width\n  }\n\n  /**\n   * Set height of the item.\n   */\n  set height(height) {\n    this.tag('Item').h = height\n  }\n\n  _focus() {\n    this.tag('Item').scale = 1.1\n  }\n\n  _unfocus() {\n    this.tag('Item').scale = 1\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils, Router } from '@lightningjs/sdk'\nimport AAMPVideoPlayer from './../player/AAMPVideoPlayer'\nimport ThunderCalls from './../api/AppApi'\nimport BluetoothApi from './../api/BluetoothApi'\nimport HomeApi from '../api/HomeApi'\nimport AppApi from '../api/AppApi'\nimport Item from './../items/item'\n\n/**\n * Class for splash screen.\n */\nexport default class SplashScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Splashscreen: {\n        w: 1920,\n        h: 1080,\n        alpha: 0,\n        //just to cache the image\n        Cache: {\n          w: 0,\n          h: 0,\n          x: -1920,\n          src: Utils.asset('images/tvShows/background.jpg'),\n        },\n        Img: {\n          mount: 0.5,\n          x: 1920 / 2,\n          y: 1080 / 2,\n          src: Utils.asset('images/RDKLogo.png'),\n        },\n      },\n      SplashVideo: {\n        w: 1920,\n        h: 1080,\n        alpha: 0,\n        Player: { type: AAMPVideoPlayer, w: 1920, h: 1080, x: 0, y: 0 },\n      },\n      AutoRemotePair: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          w: 1600,\n          y: 474,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: 'Pair Your Remote',\n            textColor: 0xffffffff,\n          },\n        },\n        Description: {\n          w: 1300,\n          y: 550,\n          x: 150,\n          text: {\n            fontSize: 35,\n            textAlign: 'center',\n            maxLines: 2,\n            text: 'Please put the remote in pairing mode, scanning will start in a minute',\n\n            textColor: 0xffe5e5e5,\n          },\n        },\n        LoadingIcon: {\n          x: 750,\n          y: 600,\n          alpha: 0,\n          src: Utils.asset('images/loading.png'),\n        },\n        RemoteImg: {\n          x: 1300,\n          y: 300,\n          src: Utils.asset('images/remote.png'),\n        },\n      },\n      ConnectivityScreen: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          w: 1920,\n          y: 325,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: \"You're not connected to the internet\",\n            textColor: 0xffffffff,\n          },\n        },\n        Description: {\n          w: 1920,\n          y: 400,\n          text: {\n            fontSize: 35,\n            textAlign: 'center',\n            maxLines: 2,\n            text:\n              'Please connect to either a wired connection or a WiFi Network, For WiFi network press home and then go to settings',\n            wordWrapWidth: 1400,\n            textColor: 0xffe5e5e5,\n          },\n        },\n      },\n      UISwitch: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n        alpha: 0,\n        Title: {\n          x: 1920 / 2,\n          y: 400,\n          mountX: 0.5,\n          text: {\n            fontSize: 55,\n            textAlign: 'center',\n            text: 'Choose your UI',\n            textColor: 0xffffffff,\n          },\n        },\n        UIList: {\n          x: 1920 / 2 + 20,\n          y: 500,\n          type: Lightning.components.ListComponent,\n          w: 224 * 3,\n          h: 100,\n          itemSize: 204 + 20,\n          roll: true,\n          mountX: 0.5,\n        },\n      },\n    }\n  }\n  /**\n   * Function to be excuted when the Bluetooth screen is enabled.\n   */\n  _enable() {\n    this.remotePaired = true\n    this.hasInternet = true\n\n    this._bt = new BluetoothApi()\n    this._bt.activate()\n    this._bt\n      .getPairedDevices()\n      .then(() => this._bt.getConnectedDevices())\n      .then(() => {\n        let paired = this._bt.pairedDevices\n        let connected = this._bt.connectedDevices\n\n        if (paired.length == 0 && connected.length == 0) {\n          this.remotePaired = false\n        }\n      })\n    // this.startVideo()\n    // var thunderCalls = new ThunderCalls()\n    // thunderCalls.checkForInternet().then(result => {\n    //   this.hasInternet = result\n    // })\n\n    this._setState('Splashscreen')\n  }\n  /**\n   * Function to be executed when the Bluetooth screen is disabled from the screen.\n   */\n  _disable() {\n    if (this._bt) this._bt.deactivate()\n    if (this.player) this.player.stop()\n  }\n\n  _init() {\n    this.appApi = new AppApi()\n    var homeApi = new HomeApi()\n    this.tag('UISwitch.UIList').items = homeApi.getUIInfo().map((item, index) => {\n      return {\n        ref: 'UI' + index,\n        w: 204,\n        h: 100,\n        type: Item,\n        item: item,\n      }\n    })\n  }\n  /**\n   * Function to startVideo.\n   */\n  startVideo() {\n    this.player = this.tag('SplashVideo.Player')\n    try {\n      this.player.load({\n        title: '',\n        subtitle: '',\n        image: '',\n        url: 'https://rdkwiki.com/rdk-apps/splash/splash.MOV',\n        drmConfig: null,\n      })\n      //this.player.setVideoRect(0, 0, 1280, 720)\n      // this.player.pause()\n    } catch (error) {\n      this.player = null\n      console.log('###########', error)\n    }\n  }\n\n  /**\n   * Function to handle the different states of the app.\n   */\n  static _states() {\n    return [\n      class Splashscreen extends this {\n        $enter() {\n          const myAnimation = this.tag('Splashscreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 0, 1: 1 } }],\n          })\n          myAnimation.start()\n\n          this.screenTimeout = setTimeout(() => {\n            this._setState('SplashVideo')\n          }, 5000)\n        }\n        _handleKey(event) {\n          if (event.keyCode == 83) this._setState('UISwitch')\n        }\n        $exit() {\n          const myAnimation = this.tag('Splashscreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n          window.clearTimeout(this.screenTimeout)\n        }\n      },\n      class SplashVideo extends this {\n        $enter() {\n          const myAnimation = this.tag('SplashVideo').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 0, 1: 1 } }],\n          })\n          myAnimation.start()\n          this.startVideo()\n          this.timeout = setTimeout(() => {\n            if (this.remotePaired == false) this._setState('AutoRemotePair')\n            else if (this.hasInternet == false) this._setState('ConnectivityScreen')\n            else Router.navigate('home')\n          }, 5000)\n        }\n        $exit() {\n          const myAnimation = this.tag('SplashVideo').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.on('finish', p => {\n            if (this.player) this.player.stop()\n          })\n          myAnimation.start()\n          window.clearTimeout(this.timeout)\n        }\n        _handleKey(event) {\n          if (event.keyCode == 83) this._setState('UISwitch')\n        }\n      },\n      class ConnectivityScreen extends this {\n        $enter() {\n          const myAnimation = this.tag('ConnectivityScreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          myAnimation.start()\n          setTimeout(() => {\n            Router.navigate('home')\n          }, 5000)\n        }\n        $exit() {\n          const myAnimation = this.tag('ConnectivityScreen').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n        _handleKey() {\n          Router.navigate('home')\n        }\n      },\n      class AutoRemotePair extends this {\n        $enter() {\n          const myAnimation = this.tag('AutoRemotePair').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          var connected = false\n          var timer = setTimeout(() => {\n            if (!connected)\n              this.tag('AutoRemotePair.Description').text =\n                'Please put the remote in pairing mode, No Bluetooth device found'\n            setTimeout(() => {\n              if (this.hasInternet == false) this._setState('ConnectivityScreen')\n              else Router.navigate('home')\n            }, 1000)\n          }, 10000)\n          var error = () => {\n            this.tag('AutoRemotePair.Description').text =\n              'Please put the remote in pairing mode, , No Bluetooth device found'\n            setTimeout(() => {\n              if (this.hasInternet == false) this._setState('ConnectivityScreen')\n              else Router.navigate('home')\n            }, 1000)\n          }\n          myAnimation.start()\n          setTimeout(() => {\n            this.tag('AutoRemotePair.Description').text =\n              'Please put the remote in pairing mode, Scanning...'\n            const rotateAnimation = this.tag('AutoRemotePair.LoadingIcon').animation({\n              duration: 1,\n              repeat: -1,\n              stopMethod: 'immediate',\n              stopDelay: 0.2,\n              actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n            })\n            rotateAnimation.play()\n            this.tag('AutoRemotePair.LoadingIcon').alpha = 1\n            this._bt.startScan()\n            this._bt.registerEvent('onDiscoveredDevice', () => {\n              let discovered = this._bt.discoveredDevices\n              if (discovered.length > 0) {\n                this._bt.pair(discovered[0].deviceID)\n              } else {\n                error()\n              }\n            })\n          }, 5000)\n          this._bt.registerEvent('onPairingChange', () => {\n            let pairedDevices = this._bt.pairedDevices\n            if (pairedDevices.length > 0) {\n              this._bt.connect(pairedDevices[0].deviceID, pairedDevices[0].deviceType)\n            } else {\n              setTimeout(() => {\n                this._bt.getPairedDevices().then(() => {\n                  let pairedDevices = this._bt.pairedDevices\n                  if (pairedDevices.length > 0) {\n                    this._bt.connect(pairedDevices[0].deviceID, pairedDevices[0].deviceType)\n                  } else {\n                    error()\n                  }\n                })\n              }, 2000)\n            }\n          })\n          this._bt.registerEvent('onConnectionChange', () => {\n            let connectedDevices = this._bt.connectedDevices\n            if (connectedDevices.length > 0) {\n              this.tag('AutoRemotePair.Description').text =\n                'Please put the remote in pairing mode, Connected to ' + connectedDevices[0].name\n              connected = true\n              clearTimeout(timer)\n              setTimeout(() => {\n                if (this.hasInternet == false) this._setState('ConnectivityScreen')\n                else Router.navigate('home')\n              }, 2000)\n            } else {\n              setTimeout(() => {\n                this._bt.getConnectedDevices().then(() => {\n                  let connectedDevices = this._bt.connectedDevices\n                  if (connectedDevices.length > 0) {\n                    this.tag('AutoRemotePair.Description').text =\n                      'Please put the remote in pairing mode, Connected to ' +\n                      connectedDevices[0].name\n                    connected = true\n                    clearTimeout(timer)\n                    setTimeout(() => {\n                      if (this.hasInternet == false) this._setState('ConnectivityScreen')\n                      else Router.navigate('home')\n                    }, 2000)\n                  } else {\n                    error()\n                  }\n                })\n              }, 2000)\n            }\n          })\n        }\n        $exit() {\n          const myAnimation = this.tag('AutoRemotePair').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n      },\n      class UISwitch extends this {\n        $enter() {\n          const myAnimation = this.tag('UISwitch').animation({\n            duration: 0.5,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [\n              { p: 'alpha', v: { 0: 0, 1: 1 } },\n              { p: 'x', v: { 0: 1000, 1: 0 } },\n            ],\n          })\n          myAnimation.start()\n        }\n        _getFocused() {\n          return this.tag('UISwitch.UIList').element\n        }\n        _handleRight() {\n          if (this.tag('UISwitch.UIList').length - 1 != this.tag('UISwitch.UIList').index) {\n            this.tag('UISwitch.UIList').setNext()\n            return this.tag('UISwitch.UIList').element\n          }\n        }\n        _handleLeft() {\n          if (this.tag('UISwitch.UIList').index > 0) {\n            this.tag('UISwitch.UIList').setPrevious()\n            return this.tag('UISwitch.UIList').element\n          }\n        }\n        _handleEnter() {\n          if (this.tag('UISwitch.UIList').element._item.title != 'DEFAULT') {\n            this.appApi.launchResident(this.tag('UISwitch.UIList').element._item.url)\n          } else {\n            if (this.remotePaired == false) this._setState('AutoRemotePair')\n            else if (this.hasInternet == false) this._setState('ConnectivityScreen')\n            else Router.navigate('home')\n          }\n        }\n        $exit() {\n          const myAnimation = this.tag('UISwitch').animation({\n            duration: 1,\n            repeat: 0,\n            stopMethod: 'immediate',\n            actions: [{ p: 'alpha', v: { 0: 1, 1: 0 } }],\n          })\n          myAnimation.start()\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for rendering items in Settings screen.\n */\nexport default class SettingsItem extends Lightning.Component {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents for an item in settings screen.\n   */\n  set item(item) {\n    this._item = item\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: this.tag('Item').h / 2,\n        mountY: 0.5,\n        text: { text: item, fontSize: 25, textColor: COLORS.textColor },\n      },\n    })\n  }\n\n  /**\n   * Set width of the item.\n   */\n  set width(width) {\n    this.tag('Item').w = width\n  }\n\n  /**\n   * Set height of the item.\n   */\n  set height(height) {\n    this.tag('Item').h = height\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport SettingsItem from './SettingsItem'\nimport { COLORS } from '../colors/Colors'\n\n/**\n * Class for the item in the Bluetooth screen.\n */\nexport default class BluetoothItem extends SettingsItem {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents of an item in the Bluetooth screen.\n   */\n  set item(item) {\n    this._item = item\n    this.connected = item.connected ? 'Connected' : 'Not Connected'\n    this.status = item.paired ? this.connected : 'Not Paired'\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: 32.5,\n        mountY: 0.5,\n        text: { text: item.name, fontSize: 25, textColor: COLORS.textColor },\n      },\n\n      Right: {\n        x: 1920 / 3 - 80,\n        mountX: 1,\n        y: 32.5,\n        mountY: 0.5,\n        flex: { direction: 'row' },\n        Text: { x: 0, flexItem: {}, text: { text: this.status, fontSize: 25 } },\n        Info: {\n          color: 0xff0000ff,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/info.png'), 32.5, 32.5),\n        },\n      },\n    })\n    if (this.status == 'Connected') {\n      this.tag('Item.Right.Info').visible = false\n    } else {\n      this.tag('Item.Right.Info').visible = true\n    }\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\nimport SettingsItem from './../items/SettingsItem'\n\n/**\n * Class for pairing screen for the Bluetooth.\n */\nexport default class BluetoothPairingScreen extends Lightning.Component {\n  static _template() {\n    return {\n      PairingScreen: {\n        x: 0,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      Title: {\n        x: 20,\n        y: 100,\n        text: { text: '', fontSize: 30, textColor: COLORS.titleColor },\n      },\n      List: {\n        x: 20,\n        y: 150,\n        type: Lightning.components.ListComponent,\n        w: 1920 / 3,\n        h: 400,\n        itemSize: 65,\n        horizontal: false,\n        invertDirection: true,\n        roll: true,\n      },\n      Status: {\n        x: 20,\n        y: 500,\n        Text: {\n          text: {\n            text: 'Enter the below code in your Bluetooth device and press enter',\n            wordWrapWidth: 1920 / 3 - 70,\n            fontSize: 30,\n          },\n        },\n        Code: {\n          x: 0,\n          y: 60,\n          text: { text: '' },\n        },\n        visible: false,\n      },\n    }\n  }\n  set item(item) {\n    this.tag('Status').visible = false\n    this.tag('Title').text = item.name\n    var options = []\n    this._item = item\n    if (item.paired) {\n      if (item.connected) {\n        options = ['Disconnect', 'Unpair', 'Cancel']\n      } else {\n        options = ['Connect', 'Unpair', 'Cancel']\n      }\n    } else {\n      options = ['Pair', 'Cancel']\n    }\n    this.tag('List').items = options.map((item, index) => {\n      return {\n        ref: item,\n        w: 1920 / 3,\n        h: 65,\n        type: SettingsItem,\n        item: item,\n      }\n    })\n  }\n\n  set code(code) {\n    this.tag('Status.Code').text.text = code\n    this.tag('Status').visible = true\n  }\n\n  _getFocused() {\n    return this.tag('List').element\n  }\n\n  _handleDown() {\n    this.tag('List').setNext()\n  }\n\n  _handleUp() {\n    this.tag('List').setPrevious()\n  }\n\n  _handleEnter() {\n    this.fireAncestors('$pressEnter', this.tag('List').element.ref)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport BluetoothItem from '../items/BluetoothItem'\nimport BluetoothApi from './../api/BluetoothApi'\nimport BluetoothPairingScreen from './BluetoothPairingScreen'\nimport { COLORS } from './../colors/Colors'\n\n/**\n * Class for Bluetooth screen.\n */\nexport default class BluetoothScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Title: {\n        x: 1920 - 1920 / 3 + 1920 / 6,\n        y: 50,\n        text: { text: 'Bluetooth', textColor: COLORS.headingColor },\n        mountX: 0.5,\n      },\n      Switch: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 150,\n        rect: true,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n        color: 0x00c0c0c0,\n        w: 1920 / 3 - 70,\n        h: 50,\n        Text: {\n          x: 0,\n          text: { text: 'Bluetooth', textColor: COLORS.titleColor },\n        },\n        Button: {\n          x: 1920 / 3 - 80,\n          y: 10,\n          mountX: 1,\n          src: Utils.asset('images/switch-on.png'),\n        },\n      },\n      Name: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 200,\n        text: {\n          text: 'Now discoverable as',\n          textColor: COLORS.textColor,\n          fontSize: 20,\n        },\n      },\n      Networks: {\n        x: 1920 - 1920 / 3,\n        y: 250,\n        flex: { direction: 'column' },\n        PairedNetworks: {\n          flexItem: { margin: 20 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'My Devices',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          List: {\n            x: 0,\n            y: 65,\n            type: Lightning.components.ListComponent,\n            w: 1920 / 3,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        AvailableNetworks: {\n          flexItem: { margin: 20, marginTop: 30 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'Other Devices',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          Loader: {\n            x: 250,\n            y: -10,\n            w: 50,\n            h: 50,\n            color: 0xff000000,\n            src: Utils.asset('images/loader.png'),\n            visible: false,\n          },\n\n          List: {\n            x: 0,\n            y: 65,\n            w: 1920 / 3,\n            h: 100,\n            type: Lightning.components.ListComponent,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        visible: false,\n      },\n      PairingScreen: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        visible: false,\n        type: BluetoothPairingScreen,\n      },\n      Message: {\n        x: 1920 - 1920 / 3 + 40,\n        y: 950,\n        text: { text: '' },\n      },\n    }\n  }\n\n  _init() {\n    this.loadingAnimation = this.tag('Networks.AvailableNetworks.Loader').animation({\n      duration: 1,\n      repeat: -1,\n      stopMethod: 'immediate',\n      stopDelay: 0.2,\n      actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n    })\n    this.loadingAnimation.play()\n    this._bt = new BluetoothApi()\n    this._bluetooth = true\n    this._activateBluetooth()\n    this._setState('Switch')\n    this._bluetooth = true\n    if (this._bluetooth) {\n      this.tag('Networks').visible = true\n    }\n    this._pairedNetworks = this.tag('Networks.PairedNetworks')\n    this._availableNetworks = this.tag('Networks.AvailableNetworks')\n    this.renderDeviceList()\n  }\n  _active() {\n    this._setState('Switch')\n  }\n  /**\n   * Function to be excuted when the Bluetooth screen is enabled.\n   */\n  _enable() {\n    if (this._bluetooth) {\n      this._bt.startScan()\n    }\n    this.scanTimer = setInterval(() => {\n      if (this._bluetooth) {\n        this._bt.startScan()\n      }\n    }, 15000)\n  }\n\n  /**\n   * Function to be executed when the Bluetooth screen is disabled from the screen.\n   */\n  _disable() {\n    clearInterval(this.scanTimer)\n  }\n\n  /**\n   * Function to render list of Bluetooth devices\n   */\n  renderDeviceList() {\n    this._bt.getPairedDevices().then(result => {\n      this._pairedList = result\n      this._pairedNetworks.h = this._pairedList.length * 65 + 30\n      this._pairedNetworks.tag('List').h = this._pairedList.length * 65\n      this._pairedNetworks.tag('List').items = this._pairedList.map((item, index) => {\n        item.paired = true\n        return {\n          ref: 'Paired' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: BluetoothItem,\n          item: item,\n        }\n      })\n    })\n    this._bt.getDiscoveredDevices().then(result => {\n      this._discoveredList = result\n      this._otherList = this._discoveredList.filter(device => {\n        if (!device.paired) {\n          result = this._pairedList.map(a => a.deviceID)\n          if (result.includes(device.deviceID)) {\n            return false\n          } else return device\n        }\n      })\n      this._availableNetworks.h = this._otherList.length * 65 + 30\n      this._availableNetworks.tag('List').h = this._otherList.length * 65\n      this._availableNetworks.tag('List').items = this._otherList.map((item, index) => {\n        return {\n          ref: 'Other' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: BluetoothItem,\n          item: item,\n        }\n      })\n    })\n  }\n\n  static _states() {\n    return [\n      class Switch extends this {\n        $enter() {\n          this.tag('Switch').color = COLORS.hightlightColor\n        }\n        $exit() {\n          this.tag('Switch').color = 0x00c0c0c0\n        }\n        _handleDown() {\n          if (this._bluetooth) {\n            if (this._pairedNetworks.tag('List').length > 0) {\n              this._setState('PairedDevices')\n            } else if (this._availableNetworks.tag('List').length > 0) {\n              this._setState('AvailableDevices')\n            }\n          }\n        }\n        _handleEnter() {\n          this.switch()\n        }\n      },\n      class PairedDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._pairedNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('MyDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('MyDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._pairedNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class AvailableDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._availableNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('AvailableDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('AvailableDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._availableNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class PairingScreen extends this {\n        _getFocused() {\n          return this.tag('PairingScreen')\n        }\n        $pressEnter(option) {\n          if (option === 'Cancel') {\n            this._setState('Switch')\n          } else if (option === 'Pair') {\n            this._bt.pair(this._availableNetworks.tag('List').element._item.deviceID).then(() => {})\n          } else if (option === 'Connect') {\n            this._bt\n              .connect(\n                this._pairedNetworks.tag('List').element._item.deviceID,\n                this._pairedNetworks.tag('List').element._item.deviceType\n              )\n              .then(result => {\n                if (!result) {\n                  this.tag('Message').text = 'CONNECTION FAILED'\n                  this._setState('Switch')\n                }\n                setTimeout(() => {\n                  this.tag('Message').text = ''\n                }, 2000)\n              })\n          } else if (option === 'Disconnect') {\n            this._bt\n              .disconnect(\n                this._pairedNetworks.tag('List').element._item.deviceID,\n                this._pairedNetworks.tag('List').element._item.deviceType\n              )\n              .then(() => {})\n            this._setState('Switch')\n          } else if (option === 'Unpair') {\n            this._bt.unpair(this._pairedNetworks.tag('List').element._item.deviceID).then(() => {})\n            this._setState('Switch')\n          }\n        }\n        $exit() {\n          this.tag('PairingScreen').visible = false\n        }\n      },\n    ]\n  }\n\n  /**\n   * Function to navigate through the lists in the screen.\n   * @param {string} listname\n   * @param {string} dir\n   */\n  _navigate(listname, dir) {\n    let list\n    if (listname === 'MyDevices') list = this._pairedNetworks.tag('List')\n    else if (listname === 'AvailableDevices') list = this._availableNetworks.tag('List')\n    if (dir === 'down') {\n      if (list.index < list.length - 1) list.setNext()\n      else if (list.index == list.length - 1) {\n        if (listname === 'MyDevices' && this._availableNetworks.tag('List').length > 0) {\n          this._setState('AvailableDevices')\n        }\n      }\n    } else if (dir === 'up') {\n      if (list.index > 0) list.setPrevious()\n      else if (list.index == 0) {\n        if (listname === 'AvailableDevices' && this._pairedNetworks.tag('List').length > 0) {\n          this._setState('PairedDevices')\n        } else {\n          this._setState('Switch')\n        }\n      }\n    }\n  }\n\n  /**\n   * Function to turn on and off Bluetooth.\n   */\n  switch() {\n    if (this._bluetooth) {\n      this._bt.disable().then(result => {\n        if (result.success) {\n          this._bluetooth = false\n          this.tag('Networks').visible = false\n          this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n        }\n      })\n    } else {\n      this._bt.enable().then(result => {\n        if (result.success) {\n          this._bluetooth = true\n          this.tag('Networks').visible = true\n          this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n          this.renderDeviceList()\n          this._bt.startScan()\n        }\n      })\n    }\n  }\n\n  /**\n   * Function to activate Bluetooth plugin.\n   */\n  _activateBluetooth() {\n    this._bt.activate().then(() => {\n      this._bt.registerEvent('onDiscoveredDevice', () => {\n        this.renderDeviceList()\n      })\n      this._bt.registerEvent('onPairingChange', status => {\n        this._bt.startScan()\n        this.renderDeviceList()\n        this._setState('Switch')\n      })\n      this._bt.registerEvent('onPairingRequest', notification => {\n        if (notification.pinRequired === 'true' && notification.pinValue) {\n          //this.fireAncestors('$rerenderDeviceOptions', notification.pinValue)\n          this.tag('PairingScreen').code = notification.pinValue\n        } else {\n          this.respondToPairingRequest(notification.deviceID, 'ACCEPTED')\n        }\n      })\n      this._bt.registerEvent('onConnectionChange', notification => {\n        this._bt.startScan()\n        console.log('CONNECTION CHANGED' + JSON.stringify(notification))\n        this.renderDeviceList()\n        this._setState('Switch')\n        if (notification.connected) {\n          this.tag('Message').text = 'CONNECTION SUCCESS'\n        } else {\n          this.tag('Message').text = 'CONNECTION FAILED'\n        }\n        setTimeout(() => {\n          this.tag('Message').text = ''\n        }, 2000)\n      })\n      this._bt.registerEvent('onDiscoveryCompleted', () => {\n        this.tag('Networks.AvailableNetworks.Loader').visible = false\n        this.renderDeviceList()\n      })\n      this._bt.registerEvent('onDiscoveryStarted', () => {\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      })\n      this._bt.registerEvent('onRequestFailed', notification => {\n        this._bt.startScan()\n        this.renderDeviceList()\n        this._setState('Switch')\n        this.tag('Message').text = notification.newStatus\n        setTimeout(() => {\n          this.tag('Message').text = ''\n        }, 2000)\n      })\n      //this._bt.startScan()\n      this._bt.getName().then(name => {\n        this.tag('Name').text.text = `Now discoverable as \"${name}\"`\n      })\n      // this._bluetooth = true\n      // this.tag('Networks').visible = true\n      // this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n      // this.renderDeviceList()\n    })\n  }\n\n  /**\n   * Function to respond to Bluetooth client.\n   * @param {number} deviceID\n   * @param {string} responseValue\n   */\n  respondToPairingRequest(deviceID, responseValue) {\n    this._bt.respondToEvent(deviceID, 'onPairingRequest', responseValue)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport SettingsItem from './SettingsItem'\nimport { COLORS } from '../colors/Colors'\n\nexport default class WiFiItem extends SettingsItem {\n  static _template() {\n    return {\n      Item: {\n        w: 1920 / 3 - 70,\n        h: 65,\n        rect: true,\n        color: 0x00000000,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n      },\n    }\n  }\n\n  /**\n   * Function to set contents of an item in the Bluetooth screen.\n   */\n  set item(item) {\n    this._item = item\n    this.status = item.connected ? 'Connected' : 'Not Connected'\n    this.tag('Item').patch({\n      Left: {\n        x: 10,\n        y: 32.5,\n        mountY: 0.5,\n        text: { text: item.ssid, fontSize: 25, textColor: COLORS.textColor },\n      },\n\n      Right: {\n        x: 1920 / 3 - 80,\n        mountX: 1,\n        y: 32.5,\n        mountY: 0.5,\n        flex: { direction: 'row' },\n        Lock: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/wifi-lock.png'), 32.5, 32.5),\n        },\n        Icon: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/wifi-icon.png'), 32.5, 32.5),\n        },\n        Info: {\n          color: 0xff000000,\n          flexItem: { marginLeft: 10 },\n          texture: Lightning.Tools.getSvgTexture(Utils.asset('images/info.png'), 32.5, 32.5),\n        },\n      },\n    })\n    if (item.security == '0' || item.security == '15') {\n      this.tag('Item.Right.Lock').visible = false\n    } else {\n      this.tag('Item.Right.Lock').visible = true\n    }\n  }\n\n  _focus() {\n    this.tag('Item').color = COLORS.hightlightColor\n  }\n\n  _unfocus() {\n    this.tag('Item').color = 0x00000000\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport ThunderJS from 'ThunderJS'\n\nexport const WiFiState = {\n  UNINSTALLED: 0,\n  DISABLED: 1,\n  DISCONNECTED: 2,\n  PAIRING: 3,\n  CONNECTING: 4,\n  CONNECTED: 5,\n  FAILED: 6,\n}\n\nexport default class Wifi {\n  constructor() {\n    this._events = new Map()\n  }\n\n  /**\n   * Function to activate the wifi plugin.\n   */\n  activate() {\n    return new Promise((resolve, reject) => {\n      const config = {\n        host: '127.0.0.1',\n        port: 9998,\n        default: 1,\n      }\n      this._thunder = ThunderJS(config)\n      this.callsign = 'org.rdk.Wifi'\n      this._thunder.call('Controller', 'activate', { callsign: 'org.rdk.Network' }).then(result => {\n        this._thunder.on('org.rdk.Network', 'onIPAddressStatusChanged', notification => {\n          if (this._events.has('onIPAddressStatusChanged')) {\n            this._events.get('onIPAddressStatusChanged')(notification)\n          }\n        })\n        this._thunder.on('org.rdk.Network','onDefaultInterfaceChanged',notification=>{\n          if (this._events.has('onDefaultInterfaceChanged')) {\n            this._events.get('onDefaultInterfaceChanged')(notification)\n          }\n        })\n      })\n      this._thunder\n        .call('Controller', 'activate', { callsign: this.callsign })\n        .then(result => {\n          console.log('Wifi activated', result)\n\n          this.getCurrentState().then(state => {\n            if (state === WiFiState.DISABLED) {\n              this.setEnabled(true)\n            }\n          })\n\n          this._thunder.on(this.callsign, 'onWIFIStateChanged', notification => {\n            console.log('onWIFIStateChanged: ' + notification.state)\n            if (this._events.has('onWIFIStateChanged')) {\n              this._events.get('onWIFIStateChanged')(notification)\n            }\n          })\n          this._thunder.on(this.callsign, 'onError', notification => {\n            console.log('Error: ' + notification)\n            if (this._events.has('onError')) {\n              this._events.get('onError')(notification)\n            }\n          })\n\n          this._thunder.on(this.callsign, 'onAvailableSSIDs', notification => {\n            console.log('AvailableSSIDs: ' + JSON.stringify(notification))\n            if (notification.moreData === false) {\n              this.stopScan()\n              notification.ssids = notification.ssids.filter(\n                (item, pos) => notification.ssids.findIndex(e => e.ssid === item.ssid) === pos\n              )\n              if (this._events.has('onAvailableSSIDs')) {\n                this._events.get('onAvailableSSIDs')(notification)\n              }\n            }\n          })\n\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Wifi activation failed: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   *Register events and event listeners.\n   * @param {string} eventId\n   * @param {function} callback\n   *\n   */\n  registerEvent(eventId, callback) {\n    this._events.set(eventId, callback)\n  }\n\n  /**\n   * Deactivates wifi plugin.\n   */\n  deactivate() {\n    this._events = new Map()\n    this._thunder = null\n  }\n\n  /**\n   * Returns connected SSIDs\n   */\n  getConnectedSSID() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getConnectedSSID')\n        .then(result => {\n          console.log('ConnectedSSID: ' + result.ssid)\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`getConnectedSSID fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Start scanning for available wifi.\n   */\n  discoverSSIDs() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'startScan', { incremental: false, ssid: '', frequency: '' })\n        .then(result => {\n          console.log('startScan success')\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`startScan fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Stops scanning for networks.\n   */\n  stopScan() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'stopScan')\n        .then(result => {\n          console.log('stopScan success')\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`stopScan fail: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Function to connect to an SSID\n   * @param {object} device\n   * @param {string} passphrase\n   */\n  connect(device, passphrase) {\n    return new Promise((resolve, reject) => {\n      this.disconnect().then(() => {\n        console.log(`connect SSID ${device.ssid}`)\n        this._thunder\n          .call(this.callsign, 'connect', {\n            ssid: device.ssid,\n            passphrase: passphrase,\n            securityMode: device.security,\n          })\n          .then(result => {\n            console.log(`connected SSID ${device.ssid}`)\n            resolve(result)\n          })\n          .catch(err => {\n            console.error(`Connection failed: ${err}`)\n            reject(err)\n          })\n      }, reject)\n    })\n  }\n\n  /**\n   * Function to disconnect from the SSID.\n   */\n  disconnect() {\n    return new Promise((resolve, reject) => {\n      this._thunder.call(this.callsign, 'disconnect', {}).then(\n        result => {\n          console.log('WiFi disconnected: ' + JSON.stringify(result))\n          resolve(result)\n        },\n        err => {\n          console.error(`Can't disconnect WiFi: ${err}`)\n          reject(err)\n        }\n      )\n    })\n  }\n\n  /**\n   * Returns current state of the Wi-Fi plugin.\n   */\n  getCurrentState() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getCurrentState')\n        .then(result => {\n          console.log(`WiFi state: ${result.state}`)\n          resolve(result.state)\n        })\n        .catch(err => {\n          console.error(`Can't get WiFi state: ${err}`)\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Enables/Disables the Wi-Fi.\n   * @param {bool} bool\n   */\n  setEnabled(bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'setEnabled', { enable: bool })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n\n  /**\n   * Function to get paired SSID.\n   */\n  getPaired() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call(this.callsign, 'getPairedSSID', {})\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          console.error(`Can't get paired: ${err}`)\n          reject(err)\n        })\n    })\n  }\n  getDefaultInterface() {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'getDefaultInterface', {})\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n  setInterface(inter, bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'setInterfaceEnabled', {\n          interface: inter,\n          persist: true,\n          enabled: bool,\n        })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n  setDefaultInterface(interfaceName, bool) {\n    return new Promise((resolve, reject) => {\n      this._thunder\n        .call('org.rdk.Network', 'setDefaultInterface', {\n          interface: interfaceName,\n          persist: bool,\n        })\n        .then(result => {\n          resolve(result)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning } from '@lightningjs/sdk'\n\n/**\n * Class to render the keypad for the wifi screen.\n */\nexport default class Keypad extends Lightning.Component {\n  static _template() {\n    return {\n      Wrapper: {\n        flex: { direction: 'row' },\n      },\n    }\n  }\n\n  /**\n   * Function to add items to the list.\n   */\n  set items(items) {\n    this._scroll = true\n    this.tag('Wrapper').children = items\n    this._index = 0\n    if (items.length > 0) {\n      this._setState('Filled')\n    } else {\n      this._setState('Empty')\n    }\n  }\n\n  set wrap(bool) {\n    if (bool) {\n      let wrapper = this.tag('Wrapper')\n      wrapper.w = 428\n      wrapper.h = 56\n      this.tag('Wrapper').patch({\n        flex: { direction: 'row', wrap: true },\n      })\n    }\n    this._wrap = true\n  }\n  get items() {\n    return this.tag('Wrapper').children\n  }\n\n  get currentItem() {\n    return this.items[this._index]\n  }\n\n  get length() {\n    return this.items.length\n  }\n\n  set orientation(v) {\n    this._orientation = v\n    if (v === 'horizontal') {\n      this.tag('Wrapper').patch({ flex: { direction: 'row' } })\n    } else {\n      this.tag('Wrapper').patch({ flex: { direction: 'column' } })\n    }\n  }\n\n  get orientation() {\n    return this._orientation || 'horizontal'\n  }\n\n  set jump(bool) {\n    this._jump = bool\n  }\n\n  get jump() {\n    return this._jump || false\n  }\n\n  set jumpToStart(bool) {\n    this._jumpToStart = bool\n  }\n\n  get jumpToStart() {\n    return this._jumpToStart !== undefined ? this._jumpToStart : this.jump\n  }\n\n  set jumpToEnd(bool) {\n    this._jumpToEnd = bool\n  }\n\n  get jumpToEnd() {\n    return this._jumpToEnd !== undefined ? this._jumpToEnd : this.jump\n  }\n\n  _navigate(dir) {\n    this._prevY = this.currentItem.finalY\n    const ori = this.orientation\n    if (dir === 'right' || dir === 'left' || dir === 'up' || dir === 'down') {\n      const length = this.items.length\n      const currentIndex = this._index\n      let targetIndex = currentIndex + 1\n      if (dir === 'left' || (dir === 'up' && this._wrap === false)) {\n        targetIndex = currentIndex - 1\n      }\n      if (dir === 'up' && this._wrap === true) {\n        let n = Math.floor(this.tag('Wrapper').w / this.currentItem.finalW)\n        let pos = currentIndex - n\n        targetIndex = currentIndex - n >= 0 ? pos : -1\n      }\n      if (dir === 'down' && this._wrap === true) {\n        let n = Math.floor(this.tag('Wrapper').w / this.currentItem.finalW)\n        let pos = currentIndex + n\n        targetIndex = pos < length ? pos : -1\n        if (targetIndex == -1) return this.fireAncestors('$listEnd')\n      }\n      if (targetIndex < 0) {\n        return this.fireAncestors('$listStart')\n      }\n      if (targetIndex > -1 && targetIndex < length) {\n        this._index = targetIndex\n      } else if (this.jump || this.jumpToStart || this.jumpToEnd) {\n        if (targetIndex < 0 && this.jumpToEnd) {\n          this._index = targetIndex + length\n        } else if (targetIndex === length && this.jumpToStart) {\n          this._index = 0\n        }\n      } else {\n        return false\n      }\n\n      if (currentIndex !== this._index) {\n        this.indexChanged({ index: this._index, previousIndex: currentIndex })\n      }\n    }\n    //return false\n  }\n\n  setIndex(targetIndex) {\n    if (targetIndex > -1 && targetIndex < this.items.length) {\n      const currentIndex = this._index\n      this._index = targetIndex\n      this.indexChanged({ index: this._index, previousIndex: currentIndex })\n    }\n  }\n\n  indexChanged(event) {\n    this.signal('indexChanged', event)\n  }\n\n  _getFocused() {\n    return this\n  }\n\n  _construct() {\n    this._index = 0\n  }\n\n  _init() {\n    this._setState('Empty')\n  }\n\n  static _states() {\n    return [\n      class Empty extends this {},\n      class Filled extends this {\n        _getFocused() {\n          return this.currentItem\n        }\n        _handleRight() {\n          return this._navigate('right')\n        }\n\n        _handleLeft() {\n          return this._navigate('left')\n        }\n\n        _handleUp() {\n          return this._navigate('up')\n        }\n\n        _handleDown() {\n          return this._navigate('down')\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render the key for wifi screen\n */\nexport default class Key extends Lightning.Component {\n  _construct() {\n    this._keyType = 'alphanum'\n    this._fontSize = 36\n  }\n  static _template() {\n    return {\n      Border: {\n        w: this.width,\n        h: this.height,\n        type: Lightning.components.BorderComponent,\n        colorBorder: 0xff000000,\n      },\n    }\n  }\n  set item(item) {\n    this._key = item\n    this.tag('Border').w = this.w\n    this.tag('Border').h = this.h\n    this.tag('Border').colorBorder = 0xff000000\n    this.tag('Border').content = {\n      Focus: {\n        rect: true,\n        w: this.w,\n        h: this.h,\n        color: 0x00c0c0c0,\n      },\n\n      Key: {\n        x: this.w / 2,\n        y: this.h / 2,\n        mount: 0.5,\n        text: { text: item, fontSize: this._fontSize, fontFace: 'Light' },\n      },\n    }\n    if (this._keyType == 'delete') {\n      this.tag('Border').content = {\n        Key: {\n          src: Utils.asset('images/del.png'),\n          zIndex: 10,\n        },\n      }\n    }\n  }\n  set keyType(type) {\n    this._keyType = type\n  }\n  set fontSize(size) {\n    this._fontSize = size\n  }\n  _focus() {\n    this.tag('Border').content = {\n      Focus: { color: 0xffc0c0c0 },\n      Key: {\n        color: 0xff000000,\n      },\n    }\n    this.tag('Border').colorBorder = 0xffc0c0c0\n  }\n  _unfocus() {\n    this.tag('Border').content = {\n      Focus: { color: 0x00c0c0c0 },\n      Key: {\n        color: 0xffffffff,\n      },\n    }\n    this.tag('Border').colorBorder = 0xff000000\n  }\n  _handleEnter() {\n    this.fireAncestors('$pressedKey', this._key, this._keyType)\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\n/**\n * Class that contains the data for the keypad.\n */\nexport default class KeyDetails {\n  getAlphabet() {\n    let alphabet = 'abcdefghijklmnopqrstuvwxyz  '.split('')\n    return alphabet\n  }\n  getSymbols() {\n    let symbols = '1234567890+/:;()$$@\"\\'.,?!#*-'.split('')\n    return symbols\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport Key from './Key'\nimport { Lightning, Utils } from '@lightningjs/sdk'\n\n/**\n * Class to render the key for type selection\n */\nexport default class SelectionKey extends Key {\n  set item(item) {\n    this._key = item\n  }\n  _init() {\n    this._arr = [\n      [25, 0, 0, 25],\n      [0, 0, 0, 0],\n      [0, 25, 25, 0],\n    ]\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          53,\n          this._arr[this._keyType],\n          1,\n          0xff000000,\n          true,\n          0x00000000\n        ),\n      },\n      Text: {\n        x: this.w / 2,\n        y: this.h / 2,\n        mount: 0.5,\n        text: { text: this._key, fontSize: 24, textColor: 0xffffffff, fontFace: 'Regular' },\n      },\n    })\n  }\n\n  _focus() {\n    this.tag('Text').text.fontStyle = 'Bold'\n    this.tag('Text').text.textColor = 0xff000000\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          56,\n          this._arr[this._keyType],\n          0,\n          0xffc0c0c0,\n          true,\n          0xffc0c0c0\n        ),\n      },\n    })\n  }\n\n  _unfocus() {\n    this.tag('Text').text.fontStyle = 'normal'\n    this.tag('Text').text.textColor = 0xffffffff\n    this.patch({\n      Bg: {\n        x: 0,\n        y: 0,\n        texture: Lightning.Tools.getRoundRect(\n          143,\n          53,\n          this._arr[this._keyType],\n          1,\n          0xff000000,\n          true,\n          0x00000000\n        ),\n      },\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport Keypad from './Keypad'\nimport Key from './Key'\nimport Api from './KeyDetails'\nimport SelectionKey from './SelectionKey'\n\n/**\n * Class to render the wifi password screen.\n */\nexport default class WiFiPasswordScreen extends Lightning.Component {\n  _construct() {\n    this._width = 428\n    this._height = 56\n    this._radius = 28\n    this._strokeWidth = 2\n    this.keySpace = 5\n  }\n  static _template() {\n    return {}\n  }\n  _init() {\n    this._api = new Api()\n\n    this.patch({\n      src: Utils.asset('images/tvShows/background.jpg'),\n      w: 440,\n      h: 560,\n      Entry: {\n        x: 4,\n        y: 10,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0xff1b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Text: {\n          x: 20,\n          y: this._height / 2 + 5,\n          mountY: 0.5,\n          text: { text: 'Password', fontSize: 18, fontFace: 'Light', textColor: 0xffa5a5a5 },\n        },\n        Pwd: {\n          x: 130,\n          y: this._height / 2 + 5,\n          mountY: 0.5,\n          text: {\n            text: '',\n            fontSize: 24,\n            fontFace: 'Light',\n            textColor: 0xffc0c0c0,\n            wordWrapWidth: this._width - 130,\n            wordWrap: false,\n            textOverflow: 'ellipsis',\n          },\n        },\n      },\n      Selection: {\n        x: 4,\n        y: this._height + 21,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0x001b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Types: {\n          type: Lightning.components.ListComponent,\n          itemSize: 143,\n          w: this._width,\n          h: this._height,\n          clipping: true,\n          roll: true,\n          zIndex: 10,\n        },\n      },\n      Keypad: {\n        x: 9,\n        y: (this._height + 21) * 2,\n        w: this._width,\n        wrap: true,\n        type: Keypad,\n      },\n      FunctionalKeys: {\n        x: 9,\n        y: (this._height + 21) * 5 + 15,\n        w: this._width,\n        wrap: true,\n        type: Keypad,\n      },\n      Submit: {\n        x: 4,\n        y: (this._height + 21) * 5 + 15 + 61,\n        texture: Lightning.Tools.getRoundRect(\n          this._width,\n          this._height,\n          this._radius,\n          this._strokeWidth,\n          0xff1b1b1b,\n          true,\n          0x00a5a5a5\n        ),\n        Text: {\n          x: this._width / 2,\n          y: this._height / 2,\n          mount: 0.5,\n          text: { text: 'Submit', fontSize: 24, fontFace: 'Light', textColor: 0xffffffff },\n        },\n      },\n    })\n    this.setKeypad('abc')\n    let clear = {\n      ref: 'Keyclear',\n      w: 117,\n      h: 56,\n      type: Key,\n      fontSize: 24,\n      item: 'CLEAR',\n      keyType: 'clear',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    let space = {\n      ref: 'Keyspace',\n      w: 178,\n      h: 56,\n      type: Key,\n      fontSize: 24,\n      item: 'Space',\n      keyType: 'space',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    let del = {\n      ref: 'Keydel',\n      w: 117,\n      h: 56,\n      keyType: 'delete',\n      type: Key,\n      fontSize: 24,\n      item: '',\n      flexItem: { marginRight: 5, marginBottom: 5 },\n    }\n    this.tag('FunctionalKeys').items = [clear, space, del]\n    this.tag('Selection.Types').items = ['abc', 'ABC', '#+-'].map((item, index) => {\n      return {\n        ref: 'Item',\n        w: this._width / 3,\n        h: this._height,\n        fontSize: 24,\n        keyType: index,\n        item: item,\n        type: SelectionKey,\n        clipping: true,\n        //keyType: 'selection' + index,\n      }\n    })\n  }\n  _active() {\n    this.tag('Selection.Types').start()\n    this._setState('Selection')\n  }\n  _inactive() {\n    this.tag('Entry.Pwd').text.text = ''\n  }\n  $pressedKey(key, keyType) {\n    console.log(key)\n    let pwd = this.tag('Entry.Pwd')\n    if (keyType === 'alphanum') {\n      pwd.text.text = pwd.text.text + key\n    } else if (keyType === 'clear') {\n      pwd.text.text = ''\n    } else if (keyType === 'space') {\n      pwd.text.text = pwd.text.text + ' '\n    } else if (keyType === 'delete') {\n      pwd.text.text = pwd.text.text.substring(0, pwd.text.text.length - 1)\n    }\n  }\n  setKeypad(type) {\n    let data = []\n    if (type === 'abc') data = this._api.getAlphabet()\n    else if (type === '#+-') data = this._api.getSymbols()\n    else if (type === 'ABC') {\n      data = this._api.getAlphabet().map(i => {\n        return i.toUpperCase()\n      })\n    }\n    this.tag('Keypad').items = []\n    this.tag('Keypad').items = data.map(index => {\n      return {\n        ref: 'Key' + index,\n        w: 56,\n        h: 56,\n        type: Key,\n        item: index,\n        flexItem: { marginRight: 5, marginBottom: 5 },\n      }\n    })\n  }\n  static _states() {\n    return [\n      class Selection extends this {\n        $enter() {\n          this.setKeypad(this.tag('Selection.Types').element._key)\n        }\n        _getFocused() {\n          return this.tag('Selection.Types').element\n        }\n        _handleRight() {\n          if (this.tag('Selection.Types').index < this.tag('Selection.Types').length - 1) {\n            this.tag('Selection.Types').setNext()\n            this.setKeypad(this.tag('Selection.Types').element._key)\n          }\n        }\n        _handleLeft() {\n          if (this.tag('Selection.Types').index != 0) {\n            this.tag('Selection.Types').setPrevious()\n            this.setKeypad(this.tag('Selection.Types').element._key)\n          }\n        }\n        _handleDown() {\n          this._setState('Keypad')\n        }\n      },\n      class Keypad extends this {\n        _getFocused() {\n          return this.tag('Keypad')\n        }\n        $listEnd() {\n          this._setState('Function')\n        }\n        $listStart() {\n          this._setState('Selection')\n        }\n      },\n      class Function extends this {\n        _getFocused() {\n          return this.tag('FunctionalKeys')\n        }\n        _handleUp() {\n          this._setState('Keypad')\n        }\n        $listEnd() {\n          console.log('down')\n          this._setState('Submit')\n        }\n        $listStart() {\n          this._setState('Keypad')\n        }\n      },\n      class Submit extends this {\n        $enter() {\n          this.patch({\n            Submit: {\n              x: 0,\n              y: (this._height + 21) * 5 + 15 + 61,\n              texture: Lightning.Tools.getRoundRect(\n                this._width,\n                this._height,\n                this._radius,\n                this._strokeWidth,\n                0x00c0c0c0,\n                true,\n                0xffc0c0c0\n              ),\n            },\n          })\n          this.tag('Submit.Text').text.textColor = 0xff000000\n        }\n        $exit() {\n          this.patch({\n            Submit: {\n              x: 0,\n              y: (this._height + 21) * 5 + 15 + 61,\n              texture: Lightning.Tools.getRoundRect(\n                this._width,\n                this._height,\n                this._radius,\n                this._strokeWidth,\n                0xff1b1b1b,\n                true,\n                0x00c0c0c0\n              ),\n            },\n          })\n          this.tag('Submit.Text').text.textColor = 0xffffffff\n        }\n        _handleEnter() {\n          this.fireAncestors('$password', this.tag('Entry.Pwd').text.text)\n        }\n        _handleUp() {\n          console.log('Up')\n          this._setState('Function')\n        }\n        _handleLeft() {\n          this._setState('Function')\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport { COLORS } from '../colors/Colors'\nimport SettingsItem from './../items/SettingsItem'\nimport WiFiPasswordScreen from './wifipasswordscreen/WiFiPasswordScreen'\nexport default class BluetoothPairingScreen extends Lightning.Component {\n  static _template() {\n    return {\n      PairingScreen: {\n        x: 0,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      Title: {\n        x: 20,\n        y: 100,\n        text: { text: '', fontSize: 30, textColor: COLORS.titleColor },\n      },\n      List: {\n        x: 20,\n        y: 150,\n        type: Lightning.components.ListComponent,\n        w: 1920 / 3,\n        h: 400,\n        itemSize: 65,\n        horizontal: false,\n        invertDirection: true,\n        roll: true,\n      },\n      Password: {\n        type: WiFiPasswordScreen,\n        x: 1920 / 3 / 2,\n        y: 350,\n        mountX: 0.5,\n        w: 428,\n        h: 56,\n        alpha: 0,\n      },\n    }\n  }\n  set item(item) {\n    this.tag('Title').text = item.ssid\n    var options = []\n    this._item = item\n    if (item.connected) {\n      options = ['Disconnect', 'Cancel']\n    } else {\n      options = ['Connect', 'Cancel']\n    }\n\n    this.tag('List').items = options.map((item, index) => {\n      return {\n        ref: item,\n        w: 1920 / 3,\n        h: 65,\n        type: SettingsItem,\n        item: item,\n      }\n    })\n    this._setState('Pair')\n  }\n\n  static _states() {\n    return [\n      class Password extends this {\n        $enter() {\n          this.tag('Password').alpha = 1\n        }\n        _getFocused() {\n          return this.tag('Password')\n        }\n        $password(password) {\n          this.fireAncestors('$startConnect', password)\n        }\n        $exit() {\n          this.tag('Password').alpha = 0\n        }\n        _handleKey(event) {\n          if (\n            event.keyCode == 27 ||\n            event.keyCode == 77 ||\n            event.keyCode == 49 ||\n            event.keyCode == 158\n          ) {\n            this._setState('Pair')\n          } else return false\n        }\n      },\n      class Pair extends this {\n        $enter() {}\n        _getFocused() {\n          return this.tag('List').element\n        }\n        _handleDown() {\n          this.tag('List').setNext()\n        }\n        _handleUp() {\n          this.tag('List').setPrevious()\n        }\n        _handleEnter() {\n          if (this.tag('List').element.ref == 'Connect' && this._item.security != '0') {\n            this._setState('Password')\n          } else {\n            this.fireAncestors('$pressEnter', this.tag('List').element.ref)\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils } from '@lightningjs/sdk'\nimport WiFiItem from '../items/WiFiItem'\nimport WiFiApi from './../api/WifiApi'\nimport WiFiPairingScreen from './WiFiPairingScreen'\nimport ThunderJS from 'ThunderJS'\nimport { COLORS } from './../colors/Colors'\n\n/**\n * Class for WiFi screen.\n */\nexport default class WiFiScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Title: {\n        x: 1920 - 1920 / 3 + 1920 / 6,\n        y: 50,\n        text: { text: 'Wi-Fi', textColor: COLORS.headingColor },\n        mountX: 0.5,\n      },\n      Switch: {\n        x: 1920 - 1920 / 3 + 20,\n        y: 150,\n        rect: true,\n        shader: { type: Lightning.shaders.RoundedRectangle, radius: 9 },\n        color: 0x00c0c0c0,\n        w: 1920 / 3 - 70,\n        h: 50,\n        Text: {\n          x: 0,\n          text: { text: 'Wi-Fi', textColor: COLORS.titleColor },\n        },\n        Button: {\n          x: 1920 / 3 - 80,\n          y: 10,\n          mountX: 1,\n          src: Utils.asset('images/switch-off.png'),\n        },\n      },\n      Networks: {\n        x: 1920 - 1920 / 3,\n        y: 250,\n        flex: { direction: 'column' },\n        PairedNetworks: {\n          flexItem: { margin: 20 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'My Network',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          List: {\n            x: 0,\n            y: 65,\n            type: Lightning.components.ListComponent,\n            w: 1920 / 3,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        AvailableNetworks: {\n          flexItem: { margin: 20, marginTop: 30 },\n          w: 1920 / 3,\n          h: 30,\n          Title: {\n            text: {\n              text: 'Other Networks',\n              textColor: COLORS.titleColor,\n              fontSize: 30,\n            },\n          },\n          Loader: {\n            x: 250,\n            y: -10,\n            w: 50,\n            h: 50,\n            color: 0xff000000,\n            src: Utils.asset('images/loader.png'),\n            visible: false,\n          },\n\n          List: {\n            x: 0,\n            y: 65,\n            w: 1920 / 3,\n            h: 100,\n            type: Lightning.components.ListComponent,\n            itemSize: 65,\n            horizontal: false,\n            invertDirection: true,\n            roll: true,\n          },\n        },\n        visible: false,\n      },\n      PairingScreen: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        visible: false,\n        type: WiFiPairingScreen,\n      },\n      IpAddress: {\n        x: 1820,\n        y: 920,\n        mountX: 1,\n        mountY: 0,\n        text: {\n          text: 'IP:NA',\n          textColor: COLORS.titleColor,\n          fontSize: 30,\n        },\n      },\n    }\n  }\n  _active() {\n    this._setState('Switch')\n  }\n\n  _init() {\n    this.loadingAnimation = this.tag('Networks.AvailableNetworks.Loader').animation({\n      duration: 1,\n      repeat: -1,\n      stopMethod: 'immediate',\n      stopDelay: 0.2,\n      actions: [{ p: 'rotation', v: { sm: 0, 0: 0, 1: Math.PI * 2 } }],\n    })\n    this.loadingAnimation.play()\n    this._wifi = new WiFiApi()\n    this.wifiStatus = false\n    this._activateWiFi()\n    this._setState('Switch')\n    //this.wifiStatus = true\n    if (this.wiFiStatus) {\n      this.tag('Networks').visible = true\n    }\n    this._pairedNetworks = this.tag('Networks.PairedNetworks')\n    this._availableNetworks = this.tag('Networks.AvailableNetworks')\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const systemCallsign = 'org.rdk.System'\n    thunder.Controller.activate({ callsign: systemCallsign })\n      .then(() => {\n        this.displayIp()\n      })\n      .catch(err => {\n        console.log('System Error', err)\n      })\n    this._wifi.registerEvent('onIPAddressStatusChanged', notification => {\n      if (notification.status == 'ACQUIRED') {\n        this.tag('IpAddress').text.text = 'IP:' + notification.ip4Address\n      } else if (notification.status == 'LOST') {\n        this.tag('IpAddress').text.text = 'IP:NA'\n      }\n    })\n    this._wifi.registerEvent('onDefaultInterfaceChanged', notification => {\n      console.log(notification)\n      if (notification.newInterfaceName == 'WIFI') {\n        this._wifi.setEnabled(true).then(result => {\n          if (result.success) {\n            this.wifiStatus = true\n            this.tag('Networks').visible = true\n            this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n            this._wifi.discoverSSIDs()\n            this.tag('Networks.AvailableNetworks.Loader').visible = true\n          }\n        })\n      } else if (\n        notification.newInterfaceName == 'ETHERNET' ||\n        notification.oldInterfaceName == 'WIFI'\n      ) {\n        this._wifi.disconnect()\n        this.wifiStatus = false\n        this.tag('Networks').visible = false\n        this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n        this._setState('Switch')\n      }\n    })\n  }\n  displayIp() {\n    const config = {\n      host: '127.0.0.1',\n      port: 9998,\n      default: 1,\n    }\n    var thunder = ThunderJS(config)\n    const systemCallsign = 'org.rdk.System'\n    thunder\n      .call(systemCallsign, 'getDeviceInfo', { params: 'estb_ip' })\n      .then(result => {\n        this.tag('IpAddress').text.text = 'IP:' + result.estb_ip\n      })\n      .catch(err => {\n        console.log('IpAddress Error', err)\n      })\n  }\n\n  /**\n   * Function to be executed when the Wi-Fi screen is enabled.\n   */\n  _enable() {\n    if (this.wifiStatus) {\n      this._wifi.discoverSSIDs()\n      this.tag('Networks.AvailableNetworks.Loader').visible = true\n    }\n    this.scanTimer = setInterval(() => {\n      if (this.wifiStatus) {\n        this._wifi.discoverSSIDs()\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      }\n    }, 5000)\n  }\n\n  /**\n   * Function to be executed when the Wi-Fi screen is disabled.\n   */\n  _disable() {\n    clearInterval(this.scanTimer)\n  }\n\n  /**\n   * Function to render list of Wi-Fi networks.\n   */\n  renderDeviceList(ssids) {\n    this._wifi.getConnectedSSID().then(result => {\n      if (result.ssid != '') {\n        this._pairedList = [result]\n      } else {\n        this._pairedList = []\n      }\n      this._pairedNetworks.h = this._pairedList.length * 65 + 30\n      this._pairedNetworks.tag('List').h = this._pairedList.length * 65\n      this._pairedNetworks.tag('List').items = this._pairedList.map((item, index) => {\n        item.connected = true\n        return {\n          ref: 'Paired' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: WiFiItem,\n          item: item,\n        }\n      })\n\n      this._otherList = ssids.filter(device => {\n        result = this._pairedList.map(a => a.ssid)\n        if (result.includes(device.ssid)) {\n          return false\n        } else return device\n      })\n      this._availableNetworks.h = this._otherList.length * 65 + 30\n      this._availableNetworks.tag('List').h = this._otherList.length * 65\n      this._availableNetworks.tag('List').items = this._otherList.map((item, index) => {\n        item.connected = false\n        return {\n          ref: 'Other' + index,\n          w: 1920 / 3,\n          h: 65,\n          type: WiFiItem,\n          item: item,\n        }\n      })\n    })\n  }\n\n  static _states() {\n    return [\n      class Switch extends this {\n        $enter() {\n          this.tag('Switch').color = COLORS.hightlightColor\n        }\n        $exit() {\n          this.tag('Switch').color = 0x00c0c0c0\n        }\n        _handleDown() {\n          if (this.wifiStatus) {\n            if (this._pairedNetworks.tag('List').length > 0) {\n              this._setState('PairedDevices')\n            } else if (this._availableNetworks.tag('List').length > 0) {\n              this._setState('AvailableDevices')\n            }\n          }\n        }\n        _handleEnter() {\n          this.switch()\n        }\n      },\n      class PairedDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._pairedNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('MyDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('MyDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._pairedNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class AvailableDevices extends this {\n        $enter() {}\n        _getFocused() {\n          return this._availableNetworks.tag('List').element\n        }\n        _handleDown() {\n          this._navigate('AvailableDevices', 'down')\n        }\n        _handleUp() {\n          this._navigate('AvailableDevices', 'up')\n        }\n        _handleEnter() {\n          this.tag('PairingScreen').visible = true\n          this.tag('PairingScreen').item = this._availableNetworks.tag('List').element._item\n          this._setState('PairingScreen')\n        }\n      },\n      class PairingScreen extends this {\n        _getFocused() {\n          return this.tag('PairingScreen')\n        }\n        $pressEnter(option) {\n          if (option === 'Cancel') {\n            this._setState('Switch')\n          } else if (option === 'Connect') {\n            if (this._availableNetworks.tag('List').element) {\n              this._wifi\n                .connect(this._availableNetworks.tag('List').element._item, '')\n                .then(() => {})\n            }\n            this._setState('Switch')\n          } else if (option === 'Disconnect') {\n            this._wifi.disconnect().then(() => {})\n            this._setState('Switch')\n          }\n        }\n        $startConnect(password) {\n          if (this._availableNetworks.tag('List').element && password != null) {\n            this._wifi.connect(this._availableNetworks.tag('List').element._item, password)\n          } else {\n            this.patch({\n              FailureMessage: {\n                x: (1920 * 2) / 3 + 40,\n                y: 950,\n                text: { text: 'FAILED' },\n              },\n            })\n            setTimeout(() => {\n              this.childList.remove(this.tag('FailureMessage'))\n            }, 2000)\n          }\n          this._setState('Switch')\n        }\n        $exit() {\n          this.tag('PairingScreen').visible = false\n        }\n      },\n    ]\n  }\n\n  /**\n   * Function to navigate through the lists in the screen.\n   * @param {string} listname\n   * @param {string} dir\n   */\n  _navigate(listname, dir) {\n    let list\n    if (listname === 'MyDevices') list = this._pairedNetworks.tag('List')\n    else if (listname === 'AvailableDevices') list = this._availableNetworks.tag('List')\n    if (dir === 'down') {\n      if (list.index < list.length - 1) list.setNext()\n      else if (list.index == list.length - 1) {\n        if (listname === 'MyDevices' && this._availableNetworks.tag('List').length > 0) {\n          this._setState('AvailableDevices')\n        }\n      }\n    } else if (dir === 'up') {\n      if (list.index > 0) list.setPrevious()\n      else if (list.index == 0) {\n        if (listname === 'AvailableDevices' && this._pairedNetworks.tag('List').length > 0) {\n          this._setState('PairedDevices')\n        } else {\n          this._setState('Switch')\n        }\n      }\n    }\n  }\n\n  /**\n   * Function to turn on and off Wi-Fi.\n   */\n  switch() {\n    if (this.wifiStatus) {\n      this._wifi.setInterface('ETHERNET', true).then(result => {\n        if (result.success) {\n          this._wifi.setDefaultInterface('ETHERNET', true).then(result => {\n            if (result.success) {\n              this._wifi.disconnect()\n              this.wifiStatus = false\n              this.tag('Networks').visible = false\n              this.tag('Switch.Button').src = Utils.asset('images/switch-off.png')\n            }\n          })\n        }\n      })\n    } else {\n      this._wifi.setInterface('WIFI', true).then(result => {\n        if (result.success) {\n          this._wifi.setDefaultInterface('WIFI', false).then(result => {\n            if (result.success) {\n              this._wifi.setEnabled(true).then(result => {\n                if (result.success) {\n                  this.wifiStatus = true\n                  this.tag('Networks').visible = true\n                  this.tag('Switch.Button').src = Utils.asset('images/switch-on.png')\n                  this._wifi.discoverSSIDs()\n                  this.tag('Networks.AvailableNetworks.Loader').visible = true\n                }\n              })\n            }\n          })\n        }\n      })\n    }\n  }\n\n  /**\n   * Function to activate Wi-Fi plugin.\n   */\n  _activateWiFi() {\n    this._wifi.activate().then(() => {\n      this._wifi.getDefaultInterface().then(result => {\n        if (result.interface == 'WIFI') {\n          this.switch()\n        }\n      })\n    })\n    //this._wifi.discoverSSIDs()\n    this.tag('Networks.AvailableNetworks.Loader').visible = true\n    this._wifi.registerEvent('onWIFIStateChanged', notification => {\n      if (notification.state === 2 || notification.state === 5) {\n        this._wifi.discoverSSIDs()\n        this.tag('Networks.AvailableNetworks.Loader').visible = true\n      }\n      this._setState('Switch')\n    })\n    this._wifi.registerEvent('onError', notification => {\n      this._wifi.discoverSSIDs()\n      this.tag('Networks.AvailableNetworks.Loader').visible = true\n      if (notification.code == 4) {\n        this.patch({\n          FailureMessage: {\n            x: (1920 * 2) / 3 + 40,\n            y: 950,\n            text: { text: 'INCORRECT PASSWORD' },\n          },\n        })\n        setTimeout(() => {\n          this.childList.remove(this.tag('FailureMessage'))\n        }, 2000)\n      }\n      this._setState('Switch')\n    })\n    this._wifi.registerEvent('onAvailableSSIDs', notification => {\n      this.tag('Networks.AvailableNetworks.Loader').visible = false\n      this.renderDeviceList(notification.ssids)\n    })\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Utils, Router } from '@lightningjs/sdk'\nimport BluetoothScreen from './BluetoothScreen'\nimport WiFiScreen from './WifiScreen'\n\n/**\n * Class for settings screen.\n */\n\nexport default class SettingsScreen extends Lightning.Component {\n  static _template() {\n    return {\n      Background: {\n        w: 1920,\n        h: 1080,\n        src: Utils.asset('images/tvShows/background.jpg'),\n      },\n      Sidebar: {\n        x: 1920 - 1920 / 3,\n        y: 0,\n        w: 1920 / 3,\n        h: 1080,\n        rect: true,\n        color: 0xff364651,\n      },\n      WiFiScreen: {\n        type: WiFiScreen,\n        visible: false,\n      },\n      BluetoothScreen: {\n        type: BluetoothScreen,\n        visible: false,\n      },\n    }\n  }\n\n  //   /**\n  //  * Function to be excuted when the Bluetooth screen is enabled.\n  //  */\n  _enable() {\n    this._appAnimation = this.animation({\n      duration: 0.3,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n        { p: 'y', v: { 0: 1080, 1: 0 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  // /**\n  //  * Function to be executed when the Bluetooth screen is disabled from the screen.\n  //  */\n  _disable() {\n    this._appAnimation = this.animation({\n      duration: 0.3,\n      repeat: 0,\n      stopMethod: 'immediate',\n      actions: [\n        { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n        { p: 'y', v: { 0: 0, 1: 1080 } },\n      ],\n    })\n    this._appAnimation.start()\n  }\n\n  set screen(screen) {\n    this._setState(screen)\n  }\n\n  set params(args) {\n    if (args.animation != undefined) {\n      args.animation.start()\n    }\n  }\n\n  static _states() {\n    return [\n      class BluetoothScreen extends this {\n        $enter() {\n          this.tag('BluetoothScreen').visible = true\n        }\n        _getFocused() {\n          return this.tag('BluetoothScreen')\n        }\n        $exit() {\n          this.tag('BluetoothScreen').visible = false\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          if (\n            key.keyCode == 77 ||\n            key.keyCode == 49 ||\n            key.keyCode == 36 ||\n            key.keyCode == 158 ||\n            (key.keyCode == 73 && key.ctrlKey == true)\n          ) {\n            this._appAnimation = this.animation({\n              duration: 0.5,\n              repeat: 0,\n              stopMethod: 'immediate',\n              actions: [\n                { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n                { p: 'y', v: { 0: 0, 1: 1080 } },\n              ],\n            })\n            this._appAnimation.start()\n            this._appAnimation.on('finish', p => {\n              Router.navigate('home')\n            })\n          }\n        }\n      },\n      class WiFiScreen extends this {\n        $enter() {\n          this.tag('WiFiScreen').visible = true\n        }\n        _getFocused() {\n          return this.tag('WiFiScreen')\n        }\n        $exit() {\n          this.tag('WiFiScreen').visible = false\n        }\n        _handleKey(key) {\n          const config = {\n            host: '127.0.0.1',\n            port: 9998,\n            default: 1,\n          }\n          if (\n            key.keyCode == 77 ||\n            key.keyCode == 49 ||\n            key.keyCode == 36 ||\n            key.keyCode == 158 ||\n            (key.keyCode == 73 && key.ctrlKey == true)\n          ) {\n            this._appAnimation = this.animation({\n              duration: 0.3,\n              repeat: 0,\n              stopMethod: 'immediate',\n              actions: [\n                { p: 'alpha', v: { 0: 0.5, 1: 1 } },\n                { p: 'y', v: { 0: 0, 1: 1080 } },\n              ],\n            })\n            this._appAnimation.start()\n            this._appAnimation.on('finish', p => {\n              Router.navigate('home')\n            })\n          }\n        }\n      },\n    ]\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Lightning, Router } from '@lightningjs/sdk'\n\nexport default class Error extends Lightning.Component {\n  static _template() {\n    return {\n      rect: true,\n      w: 1920,\n      h: 1080,\n      color: 0xffb70606,\n      Label: {\n        x: 100,\n        y: 100,\n        text: {\n          text: 'Error',\n          fontSize: 22,\n        },\n      },\n    }\n  }\n\n  _handleEnter() {\n    Router.navigate('home')\n  }\n\n  _focus() {\n    console.log('focus error page')\n  }\n\n  set error(obj) {\n    const { page, error } = obj\n    console.log(page, error)\n\n    const errorMessage = `\nerror while loading page: ${page.constructor.name}\npress enter to navigate to home\n--\nloaded via hash: ${page[Symbol.for('hash')]}\nresulted in route: ${page[Symbol.for('route')]}\n--\n${error.toString()}`\n\n    this.tag('Label').text = errorMessage\n  }\n\n  pageTransition() {\n    return 'up'\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport Home from './../screens/HomeScreen'\nimport SplashScreen from './../screens/SplashScreen'\nimport Settings from './../screens/SettingsScreen'\nimport Error from './../screens/Error'\n\nexport default {\n  root: 'home',\n  routes: [\n    {\n      path: 'home',\n      component: Home,\n      before() {\n        console.log('before home!')\n        return Promise.resolve()\n      },\n      cache: 10,\n    },\n    {\n      path: 'settings/:screen',\n      options: {\n        preventStorage: true,\n        clearHistory: true,\n        reuseInstance: true\n      },\n      component: Settings,\n      cache: 10,\n    },\n    {\n      path: 'splash',\n      component: SplashScreen,\n      options: {\n        preventStorage: true,\n        clearHistory: true,\n        reuseInstance: false\n      },\n      cache: 10,\n    },\n    {\n      path: '!',\n      component: Error,\n    },\n    {\n      path: '*',\n      component: Home,\n    },\n  ],\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Utils, Router } from '@lightningjs/sdk'\nimport routes from './api/routes'\n\nexport default class App extends Router.App {\n  static getFonts() {\n    return [{ family: 'Regular', url: Utils.asset('fonts/Roboto-Regular.ttf') }]\n  }\n  _setup() {\n    Router.startRouter(routes, this)\n    document.onkeydown = (e) => {\n      if (e.keyCode == 8) {\n        e.preventDefault()\n      }\n    }\n  }\n}\n","/**\n * If not stated otherwise in this file or this component's LICENSE\n * file the following copyright and licenses apply:\n *\n * Copyright 2020 RDK Management\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n **/\nimport { Launch } from '@lightningjs/sdk'\nimport App from './App.js'\n\nexport default function() {\n  return Launch(App, ...arguments)\n}\n"],"names":["settings","subscribers","[object Object]","type","key","fallback","val","obj","keys","split","i","length","undefined","Object","dotGrab","this","get","value","forEach","subscriber","publish","callback","push","index","findIndex","cb","splice","getOwnPropertyNames","prepLog","args","Array","from","shift","Info","Debug","Warn","Error","Settings","console","log","apply","arguments","debug","error","warn","sendMetric","event","params","Log","info","errorMetric","message","code","visible","Metric","events","options","reduce","name","types","app","page","user","media","url","abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","interruptbegin","interruptend","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","timeupdate","volumechange","waiting","timeout","basePath","proxyUrl","asset","relPath","makeQueryString","ensureUrlWithProtocol","test","window","location","protocol","origin","makeFullStaticPath","pathname","path","charAt","cleanUpPathName","substr","slice","parts","indexOf","pop","join","operator","map","encodeURIComponent","formatLocale","locale","toLowerCase","toUpperCase","getLatLon","defaultValue","Promise","resolve","navigator","permissions","query","then","status","state","granted","queryForLatLon","result","geolocation","getCurrentPosition","coords","latitude","longitude","enableHighAccuracy","maximumAge","fetch","response","json","catch","defaultProfile","ageRating","city","zipCode","countryCode","language","getCountryCode","ip","household","getLanguage","latlon","getLocale","mac","platform","packages","uid","stbType","getInfo","profile","setInfo","lng","mediaUrl","Lightning","Component","localCookie","e","forceCookies","_checkIfLocalStorageWorks","getItem","_getItemLocalStorage","setItem","_setItemLocalStorage","removeItem","_removeItemLocalStorage","clear","_clearLocalStorage","_getItemCookie","_setItemCookie","_removeItemCookie","_clearCookies","localStorage","t","document","cookie","match","RegExp","replace","namespace","lc","isFunction","v","isObject","isBoolean","isPage","Element","isComponentConstructor","prototype","isArray","ucfirst","isString","isPromise","method","symbols","route","Symbol","hash","store","fromHistory","expires","resume","backtrack","moveOnAxes","axis","direction","o","bounds","patch","smooth","duration","delay","transition","on","fade","alpha","crossFade","up","down","left","right","isMergeableObject","isNonNullObject","isSpecial","stringValue","toString","call","isReactElement","$$typeof","REACT_ELEMENT_TYPE","for","cloneUnlessOtherwiseSpecified","clone","deepmerge","emptyTarget","defaultArrayMerge","target","source","concat","element","getKeys","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","propertyIsOnObject","object","property","_","mergeObject","destination","propertyIsUnsafe","hasOwnProperty","getMergeFunction","customMerge","arrayMerge","sourceIsArray","all","deepmergeAll","array","prev","next","cjs","warned","deprecated","force","LocalizedString","String","sub","string","arg","Locale","__enabled","resp","loadFromObject","lang","tr","__trObj","trObj","fallbackLanguage","values","str","VersionLabel","rect","color","h","w","x","y","mount","Text","text","fontSize","lineHeight","tag","version","sdkVersion","loadTexture","renderWidth","renderHeight","FpsIndicator","texture","Tools","getRoundRect","Background","Counter","textAlign","config","interval","threshold","fps","lastFps","fpsCalculator","stage","dt","off","setInterval","showFps","bind","clearInterval","Math","abs","bgColor","setSmooth","meta","translations","setTranslations","setLanguage","reject","default","translationsObj","Utils","registry","eventListeners","timeouts","intervals","targets","timeoutId","setTimeout","id","clearTimeout","intervalId","handler","addEventListener","targetIndex","fn","removeEventListener","_event","removeEventListeners","clearTimeouts","clearIntervals","AppInstance","defaultOptions","clearColor","canvas2d","defaultFontFace","8","13","27","37","38","39","40","174","175","178","250","191","409","App","appData","platformSettings","Application","Deepmerge","super","loadFonts","fonts","getFonts","load","loadLanguage","Metrics","loaded","c","ref","zIndex","forceZIndexContext","showVersion","childList","a","FpsCounter","_setup","closeApp","clearSubscribers","Registry","onClose","close","remove","gc","destroy","family","descriptors","fontFace","FontFace","add","promise","file","initLanguage","focus","_focussed","_refocus","innerHeight","RoutedApp","Pages","Loading","Label","Widgets","widget","_widget","restore","pages","widgets","getActivePage","running","Map","resolved","expired","rejected","active","move","bucket","has","payload","prop","records","set","delete","commands","ready","Date","now","stop","start","command","getHash","setHash","application","widgetsHost","pagesHost","providers","modifiers","widgetsPerRoute","routerConfig","activeWidget","rootHash","bootRequest","activeRoute","activeHash","forcedHash","previousState","activePage","register","history","initialised","updateHash","lastHash","hasRegex","isWildcard","setupRoutes","routesConfig","bootPage","bootComponent","root","boot","routes","r","component","hook","cache","before","after","stack","create","getWidgetReferences","async","routeReg","loader","_setState","share","doTransition","onRouteFulfilled","handleError","getPageByRoute","isConstruct","sharedInstance","provide","isCreated","mustReuse","constructor","isPageExpired","loadType","send","triggers","emit","addPersistData","hashmod","updateHistory","getPageStackLocation","isNaN","updateWidgets","cleanUp","execProvider","shared","stats","errorPage","storeHash","getMod","regStore","configPrevent","configStore","toStore","mod","routemod","urlValues","getValuesFromHash","pageData","size","k","persist","incorrectParams","pageIn","pageOut","pageTransition","easing","hasCustomTransitions","smoothIn","smoothInOut","transitionsDisabled","Transitions","p","configured","lazyDestroy","destroyOnBack","keepAlive","read","doCleanup","_routedType","scale","getPageFromStack","item","j","getFloor","stripRegex","char","getRouteByHash","getUrlParts","candidates","floor","matches","entries","getRoutesByFloor","hashParts","hasLookupId","isNamedGroup","regexStore","isMatching","regMatches","fullRoute","regex","lookupId","substring","routeParts","routePart","hashPart","storeId","exec","routeRegex","expression","sort","getNamedGroup","storage","decodeURIComponent","handleHashChange","override","stored","idx","contents","module","urlParams","flag","navigate","mustUpdateHash","flags","reg","createRegister","step","hashLastPart","_handleAppClose","capture","parseInt","hasBootPage","URLSearchParams","getQueryStringParams","isDirectLoad","reload","focusWidget","getByRef","getWidgetByName","handleRemote","restoreFocus","updateConfig","attached","instance","appInstance","provider","routerSettings","isObj","getConfigMap","children","_handleBack","preventDefault","_captureKey","defaultChannels","number","description","entitled","program","title","startTime","toUTCString","channels","randomChannel","random","currentChannel","callbacks","methods","getChannel","channel","getProgram","setChannel","newChannel","find","ApplicationInstance","appSettings","initSettings","initUtils","plugins","initProfile","metrics","initMetrics","mediaPlayer","initMediaPlayer","initVideoPlayer","ads","initAds","router","initRouter","tv","initTV","VideoTexture","Video","pivot","textures","StaticTexture","videoEl","_videoEl","videoView","videoTexture","isVisible","_createVideoTexture","gl","glTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","width","height","getRenderPrecision","_updateVideoTexture","videoWidth","currentTime","getTime","frameCount","webkitDecodedFrameCount","_lastFrame","_lastTime","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","expectedAspectRatio","realAspectRatio","scaleX","scaleY","forceRenderUpdate","_updatingVideoTexture","removeListener","COLOR_BUFFER_BIT","top","consumer","precision","textureMode","eventHandlers","adsEnabled","_playingAds","playingAds","fireOnConsumer","skipTime","playAfterSeek","hooks","videoPlayerPlugin","deregisterEventListeners","withPrecision","round","fire","registerEventListeners","fireHook","videoElement","style","position","parseFloat","bottom","details","canInteract","src","hide","setAttribute","enabled","videoId","caid","Ads","prerolls","show","getAttribute","open","cancel","removeAttribute","muted","looped","loop","time","max","min","seconds","seek","display","visibility","Infinity","sourceObject","setup","doSetup","getOwnPropertyDescriptor","__defineGetter__","__defineSetter__","autoSetupMixin","videoEls","getElementsByTagName","createElement","body","appendChild","setupVideoTag","el","addAt","setUpVideoTexture","getAds","midrolls","postrolls","playAd","ad","timeEvents","cleanup","handlers","sendBeacon","firstQuartile","midPoint","thirdQuartile","videoPlayerConsumer","preroll","slot","playSlot","ImageTexture","ListItem","Item","Shadow","Title","textColor","mountX","Bg","Image","data","x_text","y_text","displayName","unfocus","getShadowRect","startsWith","ws","WebSocket","ws_1","requestsQueue","listeners","notificationListener","JSON","parse","normalize","socket","connect","readyState","waitForOpen","host","port","endpoint","token","makeWebsocketAddress","stringify","request","requestQueueResolver","handleConnectClosure","API","plugin","requestId","versionsConfig","getVersion","versions","jsonrpc","makeBody","connection","execRequest","DeviceInfo","res","freeram","listener","errorCallback","thunder","listener_id","makeListenerId","unregister","api","thunderJS","wrapper","unshift","assign","Proxy","propKey","err","activatedWeb","activatedLightning","activatedCobalt","webUrl","lightningUrl","nativeUrl","ThunderJS","AppApi","poll","getIP","systemcCallsign","Controller","activate","callsign","success","resolution","videoDisplay","childCallsign","uri","client","mimeType","MainView","AppList","components","ListComponent","itemSize","roll","rollMax","horizontal","itemScrollOffset","clipping","TVShows","settingsScreen","indexVal","rdkshellCallsign","keyCode","notification","setVisibility","parent","_appAnimation","animation","repeat","stopMethod","actions","0","1","appItems","items","tvShowItems","settingsItems","setPrevious","setNext","reset","fireAncestors","appApi","applicationType","launchCobalt","launchWeb","launchLightning","launchNative","suspendCobalt","deactivateWeb","deactivateLightning","killNative","settingsType","Router","SidePanelItem","SidePanel","invertDirection","sidePanelItems","text_focus","text_unfocus","resetSidePanelItems","TopPanel","Mic","mountY","Search","Time","timeZone","toLocaleDateString","updateTime","date","toLocaleString","hours","getHours","minutes","getMinutes","ampm","PlayerControls","Subtitle","NetworkLogo","TimeBar","ProgressBar","CurrentTime","TotalTime","Buttons","ControlIcon","getSvgTexture","Audio","AudioOptions","Extras","ExtrasOptions","videoDuration","_index","toggle","subtitle","logoPath","SecondsTohhmmss","SeekBar","totalSeconds","signal","hidePlayerControls","timer","PlayPause","Forward","Rewind","Hidden","AAMPVideoPlayer","signals","fastfwd","fastrwd","playbackSpeeds","playerStatesEnum","idle","initializing","paused","player","playbackRateIndex","defaultInitConfig","initialBitrate","offset","networkTimeout","preferredAudioLanguage","liveOffset","drmConfig","xPos","yPos","wPos","hPos","setVideoRect","playerState","videoInfo","positionMiliseconds","AAMPMediaPlayer","_playbackStateChanged","_mediaEndReached","_mediaSpeedChanged","_bitrateChanged","_mediaPlaybackFailed","_mediaProgressUpdate","_mediaPlaybackStarted","_mediaDurationChanged","createPlayer","configObj","initConfig","getDurationSec","rate","setPlaybackRate","getCurrentState","release","ShowControls","HideControls","appListInfo","tvShowsInfo","settingsInfo","sidePanelInfo","uiInfo","HomeApi","HomeScreen","Player","homeApi","getAppListInfo","search","appdetails","appdetails_format","applications","getTVShowsInfo","getSettingsInfo","getSidePanelInfo","sidePanelData","initialLoad","home","_homeAnimation","zoomOut","_sidePanelAnimation","zoomIn","Playing","BluetoothApi","_events","_devices","_pairedDevices","_connectedDevices","_thunder","getDiscoveredDevices","newStatus","getPairedDevices","getConnectedDevices","eventId","discoveredDevices","pairedDevices","connectedDevices","deviceID","deviceType","deviceId","eventType","responseValue","COLORS","shader","shaders","RoundedRectangle","radius","_item","Name","SplashScreen","Splashscreen","Cache","Img","SplashVideo","AutoRemotePair","Description","maxLines","LoadingIcon","RemoteImg","ConnectivityScreen","wordWrapWidth","UISwitch","UIList","remotePaired","hasInternet","_bt","paired","connected","deactivate","getUIInfo","image","screenTimeout","startVideo","myAnimation","stopDelay","sm","PI","startScan","registerEvent","discovered","pair","launchResident","SettingsItem","Left","BluetoothItem","Right","flex","flexItem","marginLeft","BluetoothPairingScreen","PairingScreen","List","Status","Code","BluetoothScreen","Switch","Button","Networks","PairedNetworks","margin","AvailableNetworks","marginTop","Loader","Message","loadingAnimation","_bluetooth","_activateBluetooth","_pairedNetworks","_availableNetworks","renderDeviceList","scanTimer","_pairedList","_discoveredList","_otherList","device","includes","switch","PairedDevices","_navigate","AvailableDevices","option","disconnect","unpair","listname","dir","list","disable","enable","pinRequired","pinValue","respondToPairingRequest","getName","respondToEvent","WiFiItem","ssid","Lock","Icon","security","WiFiState","Wifi","setEnabled","moreData","stopScan","ssids","pos","incremental","frequency","passphrase","securityMode","bool","inter","interface","interfaceName","Keypad","Wrapper","_scroll","wrap","_wrap","currentItem","orientation","_orientation","jump","_jump","jumpToStart","_jumpToStart","jumpToEnd","_jumpToEnd","_prevY","finalY","currentIndex","n","finalW","indexChanged","previousIndex","Empty","Filled","Key","_keyType","_fontSize","Border","BorderComponent","colorBorder","_key","content","Focus","keyType","KeyDetails","SelectionKey","_arr","fontStyle","WiFiPasswordScreen","_width","_height","_radius","_strokeWidth","keySpace","_api","Api","Entry","Pwd","wordWrap","textOverflow","Selection","Types","FunctionalKeys","Submit","setKeypad","marginRight","marginBottom","space","del","pwd","getAlphabet","getSymbols","Function","Password","password","Pair","WiFiScreen","WiFiPairingScreen","IpAddress","_wifi","WiFiApi","wifiStatus","_activateWiFi","wiFiStatus","displayIp","ip4Address","newInterfaceName","discoverSSIDs","oldInterfaceName","estb_ip","getConnectedSSID","FailureMessage","setInterface","setDefaultInterface","getDefaultInterface","SettingsScreen","Sidebar","screen","ctrlKey","errorMessage","Home","preventStorage","clearHistory","reuseInstance","onkeydown","Launch"],"mappings":"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"}